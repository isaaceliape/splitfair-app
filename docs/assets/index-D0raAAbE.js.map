{"version":3,"file":"index-D0raAAbE.js","sources":["../../src/components/AboutSection.css?raw","../../src/components/AboutSection.js","../../src/components/DownloadAppSection.css?raw","../../src/components/DownloadAppSection.js","../../src/components/NumberPad.css?raw","../../src/components/NumberPad.js","../../node_modules/konva/lib/Global.js","../../node_modules/konva/lib/Util.js","../../node_modules/konva/lib/Validators.js","../../node_modules/konva/lib/Factory.js","../../node_modules/konva/lib/Context.js","../../node_modules/konva/lib/Canvas.js","../../node_modules/konva/lib/DragAndDrop.js","../../node_modules/konva/lib/Node.js","../../node_modules/konva/lib/Container.js","../../node_modules/konva/lib/PointerEvents.js","../../node_modules/konva/lib/Stage.js","../../node_modules/konva/lib/BaseLayer.js","../../node_modules/konva/lib/Shape.js","../../node_modules/konva/lib/Layer.js","../../node_modules/konva/lib/FastLayer.js","../../node_modules/konva/lib/Group.js","../../node_modules/konva/lib/Animation.js","../../node_modules/konva/lib/Tween.js","../../node_modules/konva/lib/_CoreInternals.js","../../node_modules/konva/lib/shapes/Arc.js","../../node_modules/konva/lib/shapes/Line.js","../../node_modules/konva/lib/shapes/Arrow.js","../../node_modules/konva/lib/shapes/Circle.js","../../node_modules/konva/lib/shapes/Ellipse.js","../../node_modules/konva/lib/shapes/Image.js","../../node_modules/konva/lib/shapes/Label.js","../../node_modules/konva/lib/shapes/Path.js","../../node_modules/konva/lib/shapes/Rect.js","../../node_modules/konva/lib/shapes/RegularPolygon.js","../../node_modules/konva/lib/shapes/Ring.js","../../node_modules/konva/lib/shapes/Sprite.js","../../node_modules/konva/lib/shapes/Star.js","../../node_modules/konva/lib/shapes/Text.js","../../node_modules/konva/lib/shapes/TextPath.js","../../node_modules/konva/lib/shapes/Transformer.js","../../node_modules/konva/lib/shapes/Wedge.js","../../node_modules/konva/lib/filters/Blur.js","../../node_modules/konva/lib/filters/Brighten.js","../../node_modules/konva/lib/filters/Contrast.js","../../node_modules/konva/lib/filters/Emboss.js","../../node_modules/konva/lib/filters/Enhance.js","../../node_modules/konva/lib/filters/Grayscale.js","../../node_modules/konva/lib/filters/HSL.js","../../node_modules/konva/lib/filters/HSV.js","../../node_modules/konva/lib/filters/Invert.js","../../node_modules/konva/lib/filters/Kaleidoscope.js","../../node_modules/konva/lib/filters/Mask.js","../../node_modules/konva/lib/filters/Noise.js","../../node_modules/konva/lib/filters/Pixelate.js","../../node_modules/konva/lib/filters/Posterize.js","../../node_modules/konva/lib/filters/RGB.js","../../node_modules/konva/lib/filters/RGBA.js","../../node_modules/konva/lib/filters/Sepia.js","../../node_modules/konva/lib/filters/Solarize.js","../../node_modules/konva/lib/filters/Threshold.js","../../node_modules/konva/lib/_FullInternals.js","../../node_modules/konva/lib/index.js","../../src/components/ShareCanvas.css?raw","../../src/components/ShareCanvas.js","../../src/store/globalStore.js","../../src/components/App.css?raw","../../src/components/App.js","../../src/Application.js","../../src/main.js"],"sourcesContent":["export default \":host {\\n  --light-bg: #d9e4ea;\\n  --dark-bg: #333333;\\n  --gray: #bdbdbd;\\n  --black: #0d0b0d;\\n  --green: #0ecb66;\\n  --red: #fa4f23;\\n  --blue: #0b98dd;\\n  --white: #ffffff;\\n  --light-bg-02: #cbc9c9;\\n  --block-height: calc((100vh / 9) - 11px);\\n  --block-min-height: 55px;\\n  --block-max-height: 84px;\\n  --block-height-header: calc(100vh / 9);\\n}\\n\\n.AboutSection {\\n  position: absolute;\\n  width: 0;\\n  height: 0;\\n  z-index: 1;\\n  right: 0;\\n  bottom: 0;\\n  z-index: 2;\\n}\\n\\n.AboutSection.showOptions {\\n  z-index: 4;\\n}\\n\\n.overlay {\\n  transform: translateX(-100vw);\\n}\\n\\n.about {\\n  position: absolute;\\n  text-decoration: none;\\n}\\n\\n.left-content {\\n  left: 0;\\n  width: 50vw;\\n  height: 100%;\\n  cursor: pointer;\\n}\\n\\n.right-content {\\n  color: var(--black);\\n}\\n\"","import styles from './AboutSection.css?raw';\n\nclass AboutSection extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this.showOptions = false;\n  }\n\n  connectedCallback() {\n    this.render();\n  }\n\n  onClickAboutBtn(e) {\n    e.preventDefault();\n    this.showOptions = !this.showOptions;\n    this.render();\n    this.dispatchEvent(new CustomEvent('is-menun-open', { detail: this.showOptions }));\n  }\n\n  render() {\n    this.shadowRoot.innerHTML = `\n      <style>${styles}</style>\n      <section class=\"AboutSection ${this.showOptions ? 'showOptions' : ''}\">\n        <a href=\"#\" class=\"about\"> about </a>\n        <div class=\"overlay\">\n          <div class=\"left-content\"></div>\n          <div class=\"right-content\">\n            <h1 class=\"title\">About</h1>\n          </div>\n        </div>\n      </section>\n    `;\n    this.shadowRoot.querySelector('.about').addEventListener('click', this.onClickAboutBtn);\n    this.shadowRoot.querySelector('.left-content').addEventListener('click', this.onClickAboutBtn);\n  }\n}\n\ncustomElements.define('about-section', AboutSection);\n","export default \":host {\\n  --light-bg: #d9e4ea;\\n  --dark-bg: #333333;\\n  --gray: #bdbdbd;\\n  --black: #0d0b0d;\\n  --green: #0ecb66;\\n  --red: #fa4f23;\\n  --blue: #0b98dd;\\n  --white: #ffffff;\\n  --light-bg-02: #cbc9c9;\\n  --block-height: calc((100vh / 9) - 11px);\\n  --block-min-height: 55px;\\n  --block-max-height: 84px;\\n  --block-height-header: calc(100vh / 9);\\n}\\n\\n.DownloadAppSection {\\n  position: absolute;\\n  width: 0;\\n  height: 0;\\n  z-index: 2;\\n  right: 0;\\n  top: 0;\\n}\\n\\n.DownloadAppSection.showOptions {\\n  z-index: 4;\\n}\\n\\n.DownloadAppSection.showOptions .overlay {\\n  transform: translateX(-100vw);\\n}\\n\\n.download-app {\\n  position: absolute;\\n  text-decoration: none;\\n  color: var(--black);\\n  font-size: 28px;\\n  top: 4vw;\\n  right: 5vw;\\n  z-index: 0;\\n  white-space: nowrap;\\n}\\n\\n.download-app:hover {\\n  color: var(--red);\\n}\\n\\n.overlay {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  width: 100vw;\\n  height: 100vh;\\n  transition: 500ms ease;\\n  transform: translateX(0vw);\\n  background: url(/splitfair-app/desktop_bg.png) 76% center no-repeat;\\n  background-size: cover;\\n}\\n\\n.left-content {\\n  position: absolute;\\n  left: 0;\\n  width: 50vw;\\n  height: 100%;\\n  cursor: pointer;\\n  cursor: url(/splitfair-app/cursor-cross-red.png), auto;\\n}\\n\\n.right-content {\\n  width: 50vw;\\n  position: absolute;\\n  right: 0;\\n  height: 100%;\\n  background-color: var(--red);\\n  text-align: left;\\n  padding: 2vw 7vw;\\n  box-sizing: border-box;\\n  cursor: url(/splitfair-app/cursor-black.png), auto;\\n}\\n\\n.link {\\n  font-size: 128px;\\n  text-decoration: none;\\n  display: block;\\n  color: var(--black);\\n  position: absolute;\\n}\\n\\n.link:hover {\\n  color: var(--white);\\n  cursor: url(/splitfair-app/cursor-black.png), auto;\\n}\\n\\n.link.desktop {\\n  left: 7vw;\\n  top: 3vw;\\n}\\n\\n.link.mobile {\\n  left: 7vw;\\n  bottom: 3vw;\\n}\\n\"","import styles from './DownloadAppSection.css?raw';\n\nclass DownloadAppSection extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this.showOptions = false;\n  }\n\n  connectedCallback() {\n    this.render();\n  }\n\n  onClickDownloadApp(e) {\n    e.preventDefault();\n    this.showOptions = !this.showOptions;\n    this.render();\n    this.dispatchEvent(new CustomEvent('is-menu-open', { detail: this.showOptions }));\n  }\n\n  render() {\n    this.shadowRoot.innerHTML = `\n      <style>${styles}</style>\n      <section class=\"DownloadAppSection ${this.showOptions ? 'showOptions' : ''}\">\n        <a href=\"#\" class=\"download-app\"> download app </a>\n        <div class=\"overlay\">\n          <div class=\"left-content\"></div>\n          <div class=\"right-content\">\n            <a href=\"#\" class=\"link desktop\"> Desktop </a>\n            <a href=\"#\" class=\"link mobile\"> Mobile </a>\n          </div>\n        </div>\n      </section>\n    `;\n    this.shadowRoot\n      .querySelector('.download-app')\n      .addEventListener('click', this.onClickDownloadApp);\n    this.shadowRoot\n      .querySelector('.left-content')\n      .addEventListener('click', this.onClickDownloadApp);\n  }\n}\n\ncustomElements.define('download-app-section', DownloadAppSection);\n","export default \":host {\\n  --light-bg: #d9e4ea;\\n  --dark-bg: #333333;\\n  --gray: #bdbdbd;\\n  --black: #0d0b0d;\\n  --green: #0ecb66;\\n  --red: #fa4f23;\\n  --blue: #0b98dd;\\n  --white: #ffffff;\\n  --light-bg-02: #cbc9c9;\\n  --block-height: calc((100vh / 9) - 11px);\\n  --block-min-height: 55px;\\n  --block-max-height: 84px;\\n  --block-height-header: calc(100vh / 9);\\n}\\n\\n.NumberPad {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.button-row {\\n  display: grid;\\n  width: 100%;\\n  grid-gap: 3px;\\n  grid-template-columns: 1fr 1fr 1fr;\\n  margin-bottom: 3px;\\n  font-family: helvetica;\\n}\\n\\n.button {\\n  height: var(--block-height);\\n  min-height: var(--block-min-height);\\n  max-height: var(--block-max-height);\\n  background-color: white;\\n  border-radius: 9px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  transition: all 200ms ease;\\n  backface-visibility: hidden;\\n  user-select: none;\\n}\\n\\n.button:hover {\\n  background-color: #ecf8ff;\\n}\\n\\n.button.pressed {\\n  transform: scale(0.98);\\n  opacity: 0.9;\\n}\\n\\n.button.clear {\\n  color: var(--red);\\n}\\n\\n.button.enter {\\n  color: var(--black);\\n  background-color: var(--red);\\n}\\n\\n.button.enter:hover {\\n  background-color: #fb7755;\\n}\\n\"","import styles from './NumberPad.css?raw';\n\nclass NumberPad extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this.timeout = null;\n    this.onKeyDownBound = this.onKeyDown.bind(this);\n    this.onKeyupBound = this.onKeyup.bind(this);\n  }\n\n  connectedCallback() {\n    this.render();\n    document.addEventListener('keydown', this.onKeyDownBound);\n    document.addEventListener('keyup', this.onKeyupBound);\n  }\n\n  disconnectedCallback() {\n    document.removeEventListener('keydown', this.onKeyDownBound);\n    document.removeEventListener('keyup', this.onKeyupBound);\n  }\n\n  onTap(e) {\n    const el = e.currentTarget;\n    clearTimeout(this.timeout);\n    el.classList.add('pressed');\n    this.timeout = setTimeout(() => {\n      el.classList.remove('pressed');\n    }, 200);\n    this.dispatchEvent(new CustomEvent('tapped-button', { detail: el.innerText.trim() }));\n  }\n\n  onKeyup(e) {\n    const isBackspace = e.key === 'Backspace';\n    const isEnter = e.key === 'Enter';\n    const isNumber = this.isNumberKey(e.key);\n    if (isNumber) {\n      this.dispatchEvent(new CustomEvent('tapped-button', { detail: e.key }));\n    }\n    if (isBackspace) {\n      this.dispatchEvent(new CustomEvent('tapped-button', { detail: '<' }));\n    }\n    if (isEnter) {\n      this.dispatchEvent(new CustomEvent('tapped-button', { detail: 'Enter' }));\n    }\n    if (isNumber || isBackspace || isEnter) {\n      const key = isBackspace ? 'Backspace' : isEnter ? 'Enter' : e.key;\n      const buttonEl = this.shadowRoot.querySelector(`.button-${key}`);\n      if (buttonEl) {\n        buttonEl.classList.add('pressed');\n        setTimeout(() => {\n          buttonEl.classList.remove('pressed');\n        }, 200);\n      }\n    }\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  onKeyDown(_e) {}\n\n  isNumberKey(value) {\n    var reg = new RegExp('^[0-9]+$');\n    return reg.test(value);\n  }\n\n  render() {\n    this.shadowRoot.innerHTML = `\n      <style>${styles}</style>\n      <div class=\"NumberPad\">\n        <div class=\"button-row\">\n          <div class=\"button button-7\">7</div>\n          <div class=\"button button-8\">8</div>\n          <div class=\"button button-9\">9</div>\n        </div>\n        <div class=\"button-row\">\n          <div class=\"button button-4\">4</div>\n          <div class=\"button button-5\">5</div>\n          <div class=\"button button-6\">6</div>\n        </div>\n        <div class=\"button-row\">\n          <div class=\"button button-1\">1</div>\n          <div class=\"button button-2\">2</div>\n          <div class=\"button button-3\">3</div>\n        </div>\n        <div class=\"button-row\">\n          <div class=\"button clear button-Backspace\">&lt;</div>\n          <div class=\"button button-0\">0</div>\n          <div class=\"button enter button-Enter\">Enter</div>\n        </div>\n      </div>\n    `;\n    this.shadowRoot.querySelectorAll('.button').forEach((button) => {\n      button.addEventListener('click', this.onTap);\n    });\n  }\n}\n\ncustomElements.define('number-pad', NumberPad);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PI_OVER_180 = Math.PI / 180;\nfunction detectBrowser() {\n    return (typeof window !== 'undefined' &&\n        ({}.toString.call(window) === '[object Window]' ||\n            {}.toString.call(window) === '[object global]'));\n}\nvar _detectIE = function (ua) {\n    var msie = ua.indexOf('msie ');\n    if (msie > 0) {\n        return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n    }\n    var trident = ua.indexOf('trident/');\n    if (trident > 0) {\n        var rv = ua.indexOf('rv:');\n        return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n    }\n    var edge = ua.indexOf('edge/');\n    if (edge > 0) {\n        return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n    }\n    return false;\n};\nexports._parseUA = function (userAgent) {\n    var ua = userAgent.toLowerCase(), match = /(chrome)[ /]([\\w.]+)/.exec(ua) ||\n        /(webkit)[ /]([\\w.]+)/.exec(ua) ||\n        /(opera)(?:.*version|)[ /]([\\w.]+)/.exec(ua) ||\n        /(msie) ([\\w.]+)/.exec(ua) ||\n        (ua.indexOf('compatible') < 0 &&\n            /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua)) ||\n        [], mobile = !!userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i), ieMobile = !!userAgent.match(/IEMobile/i);\n    return {\n        browser: match[1] || '',\n        version: match[2] || '0',\n        isIE: _detectIE(ua),\n        mobile: mobile,\n        ieMobile: ieMobile\n    };\n};\nexports.glob = typeof global !== 'undefined'\n    ? global\n    : typeof window !== 'undefined'\n        ? window\n        : typeof WorkerGlobalScope !== 'undefined'\n            ? self\n            : {};\nexports.Konva = {\n    _global: exports.glob,\n    version: '6.0.0',\n    isBrowser: detectBrowser(),\n    isUnminified: /param/.test(function (param) { }.toString()),\n    dblClickWindow: 400,\n    getAngle: function (angle) {\n        return exports.Konva.angleDeg ? angle * PI_OVER_180 : angle;\n    },\n    enableTrace: false,\n    _pointerEventsEnabled: false,\n    hitOnDragEnabled: false,\n    captureTouchEventsEnabled: false,\n    listenClickTap: false,\n    inDblClickWindow: false,\n    pixelRatio: undefined,\n    dragDistance: 3,\n    angleDeg: true,\n    showWarnings: true,\n    dragButtons: [0, 1],\n    isDragging: function () {\n        return exports.Konva['DD'].isDragging;\n    },\n    isDragReady: function () {\n        return !!exports.Konva['DD'].node;\n    },\n    UA: exports._parseUA((exports.glob.navigator && exports.glob.navigator.userAgent) || ''),\n    document: exports.glob.document,\n    _injectGlobal: function (Konva) {\n        exports.glob.Konva = Konva;\n    },\n    _parseUA: exports._parseUA\n};\nexports._NODES_REGISTRY = {};\nexports._registerNode = function (NodeClass) {\n    exports._NODES_REGISTRY[NodeClass.prototype.getClassName()] = NodeClass;\n    exports.Konva[NodeClass.prototype.getClassName()] = NodeClass;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Collection = (function () {\n    function Collection() {\n    }\n    Collection.toCollection = function (arr) {\n        var collection = new Collection(), len = arr.length, n;\n        for (n = 0; n < len; n++) {\n            collection.push(arr[n]);\n        }\n        return collection;\n    };\n    Collection._mapMethod = function (methodName) {\n        Collection.prototype[methodName] = function () {\n            var len = this.length, i;\n            var args = [].slice.call(arguments);\n            for (i = 0; i < len; i++) {\n                this[i][methodName].apply(this[i], args);\n            }\n            return this;\n        };\n    };\n    Collection.mapMethods = function (constructor) {\n        var prot = constructor.prototype;\n        for (var methodName in prot) {\n            Collection._mapMethod(methodName);\n        }\n    };\n    return Collection;\n}());\nexports.Collection = Collection;\nCollection.prototype = [];\nCollection.prototype.each = function (func) {\n    for (var n = 0; n < this.length; n++) {\n        func(this[n], n);\n    }\n};\nCollection.prototype.toArray = function () {\n    var arr = [], len = this.length, n;\n    for (n = 0; n < len; n++) {\n        arr.push(this[n]);\n    }\n    return arr;\n};\nvar Transform = (function () {\n    function Transform(m) {\n        if (m === void 0) { m = [1, 0, 0, 1, 0, 0]; }\n        this.m = (m && m.slice()) || [1, 0, 0, 1, 0, 0];\n    }\n    Transform.prototype.copy = function () {\n        return new Transform(this.m);\n    };\n    Transform.prototype.point = function (point) {\n        var m = this.m;\n        return {\n            x: m[0] * point.x + m[2] * point.y + m[4],\n            y: m[1] * point.x + m[3] * point.y + m[5]\n        };\n    };\n    Transform.prototype.translate = function (x, y) {\n        this.m[4] += this.m[0] * x + this.m[2] * y;\n        this.m[5] += this.m[1] * x + this.m[3] * y;\n        return this;\n    };\n    Transform.prototype.scale = function (sx, sy) {\n        this.m[0] *= sx;\n        this.m[1] *= sx;\n        this.m[2] *= sy;\n        this.m[3] *= sy;\n        return this;\n    };\n    Transform.prototype.rotate = function (rad) {\n        var c = Math.cos(rad);\n        var s = Math.sin(rad);\n        var m11 = this.m[0] * c + this.m[2] * s;\n        var m12 = this.m[1] * c + this.m[3] * s;\n        var m21 = this.m[0] * -s + this.m[2] * c;\n        var m22 = this.m[1] * -s + this.m[3] * c;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    };\n    Transform.prototype.getTranslation = function () {\n        return {\n            x: this.m[4],\n            y: this.m[5]\n        };\n    };\n    Transform.prototype.skew = function (sx, sy) {\n        var m11 = this.m[0] + this.m[2] * sy;\n        var m12 = this.m[1] + this.m[3] * sy;\n        var m21 = this.m[2] + this.m[0] * sx;\n        var m22 = this.m[3] + this.m[1] * sx;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    };\n    Transform.prototype.multiply = function (matrix) {\n        var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n        var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n        var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n        var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n        var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n        var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        this.m[4] = dx;\n        this.m[5] = dy;\n        return this;\n    };\n    Transform.prototype.invert = function () {\n        var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n        var m0 = this.m[3] * d;\n        var m1 = -this.m[1] * d;\n        var m2 = -this.m[2] * d;\n        var m3 = this.m[0] * d;\n        var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n        var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n        this.m[0] = m0;\n        this.m[1] = m1;\n        this.m[2] = m2;\n        this.m[3] = m3;\n        this.m[4] = m4;\n        this.m[5] = m5;\n        return this;\n    };\n    Transform.prototype.getMatrix = function () {\n        return this.m;\n    };\n    Transform.prototype.setAbsolutePosition = function (x, y) {\n        var m0 = this.m[0], m1 = this.m[1], m2 = this.m[2], m3 = this.m[3], m4 = this.m[4], m5 = this.m[5], yt = (m0 * (y - m5) - m1 * (x - m4)) / (m0 * m3 - m1 * m2), xt = (x - m4 - m2 * yt) / m0;\n        return this.translate(xt, yt);\n    };\n    Transform.prototype.decompose = function () {\n        var a = this.m[0];\n        var b = this.m[1];\n        var c = this.m[2];\n        var d = this.m[3];\n        var e = this.m[4];\n        var f = this.m[5];\n        var delta = a * d - b * c;\n        var result = {\n            x: e,\n            y: f,\n            rotation: 0,\n            scaleX: 0,\n            scaleY: 0,\n            skewX: 0,\n            skewY: 0\n        };\n        if (a != 0 || b != 0) {\n            var r = Math.sqrt(a * a + b * b);\n            result.rotation = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);\n            result.scaleX = r;\n            result.scaleY = delta / r;\n            result.skewX = (a * c + b * d) / delta;\n            result.skewY = 0;\n        }\n        else if (c != 0 || d != 0) {\n            var s = Math.sqrt(c * c + d * d);\n            result.rotation =\n                Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));\n            result.scaleX = delta / s;\n            result.scaleY = s;\n            result.skewX = 0;\n            result.skewY = (a * c + b * d) / delta;\n        }\n        else {\n        }\n        result.rotation = exports.Util._getRotation(result.rotation);\n        return result;\n    };\n    return Transform;\n}());\nexports.Transform = Transform;\nvar OBJECT_ARRAY = '[object Array]', OBJECT_NUMBER = '[object Number]', OBJECT_STRING = '[object String]', OBJECT_BOOLEAN = '[object Boolean]', PI_OVER_DEG180 = Math.PI / 180, DEG180_OVER_PI = 180 / Math.PI, HASH = '#', EMPTY_STRING = '', ZERO = '0', KONVA_WARNING = 'Konva warning: ', KONVA_ERROR = 'Konva error: ', RGB_PAREN = 'rgb(', COLORS = {\n    aliceblue: [240, 248, 255],\n    antiquewhite: [250, 235, 215],\n    aqua: [0, 255, 255],\n    aquamarine: [127, 255, 212],\n    azure: [240, 255, 255],\n    beige: [245, 245, 220],\n    bisque: [255, 228, 196],\n    black: [0, 0, 0],\n    blanchedalmond: [255, 235, 205],\n    blue: [0, 0, 255],\n    blueviolet: [138, 43, 226],\n    brown: [165, 42, 42],\n    burlywood: [222, 184, 135],\n    cadetblue: [95, 158, 160],\n    chartreuse: [127, 255, 0],\n    chocolate: [210, 105, 30],\n    coral: [255, 127, 80],\n    cornflowerblue: [100, 149, 237],\n    cornsilk: [255, 248, 220],\n    crimson: [220, 20, 60],\n    cyan: [0, 255, 255],\n    darkblue: [0, 0, 139],\n    darkcyan: [0, 139, 139],\n    darkgoldenrod: [184, 132, 11],\n    darkgray: [169, 169, 169],\n    darkgreen: [0, 100, 0],\n    darkgrey: [169, 169, 169],\n    darkkhaki: [189, 183, 107],\n    darkmagenta: [139, 0, 139],\n    darkolivegreen: [85, 107, 47],\n    darkorange: [255, 140, 0],\n    darkorchid: [153, 50, 204],\n    darkred: [139, 0, 0],\n    darksalmon: [233, 150, 122],\n    darkseagreen: [143, 188, 143],\n    darkslateblue: [72, 61, 139],\n    darkslategray: [47, 79, 79],\n    darkslategrey: [47, 79, 79],\n    darkturquoise: [0, 206, 209],\n    darkviolet: [148, 0, 211],\n    deeppink: [255, 20, 147],\n    deepskyblue: [0, 191, 255],\n    dimgray: [105, 105, 105],\n    dimgrey: [105, 105, 105],\n    dodgerblue: [30, 144, 255],\n    firebrick: [178, 34, 34],\n    floralwhite: [255, 255, 240],\n    forestgreen: [34, 139, 34],\n    fuchsia: [255, 0, 255],\n    gainsboro: [220, 220, 220],\n    ghostwhite: [248, 248, 255],\n    gold: [255, 215, 0],\n    goldenrod: [218, 165, 32],\n    gray: [128, 128, 128],\n    green: [0, 128, 0],\n    greenyellow: [173, 255, 47],\n    grey: [128, 128, 128],\n    honeydew: [240, 255, 240],\n    hotpink: [255, 105, 180],\n    indianred: [205, 92, 92],\n    indigo: [75, 0, 130],\n    ivory: [255, 255, 240],\n    khaki: [240, 230, 140],\n    lavender: [230, 230, 250],\n    lavenderblush: [255, 240, 245],\n    lawngreen: [124, 252, 0],\n    lemonchiffon: [255, 250, 205],\n    lightblue: [173, 216, 230],\n    lightcoral: [240, 128, 128],\n    lightcyan: [224, 255, 255],\n    lightgoldenrodyellow: [250, 250, 210],\n    lightgray: [211, 211, 211],\n    lightgreen: [144, 238, 144],\n    lightgrey: [211, 211, 211],\n    lightpink: [255, 182, 193],\n    lightsalmon: [255, 160, 122],\n    lightseagreen: [32, 178, 170],\n    lightskyblue: [135, 206, 250],\n    lightslategray: [119, 136, 153],\n    lightslategrey: [119, 136, 153],\n    lightsteelblue: [176, 196, 222],\n    lightyellow: [255, 255, 224],\n    lime: [0, 255, 0],\n    limegreen: [50, 205, 50],\n    linen: [250, 240, 230],\n    magenta: [255, 0, 255],\n    maroon: [128, 0, 0],\n    mediumaquamarine: [102, 205, 170],\n    mediumblue: [0, 0, 205],\n    mediumorchid: [186, 85, 211],\n    mediumpurple: [147, 112, 219],\n    mediumseagreen: [60, 179, 113],\n    mediumslateblue: [123, 104, 238],\n    mediumspringgreen: [0, 250, 154],\n    mediumturquoise: [72, 209, 204],\n    mediumvioletred: [199, 21, 133],\n    midnightblue: [25, 25, 112],\n    mintcream: [245, 255, 250],\n    mistyrose: [255, 228, 225],\n    moccasin: [255, 228, 181],\n    navajowhite: [255, 222, 173],\n    navy: [0, 0, 128],\n    oldlace: [253, 245, 230],\n    olive: [128, 128, 0],\n    olivedrab: [107, 142, 35],\n    orange: [255, 165, 0],\n    orangered: [255, 69, 0],\n    orchid: [218, 112, 214],\n    palegoldenrod: [238, 232, 170],\n    palegreen: [152, 251, 152],\n    paleturquoise: [175, 238, 238],\n    palevioletred: [219, 112, 147],\n    papayawhip: [255, 239, 213],\n    peachpuff: [255, 218, 185],\n    peru: [205, 133, 63],\n    pink: [255, 192, 203],\n    plum: [221, 160, 203],\n    powderblue: [176, 224, 230],\n    purple: [128, 0, 128],\n    rebeccapurple: [102, 51, 153],\n    red: [255, 0, 0],\n    rosybrown: [188, 143, 143],\n    royalblue: [65, 105, 225],\n    saddlebrown: [139, 69, 19],\n    salmon: [250, 128, 114],\n    sandybrown: [244, 164, 96],\n    seagreen: [46, 139, 87],\n    seashell: [255, 245, 238],\n    sienna: [160, 82, 45],\n    silver: [192, 192, 192],\n    skyblue: [135, 206, 235],\n    slateblue: [106, 90, 205],\n    slategray: [119, 128, 144],\n    slategrey: [119, 128, 144],\n    snow: [255, 255, 250],\n    springgreen: [0, 255, 127],\n    steelblue: [70, 130, 180],\n    tan: [210, 180, 140],\n    teal: [0, 128, 128],\n    thistle: [216, 191, 216],\n    transparent: [255, 255, 255, 0],\n    tomato: [255, 99, 71],\n    turquoise: [64, 224, 208],\n    violet: [238, 130, 238],\n    wheat: [245, 222, 179],\n    white: [255, 255, 255],\n    whitesmoke: [245, 245, 245],\n    yellow: [255, 255, 0],\n    yellowgreen: [154, 205, 5]\n}, RGB_REGEX = /rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)/, animQueue = [];\nexports.Util = {\n    _isElement: function (obj) {\n        return !!(obj && obj.nodeType == 1);\n    },\n    _isFunction: function (obj) {\n        return !!(obj && obj.constructor && obj.call && obj.apply);\n    },\n    _isPlainObject: function (obj) {\n        return !!obj && obj.constructor === Object;\n    },\n    _isArray: function (obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_ARRAY;\n    },\n    _isNumber: function (obj) {\n        return (Object.prototype.toString.call(obj) === OBJECT_NUMBER &&\n            !isNaN(obj) &&\n            isFinite(obj));\n    },\n    _isString: function (obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_STRING;\n    },\n    _isBoolean: function (obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_BOOLEAN;\n    },\n    isObject: function (val) {\n        return val instanceof Object;\n    },\n    isValidSelector: function (selector) {\n        if (typeof selector !== 'string') {\n            return false;\n        }\n        var firstChar = selector[0];\n        return (firstChar === '#' ||\n            firstChar === '.' ||\n            firstChar === firstChar.toUpperCase());\n    },\n    _sign: function (number) {\n        if (number === 0) {\n            return 0;\n        }\n        if (number > 0) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    },\n    requestAnimFrame: function (callback) {\n        animQueue.push(callback);\n        if (animQueue.length === 1) {\n            requestAnimationFrame(function () {\n                var queue = animQueue;\n                animQueue = [];\n                queue.forEach(function (cb) {\n                    cb();\n                });\n            });\n        }\n    },\n    createCanvasElement: function () {\n        var canvas = document.createElement('canvas');\n        try {\n            canvas.style = canvas.style || {};\n        }\n        catch (e) { }\n        return canvas;\n    },\n    createImageElement: function () {\n        return document.createElement('img');\n    },\n    _isInDocument: function (el) {\n        while ((el = el.parentNode)) {\n            if (el == document) {\n                return true;\n            }\n        }\n        return false;\n    },\n    _simplifyArray: function (arr) {\n        var retArr = [], len = arr.length, util = exports.Util, n, val;\n        for (n = 0; n < len; n++) {\n            val = arr[n];\n            if (util._isNumber(val)) {\n                val = Math.round(val * 1000) / 1000;\n            }\n            else if (!util._isString(val)) {\n                val = val.toString();\n            }\n            retArr.push(val);\n        }\n        return retArr;\n    },\n    _urlToImage: function (url, callback) {\n        var imageObj = new Global_1.glob.Image();\n        imageObj.onload = function () {\n            callback(imageObj);\n        };\n        imageObj.src = url;\n    },\n    _rgbToHex: function (r, g, b) {\n        return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n    },\n    _hexToRgb: function (hex) {\n        hex = hex.replace(HASH, EMPTY_STRING);\n        var bigint = parseInt(hex, 16);\n        return {\n            r: (bigint >> 16) & 255,\n            g: (bigint >> 8) & 255,\n            b: bigint & 255\n        };\n    },\n    getRandomColor: function () {\n        var randColor = ((Math.random() * 0xffffff) << 0).toString(16);\n        while (randColor.length < 6) {\n            randColor = ZERO + randColor;\n        }\n        return HASH + randColor;\n    },\n    get: function (val, def) {\n        if (val === undefined) {\n            return def;\n        }\n        else {\n            return val;\n        }\n    },\n    getRGB: function (color) {\n        var rgb;\n        if (color in COLORS) {\n            rgb = COLORS[color];\n            return {\n                r: rgb[0],\n                g: rgb[1],\n                b: rgb[2]\n            };\n        }\n        else if (color[0] === HASH) {\n            return this._hexToRgb(color.substring(1));\n        }\n        else if (color.substr(0, 4) === RGB_PAREN) {\n            rgb = RGB_REGEX.exec(color.replace(/ /g, ''));\n            return {\n                r: parseInt(rgb[1], 10),\n                g: parseInt(rgb[2], 10),\n                b: parseInt(rgb[3], 10)\n            };\n        }\n        else {\n            return {\n                r: 0,\n                g: 0,\n                b: 0\n            };\n        }\n    },\n    colorToRGBA: function (str) {\n        str = str || 'black';\n        return (exports.Util._namedColorToRBA(str) ||\n            exports.Util._hex3ColorToRGBA(str) ||\n            exports.Util._hex6ColorToRGBA(str) ||\n            exports.Util._rgbColorToRGBA(str) ||\n            exports.Util._rgbaColorToRGBA(str) ||\n            exports.Util._hslColorToRGBA(str));\n    },\n    _namedColorToRBA: function (str) {\n        var c = COLORS[str.toLowerCase()];\n        if (!c) {\n            return null;\n        }\n        return {\n            r: c[0],\n            g: c[1],\n            b: c[2],\n            a: 1\n        };\n    },\n    _rgbColorToRGBA: function (str) {\n        if (str.indexOf('rgb(') === 0) {\n            str = str.match(/rgb\\(([^)]+)\\)/)[1];\n            var parts = str.split(/ *, */).map(Number);\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: 1\n            };\n        }\n    },\n    _rgbaColorToRGBA: function (str) {\n        if (str.indexOf('rgba(') === 0) {\n            str = str.match(/rgba\\(([^)]+)\\)/)[1];\n            var parts = str.split(/ *, */).map(Number);\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: parts[3]\n            };\n        }\n    },\n    _hex6ColorToRGBA: function (str) {\n        if (str[0] === '#' && str.length === 7) {\n            return {\n                r: parseInt(str.slice(1, 3), 16),\n                g: parseInt(str.slice(3, 5), 16),\n                b: parseInt(str.slice(5, 7), 16),\n                a: 1\n            };\n        }\n    },\n    _hex3ColorToRGBA: function (str) {\n        if (str[0] === '#' && str.length === 4) {\n            return {\n                r: parseInt(str[1] + str[1], 16),\n                g: parseInt(str[2] + str[2], 16),\n                b: parseInt(str[3] + str[3], 16),\n                a: 1\n            };\n        }\n    },\n    _hslColorToRGBA: function (str) {\n        if (/hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.test(str)) {\n            var _a = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(str), _ = _a[0], hsl = _a.slice(1);\n            var h = Number(hsl[0]) / 360;\n            var s = Number(hsl[1]) / 100;\n            var l = Number(hsl[2]) / 100;\n            var t2 = void 0;\n            var t3 = void 0;\n            var val = void 0;\n            if (s === 0) {\n                val = l * 255;\n                return {\n                    r: Math.round(val),\n                    g: Math.round(val),\n                    b: Math.round(val),\n                    a: 1\n                };\n            }\n            if (l < 0.5) {\n                t2 = l * (1 + s);\n            }\n            else {\n                t2 = l + s - l * s;\n            }\n            var t1 = 2 * l - t2;\n            var rgb = [0, 0, 0];\n            for (var i = 0; i < 3; i++) {\n                t3 = h + (1 / 3) * -(i - 1);\n                if (t3 < 0) {\n                    t3++;\n                }\n                if (t3 > 1) {\n                    t3--;\n                }\n                if (6 * t3 < 1) {\n                    val = t1 + (t2 - t1) * 6 * t3;\n                }\n                else if (2 * t3 < 1) {\n                    val = t2;\n                }\n                else if (3 * t3 < 2) {\n                    val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n                }\n                else {\n                    val = t1;\n                }\n                rgb[i] = val * 255;\n            }\n            return {\n                r: Math.round(rgb[0]),\n                g: Math.round(rgb[1]),\n                b: Math.round(rgb[2]),\n                a: 1\n            };\n        }\n    },\n    haveIntersection: function (r1, r2) {\n        return !(r2.x > r1.x + r1.width ||\n            r2.x + r2.width < r1.x ||\n            r2.y > r1.y + r1.height ||\n            r2.y + r2.height < r1.y);\n    },\n    cloneObject: function (obj) {\n        var retObj = {};\n        for (var key in obj) {\n            if (this._isPlainObject(obj[key])) {\n                retObj[key] = this.cloneObject(obj[key]);\n            }\n            else if (this._isArray(obj[key])) {\n                retObj[key] = this.cloneArray(obj[key]);\n            }\n            else {\n                retObj[key] = obj[key];\n            }\n        }\n        return retObj;\n    },\n    cloneArray: function (arr) {\n        return arr.slice(0);\n    },\n    _degToRad: function (deg) {\n        return deg * PI_OVER_DEG180;\n    },\n    _radToDeg: function (rad) {\n        return rad * DEG180_OVER_PI;\n    },\n    _getRotation: function (radians) {\n        return Global_1.Konva.angleDeg ? exports.Util._radToDeg(radians) : radians;\n    },\n    _capitalize: function (str) {\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n    throw: function (str) {\n        throw new Error(KONVA_ERROR + str);\n    },\n    error: function (str) {\n        console.error(KONVA_ERROR + str);\n    },\n    warn: function (str) {\n        if (!Global_1.Konva.showWarnings) {\n            return;\n        }\n        console.warn(KONVA_WARNING + str);\n    },\n    extend: function (child, parent) {\n        function Ctor() {\n            this.constructor = child;\n        }\n        Ctor.prototype = parent.prototype;\n        var oldProto = child.prototype;\n        child.prototype = new Ctor();\n        for (var key in oldProto) {\n            if (oldProto.hasOwnProperty(key)) {\n                child.prototype[key] = oldProto[key];\n            }\n        }\n        child.__super__ = parent.prototype;\n        child.super = parent;\n    },\n    _getControlPoints: function (x0, y0, x1, y1, x2, y2, t) {\n        var d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2)), d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)), fa = (t * d01) / (d01 + d12), fb = (t * d12) / (d01 + d12), p1x = x1 - fa * (x2 - x0), p1y = y1 - fa * (y2 - y0), p2x = x1 + fb * (x2 - x0), p2y = y1 + fb * (y2 - y0);\n        return [p1x, p1y, p2x, p2y];\n    },\n    _expandPoints: function (p, tension) {\n        var len = p.length, allPoints = [], n, cp;\n        for (n = 2; n < len - 2; n += 2) {\n            cp = exports.Util._getControlPoints(p[n - 2], p[n - 1], p[n], p[n + 1], p[n + 2], p[n + 3], tension);\n            allPoints.push(cp[0]);\n            allPoints.push(cp[1]);\n            allPoints.push(p[n]);\n            allPoints.push(p[n + 1]);\n            allPoints.push(cp[2]);\n            allPoints.push(cp[3]);\n        }\n        return allPoints;\n    },\n    each: function (obj, func) {\n        for (var key in obj) {\n            func(key, obj[key]);\n        }\n    },\n    _inRange: function (val, left, right) {\n        return left <= val && val < right;\n    },\n    _getProjectionToSegment: function (x1, y1, x2, y2, x3, y3) {\n        var x, y, dist;\n        var pd2 = (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n        if (pd2 == 0) {\n            x = x1;\n            y = y1;\n            dist = (x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2);\n        }\n        else {\n            var u = ((x3 - x1) * (x2 - x1) + (y3 - y1) * (y2 - y1)) / pd2;\n            if (u < 0) {\n                x = x1;\n                y = y1;\n                dist = (x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3);\n            }\n            else if (u > 1.0) {\n                x = x2;\n                y = y2;\n                dist = (x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3);\n            }\n            else {\n                x = x1 + u * (x2 - x1);\n                y = y1 + u * (y2 - y1);\n                dist = (x - x3) * (x - x3) + (y - y3) * (y - y3);\n            }\n        }\n        return [x, y, dist];\n    },\n    _getProjectionToLine: function (pt, line, isClosed) {\n        var pc = exports.Util.cloneObject(pt);\n        var dist = Number.MAX_VALUE;\n        line.forEach(function (p1, i) {\n            if (!isClosed && i === line.length - 1) {\n                return;\n            }\n            var p2 = line[(i + 1) % line.length];\n            var proj = exports.Util._getProjectionToSegment(p1.x, p1.y, p2.x, p2.y, pt.x, pt.y);\n            var px = proj[0], py = proj[1], pdist = proj[2];\n            if (pdist < dist) {\n                pc.x = px;\n                pc.y = py;\n                dist = pdist;\n            }\n        });\n        return pc;\n    },\n    _prepareArrayForTween: function (startArray, endArray, isClosed) {\n        var n, start = [], end = [];\n        if (startArray.length > endArray.length) {\n            var temp = endArray;\n            endArray = startArray;\n            startArray = temp;\n        }\n        for (n = 0; n < startArray.length; n += 2) {\n            start.push({\n                x: startArray[n],\n                y: startArray[n + 1]\n            });\n        }\n        for (n = 0; n < endArray.length; n += 2) {\n            end.push({\n                x: endArray[n],\n                y: endArray[n + 1]\n            });\n        }\n        var newStart = [];\n        end.forEach(function (point) {\n            var pr = exports.Util._getProjectionToLine(point, start, isClosed);\n            newStart.push(pr.x);\n            newStart.push(pr.y);\n        });\n        return newStart;\n    },\n    _prepareToStringify: function (obj) {\n        var desc;\n        obj.visitedByCircularReferenceRemoval = true;\n        for (var key in obj) {\n            if (!(obj.hasOwnProperty(key) && obj[key] && typeof obj[key] == 'object')) {\n                continue;\n            }\n            desc = Object.getOwnPropertyDescriptor(obj, key);\n            if (obj[key].visitedByCircularReferenceRemoval ||\n                exports.Util._isElement(obj[key])) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n            else if (exports.Util._prepareToStringify(obj[key]) === null) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        delete obj.visitedByCircularReferenceRemoval;\n        return obj;\n    },\n    _assign: function (target, source) {\n        for (var key in source) {\n            target[key] = source[key];\n        }\n        return target;\n    },\n    _getFirstPointerId: function (evt) {\n        if (!evt.touches) {\n            return 999;\n        }\n        else {\n            return evt.changedTouches[0].identifier;\n        }\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Util_1 = require(\"./Util\");\nfunction _formatValue(val) {\n    if (Util_1.Util._isString(val)) {\n        return '\"' + val + '\"';\n    }\n    if (Object.prototype.toString.call(val) === '[object Number]') {\n        return val;\n    }\n    if (Util_1.Util._isBoolean(val)) {\n        return val;\n    }\n    return Object.prototype.toString.call(val);\n}\nfunction RGBComponent(val) {\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    return Math.round(val);\n}\nexports.RGBComponent = RGBComponent;\nfunction alphaComponent(val) {\n    if (val > 1) {\n        return 1;\n    }\n    else if (val < 0.0001) {\n        return 0.0001;\n    }\n    return val;\n}\nexports.alphaComponent = alphaComponent;\nfunction getNumberValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isNumber(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number.');\n            }\n            return val;\n        };\n    }\n}\nexports.getNumberValidator = getNumberValidator;\nfunction getNumberOrAutoValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            var isNumber = Util_1.Util._isNumber(val);\n            var isAuto = val === 'auto';\n            if (!(isNumber || isAuto)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number or \"auto\".');\n            }\n            return val;\n        };\n    }\n}\nexports.getNumberOrAutoValidator = getNumberOrAutoValidator;\nfunction getStringValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isString(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a string.');\n            }\n            return val;\n        };\n    }\n}\nexports.getStringValidator = getStringValidator;\nfunction getFunctionValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isFunction(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a function.');\n            }\n            return val;\n        };\n    }\n}\nexports.getFunctionValidator = getFunctionValidator;\nfunction getNumberArrayValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isArray(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a array of numbers.');\n            }\n            else {\n                val.forEach(function (item) {\n                    if (!Util_1.Util._isNumber(item)) {\n                        Util_1.Util.warn('\"' +\n                            attr +\n                            '\" attribute has non numeric element ' +\n                            item +\n                            '. Make sure that all elements are numbers.');\n                    }\n                });\n            }\n            return val;\n        };\n    }\n}\nexports.getNumberArrayValidator = getNumberArrayValidator;\nfunction getBooleanValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            var isBool = val === true || val === false;\n            if (!isBool) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a boolean.');\n            }\n            return val;\n        };\n    }\n}\nexports.getBooleanValidator = getBooleanValidator;\nfunction getComponentValidator(components) {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util.isObject(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be an object with properties ' +\n                    components);\n            }\n            return val;\n        };\n    }\n}\nexports.getComponentValidator = getComponentValidator;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Validators_1 = require(\"./Validators\");\nvar GET = 'get', SET = 'set';\nexports.Factory = {\n    addGetterSetter: function (constructor, attr, def, validator, after) {\n        this.addGetter(constructor, attr, def);\n        this.addSetter(constructor, attr, validator, after);\n        this.addOverloadedGetterSetter(constructor, attr);\n    },\n    addGetter: function (constructor, attr, def) {\n        var method = GET + Util_1.Util._capitalize(attr);\n        constructor.prototype[method] =\n            constructor.prototype[method] ||\n                function () {\n                    var val = this.attrs[attr];\n                    return val === undefined ? def : val;\n                };\n    },\n    addSetter: function (constructor, attr, validator, after) {\n        var method = SET + Util_1.Util._capitalize(attr);\n        if (!constructor.prototype[method]) {\n            exports.Factory.overWriteSetter(constructor, attr, validator, after);\n        }\n    },\n    overWriteSetter: function (constructor, attr, validator, after) {\n        var method = SET + Util_1.Util._capitalize(attr);\n        constructor.prototype[method] = function (val) {\n            if (validator && val !== undefined && val !== null) {\n                val = validator.call(this, val, attr);\n            }\n            this._setAttr(attr, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n    },\n    addComponentsGetterSetter: function (constructor, attr, components, validator, after) {\n        var len = components.length, capitalize = Util_1.Util._capitalize, getter = GET + capitalize(attr), setter = SET + capitalize(attr), n, component;\n        constructor.prototype[getter] = function () {\n            var ret = {};\n            for (n = 0; n < len; n++) {\n                component = components[n];\n                ret[component] = this.getAttr(attr + capitalize(component));\n            }\n            return ret;\n        };\n        var basicValidator = Validators_1.getComponentValidator(components);\n        constructor.prototype[setter] = function (val) {\n            var oldVal = this.attrs[attr], key;\n            if (validator) {\n                val = validator.call(this, val);\n            }\n            if (basicValidator) {\n                basicValidator.call(this, val, attr);\n            }\n            for (key in val) {\n                if (!val.hasOwnProperty(key)) {\n                    continue;\n                }\n                this._setAttr(attr + capitalize(key), val[key]);\n            }\n            this._fireChangeEvent(attr, oldVal, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n        this.addOverloadedGetterSetter(constructor, attr);\n    },\n    addOverloadedGetterSetter: function (constructor, attr) {\n        var capitalizedAttr = Util_1.Util._capitalize(attr), setter = SET + capitalizedAttr, getter = GET + capitalizedAttr;\n        constructor.prototype[attr] = function () {\n            if (arguments.length) {\n                this[setter](arguments[0]);\n                return this;\n            }\n            return this[getter]();\n        };\n    },\n    addDeprecatedGetterSetter: function (constructor, attr, def, validator) {\n        Util_1.Util.error('Adding deprecated ' + attr);\n        var method = GET + Util_1.Util._capitalize(attr);\n        var message = attr +\n            ' property is deprecated and will be removed soon. Look at Konva change log for more information.';\n        constructor.prototype[method] = function () {\n            Util_1.Util.error(message);\n            var val = this.attrs[attr];\n            return val === undefined ? def : val;\n        };\n        this.addSetter(constructor, attr, validator, function () {\n            Util_1.Util.error(message);\n        });\n        this.addOverloadedGetterSetter(constructor, attr);\n    },\n    backCompat: function (constructor, methods) {\n        Util_1.Util.each(methods, function (oldMethodName, newMethodName) {\n            var method = constructor.prototype[newMethodName];\n            var oldGetter = GET + Util_1.Util._capitalize(oldMethodName);\n            var oldSetter = SET + Util_1.Util._capitalize(oldMethodName);\n            function deprecated() {\n                method.apply(this, arguments);\n                Util_1.Util.error('\"' +\n                    oldMethodName +\n                    '\" method is deprecated and will be removed soon. Use \"\"' +\n                    newMethodName +\n                    '\" instead.');\n            }\n            constructor.prototype[oldMethodName] = deprecated;\n            constructor.prototype[oldGetter] = deprecated;\n            constructor.prototype[oldSetter] = deprecated;\n        });\n    },\n    afterSetFilter: function () {\n        this._filterUpToDate = false;\n    }\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Global_1 = require(\"./Global\");\nvar COMMA = ',', OPEN_PAREN = '(', CLOSE_PAREN = ')', OPEN_PAREN_BRACKET = '([', CLOSE_BRACKET_PAREN = '])', SEMICOLON = ';', DOUBLE_PAREN = '()', EQUALS = '=', CONTEXT_METHODS = [\n    'arc',\n    'arcTo',\n    'beginPath',\n    'bezierCurveTo',\n    'clearRect',\n    'clip',\n    'closePath',\n    'createLinearGradient',\n    'createPattern',\n    'createRadialGradient',\n    'drawImage',\n    'ellipse',\n    'fill',\n    'fillText',\n    'getImageData',\n    'createImageData',\n    'lineTo',\n    'moveTo',\n    'putImageData',\n    'quadraticCurveTo',\n    'rect',\n    'restore',\n    'rotate',\n    'save',\n    'scale',\n    'setLineDash',\n    'setTransform',\n    'stroke',\n    'strokeText',\n    'transform',\n    'translate'\n];\nvar CONTEXT_PROPERTIES = [\n    'fillStyle',\n    'strokeStyle',\n    'shadowColor',\n    'shadowBlur',\n    'shadowOffsetX',\n    'shadowOffsetY',\n    'lineCap',\n    'lineDashOffset',\n    'lineJoin',\n    'lineWidth',\n    'miterLimit',\n    'font',\n    'textAlign',\n    'textBaseline',\n    'globalAlpha',\n    'globalCompositeOperation',\n    'imageSmoothingEnabled'\n];\nvar traceArrMax = 100;\nvar Context = (function () {\n    function Context(canvas) {\n        this.canvas = canvas;\n        this._context = canvas._canvas.getContext('2d');\n        if (Global_1.Konva.enableTrace) {\n            this.traceArr = [];\n            this._enableTrace();\n        }\n    }\n    Context.prototype.fillShape = function (shape) {\n        if (shape.fillEnabled()) {\n            this._fill(shape);\n        }\n    };\n    Context.prototype._fill = function (shape) {\n    };\n    Context.prototype.strokeShape = function (shape) {\n        if (shape.hasStroke()) {\n            this._stroke(shape);\n        }\n    };\n    Context.prototype._stroke = function (shape) {\n    };\n    Context.prototype.fillStrokeShape = function (shape) {\n        this.fillShape(shape);\n        this.strokeShape(shape);\n    };\n    Context.prototype.getTrace = function (relaxed) {\n        var traceArr = this.traceArr, len = traceArr.length, str = '', n, trace, method, args;\n        for (n = 0; n < len; n++) {\n            trace = traceArr[n];\n            method = trace.method;\n            if (method) {\n                args = trace.args;\n                str += method;\n                if (relaxed) {\n                    str += DOUBLE_PAREN;\n                }\n                else {\n                    if (Util_1.Util._isArray(args[0])) {\n                        str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n                    }\n                    else {\n                        str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n                    }\n                }\n            }\n            else {\n                str += trace.property;\n                if (!relaxed) {\n                    str += EQUALS + trace.val;\n                }\n            }\n            str += SEMICOLON;\n        }\n        return str;\n    };\n    Context.prototype.clearTrace = function () {\n        this.traceArr = [];\n    };\n    Context.prototype._trace = function (str) {\n        var traceArr = this.traceArr, len;\n        traceArr.push(str);\n        len = traceArr.length;\n        if (len >= traceArrMax) {\n            traceArr.shift();\n        }\n    };\n    Context.prototype.reset = function () {\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n    };\n    Context.prototype.getCanvas = function () {\n        return this.canvas;\n    };\n    Context.prototype.clear = function (bounds) {\n        var canvas = this.getCanvas();\n        if (bounds) {\n            this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n        }\n        else {\n            this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n        }\n    };\n    Context.prototype._applyLineCap = function (shape) {\n        var lineCap = shape.getLineCap();\n        if (lineCap) {\n            this.setAttr('lineCap', lineCap);\n        }\n    };\n    Context.prototype._applyOpacity = function (shape) {\n        var absOpacity = shape.getAbsoluteOpacity();\n        if (absOpacity !== 1) {\n            this.setAttr('globalAlpha', absOpacity);\n        }\n    };\n    Context.prototype._applyLineJoin = function (shape) {\n        var lineJoin = shape.getLineJoin();\n        if (lineJoin) {\n            this.setAttr('lineJoin', lineJoin);\n        }\n    };\n    Context.prototype.setAttr = function (attr, val) {\n        this._context[attr] = val;\n    };\n    Context.prototype.arc = function (a0, a1, a2, a3, a4, a5) {\n        this._context.arc(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.arcTo = function (a0, a1, a2, a3, a4) {\n        this._context.arcTo(a0, a1, a2, a3, a4);\n    };\n    Context.prototype.beginPath = function () {\n        this._context.beginPath();\n    };\n    Context.prototype.bezierCurveTo = function (a0, a1, a2, a3, a4, a5) {\n        this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.clearRect = function (a0, a1, a2, a3) {\n        this._context.clearRect(a0, a1, a2, a3);\n    };\n    Context.prototype.clip = function () {\n        this._context.clip();\n    };\n    Context.prototype.closePath = function () {\n        this._context.closePath();\n    };\n    Context.prototype.createImageData = function (a0, a1) {\n        var a = arguments;\n        if (a.length === 2) {\n            return this._context.createImageData(a0, a1);\n        }\n        else if (a.length === 1) {\n            return this._context.createImageData(a0);\n        }\n    };\n    Context.prototype.createLinearGradient = function (a0, a1, a2, a3) {\n        return this._context.createLinearGradient(a0, a1, a2, a3);\n    };\n    Context.prototype.createPattern = function (a0, a1) {\n        return this._context.createPattern(a0, a1);\n    };\n    Context.prototype.createRadialGradient = function (a0, a1, a2, a3, a4, a5) {\n        return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.drawImage = function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        var a = arguments, _context = this._context;\n        if (a.length === 3) {\n            _context.drawImage(a0, a1, a2);\n        }\n        else if (a.length === 5) {\n            _context.drawImage(a0, a1, a2, a3, a4);\n        }\n        else if (a.length === 9) {\n            _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n        }\n    };\n    Context.prototype.ellipse = function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n    };\n    Context.prototype.isPointInPath = function (x, y) {\n        return this._context.isPointInPath(x, y);\n    };\n    Context.prototype.fill = function () {\n        this._context.fill();\n    };\n    Context.prototype.fillRect = function (x, y, width, height) {\n        this._context.fillRect(x, y, width, height);\n    };\n    Context.prototype.strokeRect = function (x, y, width, height) {\n        this._context.strokeRect(x, y, width, height);\n    };\n    Context.prototype.fillText = function (a0, a1, a2) {\n        this._context.fillText(a0, a1, a2);\n    };\n    Context.prototype.measureText = function (text) {\n        return this._context.measureText(text);\n    };\n    Context.prototype.getImageData = function (a0, a1, a2, a3) {\n        return this._context.getImageData(a0, a1, a2, a3);\n    };\n    Context.prototype.lineTo = function (a0, a1) {\n        this._context.lineTo(a0, a1);\n    };\n    Context.prototype.moveTo = function (a0, a1) {\n        this._context.moveTo(a0, a1);\n    };\n    Context.prototype.rect = function (a0, a1, a2, a3) {\n        this._context.rect(a0, a1, a2, a3);\n    };\n    Context.prototype.putImageData = function (a0, a1, a2) {\n        this._context.putImageData(a0, a1, a2);\n    };\n    Context.prototype.quadraticCurveTo = function (a0, a1, a2, a3) {\n        this._context.quadraticCurveTo(a0, a1, a2, a3);\n    };\n    Context.prototype.restore = function () {\n        this._context.restore();\n    };\n    Context.prototype.rotate = function (a0) {\n        this._context.rotate(a0);\n    };\n    Context.prototype.save = function () {\n        this._context.save();\n    };\n    Context.prototype.scale = function (a0, a1) {\n        this._context.scale(a0, a1);\n    };\n    Context.prototype.setLineDash = function (a0) {\n        if (this._context.setLineDash) {\n            this._context.setLineDash(a0);\n        }\n        else if ('mozDash' in this._context) {\n            this._context['mozDash'] = a0;\n        }\n        else if ('webkitLineDash' in this._context) {\n            this._context['webkitLineDash'] = a0;\n        }\n    };\n    Context.prototype.getLineDash = function () {\n        return this._context.getLineDash();\n    };\n    Context.prototype.setTransform = function (a0, a1, a2, a3, a4, a5) {\n        this._context.setTransform(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.stroke = function () {\n        this._context.stroke();\n    };\n    Context.prototype.strokeText = function (a0, a1, a2, a3) {\n        this._context.strokeText(a0, a1, a2, a3);\n    };\n    Context.prototype.transform = function (a0, a1, a2, a3, a4, a5) {\n        this._context.transform(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.translate = function (a0, a1) {\n        this._context.translate(a0, a1);\n    };\n    Context.prototype._enableTrace = function () {\n        var that = this, len = CONTEXT_METHODS.length, _simplifyArray = Util_1.Util._simplifyArray, origSetter = this.setAttr, n, args;\n        var func = function (methodName) {\n            var origMethod = that[methodName], ret;\n            that[methodName] = function () {\n                args = _simplifyArray(Array.prototype.slice.call(arguments, 0));\n                ret = origMethod.apply(that, arguments);\n                that._trace({\n                    method: methodName,\n                    args: args\n                });\n                return ret;\n            };\n        };\n        for (n = 0; n < len; n++) {\n            func(CONTEXT_METHODS[n]);\n        }\n        that.setAttr = function () {\n            origSetter.apply(that, arguments);\n            var prop = arguments[0];\n            var val = arguments[1];\n            if (prop === 'shadowOffsetX' ||\n                prop === 'shadowOffsetY' ||\n                prop === 'shadowBlur') {\n                val = val / this.canvas.getPixelRatio();\n            }\n            that._trace({\n                property: prop,\n                val: val\n            });\n        };\n    };\n    Context.prototype._applyGlobalCompositeOperation = function (node) {\n        var globalCompositeOperation = node.getGlobalCompositeOperation();\n        if (globalCompositeOperation !== 'source-over') {\n            this.setAttr('globalCompositeOperation', globalCompositeOperation);\n        }\n    };\n    return Context;\n}());\nexports.Context = Context;\nCONTEXT_PROPERTIES.forEach(function (prop) {\n    Object.defineProperty(Context.prototype, prop, {\n        get: function () {\n            return this._context[prop];\n        },\n        set: function (val) {\n            this._context[prop] = val;\n        }\n    });\n});\nvar SceneContext = (function (_super) {\n    __extends(SceneContext, _super);\n    function SceneContext() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SceneContext.prototype._fillColor = function (shape) {\n        var fill = shape.fill();\n        this.setAttr('fillStyle', fill);\n        shape._fillFunc(this);\n    };\n    SceneContext.prototype._fillPattern = function (shape) {\n        var fillPatternX = shape.getFillPatternX(), fillPatternY = shape.getFillPatternY(), fillPatternRotation = Global_1.Konva.getAngle(shape.getFillPatternRotation()), fillPatternOffsetX = shape.getFillPatternOffsetX(), fillPatternOffsetY = shape.getFillPatternOffsetY(), fillPatternScaleX = shape.getFillPatternScaleX(), fillPatternScaleY = shape.getFillPatternScaleY();\n        if (fillPatternX || fillPatternY) {\n            this.translate(fillPatternX || 0, fillPatternY || 0);\n        }\n        if (fillPatternRotation) {\n            this.rotate(fillPatternRotation);\n        }\n        if (fillPatternScaleX || fillPatternScaleY) {\n            this.scale(fillPatternScaleX, fillPatternScaleY);\n        }\n        if (fillPatternOffsetX || fillPatternOffsetY) {\n            this.translate(-1 * fillPatternOffsetX, -1 * fillPatternOffsetY);\n        }\n        this.setAttr('fillStyle', shape._getFillPattern());\n        shape._fillFunc(this);\n    };\n    SceneContext.prototype._fillLinearGradient = function (shape) {\n        var grd = shape._getLinearGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    };\n    SceneContext.prototype._fillRadialGradient = function (shape) {\n        var grd = shape._getRadialGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    };\n    SceneContext.prototype._fill = function (shape) {\n        var hasColor = shape.fill(), fillPriority = shape.getFillPriority();\n        if (hasColor && fillPriority === 'color') {\n            this._fillColor(shape);\n            return;\n        }\n        var hasPattern = shape.getFillPatternImage();\n        if (hasPattern && fillPriority === 'pattern') {\n            this._fillPattern(shape);\n            return;\n        }\n        var hasLinearGradient = shape.getFillLinearGradientColorStops();\n        if (hasLinearGradient && fillPriority === 'linear-gradient') {\n            this._fillLinearGradient(shape);\n            return;\n        }\n        var hasRadialGradient = shape.getFillRadialGradientColorStops();\n        if (hasRadialGradient && fillPriority === 'radial-gradient') {\n            this._fillRadialGradient(shape);\n            return;\n        }\n        if (hasColor) {\n            this._fillColor(shape);\n        }\n        else if (hasPattern) {\n            this._fillPattern(shape);\n        }\n        else if (hasLinearGradient) {\n            this._fillLinearGradient(shape);\n        }\n        else if (hasRadialGradient) {\n            this._fillRadialGradient(shape);\n        }\n    };\n    SceneContext.prototype._strokeLinearGradient = function (shape) {\n        var start = shape.getStrokeLinearGradientStartPoint(), end = shape.getStrokeLinearGradientEndPoint(), colorStops = shape.getStrokeLinearGradientColorStops(), grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n        if (colorStops) {\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            this.setAttr('strokeStyle', grd);\n        }\n    };\n    SceneContext.prototype._stroke = function (shape) {\n        var dash = shape.dash(), strokeScaleEnabled = shape.getStrokeScaleEnabled();\n        if (shape.hasStroke()) {\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            if (dash && shape.dashEnabled()) {\n                this.setLineDash(dash);\n                this.setAttr('lineDashOffset', shape.dashOffset());\n            }\n            this.setAttr('lineWidth', shape.strokeWidth());\n            if (!shape.getShadowForStrokeEnabled()) {\n                this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n            }\n            var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n            if (hasLinearGradient) {\n                this._strokeLinearGradient(shape);\n            }\n            else {\n                this.setAttr('strokeStyle', shape.stroke());\n            }\n            shape._strokeFunc(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    };\n    SceneContext.prototype._applyShadow = function (shape) {\n        var util = Util_1.Util, color = util.get(shape.getShadowRGBA(), 'black'), blur = util.get(shape.getShadowBlur(), 5), offset = util.get(shape.getShadowOffset(), {\n            x: 0,\n            y: 0\n        }), scale = shape.getAbsoluteScale(), ratio = this.canvas.getPixelRatio(), scaleX = scale.x * ratio, scaleY = scale.y * ratio;\n        this.setAttr('shadowColor', color);\n        this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n        this.setAttr('shadowOffsetX', offset.x * scaleX);\n        this.setAttr('shadowOffsetY', offset.y * scaleY);\n    };\n    return SceneContext;\n}(Context));\nexports.SceneContext = SceneContext;\nvar HitContext = (function (_super) {\n    __extends(HitContext, _super);\n    function HitContext() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HitContext.prototype._fill = function (shape) {\n        this.save();\n        this.setAttr('fillStyle', shape.colorKey);\n        shape._fillFuncHit(this);\n        this.restore();\n    };\n    HitContext.prototype.strokeShape = function (shape) {\n        if (shape.hasHitStroke()) {\n            this._stroke(shape);\n        }\n    };\n    HitContext.prototype._stroke = function (shape) {\n        if (shape.hasHitStroke()) {\n            var strokeScaleEnabled = shape.getStrokeScaleEnabled();\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            var hitStrokeWidth = shape.hitStrokeWidth();\n            var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n            this.setAttr('lineWidth', strokeWidth);\n            this.setAttr('strokeStyle', shape.colorKey);\n            shape._strokeFuncHit(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    };\n    return HitContext;\n}(Context));\nexports.HitContext = HitContext;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Context_1 = require(\"./Context\");\nvar Global_1 = require(\"./Global\");\nvar Factory_1 = require(\"./Factory\");\nvar Validators_1 = require(\"./Validators\");\nvar _pixelRatio;\nfunction getDevicePixelRatio() {\n    if (_pixelRatio) {\n        return _pixelRatio;\n    }\n    var canvas = Util_1.Util.createCanvasElement();\n    var context = canvas.getContext('2d');\n    _pixelRatio = (function () {\n        var devicePixelRatio = Global_1.Konva._global.devicePixelRatio || 1, backingStoreRatio = context.webkitBackingStorePixelRatio ||\n            context.mozBackingStorePixelRatio ||\n            context.msBackingStorePixelRatio ||\n            context.oBackingStorePixelRatio ||\n            context.backingStorePixelRatio ||\n            1;\n        return devicePixelRatio / backingStoreRatio;\n    })();\n    return _pixelRatio;\n}\nvar Canvas = (function () {\n    function Canvas(config) {\n        this.pixelRatio = 1;\n        this.width = 0;\n        this.height = 0;\n        this.isCache = false;\n        var conf = config || {};\n        var pixelRatio = conf.pixelRatio || Global_1.Konva.pixelRatio || getDevicePixelRatio();\n        this.pixelRatio = pixelRatio;\n        this._canvas = Util_1.Util.createCanvasElement();\n        this._canvas.style.padding = '0';\n        this._canvas.style.margin = '0';\n        this._canvas.style.border = '0';\n        this._canvas.style.background = 'transparent';\n        this._canvas.style.position = 'absolute';\n        this._canvas.style.top = '0';\n        this._canvas.style.left = '0';\n    }\n    Canvas.prototype.getContext = function () {\n        return this.context;\n    };\n    Canvas.prototype.getPixelRatio = function () {\n        return this.pixelRatio;\n    };\n    Canvas.prototype.setPixelRatio = function (pixelRatio) {\n        var previousRatio = this.pixelRatio;\n        this.pixelRatio = pixelRatio;\n        this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n    };\n    Canvas.prototype.setWidth = function (width) {\n        this.width = this._canvas.width = width * this.pixelRatio;\n        this._canvas.style.width = width + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    };\n    Canvas.prototype.setHeight = function (height) {\n        this.height = this._canvas.height = height * this.pixelRatio;\n        this._canvas.style.height = height + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    };\n    Canvas.prototype.getWidth = function () {\n        return this.width;\n    };\n    Canvas.prototype.getHeight = function () {\n        return this.height;\n    };\n    Canvas.prototype.setSize = function (width, height) {\n        this.setWidth(width || 0);\n        this.setHeight(height || 0);\n    };\n    Canvas.prototype.toDataURL = function (mimeType, quality) {\n        try {\n            return this._canvas.toDataURL(mimeType, quality);\n        }\n        catch (e) {\n            try {\n                return this._canvas.toDataURL();\n            }\n            catch (err) {\n                Util_1.Util.error('Unable to get data URL. ' +\n                    err.message +\n                    ' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                return '';\n            }\n        }\n    };\n    return Canvas;\n}());\nexports.Canvas = Canvas;\nFactory_1.Factory.addGetterSetter(Canvas, 'pixelRatio', undefined, Validators_1.getNumberValidator());\nvar SceneCanvas = (function (_super) {\n    __extends(SceneCanvas, _super);\n    function SceneCanvas(config) {\n        if (config === void 0) { config = { width: 0, height: 0 }; }\n        var _this = _super.call(this, config) || this;\n        _this.context = new Context_1.SceneContext(_this);\n        _this.setSize(config.width, config.height);\n        return _this;\n    }\n    return SceneCanvas;\n}(Canvas));\nexports.SceneCanvas = SceneCanvas;\nvar HitCanvas = (function (_super) {\n    __extends(HitCanvas, _super);\n    function HitCanvas(config) {\n        if (config === void 0) { config = { width: 0, height: 0 }; }\n        var _this = _super.call(this, config) || this;\n        _this.hitCanvas = true;\n        _this.context = new Context_1.HitContext(_this);\n        _this.setSize(config.width, config.height);\n        return _this;\n    }\n    return HitCanvas;\n}(Canvas));\nexports.HitCanvas = HitCanvas;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Util_1 = require(\"./Util\");\nexports.DD = {\n    get isDragging() {\n        var flag = false;\n        exports.DD._dragElements.forEach(function (elem) {\n            if (elem.dragStatus === 'dragging') {\n                flag = true;\n            }\n        });\n        return flag;\n    },\n    justDragged: false,\n    get node() {\n        var node;\n        exports.DD._dragElements.forEach(function (elem) {\n            node = elem.node;\n        });\n        return node;\n    },\n    _dragElements: new Map(),\n    _drag: function (evt) {\n        exports.DD._dragElements.forEach(function (elem, key) {\n            var node = elem.node;\n            var stage = node.getStage();\n            stage.setPointersPositions(evt);\n            if (elem.pointerId === undefined) {\n                elem.pointerId = Util_1.Util._getFirstPointerId(evt);\n            }\n            var pos = stage._changedPointerPositions.find(function (pos) { return pos.id === elem.pointerId; });\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus !== 'dragging') {\n                var dragDistance = node.dragDistance();\n                var distance = Math.max(Math.abs(pos.x - elem.startPointerPos.x), Math.abs(pos.y - elem.startPointerPos.y));\n                if (distance < dragDistance) {\n                    return;\n                }\n                node.startDrag({ evt: evt });\n                if (!node.isDragging()) {\n                    return;\n                }\n            }\n            node._setDragPosition(evt, elem);\n            node.fire('dragmove', {\n                type: 'dragmove',\n                target: node,\n                evt: evt\n            }, true);\n        });\n    },\n    _endDragBefore: function (evt) {\n        exports.DD._dragElements.forEach(function (elem, key) {\n            var node = elem.node;\n            var stage = node.getStage();\n            if (evt) {\n                stage.setPointersPositions(evt);\n            }\n            var pos = stage._changedPointerPositions.find(function (pos) { return pos.id === elem.pointerId; });\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus === 'dragging' || elem.dragStatus === 'stopped') {\n                exports.DD.justDragged = true;\n                Global_1.Konva.listenClickTap = false;\n                elem.dragStatus = 'stopped';\n            }\n            var drawNode = elem.node.getLayer() ||\n                (elem.node instanceof Global_1.Konva['Stage'] && elem.node);\n            if (drawNode) {\n                drawNode.draw();\n            }\n        });\n    },\n    _endDragAfter: function (evt) {\n        exports.DD._dragElements.forEach(function (elem, key) {\n            if (elem.dragStatus === 'stopped') {\n                elem.node.fire('dragend', {\n                    type: 'dragend',\n                    target: elem.node,\n                    evt: evt\n                }, true);\n            }\n            if (elem.dragStatus !== 'dragging') {\n                exports.DD._dragElements.delete(key);\n            }\n        });\n    }\n};\nif (Global_1.Konva.isBrowser) {\n    window.addEventListener('mouseup', exports.DD._endDragBefore, true);\n    window.addEventListener('touchend', exports.DD._endDragBefore, true);\n    window.addEventListener('mousemove', exports.DD._drag);\n    window.addEventListener('touchmove', exports.DD._drag);\n    window.addEventListener('mouseup', exports.DD._endDragAfter, false);\n    window.addEventListener('touchend', exports.DD._endDragAfter, false);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Factory_1 = require(\"./Factory\");\nvar Canvas_1 = require(\"./Canvas\");\nvar Global_1 = require(\"./Global\");\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\nvar Validators_1 = require(\"./Validators\");\nexports.ids = {};\nexports.names = {};\nvar _addId = function (node, id) {\n    if (!id) {\n        return;\n    }\n    exports.ids[id] = node;\n};\nexports._removeId = function (id, node) {\n    if (!id) {\n        return;\n    }\n    if (exports.ids[id] !== node) {\n        return;\n    }\n    delete exports.ids[id];\n};\nexports._addName = function (node, name) {\n    if (name) {\n        if (!exports.names[name]) {\n            exports.names[name] = [];\n        }\n        exports.names[name].push(node);\n    }\n};\nexports._removeName = function (name, _id) {\n    if (!name) {\n        return;\n    }\n    var nodes = exports.names[name];\n    if (!nodes) {\n        return;\n    }\n    for (var n = 0; n < nodes.length; n++) {\n        var no = nodes[n];\n        if (no._id === _id) {\n            nodes.splice(n, 1);\n        }\n    }\n    if (nodes.length === 0) {\n        delete exports.names[name];\n    }\n};\nvar ABSOLUTE_OPACITY = 'absoluteOpacity', ABSOLUTE_TRANSFORM = 'absoluteTransform', ABSOLUTE_SCALE = 'absoluteScale', CANVAS = 'canvas', CHANGE = 'Change', CHILDREN = 'children', KONVA = 'konva', LISTENING = 'listening', MOUSEENTER = 'mouseenter', MOUSELEAVE = 'mouseleave', NAME = 'name', SET = 'set', SHAPE = 'Shape', SPACE = ' ', STAGE = 'stage', TRANSFORM = 'transform', UPPER_STAGE = 'Stage', VISIBLE = 'visible', TRANSFORM_CHANGE_STR = [\n    'xChange.konva',\n    'yChange.konva',\n    'scaleXChange.konva',\n    'scaleYChange.konva',\n    'skewXChange.konva',\n    'skewYChange.konva',\n    'rotationChange.konva',\n    'offsetXChange.konva',\n    'offsetYChange.konva',\n    'transformsEnabledChange.konva',\n].join(SPACE), SCALE_CHANGE_STR = ['scaleXChange.konva', 'scaleYChange.konva'].join(SPACE);\nvar emptyChildren = new Util_1.Collection();\nvar idCounter = 1;\nvar Node = (function () {\n    function Node(config) {\n        var _this = this;\n        this._id = idCounter++;\n        this.eventListeners = {};\n        this.attrs = {};\n        this.index = 0;\n        this.parent = null;\n        this._cache = new Map();\n        this._lastPos = null;\n        this._batchingTransformChange = false;\n        this._needClearTransformCache = false;\n        this._filterUpToDate = false;\n        this._isUnderCache = false;\n        this.children = emptyChildren;\n        this._dragEventId = null;\n        this.setAttrs(config);\n        this.on(TRANSFORM_CHANGE_STR, function () {\n            if (_this._batchingTransformChange) {\n                _this._needClearTransformCache = true;\n                return;\n            }\n            _this._clearCache(TRANSFORM);\n            _this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        });\n        this.on('visibleChange.konva', function () {\n            _this._clearSelfAndDescendantCache(VISIBLE);\n        });\n        this.on('listeningChange.konva', function () {\n            _this._clearSelfAndDescendantCache(LISTENING);\n        });\n        this.on('opacityChange.konva', function () {\n            _this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        });\n    }\n    Node.prototype.hasChildren = function () {\n        return false;\n    };\n    Node.prototype.getChildren = function () {\n        return emptyChildren;\n    };\n    Node.prototype._clearCache = function (attr) {\n        if (attr) {\n            this._cache.delete(attr);\n        }\n        else {\n            this._cache.clear();\n        }\n    };\n    Node.prototype._getCache = function (attr, privateGetter) {\n        var cache = this._cache.get(attr);\n        if (cache === undefined) {\n            cache = privateGetter.call(this);\n            this._cache.set(attr, cache);\n        }\n        return cache;\n    };\n    Node.prototype._getCanvasCache = function () {\n        return this._cache.get(CANVAS);\n    };\n    Node.prototype._clearSelfAndDescendantCache = function (attr, forceEvent) {\n        this._clearCache(attr);\n        if (forceEvent && attr === ABSOLUTE_TRANSFORM) {\n            this.fire('_clearTransformCache');\n        }\n        if (this.isCached()) {\n            return;\n        }\n        if (this.children) {\n            this.children.each(function (node) {\n                node._clearSelfAndDescendantCache(attr, true);\n            });\n        }\n    };\n    Node.prototype.clearCache = function () {\n        this._cache.delete(CANVAS);\n        this._clearSelfAndDescendantCache();\n        return this;\n    };\n    Node.prototype.cache = function (config) {\n        var conf = config || {};\n        var rect = {};\n        if (conf.x === undefined ||\n            conf.y === undefined ||\n            conf.width === undefined ||\n            conf.height === undefined) {\n            rect = this.getClientRect({\n                skipTransform: true,\n                relativeTo: this.getParent(),\n            });\n        }\n        var width = Math.ceil(conf.width || rect.width), height = Math.ceil(conf.height || rect.height), pixelRatio = conf.pixelRatio, x = conf.x === undefined ? rect.x : conf.x, y = conf.y === undefined ? rect.y : conf.y, offset = conf.offset || 0, drawBorder = conf.drawBorder || false;\n        if (!width || !height) {\n            Util_1.Util.error('Can not cache the node. Width or height of the node equals 0. Caching is skipped.');\n            return;\n        }\n        width += offset * 2;\n        height += offset * 2;\n        x -= offset;\n        y -= offset;\n        var cachedSceneCanvas = new Canvas_1.SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: width,\n            height: height,\n        }), cachedFilterCanvas = new Canvas_1.SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: 0,\n            height: 0,\n        }), cachedHitCanvas = new Canvas_1.HitCanvas({\n            pixelRatio: 1,\n            width: width,\n            height: height,\n        }), sceneContext = cachedSceneCanvas.getContext(), hitContext = cachedHitCanvas.getContext();\n        cachedHitCanvas.isCache = true;\n        this._cache.delete('canvas');\n        this._filterUpToDate = false;\n        if (conf.imageSmoothingEnabled === false) {\n            cachedSceneCanvas.getContext()._context.imageSmoothingEnabled = false;\n            cachedFilterCanvas.getContext()._context.imageSmoothingEnabled = false;\n        }\n        sceneContext.save();\n        hitContext.save();\n        sceneContext.translate(-x, -y);\n        hitContext.translate(-x, -y);\n        this._isUnderCache = true;\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this.drawScene(cachedSceneCanvas, this, true);\n        this.drawHit(cachedHitCanvas, this, true);\n        this._isUnderCache = false;\n        sceneContext.restore();\n        hitContext.restore();\n        if (drawBorder) {\n            sceneContext.save();\n            sceneContext.beginPath();\n            sceneContext.rect(0, 0, width, height);\n            sceneContext.closePath();\n            sceneContext.setAttr('strokeStyle', 'red');\n            sceneContext.setAttr('lineWidth', 5);\n            sceneContext.stroke();\n            sceneContext.restore();\n        }\n        this._cache.set(CANVAS, {\n            scene: cachedSceneCanvas,\n            filter: cachedFilterCanvas,\n            hit: cachedHitCanvas,\n            x: x,\n            y: y,\n        });\n        return this;\n    };\n    Node.prototype.isCached = function () {\n        return this._cache.has('canvas');\n    };\n    Node.prototype.getClientRect = function (config) {\n        throw new Error('abstract \"getClientRect\" method call');\n    };\n    Node.prototype._transformedRect = function (rect, top) {\n        var points = [\n            { x: rect.x, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y + rect.height },\n            { x: rect.x, y: rect.y + rect.height },\n        ];\n        var minX, minY, maxX, maxY;\n        var trans = this.getAbsoluteTransform(top);\n        points.forEach(function (point) {\n            var transformed = trans.point(point);\n            if (minX === undefined) {\n                minX = maxX = transformed.x;\n                minY = maxY = transformed.y;\n            }\n            minX = Math.min(minX, transformed.x);\n            minY = Math.min(minY, transformed.y);\n            maxX = Math.max(maxX, transformed.x);\n            maxY = Math.max(maxY, transformed.y);\n        });\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    };\n    Node.prototype._drawCachedSceneCanvas = function (context) {\n        context.save();\n        context._applyOpacity(this);\n        context._applyGlobalCompositeOperation(this);\n        var canvasCache = this._getCanvasCache();\n        context.translate(canvasCache.x, canvasCache.y);\n        var cacheCanvas = this._getCachedSceneCanvas();\n        var ratio = cacheCanvas.pixelRatio;\n        context.drawImage(cacheCanvas._canvas, 0, 0, cacheCanvas.width / ratio, cacheCanvas.height / ratio);\n        context.restore();\n    };\n    Node.prototype._drawCachedHitCanvas = function (context) {\n        var canvasCache = this._getCanvasCache(), hitCanvas = canvasCache.hit;\n        context.save();\n        context.translate(canvasCache.x, canvasCache.y);\n        context.drawImage(hitCanvas._canvas, 0, 0);\n        context.restore();\n    };\n    Node.prototype._getCachedSceneCanvas = function () {\n        var filters = this.filters(), cachedCanvas = this._getCanvasCache(), sceneCanvas = cachedCanvas.scene, filterCanvas = cachedCanvas.filter, filterContext = filterCanvas.getContext(), len, imageData, n, filter;\n        if (filters) {\n            if (!this._filterUpToDate) {\n                var ratio = sceneCanvas.pixelRatio;\n                filterCanvas.setSize(sceneCanvas.width / sceneCanvas.pixelRatio, sceneCanvas.height / sceneCanvas.pixelRatio);\n                try {\n                    len = filters.length;\n                    filterContext.clear();\n                    filterContext.drawImage(sceneCanvas._canvas, 0, 0, sceneCanvas.getWidth() / ratio, sceneCanvas.getHeight() / ratio);\n                    imageData = filterContext.getImageData(0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\n                    for (n = 0; n < len; n++) {\n                        filter = filters[n];\n                        if (typeof filter !== 'function') {\n                            Util_1.Util.error('Filter should be type of function, but got ' +\n                                typeof filter +\n                                ' instead. Please check correct filters');\n                            continue;\n                        }\n                        filter.call(this, imageData);\n                        filterContext.putImageData(imageData, 0, 0);\n                    }\n                }\n                catch (e) {\n                    Util_1.Util.error('Unable to apply filter. ' +\n                        e.message +\n                        ' This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                }\n                this._filterUpToDate = true;\n            }\n            return filterCanvas;\n        }\n        return sceneCanvas;\n    };\n    Node.prototype.on = function (evtStr, handler) {\n        if (arguments.length === 3) {\n            return this._delegate.apply(this, arguments);\n        }\n        var events = evtStr.split(SPACE), len = events.length, n, event, parts, baseEvent, name;\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1] || '';\n            if (!this.eventListeners[baseEvent]) {\n                this.eventListeners[baseEvent] = [];\n            }\n            this.eventListeners[baseEvent].push({\n                name: name,\n                handler: handler,\n            });\n        }\n        return this;\n    };\n    Node.prototype.off = function (evtStr, callback) {\n        var events = (evtStr || '').split(SPACE), len = events.length, n, t, event, parts, baseEvent, name;\n        if (!evtStr) {\n            for (t in this.eventListeners) {\n                this._off(t);\n            }\n        }\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1];\n            if (baseEvent) {\n                if (this.eventListeners[baseEvent]) {\n                    this._off(baseEvent, name, callback);\n                }\n            }\n            else {\n                for (t in this.eventListeners) {\n                    this._off(t, name, callback);\n                }\n            }\n        }\n        return this;\n    };\n    Node.prototype.dispatchEvent = function (evt) {\n        var e = {\n            target: this,\n            type: evt.type,\n            evt: evt,\n        };\n        this.fire(evt.type, e);\n        return this;\n    };\n    Node.prototype.addEventListener = function (type, handler) {\n        this.on(type, function (evt) {\n            handler.call(this, evt.evt);\n        });\n        return this;\n    };\n    Node.prototype.removeEventListener = function (type) {\n        this.off(type);\n        return this;\n    };\n    Node.prototype._delegate = function (event, selector, handler) {\n        var stopNode = this;\n        this.on(event, function (evt) {\n            var targets = evt.target.findAncestors(selector, true, stopNode);\n            for (var i = 0; i < targets.length; i++) {\n                evt = Util_1.Util.cloneObject(evt);\n                evt.currentTarget = targets[i];\n                handler.call(targets[i], evt);\n            }\n        });\n    };\n    Node.prototype.remove = function () {\n        if (this.isDragging()) {\n            this.stopDrag();\n        }\n        DragAndDrop_1.DD._dragElements.delete(this._id);\n        this._remove();\n        return this;\n    };\n    Node.prototype._clearCaches = function () {\n        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this._clearSelfAndDescendantCache(STAGE);\n        this._clearSelfAndDescendantCache(VISIBLE);\n        this._clearSelfAndDescendantCache(LISTENING);\n    };\n    Node.prototype._remove = function () {\n        this._clearCaches();\n        var parent = this.getParent();\n        if (parent && parent.children) {\n            parent.children.splice(this.index, 1);\n            parent._setChildrenIndices();\n            this.parent = null;\n        }\n    };\n    Node.prototype.destroy = function () {\n        exports._removeId(this.id(), this);\n        var names = (this.name() || '').split(/\\s/g);\n        for (var i = 0; i < names.length; i++) {\n            var subname = names[i];\n            exports._removeName(subname, this._id);\n        }\n        this.remove();\n        return this;\n    };\n    Node.prototype.getAttr = function (attr) {\n        var method = 'get' + Util_1.Util._capitalize(attr);\n        if (Util_1.Util._isFunction(this[method])) {\n            return this[method]();\n        }\n        return this.attrs[attr];\n    };\n    Node.prototype.getAncestors = function () {\n        var parent = this.getParent(), ancestors = new Util_1.Collection();\n        while (parent) {\n            ancestors.push(parent);\n            parent = parent.getParent();\n        }\n        return ancestors;\n    };\n    Node.prototype.getAttrs = function () {\n        return this.attrs || {};\n    };\n    Node.prototype.setAttrs = function (config) {\n        var key, method;\n        if (!config) {\n            return this;\n        }\n        for (key in config) {\n            if (key === CHILDREN) {\n                continue;\n            }\n            method = SET + Util_1.Util._capitalize(key);\n            if (Util_1.Util._isFunction(this[method])) {\n                this[method](config[key]);\n            }\n            else {\n                this._setAttr(key, config[key]);\n            }\n        }\n        return this;\n    };\n    Node.prototype.isListening = function () {\n        return this._getCache(LISTENING, this._isListening);\n    };\n    Node.prototype._isListening = function () {\n        var listening = this.listening(), parent = this.getParent();\n        if (listening === 'inherit') {\n            if (parent) {\n                return parent.isListening();\n            }\n            else {\n                return true;\n            }\n        }\n        else {\n            return listening;\n        }\n    };\n    Node.prototype.isVisible = function () {\n        return this._getCache(VISIBLE, this._isVisible);\n    };\n    Node.prototype._isVisible = function (relativeTo) {\n        var visible = this.visible(), parent = this.getParent();\n        if (visible === 'inherit') {\n            if (parent && parent !== relativeTo) {\n                return parent._isVisible(relativeTo);\n            }\n            else {\n                return true;\n            }\n        }\n        else if (relativeTo && relativeTo !== parent) {\n            return visible && parent._isVisible(relativeTo);\n        }\n        else {\n            return visible;\n        }\n    };\n    Node.prototype.shouldDrawHit = function () {\n        var layer = this.getLayer();\n        return ((!layer && this.isListening() && this.isVisible()) ||\n            (layer &&\n                layer.hitGraphEnabled() &&\n                this.isListening() &&\n                this.isVisible()));\n    };\n    Node.prototype.show = function () {\n        this.visible(true);\n        return this;\n    };\n    Node.prototype.hide = function () {\n        this.visible(false);\n        return this;\n    };\n    Node.prototype.getZIndex = function () {\n        return this.index || 0;\n    };\n    Node.prototype.getAbsoluteZIndex = function () {\n        var depth = this.getDepth(), that = this, index = 0, nodes, len, n, child;\n        function addChildren(children) {\n            nodes = [];\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                child = children[n];\n                index++;\n                if (child.nodeType !== SHAPE) {\n                    nodes = nodes.concat(child.getChildren().toArray());\n                }\n                if (child._id === that._id) {\n                    n = len;\n                }\n            }\n            if (nodes.length > 0 && nodes[0].getDepth() <= depth) {\n                addChildren(nodes);\n            }\n        }\n        if (that.nodeType !== UPPER_STAGE) {\n            addChildren(that.getStage().getChildren());\n        }\n        return index;\n    };\n    Node.prototype.getDepth = function () {\n        var depth = 0, parent = this.parent;\n        while (parent) {\n            depth++;\n            parent = parent.parent;\n        }\n        return depth;\n    };\n    Node.prototype._batchTransformChanges = function (func) {\n        this._batchingTransformChange = true;\n        func();\n        this._batchingTransformChange = false;\n        if (this._needClearTransformCache) {\n            this._clearCache(TRANSFORM);\n            this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM, true);\n        }\n        this._needClearTransformCache = false;\n    };\n    Node.prototype.setPosition = function (pos) {\n        var _this = this;\n        this._batchTransformChanges(function () {\n            _this.x(pos.x);\n            _this.y(pos.y);\n        });\n        return this;\n    };\n    Node.prototype.getPosition = function () {\n        return {\n            x: this.x(),\n            y: this.y(),\n        };\n    };\n    Node.prototype.getAbsolutePosition = function (top) {\n        var haveCachedParent = false;\n        var parent = this.parent;\n        while (parent) {\n            if (parent.isCached()) {\n                haveCachedParent = true;\n                break;\n            }\n            parent = parent.parent;\n        }\n        if (haveCachedParent && !top) {\n            top = true;\n        }\n        var absoluteMatrix = this.getAbsoluteTransform(top).getMatrix(), absoluteTransform = new Util_1.Transform(), offset = this.offset();\n        absoluteTransform.m = absoluteMatrix.slice();\n        absoluteTransform.translate(offset.x, offset.y);\n        return absoluteTransform.getTranslation();\n    };\n    Node.prototype.setAbsolutePosition = function (pos) {\n        var origTrans = this._clearTransform(), it;\n        this.attrs.x = origTrans.x;\n        this.attrs.y = origTrans.y;\n        delete origTrans.x;\n        delete origTrans.y;\n        this._clearCache(TRANSFORM);\n        it = this._getAbsoluteTransform();\n        it.invert();\n        it.translate(pos.x, pos.y);\n        pos = {\n            x: this.attrs.x + it.getTranslation().x,\n            y: this.attrs.y + it.getTranslation().y,\n        };\n        this._setTransform(origTrans);\n        this.setPosition({ x: pos.x, y: pos.y });\n        return this;\n    };\n    Node.prototype._setTransform = function (trans) {\n        var key;\n        for (key in trans) {\n            this.attrs[key] = trans[key];\n        }\n    };\n    Node.prototype._clearTransform = function () {\n        var trans = {\n            x: this.x(),\n            y: this.y(),\n            rotation: this.rotation(),\n            scaleX: this.scaleX(),\n            scaleY: this.scaleY(),\n            offsetX: this.offsetX(),\n            offsetY: this.offsetY(),\n            skewX: this.skewX(),\n            skewY: this.skewY(),\n        };\n        this.attrs.x = 0;\n        this.attrs.y = 0;\n        this.attrs.rotation = 0;\n        this.attrs.scaleX = 1;\n        this.attrs.scaleY = 1;\n        this.attrs.offsetX = 0;\n        this.attrs.offsetY = 0;\n        this.attrs.skewX = 0;\n        this.attrs.skewY = 0;\n        return trans;\n    };\n    Node.prototype.move = function (change) {\n        var changeX = change.x, changeY = change.y, x = this.x(), y = this.y();\n        if (changeX !== undefined) {\n            x += changeX;\n        }\n        if (changeY !== undefined) {\n            y += changeY;\n        }\n        this.setPosition({ x: x, y: y });\n        return this;\n    };\n    Node.prototype._eachAncestorReverse = function (func, top) {\n        var family = [], parent = this.getParent(), len, n;\n        if (top && top._id === this._id) {\n            func(this);\n            return;\n        }\n        family.unshift(this);\n        while (parent && (!top || parent._id !== top._id)) {\n            family.unshift(parent);\n            parent = parent.parent;\n        }\n        len = family.length;\n        for (n = 0; n < len; n++) {\n            func(family[n]);\n        }\n    };\n    Node.prototype.rotate = function (theta) {\n        this.rotation(this.rotation() + theta);\n        return this;\n    };\n    Node.prototype.moveToTop = function () {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveToTop function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        this.parent.children.splice(index, 1);\n        this.parent.children.push(this);\n        this.parent._setChildrenIndices();\n        return true;\n    };\n    Node.prototype.moveUp = function () {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveUp function is ignored.');\n            return false;\n        }\n        var index = this.index, len = this.parent.getChildren().length;\n        if (index < len - 1) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index + 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    };\n    Node.prototype.moveDown = function () {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveDown function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index - 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    };\n    Node.prototype.moveToBottom = function () {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveToBottom function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.unshift(this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    };\n    Node.prototype.setZIndex = function (zIndex) {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. zIndex parameter is ignored.');\n            return this;\n        }\n        if (zIndex < 0 || zIndex >= this.parent.children.length) {\n            Util_1.Util.warn('Unexpected value ' +\n                zIndex +\n                ' for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to ' +\n                (this.parent.children.length - 1) +\n                '.');\n        }\n        var index = this.index;\n        this.parent.children.splice(index, 1);\n        this.parent.children.splice(zIndex, 0, this);\n        this.parent._setChildrenIndices();\n        return this;\n    };\n    Node.prototype.getAbsoluteOpacity = function () {\n        return this._getCache(ABSOLUTE_OPACITY, this._getAbsoluteOpacity);\n    };\n    Node.prototype._getAbsoluteOpacity = function () {\n        var absOpacity = this.opacity();\n        var parent = this.getParent();\n        if (parent && !parent._isUnderCache) {\n            absOpacity *= parent.getAbsoluteOpacity();\n        }\n        return absOpacity;\n    };\n    Node.prototype.moveTo = function (newContainer) {\n        if (this.getParent() !== newContainer) {\n            this._remove();\n            newContainer.add(this);\n        }\n        return this;\n    };\n    Node.prototype.toObject = function () {\n        var obj = {}, attrs = this.getAttrs(), key, val, getter, defaultValue, nonPlainObject;\n        obj.attrs = {};\n        for (key in attrs) {\n            val = attrs[key];\n            nonPlainObject =\n                Util_1.Util.isObject(val) && !Util_1.Util._isPlainObject(val) && !Util_1.Util._isArray(val);\n            if (nonPlainObject) {\n                continue;\n            }\n            getter = typeof this[key] === 'function' && this[key];\n            delete attrs[key];\n            defaultValue = getter ? getter.call(this) : null;\n            attrs[key] = val;\n            if (defaultValue !== val) {\n                obj.attrs[key] = val;\n            }\n        }\n        obj.className = this.getClassName();\n        return Util_1.Util._prepareToStringify(obj);\n    };\n    Node.prototype.toJSON = function () {\n        return JSON.stringify(this.toObject());\n    };\n    Node.prototype.getParent = function () {\n        return this.parent;\n    };\n    Node.prototype.findAncestors = function (selector, includeSelf, stopNode) {\n        var res = [];\n        if (includeSelf && this._isMatch(selector)) {\n            res.push(this);\n        }\n        var ancestor = this.parent;\n        while (ancestor) {\n            if (ancestor === stopNode) {\n                return res;\n            }\n            if (ancestor._isMatch(selector)) {\n                res.push(ancestor);\n            }\n            ancestor = ancestor.parent;\n        }\n        return res;\n    };\n    Node.prototype.isAncestorOf = function (node) {\n        return false;\n    };\n    Node.prototype.findAncestor = function (selector, includeSelf, stopNode) {\n        return this.findAncestors(selector, includeSelf, stopNode)[0];\n    };\n    Node.prototype._isMatch = function (selector) {\n        if (!selector) {\n            return false;\n        }\n        if (typeof selector === 'function') {\n            return selector(this);\n        }\n        var selectorArr = selector.replace(/ /g, '').split(','), len = selectorArr.length, n, sel;\n        for (n = 0; n < len; n++) {\n            sel = selectorArr[n];\n            if (!Util_1.Util.isValidSelector(sel)) {\n                Util_1.Util.warn('Selector \"' +\n                    sel +\n                    '\" is invalid. Allowed selectors examples are \"#foo\", \".bar\" or \"Group\".');\n                Util_1.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like \"Triangle\".');\n                Util_1.Util.warn('Konva is awesome, right?');\n            }\n            if (sel.charAt(0) === '#') {\n                if (this.id() === sel.slice(1)) {\n                    return true;\n                }\n            }\n            else if (sel.charAt(0) === '.') {\n                if (this.hasName(sel.slice(1))) {\n                    return true;\n                }\n            }\n            else if (this.className === sel || this.nodeType === sel) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Node.prototype.getLayer = function () {\n        var parent = this.getParent();\n        return parent ? parent.getLayer() : null;\n    };\n    Node.prototype.getStage = function () {\n        return this._getCache(STAGE, this._getStage);\n    };\n    Node.prototype._getStage = function () {\n        var parent = this.getParent();\n        if (parent) {\n            return parent.getStage();\n        }\n        else {\n            return undefined;\n        }\n    };\n    Node.prototype.fire = function (eventType, evt, bubble) {\n        if (evt === void 0) { evt = {}; }\n        evt.target = evt.target || this;\n        if (bubble) {\n            this._fireAndBubble(eventType, evt);\n        }\n        else {\n            this._fire(eventType, evt);\n        }\n        return this;\n    };\n    Node.prototype.getAbsoluteTransform = function (top) {\n        if (top) {\n            return this._getAbsoluteTransform(top);\n        }\n        else {\n            return this._getCache(ABSOLUTE_TRANSFORM, this._getAbsoluteTransform);\n        }\n    };\n    Node.prototype._getAbsoluteTransform = function (top) {\n        var at;\n        if (top) {\n            at = new Util_1.Transform();\n            this._eachAncestorReverse(function (node) {\n                var transformsEnabled = node.transformsEnabled();\n                if (transformsEnabled === 'all') {\n                    at.multiply(node.getTransform());\n                }\n                else if (transformsEnabled === 'position') {\n                    at.translate(node.x() - node.offsetX(), node.y() - node.offsetY());\n                }\n            }, top);\n            return at;\n        }\n        else {\n            if (this.parent) {\n                at = this.parent.getAbsoluteTransform().copy();\n            }\n            else {\n                at = new Util_1.Transform();\n            }\n            var transformsEnabled = this.transformsEnabled();\n            if (transformsEnabled === 'all') {\n                at.multiply(this.getTransform());\n            }\n            else if (transformsEnabled === 'position') {\n                at.translate(this.x() - this.offsetX(), this.y() - this.offsetY());\n            }\n            return at;\n        }\n    };\n    Node.prototype.getAbsoluteScale = function (top) {\n        var parent = this;\n        while (parent) {\n            if (parent._isUnderCache) {\n                top = parent;\n            }\n            parent = parent.getParent();\n        }\n        var transform = this.getAbsoluteTransform(top);\n        var attrs = transform.decompose();\n        return {\n            x: attrs.scaleX,\n            y: attrs.scaleY,\n        };\n    };\n    Node.prototype.getAbsoluteRotation = function () {\n        return this.getAbsoluteTransform().decompose().rotation;\n    };\n    Node.prototype.getTransform = function () {\n        return this._getCache(TRANSFORM, this._getTransform);\n    };\n    Node.prototype._getTransform = function () {\n        var m = new Util_1.Transform(), x = this.x(), y = this.y(), rotation = Global_1.Konva.getAngle(this.rotation()), scaleX = this.scaleX(), scaleY = this.scaleY(), skewX = this.skewX(), skewY = this.skewY(), offsetX = this.offsetX(), offsetY = this.offsetY();\n        if (x !== 0 || y !== 0) {\n            m.translate(x, y);\n        }\n        if (rotation !== 0) {\n            m.rotate(rotation);\n        }\n        if (skewX !== 0 || skewY !== 0) {\n            m.skew(skewX, skewY);\n        }\n        if (scaleX !== 1 || scaleY !== 1) {\n            m.scale(scaleX, scaleY);\n        }\n        if (offsetX !== 0 || offsetY !== 0) {\n            m.translate(-1 * offsetX, -1 * offsetY);\n        }\n        return m;\n    };\n    Node.prototype.clone = function (obj) {\n        var attrs = Util_1.Util.cloneObject(this.attrs), key, allListeners, len, n, listener;\n        for (key in obj) {\n            attrs[key] = obj[key];\n        }\n        var node = new this.constructor(attrs);\n        for (key in this.eventListeners) {\n            allListeners = this.eventListeners[key];\n            len = allListeners.length;\n            for (n = 0; n < len; n++) {\n                listener = allListeners[n];\n                if (listener.name.indexOf(KONVA) < 0) {\n                    if (!node.eventListeners[key]) {\n                        node.eventListeners[key] = [];\n                    }\n                    node.eventListeners[key].push(listener);\n                }\n            }\n        }\n        return node;\n    };\n    Node.prototype._toKonvaCanvas = function (config) {\n        config = config || {};\n        var box = this.getClientRect();\n        var stage = this.getStage(), x = config.x !== undefined ? config.x : box.x, y = config.y !== undefined ? config.y : box.y, pixelRatio = config.pixelRatio || 1, canvas = new Canvas_1.SceneCanvas({\n            width: config.width || box.width || (stage ? stage.width() : 0),\n            height: config.height || box.height || (stage ? stage.height() : 0),\n            pixelRatio: pixelRatio,\n        }), context = canvas.getContext();\n        context.save();\n        if (x || y) {\n            context.translate(-1 * x, -1 * y);\n        }\n        this.drawScene(canvas);\n        context.restore();\n        return canvas;\n    };\n    Node.prototype.toCanvas = function (config) {\n        return this._toKonvaCanvas(config)._canvas;\n    };\n    Node.prototype.toDataURL = function (config) {\n        config = config || {};\n        var mimeType = config.mimeType || null, quality = config.quality || null;\n        var url = this._toKonvaCanvas(config).toDataURL(mimeType, quality);\n        if (config.callback) {\n            config.callback(url);\n        }\n        return url;\n    };\n    Node.prototype.toImage = function (config) {\n        if (!config || !config.callback) {\n            throw 'callback required for toImage method config argument';\n        }\n        var callback = config.callback;\n        delete config.callback;\n        Util_1.Util._urlToImage(this.toDataURL(config), function (img) {\n            callback(img);\n        });\n    };\n    Node.prototype.setSize = function (size) {\n        this.width(size.width);\n        this.height(size.height);\n        return this;\n    };\n    Node.prototype.getSize = function () {\n        return {\n            width: this.width(),\n            height: this.height(),\n        };\n    };\n    Node.prototype.getClassName = function () {\n        return this.className || this.nodeType;\n    };\n    Node.prototype.getType = function () {\n        return this.nodeType;\n    };\n    Node.prototype.getDragDistance = function () {\n        if (this.attrs.dragDistance !== undefined) {\n            return this.attrs.dragDistance;\n        }\n        else if (this.parent) {\n            return this.parent.getDragDistance();\n        }\n        else {\n            return Global_1.Konva.dragDistance;\n        }\n    };\n    Node.prototype._off = function (type, name, callback) {\n        var evtListeners = this.eventListeners[type], i, evtName, handler;\n        for (i = 0; i < evtListeners.length; i++) {\n            evtName = evtListeners[i].name;\n            handler = evtListeners[i].handler;\n            if ((evtName !== 'konva' || name === 'konva') &&\n                (!name || evtName === name) &&\n                (!callback || callback === handler)) {\n                evtListeners.splice(i, 1);\n                if (evtListeners.length === 0) {\n                    delete this.eventListeners[type];\n                    break;\n                }\n                i--;\n            }\n        }\n    };\n    Node.prototype._fireChangeEvent = function (attr, oldVal, newVal) {\n        this._fire(attr + CHANGE, {\n            oldVal: oldVal,\n            newVal: newVal,\n        });\n    };\n    Node.prototype.setId = function (id) {\n        var oldId = this.id();\n        exports._removeId(oldId, this);\n        _addId(this, id);\n        this._setAttr('id', id);\n        return this;\n    };\n    Node.prototype.setName = function (name) {\n        var oldNames = (this.name() || '').split(/\\s/g);\n        var newNames = (name || '').split(/\\s/g);\n        var subname, i;\n        for (i = 0; i < oldNames.length; i++) {\n            subname = oldNames[i];\n            if (newNames.indexOf(subname) === -1 && subname) {\n                exports._removeName(subname, this._id);\n            }\n        }\n        for (i = 0; i < newNames.length; i++) {\n            subname = newNames[i];\n            if (oldNames.indexOf(subname) === -1 && subname) {\n                exports._addName(this, subname);\n            }\n        }\n        this._setAttr(NAME, name);\n        return this;\n    };\n    Node.prototype.addName = function (name) {\n        if (!this.hasName(name)) {\n            var oldName = this.name();\n            var newName = oldName ? oldName + ' ' + name : name;\n            this.setName(newName);\n        }\n        return this;\n    };\n    Node.prototype.hasName = function (name) {\n        if (!name) {\n            return false;\n        }\n        var fullName = this.name();\n        if (!fullName) {\n            return false;\n        }\n        var names = (fullName || '').split(/\\s/g);\n        return names.indexOf(name) !== -1;\n    };\n    Node.prototype.removeName = function (name) {\n        var names = (this.name() || '').split(/\\s/g);\n        var index = names.indexOf(name);\n        if (index !== -1) {\n            names.splice(index, 1);\n            this.setName(names.join(' '));\n        }\n        return this;\n    };\n    Node.prototype.setAttr = function (attr, val) {\n        var func = this[SET + Util_1.Util._capitalize(attr)];\n        if (Util_1.Util._isFunction(func)) {\n            func.call(this, val);\n        }\n        else {\n            this._setAttr(attr, val);\n        }\n        return this;\n    };\n    Node.prototype._setAttr = function (key, val) {\n        var oldVal = this.attrs[key];\n        if (oldVal === val && !Util_1.Util.isObject(val)) {\n            return;\n        }\n        if (val === undefined || val === null) {\n            delete this.attrs[key];\n        }\n        else {\n            this.attrs[key] = val;\n        }\n        this._fireChangeEvent(key, oldVal, val);\n    };\n    Node.prototype._setComponentAttr = function (key, component, val) {\n        var oldVal;\n        if (val !== undefined) {\n            oldVal = this.attrs[key];\n            if (!oldVal) {\n                this.attrs[key] = this.getAttr(key);\n            }\n            this.attrs[key][component] = val;\n            this._fireChangeEvent(key, oldVal, val);\n        }\n    };\n    Node.prototype._fireAndBubble = function (eventType, evt, compareShape) {\n        if (evt && this.nodeType === SHAPE) {\n            evt.target = this;\n        }\n        var shouldStop = (eventType === MOUSEENTER || eventType === MOUSELEAVE) &&\n            ((compareShape &&\n                (this === compareShape ||\n                    (this.isAncestorOf && this.isAncestorOf(compareShape)))) ||\n                (this.nodeType === 'Stage' && !compareShape));\n        if (!shouldStop) {\n            this._fire(eventType, evt);\n            var stopBubble = (eventType === MOUSEENTER || eventType === MOUSELEAVE) &&\n                compareShape &&\n                compareShape.isAncestorOf &&\n                compareShape.isAncestorOf(this) &&\n                !compareShape.isAncestorOf(this.parent);\n            if (((evt && !evt.cancelBubble) || !evt) &&\n                this.parent &&\n                this.parent.isListening() &&\n                !stopBubble) {\n                if (compareShape && compareShape.parent) {\n                    this._fireAndBubble.call(this.parent, eventType, evt, compareShape);\n                }\n                else {\n                    this._fireAndBubble.call(this.parent, eventType, evt);\n                }\n            }\n        }\n    };\n    Node.prototype._fire = function (eventType, evt) {\n        var events = this.eventListeners[eventType], i;\n        if (events) {\n            evt = evt || {};\n            evt.currentTarget = this;\n            evt.type = eventType;\n            for (i = 0; i < events.length; i++) {\n                events[i].handler.call(this, evt);\n            }\n        }\n    };\n    Node.prototype.draw = function () {\n        this.drawScene();\n        this.drawHit();\n        return this;\n    };\n    Node.prototype._createDragElement = function (evt) {\n        var pointerId = evt ? evt.pointerId : undefined;\n        var stage = this.getStage();\n        var ap = this.getAbsolutePosition();\n        var pos = stage._getPointerById(pointerId) ||\n            stage._changedPointerPositions[0] ||\n            ap;\n        DragAndDrop_1.DD._dragElements.set(this._id, {\n            node: this,\n            startPointerPos: pos,\n            offset: {\n                x: pos.x - ap.x,\n                y: pos.y - ap.y,\n            },\n            dragStatus: 'ready',\n            pointerId: pointerId,\n        });\n    };\n    Node.prototype.startDrag = function (evt) {\n        if (!DragAndDrop_1.DD._dragElements.has(this._id)) {\n            this._createDragElement(evt);\n        }\n        var elem = DragAndDrop_1.DD._dragElements.get(this._id);\n        elem.dragStatus = 'dragging';\n        this.fire('dragstart', {\n            type: 'dragstart',\n            target: this,\n            evt: evt && evt.evt,\n        }, true);\n    };\n    Node.prototype._setDragPosition = function (evt, elem) {\n        var pos = this.getStage()._getPointerById(elem.pointerId);\n        if (!pos) {\n            return;\n        }\n        var newNodePos = {\n            x: pos.x - elem.offset.x,\n            y: pos.y - elem.offset.y,\n        };\n        var dbf = this.dragBoundFunc();\n        if (dbf !== undefined) {\n            var bounded = dbf.call(this, newNodePos, evt);\n            if (!bounded) {\n                Util_1.Util.warn('dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.');\n            }\n            else {\n                newNodePos = bounded;\n            }\n        }\n        if (!this._lastPos ||\n            this._lastPos.x !== newNodePos.x ||\n            this._lastPos.y !== newNodePos.y) {\n            this.setAbsolutePosition(newNodePos);\n            if (this.getLayer()) {\n                this.getLayer().batchDraw();\n            }\n            else if (this.getStage()) {\n                this.getStage().batchDraw();\n            }\n        }\n        this._lastPos = newNodePos;\n    };\n    Node.prototype.stopDrag = function (evt) {\n        var elem = DragAndDrop_1.DD._dragElements.get(this._id);\n        if (elem) {\n            elem.dragStatus = 'stopped';\n        }\n        DragAndDrop_1.DD._endDragBefore(evt);\n        DragAndDrop_1.DD._endDragAfter(evt);\n    };\n    Node.prototype.setDraggable = function (draggable) {\n        this._setAttr('draggable', draggable);\n        this._dragChange();\n    };\n    Node.prototype.isDragging = function () {\n        var elem = DragAndDrop_1.DD._dragElements.get(this._id);\n        return elem ? elem.dragStatus === 'dragging' : false;\n    };\n    Node.prototype._listenDrag = function () {\n        this._dragCleanup();\n        this.on('mousedown.konva touchstart.konva', function (evt) {\n            var _this = this;\n            var shouldCheckButton = evt.evt['button'] !== undefined;\n            var canDrag = !shouldCheckButton || Global_1.Konva.dragButtons.indexOf(evt.evt['button']) >= 0;\n            if (!canDrag) {\n                return;\n            }\n            if (this.isDragging()) {\n                return;\n            }\n            var hasDraggingChild = false;\n            DragAndDrop_1.DD._dragElements.forEach(function (elem) {\n                if (_this.isAncestorOf(elem.node)) {\n                    hasDraggingChild = true;\n                }\n            });\n            if (!hasDraggingChild) {\n                this._createDragElement(evt);\n            }\n        });\n    };\n    Node.prototype._dragChange = function () {\n        if (this.attrs.draggable) {\n            this._listenDrag();\n        }\n        else {\n            this._dragCleanup();\n            var stage = this.getStage();\n            if (stage && DragAndDrop_1.DD._dragElements.has(this._id)) {\n                this.stopDrag();\n            }\n        }\n    };\n    Node.prototype._dragCleanup = function () {\n        this.off('mousedown.konva');\n        this.off('touchstart.konva');\n    };\n    Node.create = function (data, container) {\n        if (Util_1.Util._isString(data)) {\n            data = JSON.parse(data);\n        }\n        return this._createNode(data, container);\n    };\n    Node._createNode = function (obj, container) {\n        var className = Node.prototype.getClassName.call(obj), children = obj.children, no, len, n;\n        if (container) {\n            obj.attrs.container = container;\n        }\n        if (!Global_1._NODES_REGISTRY[className]) {\n            Util_1.Util.warn('Can not find a node with class name \"' +\n                className +\n                '\". Fallback to \"Shape\".');\n            className = 'Shape';\n        }\n        var Class = Global_1._NODES_REGISTRY[className];\n        no = new Class(obj.attrs);\n        if (children) {\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                no.add(Node._createNode(children[n]));\n            }\n        }\n        return no;\n    };\n    return Node;\n}());\nexports.Node = Node;\nNode.prototype.nodeType = 'Node';\nNode.prototype._attrsAffectingSize = [];\nFactory_1.Factory.addGetterSetter(Node, 'zIndex');\nFactory_1.Factory.addGetterSetter(Node, 'absolutePosition');\nFactory_1.Factory.addGetterSetter(Node, 'position');\nFactory_1.Factory.addGetterSetter(Node, 'x', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'y', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'globalCompositeOperation', 'source-over', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'opacity', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'name', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'id', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'rotation', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'scale', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'scaleX', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'scaleY', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'skew', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'skewX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'skewY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'offset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'offsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'offsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'dragDistance', null, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'width', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'height', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'listening', 'inherit', function (val) {\n    var isValid = val === true || val === false || val === 'inherit';\n    if (!isValid) {\n        Util_1.Util.warn(val +\n            ' is a not valid value for \"listening\" attribute. The value may be true, false or \"inherit\".');\n    }\n    return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'preventDefault', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Node, 'filters', null, function (val) {\n    this._filterUpToDate = false;\n    return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'visible', 'inherit', function (val) {\n    var isValid = val === true || val === false || val === 'inherit';\n    if (!isValid) {\n        Util_1.Util.warn(val +\n            ' is a not valid value for \"visible\" attribute. The value may be true, false or \"inherit\".');\n    }\n    return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'transformsEnabled', 'all', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'size');\nFactory_1.Factory.addGetterSetter(Node, 'dragBoundFunc');\nFactory_1.Factory.addGetterSetter(Node, 'draggable', false, Validators_1.getBooleanValidator());\nFactory_1.Factory.backCompat(Node, {\n    rotateDeg: 'rotate',\n    setRotationDeg: 'setRotation',\n    getRotationDeg: 'getRotation',\n});\nUtil_1.Collection.mapMethods(Node);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Factory_1 = require(\"./Factory\");\nvar Node_1 = require(\"./Node\");\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\nvar Validators_1 = require(\"./Validators\");\nvar Global_1 = require(\"./Global\");\nvar Container = (function (_super) {\n    __extends(Container, _super);\n    function Container() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.children = new Util_1.Collection();\n        return _this;\n    }\n    Container.prototype.getChildren = function (filterFunc) {\n        if (!filterFunc) {\n            return this.children;\n        }\n        var results = new Util_1.Collection();\n        this.children.each(function (child) {\n            if (filterFunc(child)) {\n                results.push(child);\n            }\n        });\n        return results;\n    };\n    Container.prototype.hasChildren = function () {\n        return this.getChildren().length > 0;\n    };\n    Container.prototype.removeChildren = function () {\n        var child;\n        for (var i = 0; i < this.children.length; i++) {\n            child = this.children[i];\n            child.parent = null;\n            child.index = 0;\n            child.remove();\n        }\n        this.children = new Util_1.Collection();\n        return this;\n    };\n    Container.prototype.destroyChildren = function () {\n        var child;\n        for (var i = 0; i < this.children.length; i++) {\n            child = this.children[i];\n            child.parent = null;\n            child.index = 0;\n            child.destroy();\n        }\n        this.children = new Util_1.Collection();\n        return this;\n    };\n    Container.prototype.add = function () {\n        var children = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            children[_i] = arguments[_i];\n        }\n        if (arguments.length > 1) {\n            for (var i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        var child = children[0];\n        if (child.getParent()) {\n            child.moveTo(this);\n            return this;\n        }\n        var _children = this.children;\n        this._validateAdd(child);\n        child._clearCaches();\n        child.index = _children.length;\n        child.parent = this;\n        _children.push(child);\n        this._fire('add', {\n            child: child\n        });\n        return this;\n    };\n    Container.prototype.destroy = function () {\n        if (this.hasChildren()) {\n            this.destroyChildren();\n        }\n        _super.prototype.destroy.call(this);\n        return this;\n    };\n    Container.prototype.find = function (selector) {\n        return this._generalFind(selector, false);\n    };\n    Container.prototype.get = function (selector) {\n        Util_1.Util.warn('collection.get() method is deprecated. Please use collection.find() instead.');\n        return this.find(selector);\n    };\n    Container.prototype.findOne = function (selector) {\n        var result = this._generalFind(selector, true);\n        return result.length > 0 ? result[0] : undefined;\n    };\n    Container.prototype._generalFind = function (selector, findOne) {\n        var retArr = [];\n        this._descendants(function (node) {\n            var valid = node._isMatch(selector);\n            if (valid) {\n                retArr.push(node);\n            }\n            if (valid && findOne) {\n                return true;\n            }\n            return false;\n        });\n        return Util_1.Collection.toCollection(retArr);\n    };\n    Container.prototype._descendants = function (fn) {\n        var shouldStop = false;\n        for (var i = 0; i < this.children.length; i++) {\n            var child = this.children[i];\n            shouldStop = fn(child);\n            if (shouldStop) {\n                return true;\n            }\n            if (!child.hasChildren()) {\n                continue;\n            }\n            shouldStop = child._descendants(fn);\n            if (shouldStop) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Container.prototype.toObject = function () {\n        var obj = Node_1.Node.prototype.toObject.call(this);\n        obj.children = [];\n        var children = this.getChildren();\n        var len = children.length;\n        for (var n = 0; n < len; n++) {\n            var child = children[n];\n            obj.children.push(child.toObject());\n        }\n        return obj;\n    };\n    Container.prototype.isAncestorOf = function (node) {\n        var parent = node.getParent();\n        while (parent) {\n            if (parent._id === this._id) {\n                return true;\n            }\n            parent = parent.getParent();\n        }\n        return false;\n    };\n    Container.prototype.clone = function (obj) {\n        var node = Node_1.Node.prototype.clone.call(this, obj);\n        this.getChildren().each(function (no) {\n            node.add(no.clone());\n        });\n        return node;\n    };\n    Container.prototype.getAllIntersections = function (pos) {\n        var arr = [];\n        this.find('Shape').each(function (shape) {\n            if (shape.isVisible() && shape.intersects(pos)) {\n                arr.push(shape);\n            }\n        });\n        return arr;\n    };\n    Container.prototype._setChildrenIndices = function () {\n        this.children.each(function (child, n) {\n            child.index = n;\n        });\n    };\n    Container.prototype.drawScene = function (can, top, caching) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas()), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedSceneCanvas = cachedCanvas && cachedCanvas.scene;\n        if (this.isVisible() || caching) {\n            if (!caching && cachedSceneCanvas) {\n                context.save();\n                layer._applyTransform(this, context, top);\n                this._drawCachedSceneCanvas(context);\n                context.restore();\n            }\n            else {\n                this._drawChildren(canvas, 'drawScene', top, false, caching, caching);\n            }\n        }\n        return this;\n    };\n    Container.prototype.drawHit = function (can, top, caching) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (this.shouldDrawHit(canvas) || caching) {\n            if (!caching && cachedHitCanvas) {\n                context.save();\n                layer._applyTransform(this, context, top);\n                this._drawCachedHitCanvas(context);\n                context.restore();\n            }\n            else {\n                this._drawChildren(canvas, 'drawHit', top, false, caching, caching);\n            }\n        }\n        return this;\n    };\n    Container.prototype._drawChildren = function (canvas, drawMethod, top, caching, skipBuffer, skipComposition) {\n        var layer = this.getLayer(), context = canvas && canvas.getContext(), clipWidth = this.clipWidth(), clipHeight = this.clipHeight(), clipFunc = this.clipFunc(), hasClip = (clipWidth && clipHeight) || clipFunc, clipX, clipY;\n        if (hasClip && layer) {\n            context.save();\n            var transform = this.getAbsoluteTransform(top);\n            var m = transform.getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            context.beginPath();\n            if (clipFunc) {\n                clipFunc.call(this, context, this);\n            }\n            else {\n                clipX = this.clipX();\n                clipY = this.clipY();\n                context.rect(clipX, clipY, clipWidth, clipHeight);\n            }\n            context.clip();\n            m = transform\n                .copy()\n                .invert()\n                .getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        }\n        var hasComposition = this.globalCompositeOperation() !== 'source-over' &&\n            !skipComposition &&\n            drawMethod === 'drawScene';\n        if (hasComposition && layer) {\n            context.save();\n            context._applyGlobalCompositeOperation(this);\n        }\n        this.children.each(function (child) {\n            child[drawMethod](canvas, top, caching, skipBuffer);\n        });\n        if (hasComposition && layer) {\n            context.restore();\n        }\n        if (hasClip && layer) {\n            context.restore();\n        }\n    };\n    Container.prototype.shouldDrawHit = function (canvas) {\n        if (canvas && canvas.isCache) {\n            return true;\n        }\n        var layer = this.getLayer();\n        var layerUnderDrag = false;\n        DragAndDrop_1.DD._dragElements.forEach(function (elem) {\n            if (elem.dragStatus === 'dragging' && elem.node.getLayer() === layer) {\n                layerUnderDrag = true;\n            }\n        });\n        var dragSkip = !Global_1.Konva.hitOnDragEnabled && layerUnderDrag;\n        return layer && layer.hitGraphEnabled() && this.isVisible() && !dragSkip;\n    };\n    Container.prototype.getClientRect = function (config) {\n        config = config || {};\n        var skipTransform = config.skipTransform;\n        var relativeTo = config.relativeTo;\n        var minX, minY, maxX, maxY;\n        var selfRect = {\n            x: Infinity,\n            y: Infinity,\n            width: 0,\n            height: 0\n        };\n        var that = this;\n        this.children.each(function (child) {\n            if (!child.visible()) {\n                return;\n            }\n            var rect = child.getClientRect({\n                relativeTo: that,\n                skipShadow: config.skipShadow,\n                skipStroke: config.skipStroke\n            });\n            if (rect.width === 0 && rect.height === 0) {\n                return;\n            }\n            if (minX === undefined) {\n                minX = rect.x;\n                minY = rect.y;\n                maxX = rect.x + rect.width;\n                maxY = rect.y + rect.height;\n            }\n            else {\n                minX = Math.min(minX, rect.x);\n                minY = Math.min(minY, rect.y);\n                maxX = Math.max(maxX, rect.x + rect.width);\n                maxY = Math.max(maxY, rect.y + rect.height);\n            }\n        });\n        var shapes = this.find('Shape');\n        var hasVisible = false;\n        for (var i = 0; i < shapes.length; i++) {\n            var shape = shapes[i];\n            if (shape._isVisible(this)) {\n                hasVisible = true;\n                break;\n            }\n        }\n        if (hasVisible && minX !== undefined) {\n            selfRect = {\n                x: minX,\n                y: minY,\n                width: maxX - minX,\n                height: maxY - minY\n            };\n        }\n        else {\n            selfRect = {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0\n            };\n        }\n        if (!skipTransform) {\n            return this._transformedRect(selfRect, relativeTo);\n        }\n        return selfRect;\n    };\n    return Container;\n}(Node_1.Node));\nexports.Container = Container;\nFactory_1.Factory.addComponentsGetterSetter(Container, 'clip', [\n    'x',\n    'y',\n    'width',\n    'height'\n]);\nFactory_1.Factory.addGetterSetter(Container, 'clipX', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipY', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipWidth', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipHeight', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipFunc');\nUtil_1.Collection.mapMethods(Container);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Captures = new Map();\nvar SUPPORT_POINTER_EVENTS = Global_1.Konva._global['PointerEvent'] !== undefined;\nfunction getCapturedShape(pointerId) {\n    return Captures.get(pointerId);\n}\nexports.getCapturedShape = getCapturedShape;\nfunction createEvent(evt) {\n    return {\n        evt: evt,\n        pointerId: evt.pointerId\n    };\n}\nexports.createEvent = createEvent;\nfunction hasPointerCapture(pointerId, shape) {\n    return Captures.get(pointerId) === shape;\n}\nexports.hasPointerCapture = hasPointerCapture;\nfunction setPointerCapture(pointerId, shape) {\n    releaseCapture(pointerId);\n    var stage = shape.getStage();\n    if (!stage)\n        return;\n    Captures.set(pointerId, shape);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('gotpointercapture', createEvent(new PointerEvent('gotpointercapture')));\n    }\n}\nexports.setPointerCapture = setPointerCapture;\nfunction releaseCapture(pointerId, target) {\n    var shape = Captures.get(pointerId);\n    if (!shape)\n        return;\n    var stage = shape.getStage();\n    if (stage && stage.content) {\n    }\n    Captures.delete(pointerId);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('lostpointercapture', createEvent(new PointerEvent('lostpointercapture')));\n    }\n}\nexports.releaseCapture = releaseCapture;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Factory_1 = require(\"./Factory\");\nvar Container_1 = require(\"./Container\");\nvar Global_1 = require(\"./Global\");\nvar Canvas_1 = require(\"./Canvas\");\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\nvar Global_2 = require(\"./Global\");\nvar PointerEvents = require(\"./PointerEvents\");\nvar STAGE = 'Stage', STRING = 'string', PX = 'px', MOUSEOUT = 'mouseout', MOUSELEAVE = 'mouseleave', MOUSEOVER = 'mouseover', MOUSEENTER = 'mouseenter', MOUSEMOVE = 'mousemove', MOUSEDOWN = 'mousedown', MOUSEUP = 'mouseup', POINTERMOVE = 'pointermove', POINTERDOWN = 'pointerdown', POINTERUP = 'pointerup', POINTERCANCEL = 'pointercancel', LOSTPOINTERCAPTURE = 'lostpointercapture', CONTEXTMENU = 'contextmenu', CLICK = 'click', DBL_CLICK = 'dblclick', TOUCHSTART = 'touchstart', TOUCHEND = 'touchend', TAP = 'tap', DBL_TAP = 'dbltap', TOUCHMOVE = 'touchmove', WHEEL = 'wheel', CONTENT_MOUSEOUT = 'contentMouseout', CONTENT_MOUSEOVER = 'contentMouseover', CONTENT_MOUSEMOVE = 'contentMousemove', CONTENT_MOUSEDOWN = 'contentMousedown', CONTENT_MOUSEUP = 'contentMouseup', CONTENT_CONTEXTMENU = 'contentContextmenu', CONTENT_CLICK = 'contentClick', CONTENT_DBL_CLICK = 'contentDblclick', CONTENT_TOUCHSTART = 'contentTouchstart', CONTENT_TOUCHEND = 'contentTouchend', CONTENT_DBL_TAP = 'contentDbltap', CONTENT_TAP = 'contentTap', CONTENT_TOUCHMOVE = 'contentTouchmove', CONTENT_POINTERMOVE = 'contentPointermove', CONTENT_POINTERDOWN = 'contentPointerdown', CONTENT_POINTERUP = 'contentPointerup', CONTENT_WHEEL = 'contentWheel', RELATIVE = 'relative', KONVA_CONTENT = 'konvajs-content', SPACE = ' ', UNDERSCORE = '_', CONTAINER = 'container', MAX_LAYERS_NUMBER = 5, EMPTY_STRING = '', EVENTS = [\n    MOUSEENTER,\n    MOUSEDOWN,\n    MOUSEMOVE,\n    MOUSEUP,\n    MOUSEOUT,\n    TOUCHSTART,\n    TOUCHMOVE,\n    TOUCHEND,\n    MOUSEOVER,\n    WHEEL,\n    CONTEXTMENU,\n    POINTERDOWN,\n    POINTERMOVE,\n    POINTERUP,\n    POINTERCANCEL,\n    LOSTPOINTERCAPTURE\n], eventsLength = EVENTS.length;\nfunction addEvent(ctx, eventName) {\n    ctx.content.addEventListener(eventName, function (evt) {\n        ctx[UNDERSCORE + eventName](evt);\n    }, false);\n}\nvar NO_POINTERS_MESSAGE = \"Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);\";\nexports.stages = [];\nfunction checkNoClip(attrs) {\n    if (attrs === void 0) { attrs = {}; }\n    if (attrs.clipFunc || attrs.clipWidth || attrs.clipHeight) {\n        Util_1.Util.warn('Stage does not support clipping. Please use clip for Layers or Groups.');\n    }\n    return attrs;\n}\nvar Stage = (function (_super) {\n    __extends(Stage, _super);\n    function Stage(config) {\n        var _this = _super.call(this, checkNoClip(config)) || this;\n        _this._pointerPositions = [];\n        _this._changedPointerPositions = [];\n        _this._buildDOM();\n        _this._bindContentEvents();\n        exports.stages.push(_this);\n        _this.on('widthChange.konva heightChange.konva', _this._resizeDOM);\n        _this.on('visibleChange.konva', _this._checkVisibility);\n        _this.on('clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva', function () {\n            checkNoClip(_this.attrs);\n        });\n        _this._checkVisibility();\n        return _this;\n    }\n    Stage.prototype._validateAdd = function (child) {\n        var isLayer = child.getType() === 'Layer';\n        var isFastLayer = child.getType() === 'FastLayer';\n        var valid = isLayer || isFastLayer;\n        if (!valid) {\n            Util_1.Util.throw('You may only add layers to the stage.');\n        }\n    };\n    Stage.prototype._checkVisibility = function () {\n        if (!this.content) {\n            return;\n        }\n        var style = this.visible() ? '' : 'none';\n        this.content.style.display = style;\n    };\n    Stage.prototype.setContainer = function (container) {\n        if (typeof container === STRING) {\n            if (container.charAt(0) === '.') {\n                var className = container.slice(1);\n                container = document.getElementsByClassName(className)[0];\n            }\n            else {\n                var id;\n                if (container.charAt(0) !== '#') {\n                    id = container;\n                }\n                else {\n                    id = container.slice(1);\n                }\n                container = document.getElementById(id);\n            }\n            if (!container) {\n                throw 'Can not find container in document with id ' + id;\n            }\n        }\n        this._setAttr(CONTAINER, container);\n        if (this.content) {\n            if (this.content.parentElement) {\n                this.content.parentElement.removeChild(this.content);\n            }\n            container.appendChild(this.content);\n        }\n        return this;\n    };\n    Stage.prototype.shouldDrawHit = function () {\n        return true;\n    };\n    Stage.prototype.clear = function () {\n        var layers = this.children, len = layers.length, n;\n        for (n = 0; n < len; n++) {\n            layers[n].clear();\n        }\n        return this;\n    };\n    Stage.prototype.clone = function (obj) {\n        if (!obj) {\n            obj = {};\n        }\n        obj.container = document.createElement('div');\n        return Container_1.Container.prototype.clone.call(this, obj);\n    };\n    Stage.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        var content = this.content;\n        if (content && Util_1.Util._isInDocument(content)) {\n            this.container().removeChild(content);\n        }\n        var index = exports.stages.indexOf(this);\n        if (index > -1) {\n            exports.stages.splice(index, 1);\n        }\n        return this;\n    };\n    Stage.prototype.getPointerPosition = function () {\n        var pos = this._pointerPositions[0] || this._changedPointerPositions[0];\n        if (!pos) {\n            Util_1.Util.warn(NO_POINTERS_MESSAGE);\n            return null;\n        }\n        return {\n            x: pos.x,\n            y: pos.y\n        };\n    };\n    Stage.prototype._getPointerById = function (id) {\n        return this._pointerPositions.find(function (p) { return p.id === id; });\n    };\n    Stage.prototype.getPointersPositions = function () {\n        return this._pointerPositions;\n    };\n    Stage.prototype.getStage = function () {\n        return this;\n    };\n    Stage.prototype.getContent = function () {\n        return this.content;\n    };\n    Stage.prototype._toKonvaCanvas = function (config) {\n        config = config || {};\n        var x = config.x || 0, y = config.y || 0, canvas = new Canvas_1.SceneCanvas({\n            width: config.width || this.width(),\n            height: config.height || this.height(),\n            pixelRatio: config.pixelRatio || 1\n        }), _context = canvas.getContext()._context, layers = this.children;\n        if (x || y) {\n            _context.translate(-1 * x, -1 * y);\n        }\n        layers.each(function (layer) {\n            if (!layer.isVisible()) {\n                return;\n            }\n            var layerCanvas = layer._toKonvaCanvas(config);\n            _context.drawImage(layerCanvas._canvas, x, y, layerCanvas.getWidth() / layerCanvas.getPixelRatio(), layerCanvas.getHeight() / layerCanvas.getPixelRatio());\n        });\n        return canvas;\n    };\n    Stage.prototype.getIntersection = function (pos, selector) {\n        if (!pos) {\n            return null;\n        }\n        var layers = this.children, len = layers.length, end = len - 1, n, shape;\n        for (n = end; n >= 0; n--) {\n            shape = layers[n].getIntersection(pos, selector);\n            if (shape) {\n                return shape;\n            }\n        }\n        return null;\n    };\n    Stage.prototype._resizeDOM = function () {\n        var width = this.width();\n        var height = this.height();\n        if (this.content) {\n            this.content.style.width = width + PX;\n            this.content.style.height = height + PX;\n        }\n        this.bufferCanvas.setSize(width, height);\n        this.bufferHitCanvas.setSize(width, height);\n        this.children.each(function (layer) {\n            layer.setSize({ width: width, height: height });\n            layer.draw();\n        });\n    };\n    Stage.prototype.add = function (layer) {\n        if (arguments.length > 1) {\n            for (var i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        _super.prototype.add.call(this, layer);\n        var length = this.children.length;\n        if (length > MAX_LAYERS_NUMBER) {\n            Util_1.Util.warn('The stage has ' +\n                length +\n                ' layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group.');\n        }\n        layer.setSize({ width: this.width(), height: this.height() });\n        layer.draw();\n        if (Global_1.Konva.isBrowser) {\n            this.content.appendChild(layer.canvas._canvas);\n        }\n        return this;\n    };\n    Stage.prototype.getParent = function () {\n        return null;\n    };\n    Stage.prototype.getLayer = function () {\n        return null;\n    };\n    Stage.prototype.hasPointerCapture = function (pointerId) {\n        return PointerEvents.hasPointerCapture(pointerId, this);\n    };\n    Stage.prototype.setPointerCapture = function (pointerId) {\n        PointerEvents.setPointerCapture(pointerId, this);\n    };\n    Stage.prototype.releaseCapture = function (pointerId) {\n        PointerEvents.releaseCapture(pointerId, this);\n    };\n    Stage.prototype.getLayers = function () {\n        return this.getChildren();\n    };\n    Stage.prototype._bindContentEvents = function () {\n        if (!Global_1.Konva.isBrowser) {\n            return;\n        }\n        for (var n = 0; n < eventsLength; n++) {\n            addEvent(this, EVENTS[n]);\n        }\n    };\n    Stage.prototype._mouseenter = function (evt) {\n        this.setPointersPositions(evt);\n        this._fire(MOUSEENTER, { evt: evt, target: this, currentTarget: this });\n    };\n    Stage.prototype._mouseover = function (evt) {\n        this.setPointersPositions(evt);\n        this._fire(CONTENT_MOUSEOVER, { evt: evt });\n        this._fire(MOUSEOVER, { evt: evt, target: this, currentTarget: this });\n    };\n    Stage.prototype._mouseout = function (evt) {\n        var _a;\n        this.setPointersPositions(evt);\n        var targetShape = ((_a = this.targetShape) === null || _a === void 0 ? void 0 : _a.getStage()) ? this.targetShape : null;\n        var eventsEnabled = !DragAndDrop_1.DD.isDragging || Global_1.Konva.hitOnDragEnabled;\n        if (targetShape && eventsEnabled) {\n            targetShape._fireAndBubble(MOUSEOUT, { evt: evt });\n            targetShape._fireAndBubble(MOUSELEAVE, { evt: evt });\n            this._fire(MOUSELEAVE, { evt: evt, target: this, currentTarget: this });\n            this.targetShape = null;\n        }\n        else if (eventsEnabled) {\n            this._fire(MOUSELEAVE, {\n                evt: evt,\n                target: this,\n                currentTarget: this\n            });\n            this._fire(MOUSEOUT, {\n                evt: evt,\n                target: this,\n                currentTarget: this\n            });\n        }\n        this.pointerPos = undefined;\n        this._pointerPositions = [];\n        this._fire(CONTENT_MOUSEOUT, { evt: evt });\n    };\n    Stage.prototype._mousemove = function (evt) {\n        var _a;\n        if (Global_1.Konva.UA.ieMobile) {\n            return this._touchmove(evt);\n        }\n        this.setPointersPositions(evt);\n        var pointerId = Util_1.Util._getFirstPointerId(evt);\n        var shape;\n        var targetShape = ((_a = this.targetShape) === null || _a === void 0 ? void 0 : _a.getStage()) ? this.targetShape : null;\n        var eventsEnabled = !DragAndDrop_1.DD.isDragging || Global_1.Konva.hitOnDragEnabled;\n        if (eventsEnabled) {\n            shape = this.getIntersection(this.getPointerPosition());\n            if (shape && shape.isListening()) {\n                var differentTarget = targetShape !== shape;\n                if (eventsEnabled && differentTarget) {\n                    if (targetShape) {\n                        targetShape._fireAndBubble(MOUSEOUT, { evt: evt, pointerId: pointerId }, shape);\n                        targetShape._fireAndBubble(MOUSELEAVE, { evt: evt, pointerId: pointerId }, shape);\n                    }\n                    shape._fireAndBubble(MOUSEOVER, { evt: evt, pointerId: pointerId }, targetShape);\n                    shape._fireAndBubble(MOUSEENTER, { evt: evt, pointerId: pointerId }, targetShape);\n                    shape._fireAndBubble(MOUSEMOVE, { evt: evt, pointerId: pointerId });\n                    this.targetShape = shape;\n                }\n                else {\n                    shape._fireAndBubble(MOUSEMOVE, { evt: evt, pointerId: pointerId });\n                }\n            }\n            else {\n                if (targetShape && eventsEnabled) {\n                    targetShape._fireAndBubble(MOUSEOUT, { evt: evt, pointerId: pointerId });\n                    targetShape._fireAndBubble(MOUSELEAVE, { evt: evt, pointerId: pointerId });\n                    this._fire(MOUSEOVER, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId: pointerId\n                    });\n                    this.targetShape = null;\n                }\n                this._fire(MOUSEMOVE, {\n                    evt: evt,\n                    target: this,\n                    currentTarget: this,\n                    pointerId: pointerId\n                });\n            }\n            this._fire(CONTENT_MOUSEMOVE, { evt: evt });\n        }\n        if (evt.cancelable) {\n            evt.preventDefault();\n        }\n    };\n    Stage.prototype._mousedown = function (evt) {\n        if (Global_1.Konva.UA.ieMobile) {\n            return this._touchstart(evt);\n        }\n        this.setPointersPositions(evt);\n        var pointerId = Util_1.Util._getFirstPointerId(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        DragAndDrop_1.DD.justDragged = false;\n        Global_1.Konva.listenClickTap = true;\n        if (shape && shape.isListening()) {\n            this.clickStartShape = shape;\n            shape._fireAndBubble(MOUSEDOWN, { evt: evt, pointerId: pointerId });\n        }\n        else {\n            this._fire(MOUSEDOWN, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: pointerId\n            });\n        }\n        this._fire(CONTENT_MOUSEDOWN, { evt: evt });\n    };\n    Stage.prototype._mouseup = function (evt) {\n        if (Global_1.Konva.UA.ieMobile) {\n            return this._touchend(evt);\n        }\n        this.setPointersPositions(evt);\n        var pointerId = Util_1.Util._getFirstPointerId(evt);\n        var shape = this.getIntersection(this.getPointerPosition()), clickStartShape = this.clickStartShape, clickEndShape = this.clickEndShape, fireDblClick = false;\n        if (Global_1.Konva.inDblClickWindow) {\n            fireDblClick = true;\n            clearTimeout(this.dblTimeout);\n        }\n        else if (!DragAndDrop_1.DD.justDragged) {\n            Global_1.Konva.inDblClickWindow = true;\n            clearTimeout(this.dblTimeout);\n        }\n        this.dblTimeout = setTimeout(function () {\n            Global_1.Konva.inDblClickWindow = false;\n        }, Global_1.Konva.dblClickWindow);\n        if (shape && shape.isListening()) {\n            this.clickEndShape = shape;\n            shape._fireAndBubble(MOUSEUP, { evt: evt, pointerId: pointerId });\n            if (Global_1.Konva.listenClickTap &&\n                clickStartShape &&\n                clickStartShape._id === shape._id) {\n                shape._fireAndBubble(CLICK, { evt: evt, pointerId: pointerId });\n                if (fireDblClick && clickEndShape && clickEndShape === shape) {\n                    shape._fireAndBubble(DBL_CLICK, { evt: evt, pointerId: pointerId });\n                }\n            }\n        }\n        else {\n            this._fire(MOUSEUP, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: pointerId\n            });\n            if (Global_1.Konva.listenClickTap) {\n                this._fire(CLICK, {\n                    evt: evt,\n                    target: this,\n                    currentTarget: this,\n                    pointerId: pointerId\n                });\n            }\n            if (fireDblClick) {\n                this._fire(DBL_CLICK, {\n                    evt: evt,\n                    target: this,\n                    currentTarget: this,\n                    pointerId: pointerId\n                });\n            }\n        }\n        this._fire(CONTENT_MOUSEUP, { evt: evt });\n        if (Global_1.Konva.listenClickTap) {\n            this._fire(CONTENT_CLICK, { evt: evt });\n            if (fireDblClick) {\n                this._fire(CONTENT_DBL_CLICK, { evt: evt });\n            }\n        }\n        Global_1.Konva.listenClickTap = false;\n        if (evt.cancelable) {\n            evt.preventDefault();\n        }\n    };\n    Stage.prototype._contextmenu = function (evt) {\n        this.setPointersPositions(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(CONTEXTMENU, { evt: evt });\n        }\n        else {\n            this._fire(CONTEXTMENU, {\n                evt: evt,\n                target: this,\n                currentTarget: this\n            });\n        }\n        this._fire(CONTENT_CONTEXTMENU, { evt: evt });\n    };\n    Stage.prototype._touchstart = function (evt) {\n        var _this = this;\n        this.setPointersPositions(evt);\n        var triggeredOnShape = false;\n        this._changedPointerPositions.forEach(function (pos) {\n            var shape = _this.getIntersection(pos);\n            Global_1.Konva.listenClickTap = true;\n            DragAndDrop_1.DD.justDragged = false;\n            var hasShape = shape && shape.isListening();\n            if (!hasShape) {\n                return;\n            }\n            if (Global_1.Konva.captureTouchEventsEnabled) {\n                shape.setPointerCapture(pos.id);\n            }\n            _this.tapStartShape = shape;\n            shape._fireAndBubble(TOUCHSTART, { evt: evt, pointerId: pos.id }, _this);\n            triggeredOnShape = true;\n            if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n                evt.preventDefault();\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(TOUCHSTART, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id\n            });\n        }\n        this._fire(CONTENT_TOUCHSTART, { evt: evt });\n    };\n    Stage.prototype._touchmove = function (evt) {\n        var _this = this;\n        this.setPointersPositions(evt);\n        var eventsEnabled = !DragAndDrop_1.DD.isDragging || Global_1.Konva.hitOnDragEnabled;\n        if (eventsEnabled) {\n            var triggeredOnShape = false;\n            var processedShapesIds = {};\n            this._changedPointerPositions.forEach(function (pos) {\n                var shape = PointerEvents.getCapturedShape(pos.id) || _this.getIntersection(pos);\n                var hasShape = shape && shape.isListening();\n                if (!hasShape) {\n                    return;\n                }\n                if (processedShapesIds[shape._id]) {\n                    return;\n                }\n                processedShapesIds[shape._id] = true;\n                shape._fireAndBubble(TOUCHMOVE, { evt: evt, pointerId: pos.id });\n                triggeredOnShape = true;\n                if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n                    evt.preventDefault();\n                }\n            });\n            if (!triggeredOnShape) {\n                this._fire(TOUCHMOVE, {\n                    evt: evt,\n                    target: this,\n                    currentTarget: this,\n                    pointerId: this._changedPointerPositions[0].id\n                });\n            }\n            this._fire(CONTENT_TOUCHMOVE, { evt: evt });\n        }\n        if (DragAndDrop_1.DD.isDragging && DragAndDrop_1.DD.node.preventDefault() && evt.cancelable) {\n            evt.preventDefault();\n        }\n    };\n    Stage.prototype._touchend = function (evt) {\n        var _this = this;\n        this.setPointersPositions(evt);\n        var clickEndShape = this.clickEndShape, fireDblClick = false;\n        if (Global_1.Konva.inDblClickWindow) {\n            fireDblClick = true;\n            clearTimeout(this.dblTimeout);\n        }\n        else if (!DragAndDrop_1.DD.justDragged) {\n            Global_1.Konva.inDblClickWindow = true;\n            clearTimeout(this.dblTimeout);\n        }\n        this.dblTimeout = setTimeout(function () {\n            Global_1.Konva.inDblClickWindow = false;\n        }, Global_1.Konva.dblClickWindow);\n        var triggeredOnShape = false;\n        var processedShapesIds = {};\n        var tapTriggered = false;\n        var dblTapTriggered = false;\n        this._changedPointerPositions.forEach(function (pos) {\n            var shape = PointerEvents.getCapturedShape(pos.id) ||\n                _this.getIntersection(pos);\n            if (shape) {\n                shape.releaseCapture(pos.id);\n            }\n            var hasShape = shape && shape.isListening();\n            if (!hasShape) {\n                return;\n            }\n            if (processedShapesIds[shape._id]) {\n                return;\n            }\n            processedShapesIds[shape._id] = true;\n            _this.clickEndShape = shape;\n            shape._fireAndBubble(TOUCHEND, { evt: evt, pointerId: pos.id });\n            triggeredOnShape = true;\n            if (Global_1.Konva.listenClickTap && shape === _this.tapStartShape) {\n                tapTriggered = true;\n                shape._fireAndBubble(TAP, { evt: evt, pointerId: pos.id });\n                if (fireDblClick && clickEndShape && clickEndShape === shape) {\n                    dblTapTriggered = true;\n                    shape._fireAndBubble(DBL_TAP, { evt: evt, pointerId: pos.id });\n                }\n            }\n            if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n                evt.preventDefault();\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(TOUCHEND, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id\n            });\n        }\n        if (Global_1.Konva.listenClickTap && !tapTriggered) {\n            this._fire(TAP, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id\n            });\n        }\n        if (fireDblClick && !dblTapTriggered) {\n            this._fire(DBL_TAP, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id\n            });\n        }\n        this._fire(CONTENT_TOUCHEND, { evt: evt });\n        if (Global_1.Konva.listenClickTap) {\n            this._fire(CONTENT_TAP, { evt: evt });\n            if (fireDblClick) {\n                this._fire(CONTENT_DBL_TAP, { evt: evt });\n            }\n        }\n        Global_1.Konva.listenClickTap = false;\n    };\n    Stage.prototype._wheel = function (evt) {\n        this.setPointersPositions(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(WHEEL, { evt: evt });\n        }\n        else {\n            this._fire(WHEEL, {\n                evt: evt,\n                target: this,\n                currentTarget: this\n            });\n        }\n        this._fire(CONTENT_WHEEL, { evt: evt });\n    };\n    Stage.prototype._pointerdown = function (evt) {\n        if (!Global_1.Konva._pointerEventsEnabled) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERDOWN, PointerEvents.createEvent(evt));\n        }\n    };\n    Stage.prototype._pointermove = function (evt) {\n        if (!Global_1.Konva._pointerEventsEnabled) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERMOVE, PointerEvents.createEvent(evt));\n        }\n    };\n    Stage.prototype._pointerup = function (evt) {\n        if (!Global_1.Konva._pointerEventsEnabled) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n        }\n        PointerEvents.releaseCapture(evt.pointerId);\n    };\n    Stage.prototype._pointercancel = function (evt) {\n        if (!Global_1.Konva._pointerEventsEnabled) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n        }\n        PointerEvents.releaseCapture(evt.pointerId);\n    };\n    Stage.prototype._lostpointercapture = function (evt) {\n        PointerEvents.releaseCapture(evt.pointerId);\n    };\n    Stage.prototype.setPointersPositions = function (evt) {\n        var _this = this;\n        var contentPosition = this._getContentPosition(), x = null, y = null;\n        evt = evt ? evt : window.event;\n        if (evt.touches !== undefined) {\n            this._pointerPositions = [];\n            this._changedPointerPositions = [];\n            Util_1.Collection.prototype.each.call(evt.touches, function (touch) {\n                _this._pointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY\n                });\n            });\n            Util_1.Collection.prototype.each.call(evt.changedTouches || evt.touches, function (touch) {\n                _this._changedPointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY\n                });\n            });\n        }\n        else {\n            x = (evt.clientX - contentPosition.left) / contentPosition.scaleX;\n            y = (evt.clientY - contentPosition.top) / contentPosition.scaleY;\n            this.pointerPos = {\n                x: x,\n                y: y\n            };\n            this._pointerPositions = [{ x: x, y: y, id: Util_1.Util._getFirstPointerId(evt) }];\n            this._changedPointerPositions = [\n                { x: x, y: y, id: Util_1.Util._getFirstPointerId(evt) }\n            ];\n        }\n    };\n    Stage.prototype._setPointerPosition = function (evt) {\n        Util_1.Util.warn('Method _setPointerPosition is deprecated. Use \"stage.setPointersPositions(event)\" instead.');\n        this.setPointersPositions(evt);\n    };\n    Stage.prototype._getContentPosition = function () {\n        if (!this.content || !this.content.getBoundingClientRect) {\n            return {\n                top: 0,\n                left: 0,\n                scaleX: 1,\n                scaleY: 1\n            };\n        }\n        var rect = this.content.getBoundingClientRect();\n        return {\n            top: rect.top,\n            left: rect.left,\n            scaleX: rect.width / this.content.clientWidth || 1,\n            scaleY: rect.height / this.content.clientHeight || 1\n        };\n    };\n    Stage.prototype._buildDOM = function () {\n        this.bufferCanvas = new Canvas_1.SceneCanvas({\n            width: this.width(),\n            height: this.height()\n        });\n        this.bufferHitCanvas = new Canvas_1.HitCanvas({\n            pixelRatio: 1,\n            width: this.width(),\n            height: this.height()\n        });\n        if (!Global_1.Konva.isBrowser) {\n            return;\n        }\n        var container = this.container();\n        if (!container) {\n            throw 'Stage has no container. A container is required.';\n        }\n        container.innerHTML = EMPTY_STRING;\n        this.content = document.createElement('div');\n        this.content.style.position = RELATIVE;\n        this.content.style.userSelect = 'none';\n        this.content.className = KONVA_CONTENT;\n        this.content.setAttribute('role', 'presentation');\n        container.appendChild(this.content);\n        this._resizeDOM();\n    };\n    Stage.prototype.cache = function () {\n        Util_1.Util.warn('Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.');\n        return this;\n    };\n    Stage.prototype.clearCache = function () {\n        return this;\n    };\n    Stage.prototype.batchDraw = function () {\n        this.children.each(function (layer) {\n            layer.batchDraw();\n        });\n        return this;\n    };\n    return Stage;\n}(Container_1.Container));\nexports.Stage = Stage;\nStage.prototype.nodeType = STAGE;\nGlobal_2._registerNode(Stage);\nFactory_1.Factory.addGetterSetter(Stage, 'container');\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Container_1 = require(\"./Container\");\nvar Node_1 = require(\"./Node\");\nvar Factory_1 = require(\"./Factory\");\nvar Canvas_1 = require(\"./Canvas\");\nvar BaseLayer = (function (_super) {\n    __extends(BaseLayer, _super);\n    function BaseLayer(config) {\n        var _this = _super.call(this, config) || this;\n        _this.canvas = new Canvas_1.SceneCanvas();\n        _this._waitingForDraw = false;\n        _this.on('visibleChange', _this._checkVisibility);\n        _this._checkVisibility();\n        _this.on('imageSmoothingEnabledChange', _this._setSmoothEnabled);\n        _this._setSmoothEnabled();\n        return _this;\n    }\n    BaseLayer.prototype.createPNGStream = function () {\n        var c = this.canvas._canvas;\n        return c.createPNGStream();\n    };\n    BaseLayer.prototype.getCanvas = function () {\n        return this.canvas;\n    };\n    BaseLayer.prototype.getHitCanvas = function () {\n        return this.hitCanvas;\n    };\n    BaseLayer.prototype.getContext = function () {\n        return this.getCanvas().getContext();\n    };\n    BaseLayer.prototype.clear = function (bounds) {\n        this.getContext().clear(bounds);\n        return this;\n    };\n    BaseLayer.prototype.setZIndex = function (index) {\n        _super.prototype.setZIndex.call(this, index);\n        var stage = this.getStage();\n        if (stage) {\n            stage.content.removeChild(this.getCanvas()._canvas);\n            if (index < stage.children.length - 1) {\n                stage.content.insertBefore(this.getCanvas()._canvas, stage.children[index + 1].getCanvas()._canvas);\n            }\n            else {\n                stage.content.appendChild(this.getCanvas()._canvas);\n            }\n        }\n        return this;\n    };\n    BaseLayer.prototype.moveToTop = function () {\n        Node_1.Node.prototype.moveToTop.call(this);\n        var stage = this.getStage();\n        if (stage) {\n            stage.content.removeChild(this.getCanvas()._canvas);\n            stage.content.appendChild(this.getCanvas()._canvas);\n        }\n        return true;\n    };\n    BaseLayer.prototype.moveUp = function () {\n        var moved = Node_1.Node.prototype.moveUp.call(this);\n        if (!moved) {\n            return false;\n        }\n        var stage = this.getStage();\n        if (!stage) {\n            return false;\n        }\n        stage.content.removeChild(this.getCanvas()._canvas);\n        if (this.index < stage.children.length - 1) {\n            stage.content.insertBefore(this.getCanvas()._canvas, stage.children[this.index + 1].getCanvas()._canvas);\n        }\n        else {\n            stage.content.appendChild(this.getCanvas()._canvas);\n        }\n        return true;\n    };\n    BaseLayer.prototype.moveDown = function () {\n        if (Node_1.Node.prototype.moveDown.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                stage.content.removeChild(this.getCanvas()._canvas);\n                stage.content.insertBefore(this.getCanvas()._canvas, children[this.index + 1].getCanvas()._canvas);\n            }\n            return true;\n        }\n        return false;\n    };\n    BaseLayer.prototype.moveToBottom = function () {\n        if (Node_1.Node.prototype.moveToBottom.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                stage.content.removeChild(this.getCanvas()._canvas);\n                stage.content.insertBefore(this.getCanvas()._canvas, children[1].getCanvas()._canvas);\n            }\n            return true;\n        }\n        return false;\n    };\n    BaseLayer.prototype.getLayer = function () {\n        return this;\n    };\n    BaseLayer.prototype.hitGraphEnabled = function () {\n        return true;\n    };\n    BaseLayer.prototype.remove = function () {\n        var _canvas = this.getCanvas()._canvas;\n        Node_1.Node.prototype.remove.call(this);\n        if (_canvas && _canvas.parentNode && Util_1.Util._isInDocument(_canvas)) {\n            _canvas.parentNode.removeChild(_canvas);\n        }\n        return this;\n    };\n    BaseLayer.prototype.getStage = function () {\n        return this.parent;\n    };\n    BaseLayer.prototype.setSize = function (_a) {\n        var width = _a.width, height = _a.height;\n        this.canvas.setSize(width, height);\n        this._setSmoothEnabled();\n        return this;\n    };\n    BaseLayer.prototype._toKonvaCanvas = function (config) {\n        config = config || {};\n        config.width = config.width || this.getWidth();\n        config.height = config.height || this.getHeight();\n        config.x = config.x !== undefined ? config.x : this.x();\n        config.y = config.y !== undefined ? config.y : this.y();\n        return Node_1.Node.prototype._toKonvaCanvas.call(this, config);\n    };\n    BaseLayer.prototype._checkVisibility = function () {\n        var visible = this.visible();\n        if (visible) {\n            this.canvas._canvas.style.display = 'block';\n        }\n        else {\n            this.canvas._canvas.style.display = 'none';\n        }\n    };\n    BaseLayer.prototype._setSmoothEnabled = function () {\n        this.getContext()._context.imageSmoothingEnabled = this.imageSmoothingEnabled();\n    };\n    BaseLayer.prototype.getWidth = function () {\n        if (this.parent) {\n            return this.parent.width();\n        }\n    };\n    BaseLayer.prototype.setWidth = function () {\n        Util_1.Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.');\n    };\n    BaseLayer.prototype.getHeight = function () {\n        if (this.parent) {\n            return this.parent.height();\n        }\n    };\n    BaseLayer.prototype.setHeight = function () {\n        Util_1.Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.');\n    };\n    BaseLayer.prototype.getIntersection = function (pos, selector) {\n        return null;\n    };\n    BaseLayer.prototype.batchDraw = function () {\n        var _this = this;\n        if (!this._waitingForDraw) {\n            this._waitingForDraw = true;\n            Util_1.Util.requestAnimFrame(function () {\n                _this.draw();\n                _this._waitingForDraw = false;\n            });\n        }\n        return this;\n    };\n    BaseLayer.prototype._applyTransform = function (shape, context, top) {\n        var m = shape.getAbsoluteTransform(top).getMatrix();\n        context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n    };\n    return BaseLayer;\n}(Container_1.Container));\nexports.BaseLayer = BaseLayer;\nBaseLayer.prototype.nodeType = 'BaseLayer';\nFactory_1.Factory.addGetterSetter(BaseLayer, 'imageSmoothingEnabled', true);\nFactory_1.Factory.addGetterSetter(BaseLayer, 'clearBeforeDraw', true);\nUtil_1.Collection.mapMethods(BaseLayer);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Factory_1 = require(\"./Factory\");\nvar Node_1 = require(\"./Node\");\nvar Validators_1 = require(\"./Validators\");\nvar Global_1 = require(\"./Global\");\nvar PointerEvents = require(\"./PointerEvents\");\nvar HAS_SHADOW = 'hasShadow';\nvar SHADOW_RGBA = 'shadowRGBA';\nvar patternImage = 'patternImage';\nvar linearGradient = 'linearGradient';\nvar radialGradient = 'radialGradient';\nvar dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = Util_1.Util.createCanvasElement().getContext('2d');\n    return dummyContext;\n}\nexports.shapes = {};\nfunction _fillFunc(context) {\n    context.fill();\n}\nfunction _strokeFunc(context) {\n    context.stroke();\n}\nfunction _fillFuncHit(context) {\n    context.fill();\n}\nfunction _strokeFuncHit(context) {\n    context.stroke();\n}\nfunction _clearHasShadowCache() {\n    this._clearCache(HAS_SHADOW);\n}\nfunction _clearGetShadowRGBACache() {\n    this._clearCache(SHADOW_RGBA);\n}\nfunction _clearFillPatternCache() {\n    this._clearCache(patternImage);\n}\nfunction _clearLinearGradientCache() {\n    this._clearCache(linearGradient);\n}\nfunction _clearRadialGradientCache() {\n    this._clearCache(radialGradient);\n}\nvar Shape = (function (_super) {\n    __extends(Shape, _super);\n    function Shape(config) {\n        var _this = _super.call(this, config) || this;\n        var key;\n        while (true) {\n            key = Util_1.Util.getRandomColor();\n            if (key && !(key in exports.shapes)) {\n                break;\n            }\n        }\n        _this.colorKey = key;\n        exports.shapes[key] = _this;\n        _this.on('shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearHasShadowCache);\n        _this.on('shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearGetShadowRGBACache);\n        _this.on('fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva', _clearFillPatternCache);\n        _this.on('fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva', _clearLinearGradientCache);\n        _this.on('fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva', _clearRadialGradientCache);\n        return _this;\n    }\n    Shape.prototype.getContext = function () {\n        return this.getLayer().getContext();\n    };\n    Shape.prototype.getCanvas = function () {\n        return this.getLayer().getCanvas();\n    };\n    Shape.prototype.getSceneFunc = function () {\n        return this.attrs.sceneFunc || this['_sceneFunc'];\n    };\n    Shape.prototype.getHitFunc = function () {\n        return this.attrs.hitFunc || this['_hitFunc'];\n    };\n    Shape.prototype.hasShadow = function () {\n        return this._getCache(HAS_SHADOW, this._hasShadow);\n    };\n    Shape.prototype._hasShadow = function () {\n        return (this.shadowEnabled() &&\n            this.shadowOpacity() !== 0 &&\n            !!(this.shadowColor() ||\n                this.shadowBlur() ||\n                this.shadowOffsetX() ||\n                this.shadowOffsetY()));\n    };\n    Shape.prototype._getFillPattern = function () {\n        return this._getCache(patternImage, this.__getFillPattern);\n    };\n    Shape.prototype.__getFillPattern = function () {\n        if (this.fillPatternImage()) {\n            var ctx = getDummyContext();\n            var pattern = ctx.createPattern(this.fillPatternImage(), this.fillPatternRepeat() || 'repeat');\n            return pattern;\n        }\n    };\n    Shape.prototype._getLinearGradient = function () {\n        return this._getCache(linearGradient, this.__getLinearGradient);\n    };\n    Shape.prototype.__getLinearGradient = function () {\n        var colorStops = this.fillLinearGradientColorStops();\n        if (colorStops) {\n            var ctx = getDummyContext();\n            var start = this.fillLinearGradientStartPoint();\n            var end = this.fillLinearGradientEndPoint();\n            var grd = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    };\n    Shape.prototype._getRadialGradient = function () {\n        return this._getCache(radialGradient, this.__getRadialGradient);\n    };\n    Shape.prototype.__getRadialGradient = function () {\n        var colorStops = this.fillRadialGradientColorStops();\n        if (colorStops) {\n            var ctx = getDummyContext();\n            var start = this.fillRadialGradientStartPoint();\n            var end = this.fillRadialGradientEndPoint();\n            var grd = ctx.createRadialGradient(start.x, start.y, this.fillRadialGradientStartRadius(), end.x, end.y, this.fillRadialGradientEndRadius());\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    };\n    Shape.prototype.getShadowRGBA = function () {\n        return this._getCache(SHADOW_RGBA, this._getShadowRGBA);\n    };\n    Shape.prototype._getShadowRGBA = function () {\n        if (this.hasShadow()) {\n            var rgba = Util_1.Util.colorToRGBA(this.shadowColor());\n            return ('rgba(' +\n                rgba.r +\n                ',' +\n                rgba.g +\n                ',' +\n                rgba.b +\n                ',' +\n                rgba.a * (this.shadowOpacity() || 1) +\n                ')');\n        }\n    };\n    Shape.prototype.hasFill = function () {\n        return (this.fillEnabled() &&\n            !!(this.fill() ||\n                this.fillPatternImage() ||\n                this.fillLinearGradientColorStops() ||\n                this.fillRadialGradientColorStops()));\n    };\n    Shape.prototype.hasStroke = function () {\n        return (this.strokeEnabled() &&\n            this.strokeWidth() &&\n            !!(this.stroke() || this.strokeLinearGradientColorStops()));\n    };\n    Shape.prototype.hasHitStroke = function () {\n        var width = this.hitStrokeWidth();\n        if (width === 'auto') {\n            return this.hasStroke();\n        }\n        return this.strokeEnabled() && !!width;\n    };\n    Shape.prototype.intersects = function (point) {\n        var stage = this.getStage(), bufferHitCanvas = stage.bufferHitCanvas, p;\n        bufferHitCanvas.getContext().clear();\n        this.drawHit(bufferHitCanvas);\n        p = bufferHitCanvas.context.getImageData(Math.round(point.x), Math.round(point.y), 1, 1).data;\n        return p[3] > 0;\n    };\n    Shape.prototype.destroy = function () {\n        Node_1.Node.prototype.destroy.call(this);\n        delete exports.shapes[this.colorKey];\n        delete this.colorKey;\n        return this;\n    };\n    Shape.prototype._useBufferCanvas = function (caching) {\n        return !!((!caching || this.hasShadow()) &&\n            this.perfectDrawEnabled() &&\n            this.getAbsoluteOpacity() !== 1 &&\n            this.hasFill() &&\n            this.hasStroke() &&\n            this.getStage());\n    };\n    Shape.prototype.setStrokeHitEnabled = function (val) {\n        Util_1.Util.warn('strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead.');\n        if (val) {\n            this.hitStrokeWidth('auto');\n        }\n        else {\n            this.hitStrokeWidth(0);\n        }\n    };\n    Shape.prototype.getStrokeHitEnabled = function () {\n        if (this.hitStrokeWidth() === 0) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    };\n    Shape.prototype.getSelfRect = function () {\n        var size = this.size();\n        return {\n            x: this._centroid ? -size.width / 2 : 0,\n            y: this._centroid ? -size.height / 2 : 0,\n            width: size.width,\n            height: size.height\n        };\n    };\n    Shape.prototype.getClientRect = function (attrs) {\n        attrs = attrs || {};\n        var skipTransform = attrs.skipTransform;\n        var relativeTo = attrs.relativeTo;\n        var fillRect = this.getSelfRect();\n        var applyStroke = !attrs.skipStroke && this.hasStroke();\n        var strokeWidth = (applyStroke && this.strokeWidth()) || 0;\n        var fillAndStrokeWidth = fillRect.width + strokeWidth;\n        var fillAndStrokeHeight = fillRect.height + strokeWidth;\n        var applyShadow = !attrs.skipShadow && this.hasShadow();\n        var shadowOffsetX = applyShadow ? this.shadowOffsetX() : 0;\n        var shadowOffsetY = applyShadow ? this.shadowOffsetY() : 0;\n        var preWidth = fillAndStrokeWidth + Math.abs(shadowOffsetX);\n        var preHeight = fillAndStrokeHeight + Math.abs(shadowOffsetY);\n        var blurRadius = (applyShadow && this.shadowBlur()) || 0;\n        var width = preWidth + blurRadius * 2;\n        var height = preHeight + blurRadius * 2;\n        var roundingOffset = 0;\n        if (Math.round(strokeWidth / 2) !== strokeWidth / 2) {\n            roundingOffset = 1;\n        }\n        var rect = {\n            width: width + roundingOffset,\n            height: height + roundingOffset,\n            x: -Math.round(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetX, 0) +\n                fillRect.x,\n            y: -Math.round(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetY, 0) +\n                fillRect.y\n        };\n        if (!skipTransform) {\n            return this._transformedRect(rect, relativeTo);\n        }\n        return rect;\n    };\n    Shape.prototype.drawScene = function (can, top, caching, skipBuffer) {\n        var layer = this.getLayer(), canvas = can || layer.getCanvas(), context = canvas.getContext(), cachedCanvas = this._getCanvasCache(), drawFunc = this.sceneFunc(), hasShadow = this.hasShadow(), hasStroke = this.hasStroke(), stage, bufferCanvas, bufferContext;\n        if (!this.isVisible() && !caching) {\n            return this;\n        }\n        if (cachedCanvas) {\n            context.save();\n            layer._applyTransform(this, context, top);\n            this._drawCachedSceneCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        if (this._useBufferCanvas(caching) && !skipBuffer) {\n            stage = this.getStage();\n            bufferCanvas = stage.bufferCanvas;\n            bufferContext = bufferCanvas.getContext();\n            bufferContext.clear();\n            bufferContext.save();\n            bufferContext._applyLineJoin(this);\n            if (!caching) {\n                if (layer) {\n                    layer._applyTransform(this, bufferContext, top);\n                }\n                else {\n                    var m = this.getAbsoluteTransform(top).getMatrix();\n                    context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n                }\n            }\n            drawFunc.call(this, bufferContext, this);\n            bufferContext.restore();\n            var ratio = bufferCanvas.pixelRatio;\n            if (hasShadow && !canvas.hitCanvas) {\n                context.save();\n                context._applyShadow(this);\n                context._applyOpacity(this);\n                context._applyGlobalCompositeOperation(this);\n                context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n                context.restore();\n            }\n            else {\n                context._applyOpacity(this);\n                context._applyGlobalCompositeOperation(this);\n                context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n            }\n        }\n        else {\n            context._applyLineJoin(this);\n            if (!caching) {\n                if (layer) {\n                    layer._applyTransform(this, context, top);\n                }\n                else {\n                    var o = this.getAbsoluteTransform(top).getMatrix();\n                    context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n                }\n            }\n            if (hasShadow && hasStroke && !canvas.hitCanvas) {\n                context.save();\n                if (!caching) {\n                    context._applyOpacity(this);\n                    context._applyGlobalCompositeOperation(this);\n                }\n                context._applyShadow(this);\n                drawFunc.call(this, context, this);\n                context.restore();\n                if (this.hasFill() && this.shadowForStrokeEnabled()) {\n                    drawFunc.call(this, context, this);\n                }\n            }\n            else if (hasShadow && !canvas.hitCanvas) {\n                context.save();\n                if (!caching) {\n                    context._applyOpacity(this);\n                    context._applyGlobalCompositeOperation(this);\n                }\n                context._applyShadow(this);\n                drawFunc.call(this, context, this);\n                context.restore();\n            }\n            else {\n                if (!caching) {\n                    context._applyOpacity(this);\n                    context._applyGlobalCompositeOperation(this);\n                }\n                drawFunc.call(this, context, this);\n            }\n        }\n        context.restore();\n        return this;\n    };\n    Shape.prototype.drawHit = function (can, top, caching) {\n        var layer = this.getLayer(), canvas = can || layer.hitCanvas, context = canvas && canvas.getContext(), drawFunc = this.hitFunc() || this.sceneFunc(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (!this.colorKey) {\n            console.log(this);\n            Util_1.Util.warn('Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()');\n        }\n        if (!this.shouldDrawHit() && !caching) {\n            return this;\n        }\n        if (cachedHitCanvas) {\n            context.save();\n            layer._applyTransform(this, context, top);\n            this._drawCachedHitCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        context._applyLineJoin(this);\n        if (!caching) {\n            if (layer) {\n                layer._applyTransform(this, context, top);\n            }\n            else {\n                var o = this.getAbsoluteTransform(top).getMatrix();\n                context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n            }\n        }\n        drawFunc.call(this, context, this);\n        context.restore();\n        return this;\n    };\n    Shape.prototype.drawHitFromCache = function (alphaThreshold) {\n        if (alphaThreshold === void 0) { alphaThreshold = 0; }\n        var cachedCanvas = this._getCanvasCache(), sceneCanvas = this._getCachedSceneCanvas(), hitCanvas = cachedCanvas.hit, hitContext = hitCanvas.getContext(), hitWidth = hitCanvas.getWidth(), hitHeight = hitCanvas.getHeight(), hitImageData, hitData, len, rgbColorKey, i, alpha;\n        hitContext.clear();\n        hitContext.drawImage(sceneCanvas._canvas, 0, 0, hitWidth, hitHeight);\n        try {\n            hitImageData = hitContext.getImageData(0, 0, hitWidth, hitHeight);\n            hitData = hitImageData.data;\n            len = hitData.length;\n            rgbColorKey = Util_1.Util._hexToRgb(this.colorKey);\n            for (i = 0; i < len; i += 4) {\n                alpha = hitData[i + 3];\n                if (alpha > alphaThreshold) {\n                    hitData[i] = rgbColorKey.r;\n                    hitData[i + 1] = rgbColorKey.g;\n                    hitData[i + 2] = rgbColorKey.b;\n                    hitData[i + 3] = 255;\n                }\n                else {\n                    hitData[i + 3] = 0;\n                }\n            }\n            hitContext.putImageData(hitImageData, 0, 0);\n        }\n        catch (e) {\n            Util_1.Util.error('Unable to draw hit graph from cached scene canvas. ' + e.message);\n        }\n        return this;\n    };\n    Shape.prototype.hasPointerCapture = function (pointerId) {\n        return PointerEvents.hasPointerCapture(pointerId, this);\n    };\n    Shape.prototype.setPointerCapture = function (pointerId) {\n        PointerEvents.setPointerCapture(pointerId, this);\n    };\n    Shape.prototype.releaseCapture = function (pointerId) {\n        PointerEvents.releaseCapture(pointerId, this);\n    };\n    return Shape;\n}(Node_1.Node));\nexports.Shape = Shape;\nShape.prototype._fillFunc = _fillFunc;\nShape.prototype._strokeFunc = _strokeFunc;\nShape.prototype._fillFuncHit = _fillFuncHit;\nShape.prototype._strokeFuncHit = _strokeFuncHit;\nShape.prototype._centroid = false;\nShape.prototype.nodeType = 'Shape';\nGlobal_1._registerNode(Shape);\nFactory_1.Factory.addGetterSetter(Shape, 'stroke', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'strokeWidth', 2, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'hitStrokeWidth', 'auto', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'strokeHitEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'perfectDrawEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowForStrokeEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'lineJoin');\nFactory_1.Factory.addGetterSetter(Shape, 'lineCap');\nFactory_1.Factory.addGetterSetter(Shape, 'sceneFunc');\nFactory_1.Factory.addGetterSetter(Shape, 'hitFunc');\nFactory_1.Factory.addGetterSetter(Shape, 'dash');\nFactory_1.Factory.addGetterSetter(Shape, 'dashOffset', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowColor', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowBlur', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOpacity', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'shadowOffset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOffsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOffsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternImage');\nFactory_1.Factory.addGetterSetter(Shape, 'fill', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartRadius', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndRadius', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternRepeat', 'repeat');\nFactory_1.Factory.addGetterSetter(Shape, 'fillEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'shadowEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'dashEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeScaleEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPriority', 'color');\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillPatternOffset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternOffsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternOffsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillPatternScale', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternScaleX', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternScaleY', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientStartPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientStartPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientEndPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientEndPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientStartPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientEndPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternRotation', 0);\nFactory_1.Factory.backCompat(Shape, {\n    dashArray: 'dash',\n    getDashArray: 'getDash',\n    setDashArray: 'getDash',\n    drawFunc: 'sceneFunc',\n    getDrawFunc: 'getSceneFunc',\n    setDrawFunc: 'setSceneFunc',\n    drawHitFunc: 'hitFunc',\n    getDrawHitFunc: 'getHitFunc',\n    setDrawHitFunc: 'setHitFunc'\n});\nUtil_1.Collection.mapMethods(Shape);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Container_1 = require(\"./Container\");\nvar Factory_1 = require(\"./Factory\");\nvar BaseLayer_1 = require(\"./BaseLayer\");\nvar Canvas_1 = require(\"./Canvas\");\nvar Shape_1 = require(\"./Shape\");\nvar Validators_1 = require(\"./Validators\");\nvar Global_1 = require(\"./Global\");\nvar HASH = '#', BEFORE_DRAW = 'beforeDraw', DRAW = 'draw', INTERSECTION_OFFSETS = [\n    { x: 0, y: 0 },\n    { x: -1, y: -1 },\n    { x: 1, y: -1 },\n    { x: 1, y: 1 },\n    { x: -1, y: 1 }\n], INTERSECTION_OFFSETS_LEN = INTERSECTION_OFFSETS.length;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.hitCanvas = new Canvas_1.HitCanvas({\n            pixelRatio: 1\n        });\n        return _this;\n    }\n    Layer.prototype.setSize = function (_a) {\n        var width = _a.width, height = _a.height;\n        _super.prototype.setSize.call(this, { width: width, height: height });\n        this.hitCanvas.setSize(width, height);\n        return this;\n    };\n    Layer.prototype._validateAdd = function (child) {\n        var type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            Util_1.Util.throw('You may only add groups and shapes to a layer.');\n        }\n    };\n    Layer.prototype.getIntersection = function (pos, selector) {\n        var obj, i, intersectionOffset, shape;\n        if (!this.hitGraphEnabled() || !this.isVisible()) {\n            return null;\n        }\n        var spiralSearchDistance = 1;\n        var continueSearch = false;\n        while (true) {\n            for (i = 0; i < INTERSECTION_OFFSETS_LEN; i++) {\n                intersectionOffset = INTERSECTION_OFFSETS[i];\n                obj = this._getIntersection({\n                    x: pos.x + intersectionOffset.x * spiralSearchDistance,\n                    y: pos.y + intersectionOffset.y * spiralSearchDistance\n                });\n                shape = obj.shape;\n                if (shape && selector) {\n                    return shape.findAncestor(selector, true);\n                }\n                else if (shape) {\n                    return shape;\n                }\n                continueSearch = !!obj.antialiased;\n                if (!obj.antialiased) {\n                    break;\n                }\n            }\n            if (continueSearch) {\n                spiralSearchDistance += 1;\n            }\n            else {\n                return null;\n            }\n        }\n    };\n    Layer.prototype._getIntersection = function (pos) {\n        var ratio = this.hitCanvas.pixelRatio;\n        var p = this.hitCanvas.context.getImageData(Math.round(pos.x * ratio), Math.round(pos.y * ratio), 1, 1).data, p3 = p[3], colorKey, shape;\n        if (p3 === 255) {\n            colorKey = Util_1.Util._rgbToHex(p[0], p[1], p[2]);\n            shape = Shape_1.shapes[HASH + colorKey];\n            if (shape) {\n                return {\n                    shape: shape\n                };\n            }\n            return {\n                antialiased: true\n            };\n        }\n        else if (p3 > 0) {\n            return {\n                antialiased: true\n            };\n        }\n        return {};\n    };\n    Layer.prototype.drawScene = function (can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas());\n        this._fire(BEFORE_DRAW, {\n            node: this\n        });\n        if (this.clearBeforeDraw()) {\n            canvas.getContext().clear();\n        }\n        Container_1.Container.prototype.drawScene.call(this, canvas, top);\n        this._fire(DRAW, {\n            node: this\n        });\n        return this;\n    };\n    Layer.prototype.drawHit = function (can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas);\n        if (layer && layer.clearBeforeDraw()) {\n            layer\n                .getHitCanvas()\n                .getContext()\n                .clear();\n        }\n        Container_1.Container.prototype.drawHit.call(this, canvas, top);\n        return this;\n    };\n    Layer.prototype.clear = function (bounds) {\n        BaseLayer_1.BaseLayer.prototype.clear.call(this, bounds);\n        this.getHitCanvas()\n            .getContext()\n            .clear(bounds);\n        return this;\n    };\n    Layer.prototype.enableHitGraph = function () {\n        this.hitGraphEnabled(true);\n        return this;\n    };\n    Layer.prototype.disableHitGraph = function () {\n        this.hitGraphEnabled(false);\n        return this;\n    };\n    Layer.prototype.toggleHitCanvas = function () {\n        if (!this.parent) {\n            return;\n        }\n        var parent = this.parent;\n        var added = !!this.hitCanvas._canvas.parentNode;\n        if (added) {\n            parent.content.removeChild(this.hitCanvas._canvas);\n        }\n        else {\n            parent.content.appendChild(this.hitCanvas._canvas);\n        }\n    };\n    return Layer;\n}(BaseLayer_1.BaseLayer));\nexports.Layer = Layer;\nLayer.prototype.nodeType = 'Layer';\nGlobal_1._registerNode(Layer);\nFactory_1.Factory.addGetterSetter(Layer, 'hitGraphEnabled', true, Validators_1.getBooleanValidator());\nUtil_1.Collection.mapMethods(Layer);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Container_1 = require(\"./Container\");\nvar BaseLayer_1 = require(\"./BaseLayer\");\nvar Global_1 = require(\"./Global\");\nvar FastLayer = (function (_super) {\n    __extends(FastLayer, _super);\n    function FastLayer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FastLayer.prototype._validateAdd = function (child) {\n        var type = child.getType();\n        if (type !== 'Shape') {\n            Util_1.Util.throw('You may only add shapes to a fast layer.');\n        }\n    };\n    FastLayer.prototype.hitGraphEnabled = function () {\n        return false;\n    };\n    FastLayer.prototype.drawScene = function (can) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas());\n        if (this.clearBeforeDraw()) {\n            canvas.getContext().clear();\n        }\n        Container_1.Container.prototype.drawScene.call(this, canvas);\n        return this;\n    };\n    FastLayer.prototype.draw = function () {\n        this.drawScene();\n        return this;\n    };\n    return FastLayer;\n}(BaseLayer_1.BaseLayer));\nexports.FastLayer = FastLayer;\nFastLayer.prototype.nodeType = 'FastLayer';\nGlobal_1._registerNode(FastLayer);\nUtil_1.Collection.mapMethods(FastLayer);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Container_1 = require(\"./Container\");\nvar Global_1 = require(\"./Global\");\nvar Group = (function (_super) {\n    __extends(Group, _super);\n    function Group() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Group.prototype._validateAdd = function (child) {\n        var type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            Util_1.Util.throw('You may only add groups and shapes to groups.');\n        }\n    };\n    return Group;\n}(Container_1.Container));\nexports.Group = Group;\nGroup.prototype.nodeType = 'Group';\nGlobal_1._registerNode(Group);\nUtil_1.Collection.mapMethods(Group);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar now = (function () {\n    if (Global_1.glob.performance && Global_1.glob.performance.now) {\n        return function () {\n            return Global_1.glob.performance.now();\n        };\n    }\n    return function () {\n        return new Date().getTime();\n    };\n})();\nvar Animation = (function () {\n    function Animation(func, layers) {\n        this.id = Animation.animIdCounter++;\n        this.frame = {\n            time: 0,\n            timeDiff: 0,\n            lastTime: now(),\n            frameRate: 0\n        };\n        this.func = func;\n        this.setLayers(layers);\n    }\n    Animation.prototype.setLayers = function (layers) {\n        var lays = [];\n        if (!layers) {\n            lays = [];\n        }\n        else if (layers.length > 0) {\n            lays = layers;\n        }\n        else {\n            lays = [layers];\n        }\n        this.layers = lays;\n        return this;\n    };\n    Animation.prototype.getLayers = function () {\n        return this.layers;\n    };\n    Animation.prototype.addLayer = function (layer) {\n        var layers = this.layers, len = layers.length, n;\n        for (n = 0; n < len; n++) {\n            if (layers[n]._id === layer._id) {\n                return false;\n            }\n        }\n        this.layers.push(layer);\n        return true;\n    };\n    Animation.prototype.isRunning = function () {\n        var a = Animation, animations = a.animations, len = animations.length, n;\n        for (n = 0; n < len; n++) {\n            if (animations[n].id === this.id) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Animation.prototype.start = function () {\n        this.stop();\n        this.frame.timeDiff = 0;\n        this.frame.lastTime = now();\n        Animation._addAnimation(this);\n        return this;\n    };\n    Animation.prototype.stop = function () {\n        Animation._removeAnimation(this);\n        return this;\n    };\n    Animation.prototype._updateFrameObject = function (time) {\n        this.frame.timeDiff = time - this.frame.lastTime;\n        this.frame.lastTime = time;\n        this.frame.time += this.frame.timeDiff;\n        this.frame.frameRate = 1000 / this.frame.timeDiff;\n    };\n    Animation._addAnimation = function (anim) {\n        this.animations.push(anim);\n        this._handleAnimation();\n    };\n    Animation._removeAnimation = function (anim) {\n        var id = anim.id, animations = this.animations, len = animations.length, n;\n        for (n = 0; n < len; n++) {\n            if (animations[n].id === id) {\n                this.animations.splice(n, 1);\n                break;\n            }\n        }\n    };\n    Animation._runFrames = function () {\n        var layerHash = {}, animations = this.animations, anim, layers, func, n, i, layersLen, layer, key, needRedraw;\n        for (n = 0; n < animations.length; n++) {\n            anim = animations[n];\n            layers = anim.layers;\n            func = anim.func;\n            anim._updateFrameObject(now());\n            layersLen = layers.length;\n            if (func) {\n                needRedraw = func.call(anim, anim.frame) !== false;\n            }\n            else {\n                needRedraw = true;\n            }\n            if (!needRedraw) {\n                continue;\n            }\n            for (i = 0; i < layersLen; i++) {\n                layer = layers[i];\n                if (layer._id !== undefined) {\n                    layerHash[layer._id] = layer;\n                }\n            }\n        }\n        for (key in layerHash) {\n            if (!layerHash.hasOwnProperty(key)) {\n                continue;\n            }\n            layerHash[key].draw();\n        }\n    };\n    Animation._animationLoop = function () {\n        var Anim = Animation;\n        if (Anim.animations.length) {\n            Anim._runFrames();\n            requestAnimationFrame(Anim._animationLoop);\n        }\n        else {\n            Anim.animRunning = false;\n        }\n    };\n    Animation._handleAnimation = function () {\n        if (!this.animRunning) {\n            this.animRunning = true;\n            requestAnimationFrame(this._animationLoop);\n        }\n    };\n    Animation.animations = [];\n    Animation.animIdCounter = 0;\n    Animation.animRunning = false;\n    return Animation;\n}());\nexports.Animation = Animation;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Animation_1 = require(\"./Animation\");\nvar Node_1 = require(\"./Node\");\nvar Global_1 = require(\"./Global\");\nvar blacklist = {\n    node: 1,\n    duration: 1,\n    easing: 1,\n    onFinish: 1,\n    yoyo: 1\n}, PAUSED = 1, PLAYING = 2, REVERSING = 3, idCounter = 0, colorAttrs = ['fill', 'stroke', 'shadowColor'];\nvar TweenEngine = (function () {\n    function TweenEngine(prop, propFunc, func, begin, finish, duration, yoyo) {\n        this.prop = prop;\n        this.propFunc = propFunc;\n        this.begin = begin;\n        this._pos = begin;\n        this.duration = duration;\n        this._change = 0;\n        this.prevPos = 0;\n        this.yoyo = yoyo;\n        this._time = 0;\n        this._position = 0;\n        this._startTime = 0;\n        this._finish = 0;\n        this.func = func;\n        this._change = finish - this.begin;\n        this.pause();\n    }\n    TweenEngine.prototype.fire = function (str) {\n        var handler = this[str];\n        if (handler) {\n            handler();\n        }\n    };\n    TweenEngine.prototype.setTime = function (t) {\n        if (t > this.duration) {\n            if (this.yoyo) {\n                this._time = this.duration;\n                this.reverse();\n            }\n            else {\n                this.finish();\n            }\n        }\n        else if (t < 0) {\n            if (this.yoyo) {\n                this._time = 0;\n                this.play();\n            }\n            else {\n                this.reset();\n            }\n        }\n        else {\n            this._time = t;\n            this.update();\n        }\n    };\n    TweenEngine.prototype.getTime = function () {\n        return this._time;\n    };\n    TweenEngine.prototype.setPosition = function (p) {\n        this.prevPos = this._pos;\n        this.propFunc(p);\n        this._pos = p;\n    };\n    TweenEngine.prototype.getPosition = function (t) {\n        if (t === undefined) {\n            t = this._time;\n        }\n        return this.func(t, this.begin, this._change, this.duration);\n    };\n    TweenEngine.prototype.play = function () {\n        this.state = PLAYING;\n        this._startTime = this.getTimer() - this._time;\n        this.onEnterFrame();\n        this.fire('onPlay');\n    };\n    TweenEngine.prototype.reverse = function () {\n        this.state = REVERSING;\n        this._time = this.duration - this._time;\n        this._startTime = this.getTimer() - this._time;\n        this.onEnterFrame();\n        this.fire('onReverse');\n    };\n    TweenEngine.prototype.seek = function (t) {\n        this.pause();\n        this._time = t;\n        this.update();\n        this.fire('onSeek');\n    };\n    TweenEngine.prototype.reset = function () {\n        this.pause();\n        this._time = 0;\n        this.update();\n        this.fire('onReset');\n    };\n    TweenEngine.prototype.finish = function () {\n        this.pause();\n        this._time = this.duration;\n        this.update();\n        this.fire('onFinish');\n    };\n    TweenEngine.prototype.update = function () {\n        this.setPosition(this.getPosition(this._time));\n    };\n    TweenEngine.prototype.onEnterFrame = function () {\n        var t = this.getTimer() - this._startTime;\n        if (this.state === PLAYING) {\n            this.setTime(t);\n        }\n        else if (this.state === REVERSING) {\n            this.setTime(this.duration - t);\n        }\n    };\n    TweenEngine.prototype.pause = function () {\n        this.state = PAUSED;\n        this.fire('onPause');\n    };\n    TweenEngine.prototype.getTimer = function () {\n        return new Date().getTime();\n    };\n    return TweenEngine;\n}());\nvar Tween = (function () {\n    function Tween(config) {\n        var that = this, node = config.node, nodeId = node._id, duration, easing = config.easing || exports.Easings.Linear, yoyo = !!config.yoyo, key;\n        if (typeof config.duration === 'undefined') {\n            duration = 0.3;\n        }\n        else if (config.duration === 0) {\n            duration = 0.001;\n        }\n        else {\n            duration = config.duration;\n        }\n        this.node = node;\n        this._id = idCounter++;\n        var layers = node.getLayer() ||\n            (node instanceof Global_1.Konva['Stage'] ? node.getLayers() : null);\n        if (!layers) {\n            Util_1.Util.error('Tween constructor have `node` that is not in a layer. Please add node into layer first.');\n        }\n        this.anim = new Animation_1.Animation(function () {\n            that.tween.onEnterFrame();\n        }, layers);\n        this.tween = new TweenEngine(key, function (i) {\n            that._tweenFunc(i);\n        }, easing, 0, 1, duration * 1000, yoyo);\n        this._addListeners();\n        if (!Tween.attrs[nodeId]) {\n            Tween.attrs[nodeId] = {};\n        }\n        if (!Tween.attrs[nodeId][this._id]) {\n            Tween.attrs[nodeId][this._id] = {};\n        }\n        if (!Tween.tweens[nodeId]) {\n            Tween.tweens[nodeId] = {};\n        }\n        for (key in config) {\n            if (blacklist[key] === undefined) {\n                this._addAttr(key, config[key]);\n            }\n        }\n        this.reset();\n        this.onFinish = config.onFinish;\n        this.onReset = config.onReset;\n    }\n    Tween.prototype._addAttr = function (key, end) {\n        var node = this.node, nodeId = node._id, start, diff, tweenId, n, len, trueEnd, trueStart, endRGBA;\n        tweenId = Tween.tweens[nodeId][key];\n        if (tweenId) {\n            delete Tween.attrs[nodeId][tweenId][key];\n        }\n        start = node.getAttr(key);\n        if (Util_1.Util._isArray(end)) {\n            diff = [];\n            len = Math.max(end.length, start.length);\n            if (key === 'points' && end.length !== start.length) {\n                if (end.length > start.length) {\n                    trueStart = start;\n                    start = Util_1.Util._prepareArrayForTween(start, end, node.closed());\n                }\n                else {\n                    trueEnd = end;\n                    end = Util_1.Util._prepareArrayForTween(end, start, node.closed());\n                }\n            }\n            if (key.indexOf('fill') === 0) {\n                for (n = 0; n < len; n++) {\n                    if (n % 2 === 0) {\n                        diff.push(end[n] - start[n]);\n                    }\n                    else {\n                        var startRGBA = Util_1.Util.colorToRGBA(start[n]);\n                        endRGBA = Util_1.Util.colorToRGBA(end[n]);\n                        start[n] = startRGBA;\n                        diff.push({\n                            r: endRGBA.r - startRGBA.r,\n                            g: endRGBA.g - startRGBA.g,\n                            b: endRGBA.b - startRGBA.b,\n                            a: endRGBA.a - startRGBA.a\n                        });\n                    }\n                }\n            }\n            else {\n                for (n = 0; n < len; n++) {\n                    diff.push(end[n] - start[n]);\n                }\n            }\n        }\n        else if (colorAttrs.indexOf(key) !== -1) {\n            start = Util_1.Util.colorToRGBA(start);\n            endRGBA = Util_1.Util.colorToRGBA(end);\n            diff = {\n                r: endRGBA.r - start.r,\n                g: endRGBA.g - start.g,\n                b: endRGBA.b - start.b,\n                a: endRGBA.a - start.a\n            };\n        }\n        else {\n            diff = end - start;\n        }\n        Tween.attrs[nodeId][this._id][key] = {\n            start: start,\n            diff: diff,\n            end: end,\n            trueEnd: trueEnd,\n            trueStart: trueStart\n        };\n        Tween.tweens[nodeId][key] = this._id;\n    };\n    Tween.prototype._tweenFunc = function (i) {\n        var node = this.node, attrs = Tween.attrs[node._id][this._id], key, attr, start, diff, newVal, n, len, end;\n        for (key in attrs) {\n            attr = attrs[key];\n            start = attr.start;\n            diff = attr.diff;\n            end = attr.end;\n            if (Util_1.Util._isArray(start)) {\n                newVal = [];\n                len = Math.max(start.length, end.length);\n                if (key.indexOf('fill') === 0) {\n                    for (n = 0; n < len; n++) {\n                        if (n % 2 === 0) {\n                            newVal.push((start[n] || 0) + diff[n] * i);\n                        }\n                        else {\n                            newVal.push('rgba(' +\n                                Math.round(start[n].r + diff[n].r * i) +\n                                ',' +\n                                Math.round(start[n].g + diff[n].g * i) +\n                                ',' +\n                                Math.round(start[n].b + diff[n].b * i) +\n                                ',' +\n                                (start[n].a + diff[n].a * i) +\n                                ')');\n                        }\n                    }\n                }\n                else {\n                    for (n = 0; n < len; n++) {\n                        newVal.push((start[n] || 0) + diff[n] * i);\n                    }\n                }\n            }\n            else if (colorAttrs.indexOf(key) !== -1) {\n                newVal =\n                    'rgba(' +\n                        Math.round(start.r + diff.r * i) +\n                        ',' +\n                        Math.round(start.g + diff.g * i) +\n                        ',' +\n                        Math.round(start.b + diff.b * i) +\n                        ',' +\n                        (start.a + diff.a * i) +\n                        ')';\n            }\n            else {\n                newVal = start + diff * i;\n            }\n            node.setAttr(key, newVal);\n        }\n    };\n    Tween.prototype._addListeners = function () {\n        var _this = this;\n        this.tween.onPlay = function () {\n            _this.anim.start();\n        };\n        this.tween.onReverse = function () {\n            _this.anim.start();\n        };\n        this.tween.onPause = function () {\n            _this.anim.stop();\n        };\n        this.tween.onFinish = function () {\n            var node = _this.node;\n            var attrs = Tween.attrs[node._id][_this._id];\n            if (attrs.points && attrs.points.trueEnd) {\n                node.setAttr('points', attrs.points.trueEnd);\n            }\n            if (_this.onFinish) {\n                _this.onFinish.call(_this);\n            }\n        };\n        this.tween.onReset = function () {\n            var node = _this.node;\n            var attrs = Tween.attrs[node._id][_this._id];\n            if (attrs.points && attrs.points.trueStart) {\n                node.points(attrs.points.trueStart);\n            }\n            if (_this.onReset) {\n                _this.onReset();\n            }\n        };\n    };\n    Tween.prototype.play = function () {\n        this.tween.play();\n        return this;\n    };\n    Tween.prototype.reverse = function () {\n        this.tween.reverse();\n        return this;\n    };\n    Tween.prototype.reset = function () {\n        this.tween.reset();\n        return this;\n    };\n    Tween.prototype.seek = function (t) {\n        this.tween.seek(t * 1000);\n        return this;\n    };\n    Tween.prototype.pause = function () {\n        this.tween.pause();\n        return this;\n    };\n    Tween.prototype.finish = function () {\n        this.tween.finish();\n        return this;\n    };\n    Tween.prototype.destroy = function () {\n        var nodeId = this.node._id, thisId = this._id, attrs = Tween.tweens[nodeId], key;\n        this.pause();\n        for (key in attrs) {\n            delete Tween.tweens[nodeId][key];\n        }\n        delete Tween.attrs[nodeId][thisId];\n    };\n    Tween.attrs = {};\n    Tween.tweens = {};\n    return Tween;\n}());\nexports.Tween = Tween;\nNode_1.Node.prototype.to = function (params) {\n    var onFinish = params.onFinish;\n    params.node = this;\n    params.onFinish = function () {\n        this.destroy();\n        if (onFinish) {\n            onFinish();\n        }\n    };\n    var tween = new Tween(params);\n    tween.play();\n};\nexports.Easings = {\n    BackEaseIn: function (t, b, c, d) {\n        var s = 1.70158;\n        return c * (t /= d) * t * ((s + 1) * t - s) + b;\n    },\n    BackEaseOut: function (t, b, c, d) {\n        var s = 1.70158;\n        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n    },\n    BackEaseInOut: function (t, b, c, d) {\n        var s = 1.70158;\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n        }\n        return (c / 2) * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n    },\n    ElasticEaseIn: function (t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) === 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        return (-(a *\n            Math.pow(2, 10 * (t -= 1)) *\n            Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b);\n    },\n    ElasticEaseOut: function (t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) === 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        return (a * Math.pow(2, -10 * t) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) +\n            c +\n            b);\n    },\n    ElasticEaseInOut: function (t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d / 2) === 2) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * (0.3 * 1.5);\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        if (t < 1) {\n            return (-0.5 *\n                (a *\n                    Math.pow(2, 10 * (t -= 1)) *\n                    Math.sin(((t * d - s) * (2 * Math.PI)) / p)) +\n                b);\n        }\n        return (a *\n            Math.pow(2, -10 * (t -= 1)) *\n            Math.sin(((t * d - s) * (2 * Math.PI)) / p) *\n            0.5 +\n            c +\n            b);\n    },\n    BounceEaseOut: function (t, b, c, d) {\n        if ((t /= d) < 1 / 2.75) {\n            return c * (7.5625 * t * t) + b;\n        }\n        else if (t < 2 / 2.75) {\n            return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n        }\n        else if (t < 2.5 / 2.75) {\n            return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n        }\n        else {\n            return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n        }\n    },\n    BounceEaseIn: function (t, b, c, d) {\n        return c - exports.Easings.BounceEaseOut(d - t, 0, c, d) + b;\n    },\n    BounceEaseInOut: function (t, b, c, d) {\n        if (t < d / 2) {\n            return exports.Easings.BounceEaseIn(t * 2, 0, c, d) * 0.5 + b;\n        }\n        else {\n            return exports.Easings.BounceEaseOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n        }\n    },\n    EaseIn: function (t, b, c, d) {\n        return c * (t /= d) * t + b;\n    },\n    EaseOut: function (t, b, c, d) {\n        return -c * (t /= d) * (t - 2) + b;\n    },\n    EaseInOut: function (t, b, c, d) {\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * t * t + b;\n        }\n        return (-c / 2) * (--t * (t - 2) - 1) + b;\n    },\n    StrongEaseIn: function (t, b, c, d) {\n        return c * (t /= d) * t * t * t * t + b;\n    },\n    StrongEaseOut: function (t, b, c, d) {\n        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n    },\n    StrongEaseInOut: function (t, b, c, d) {\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * t * t * t * t * t + b;\n        }\n        return (c / 2) * ((t -= 2) * t * t * t * t + 2) + b;\n    },\n    Linear: function (t, b, c, d) {\n        return (c * t) / d + b;\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Util_1 = require(\"./Util\");\nvar Node_1 = require(\"./Node\");\nvar Container_1 = require(\"./Container\");\nvar Stage_1 = require(\"./Stage\");\nvar Layer_1 = require(\"./Layer\");\nvar FastLayer_1 = require(\"./FastLayer\");\nvar Group_1 = require(\"./Group\");\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\nvar Shape_1 = require(\"./Shape\");\nvar Animation_1 = require(\"./Animation\");\nvar Tween_1 = require(\"./Tween\");\nvar Context_1 = require(\"./Context\");\nvar Canvas_1 = require(\"./Canvas\");\nexports.Konva = Util_1.Util._assign(Global_1.Konva, {\n    Collection: Util_1.Collection,\n    Util: Util_1.Util,\n    Transform: Util_1.Transform,\n    Node: Node_1.Node,\n    ids: Node_1.ids,\n    names: Node_1.names,\n    Container: Container_1.Container,\n    Stage: Stage_1.Stage,\n    stages: Stage_1.stages,\n    Layer: Layer_1.Layer,\n    FastLayer: FastLayer_1.FastLayer,\n    Group: Group_1.Group,\n    DD: DragAndDrop_1.DD,\n    Shape: Shape_1.Shape,\n    shapes: Shape_1.shapes,\n    Animation: Animation_1.Animation,\n    Tween: Tween_1.Tween,\n    Easings: Tween_1.Easings,\n    Context: Context_1.Context,\n    Canvas: Canvas_1.Canvas\n});\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Global_1 = require(\"../Global\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_2 = require(\"../Global\");\nvar Arc = (function (_super) {\n    __extends(Arc, _super);\n    function Arc() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Arc.prototype._sceneFunc = function (context) {\n        var angle = Global_1.Konva.getAngle(this.angle()), clockwise = this.clockwise();\n        context.beginPath();\n        context.arc(0, 0, this.outerRadius(), 0, angle, clockwise);\n        context.arc(0, 0, this.innerRadius(), angle, 0, !clockwise);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Arc.prototype.getWidth = function () {\n        return this.outerRadius() * 2;\n    };\n    Arc.prototype.getHeight = function () {\n        return this.outerRadius() * 2;\n    };\n    Arc.prototype.setWidth = function (width) {\n        this.outerRadius(width / 2);\n    };\n    Arc.prototype.setHeight = function (height) {\n        this.outerRadius(height / 2);\n    };\n    return Arc;\n}(Shape_1.Shape));\nexports.Arc = Arc;\nArc.prototype._centroid = true;\nArc.prototype.className = 'Arc';\nArc.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\nGlobal_2._registerNode(Arc);\nFactory_1.Factory.addGetterSetter(Arc, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'outerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'angle', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'clockwise', false, Validators_1.getBooleanValidator());\nUtil_1.Collection.mapMethods(Arc);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Line = (function (_super) {\n    __extends(Line, _super);\n    function Line(config) {\n        var _this = _super.call(this, config) || this;\n        _this.on('pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva', function () {\n            this._clearCache('tensionPoints');\n        });\n        return _this;\n    }\n    Line.prototype._sceneFunc = function (context) {\n        var points = this.points(), length = points.length, tension = this.tension(), closed = this.closed(), bezier = this.bezier(), tp, len, n;\n        if (!length) {\n            return;\n        }\n        context.beginPath();\n        context.moveTo(points[0], points[1]);\n        if (tension !== 0 && length > 4) {\n            tp = this.getTensionPoints();\n            len = tp.length;\n            n = closed ? 0 : 4;\n            if (!closed) {\n                context.quadraticCurveTo(tp[0], tp[1], tp[2], tp[3]);\n            }\n            while (n < len - 2) {\n                context.bezierCurveTo(tp[n++], tp[n++], tp[n++], tp[n++], tp[n++], tp[n++]);\n            }\n            if (!closed) {\n                context.quadraticCurveTo(tp[len - 2], tp[len - 1], points[length - 2], points[length - 1]);\n            }\n        }\n        else if (bezier) {\n            n = 2;\n            while (n < length) {\n                context.bezierCurveTo(points[n++], points[n++], points[n++], points[n++], points[n++], points[n++]);\n            }\n        }\n        else {\n            for (n = 2; n < length; n += 2) {\n                context.lineTo(points[n], points[n + 1]);\n            }\n        }\n        if (closed) {\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        else {\n            context.strokeShape(this);\n        }\n    };\n    Line.prototype.getTensionPoints = function () {\n        return this._getCache('tensionPoints', this._getTensionPoints);\n    };\n    Line.prototype._getTensionPoints = function () {\n        if (this.closed()) {\n            return this._getTensionPointsClosed();\n        }\n        else {\n            return Util_1.Util._expandPoints(this.points(), this.tension());\n        }\n    };\n    Line.prototype._getTensionPointsClosed = function () {\n        var p = this.points(), len = p.length, tension = this.tension(), firstControlPoints = Util_1.Util._getControlPoints(p[len - 2], p[len - 1], p[0], p[1], p[2], p[3], tension), lastControlPoints = Util_1.Util._getControlPoints(p[len - 4], p[len - 3], p[len - 2], p[len - 1], p[0], p[1], tension), middle = Util_1.Util._expandPoints(p, tension), tp = [firstControlPoints[2], firstControlPoints[3]]\n            .concat(middle)\n            .concat([\n            lastControlPoints[0],\n            lastControlPoints[1],\n            p[len - 2],\n            p[len - 1],\n            lastControlPoints[2],\n            lastControlPoints[3],\n            firstControlPoints[0],\n            firstControlPoints[1],\n            p[0],\n            p[1]\n        ]);\n        return tp;\n    };\n    Line.prototype.getWidth = function () {\n        return this.getSelfRect().width;\n    };\n    Line.prototype.getHeight = function () {\n        return this.getSelfRect().height;\n    };\n    Line.prototype.getSelfRect = function () {\n        var points = this.points();\n        if (points.length < 4) {\n            return {\n                x: points[0] || 0,\n                y: points[1] || 0,\n                width: 0,\n                height: 0\n            };\n        }\n        if (this.tension() !== 0) {\n            points = __spreadArrays([\n                points[0],\n                points[1]\n            ], this._getTensionPoints(), [\n                points[points.length - 2],\n                points[points.length - 1]\n            ]);\n        }\n        else {\n            points = this.points();\n        }\n        var minX = points[0];\n        var maxX = points[0];\n        var minY = points[1];\n        var maxY = points[1];\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY\n        };\n    };\n    return Line;\n}(Shape_1.Shape));\nexports.Line = Line;\nLine.prototype.className = 'Line';\nLine.prototype._attrsAffectingSize = ['points', 'bezier', 'tension'];\nGlobal_1._registerNode(Line);\nFactory_1.Factory.addGetterSetter(Line, 'closed', false);\nFactory_1.Factory.addGetterSetter(Line, 'bezier', false);\nFactory_1.Factory.addGetterSetter(Line, 'tension', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Line, 'points', [], Validators_1.getNumberArrayValidator());\nUtil_1.Collection.mapMethods(Line);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Line_1 = require(\"./Line\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Arrow = (function (_super) {\n    __extends(Arrow, _super);\n    function Arrow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Arrow.prototype._sceneFunc = function (ctx) {\n        _super.prototype._sceneFunc.call(this, ctx);\n        var PI2 = Math.PI * 2;\n        var points = this.points();\n        var tp = points;\n        var fromTension = this.tension() !== 0 && points.length > 4;\n        if (fromTension) {\n            tp = this.getTensionPoints();\n        }\n        var n = points.length;\n        var dx, dy;\n        if (fromTension) {\n            dx = points[n - 2] - (tp[tp.length - 2] + tp[tp.length - 4]) / 2;\n            dy = points[n - 1] - (tp[tp.length - 1] + tp[tp.length - 3]) / 2;\n        }\n        else {\n            dx = points[n - 2] - points[n - 4];\n            dy = points[n - 1] - points[n - 3];\n        }\n        var radians = (Math.atan2(dy, dx) + PI2) % PI2;\n        var length = this.pointerLength();\n        var width = this.pointerWidth();\n        ctx.save();\n        ctx.beginPath();\n        ctx.translate(points[n - 2], points[n - 1]);\n        ctx.rotate(radians);\n        ctx.moveTo(0, 0);\n        ctx.lineTo(-length, width / 2);\n        ctx.lineTo(-length, -width / 2);\n        ctx.closePath();\n        ctx.restore();\n        if (this.pointerAtBeginning()) {\n            ctx.save();\n            ctx.translate(points[0], points[1]);\n            if (fromTension) {\n                dx = (tp[0] + tp[2]) / 2 - points[0];\n                dy = (tp[1] + tp[3]) / 2 - points[1];\n            }\n            else {\n                dx = points[2] - points[0];\n                dy = points[3] - points[1];\n            }\n            ctx.rotate((Math.atan2(-dy, -dx) + PI2) % PI2);\n            ctx.moveTo(0, 0);\n            ctx.lineTo(-length, width / 2);\n            ctx.lineTo(-length, -width / 2);\n            ctx.closePath();\n            ctx.restore();\n        }\n        var isDashEnabled = this.dashEnabled();\n        if (isDashEnabled) {\n            this.attrs.dashEnabled = false;\n            ctx.setLineDash([]);\n        }\n        ctx.fillStrokeShape(this);\n        if (isDashEnabled) {\n            this.attrs.dashEnabled = true;\n        }\n    };\n    Arrow.prototype.getSelfRect = function () {\n        var lineRect = _super.prototype.getSelfRect.call(this);\n        var offset = this.pointerWidth() / 2;\n        return {\n            x: lineRect.x - offset,\n            y: lineRect.y - offset,\n            width: lineRect.width + offset * 2,\n            height: lineRect.height + offset * 2\n        };\n    };\n    return Arrow;\n}(Line_1.Line));\nexports.Arrow = Arrow;\nArrow.prototype.className = 'Arrow';\nGlobal_1._registerNode(Arrow);\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerLength', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerWidth', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerAtBeginning', false);\nUtil_1.Collection.mapMethods(Arrow);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Circle = (function (_super) {\n    __extends(Circle, _super);\n    function Circle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Circle.prototype._sceneFunc = function (context) {\n        context.beginPath();\n        context.arc(0, 0, this.radius(), 0, Math.PI * 2, false);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Circle.prototype.getWidth = function () {\n        return this.radius() * 2;\n    };\n    Circle.prototype.getHeight = function () {\n        return this.radius() * 2;\n    };\n    Circle.prototype.setWidth = function (width) {\n        if (this.radius() !== width / 2) {\n            this.radius(width / 2);\n        }\n    };\n    Circle.prototype.setHeight = function (height) {\n        if (this.radius() !== height / 2) {\n            this.radius(height / 2);\n        }\n    };\n    return Circle;\n}(Shape_1.Shape));\nexports.Circle = Circle;\nCircle.prototype._centroid = true;\nCircle.prototype.className = 'Circle';\nCircle.prototype._attrsAffectingSize = ['radius'];\nGlobal_1._registerNode(Circle);\nFactory_1.Factory.addGetterSetter(Circle, 'radius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Circle);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Ellipse = (function (_super) {\n    __extends(Ellipse, _super);\n    function Ellipse() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Ellipse.prototype._sceneFunc = function (context) {\n        var rx = this.radiusX(), ry = this.radiusY();\n        context.beginPath();\n        context.save();\n        if (rx !== ry) {\n            context.scale(1, ry / rx);\n        }\n        context.arc(0, 0, rx, 0, Math.PI * 2, false);\n        context.restore();\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Ellipse.prototype.getWidth = function () {\n        return this.radiusX() * 2;\n    };\n    Ellipse.prototype.getHeight = function () {\n        return this.radiusY() * 2;\n    };\n    Ellipse.prototype.setWidth = function (width) {\n        this.radiusX(width / 2);\n    };\n    Ellipse.prototype.setHeight = function (height) {\n        this.radiusY(height / 2);\n    };\n    return Ellipse;\n}(Shape_1.Shape));\nexports.Ellipse = Ellipse;\nEllipse.prototype.className = 'Ellipse';\nEllipse.prototype._centroid = true;\nEllipse.prototype._attrsAffectingSize = ['radiusX', 'radiusY'];\nGlobal_1._registerNode(Ellipse);\nFactory_1.Factory.addComponentsGetterSetter(Ellipse, 'radius', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Ellipse, 'radiusX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Ellipse, 'radiusY', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Ellipse);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Image = (function (_super) {\n    __extends(Image, _super);\n    function Image() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Image.prototype._useBufferCanvas = function () {\n        return !!((this.hasShadow() || this.getAbsoluteOpacity() !== 1) &&\n            this.hasStroke() &&\n            this.getStage());\n    };\n    Image.prototype._sceneFunc = function (context) {\n        var width = this.width(), height = this.height(), image = this.image(), cropWidth, cropHeight, params;\n        if (image) {\n            cropWidth = this.cropWidth();\n            cropHeight = this.cropHeight();\n            if (cropWidth && cropHeight) {\n                params = [\n                    image,\n                    this.cropX(),\n                    this.cropY(),\n                    cropWidth,\n                    cropHeight,\n                    0,\n                    0,\n                    width,\n                    height\n                ];\n            }\n            else {\n                params = [image, 0, 0, width, height];\n            }\n        }\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            context.drawImage.apply(context, params);\n        }\n    };\n    Image.prototype._hitFunc = function (context) {\n        var width = this.width(), height = this.height();\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Image.prototype.getWidth = function () {\n        var _a;\n        var image = this.image();\n        return (_a = this.attrs.width) !== null && _a !== void 0 ? _a : (image ? image.width : 0);\n    };\n    Image.prototype.getHeight = function () {\n        var _a;\n        var image = this.image();\n        return (_a = this.attrs.height) !== null && _a !== void 0 ? _a : (image ? image.height : 0);\n    };\n    Image.fromURL = function (url, callback) {\n        var img = Util_1.Util.createImageElement();\n        img.onload = function () {\n            var image = new Image({\n                image: img\n            });\n            callback(image);\n        };\n        img.crossOrigin = 'Anonymous';\n        img.src = url;\n    };\n    return Image;\n}(Shape_1.Shape));\nexports.Image = Image;\nImage.prototype.className = 'Image';\nGlobal_1._registerNode(Image);\nFactory_1.Factory.addGetterSetter(Image, 'image');\nFactory_1.Factory.addComponentsGetterSetter(Image, 'crop', ['x', 'y', 'width', 'height']);\nFactory_1.Factory.addGetterSetter(Image, 'cropX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropWidth', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropHeight', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Image);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Group_1 = require(\"../Group\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar ATTR_CHANGE_LIST = [\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'padding',\n    'lineHeight',\n    'text',\n    'width'\n], CHANGE_KONVA = 'Change.konva', NONE = 'none', UP = 'up', RIGHT = 'right', DOWN = 'down', LEFT = 'left', attrChangeListLen = ATTR_CHANGE_LIST.length;\nvar Label = (function (_super) {\n    __extends(Label, _super);\n    function Label(config) {\n        var _this = _super.call(this, config) || this;\n        _this.on('add.konva', function (evt) {\n            this._addListeners(evt.child);\n            this._sync();\n        });\n        return _this;\n    }\n    Label.prototype.getText = function () {\n        return this.find('Text')[0];\n    };\n    Label.prototype.getTag = function () {\n        return this.find('Tag')[0];\n    };\n    Label.prototype._addListeners = function (text) {\n        var that = this, n;\n        var func = function () {\n            that._sync();\n        };\n        for (n = 0; n < attrChangeListLen; n++) {\n            text.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, func);\n        }\n    };\n    Label.prototype.getWidth = function () {\n        return this.getText().width();\n    };\n    Label.prototype.getHeight = function () {\n        return this.getText().height();\n    };\n    Label.prototype._sync = function () {\n        var text = this.getText(), tag = this.getTag(), width, height, pointerDirection, pointerWidth, x, y, pointerHeight;\n        if (text && tag) {\n            width = text.width();\n            height = text.height();\n            pointerDirection = tag.pointerDirection();\n            pointerWidth = tag.pointerWidth();\n            pointerHeight = tag.pointerHeight();\n            x = 0;\n            y = 0;\n            switch (pointerDirection) {\n                case UP:\n                    x = width / 2;\n                    y = -1 * pointerHeight;\n                    break;\n                case RIGHT:\n                    x = width + pointerWidth;\n                    y = height / 2;\n                    break;\n                case DOWN:\n                    x = width / 2;\n                    y = height + pointerHeight;\n                    break;\n                case LEFT:\n                    x = -1 * pointerWidth;\n                    y = height / 2;\n                    break;\n            }\n            tag.setAttrs({\n                x: -1 * x,\n                y: -1 * y,\n                width: width,\n                height: height\n            });\n            text.setAttrs({\n                x: -1 * x,\n                y: -1 * y\n            });\n        }\n    };\n    return Label;\n}(Group_1.Group));\nexports.Label = Label;\nLabel.prototype.className = 'Label';\nGlobal_1._registerNode(Label);\nUtil_1.Collection.mapMethods(Label);\nvar Tag = (function (_super) {\n    __extends(Tag, _super);\n    function Tag() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Tag.prototype._sceneFunc = function (context) {\n        var width = this.width(), height = this.height(), pointerDirection = this.pointerDirection(), pointerWidth = this.pointerWidth(), pointerHeight = this.pointerHeight(), cornerRadius = Math.min(this.cornerRadius(), width / 2, height / 2);\n        context.beginPath();\n        if (!cornerRadius) {\n            context.moveTo(0, 0);\n        }\n        else {\n            context.moveTo(cornerRadius, 0);\n        }\n        if (pointerDirection === UP) {\n            context.lineTo((width - pointerWidth) / 2, 0);\n            context.lineTo(width / 2, -1 * pointerHeight);\n            context.lineTo((width + pointerWidth) / 2, 0);\n        }\n        if (!cornerRadius) {\n            context.lineTo(width, 0);\n        }\n        else {\n            context.lineTo(width - cornerRadius, 0);\n            context.arc(width - cornerRadius, cornerRadius, cornerRadius, (Math.PI * 3) / 2, 0, false);\n        }\n        if (pointerDirection === RIGHT) {\n            context.lineTo(width, (height - pointerHeight) / 2);\n            context.lineTo(width + pointerWidth, height / 2);\n            context.lineTo(width, (height + pointerHeight) / 2);\n        }\n        if (!cornerRadius) {\n            context.lineTo(width, height);\n        }\n        else {\n            context.lineTo(width, height - cornerRadius);\n            context.arc(width - cornerRadius, height - cornerRadius, cornerRadius, 0, Math.PI / 2, false);\n        }\n        if (pointerDirection === DOWN) {\n            context.lineTo((width + pointerWidth) / 2, height);\n            context.lineTo(width / 2, height + pointerHeight);\n            context.lineTo((width - pointerWidth) / 2, height);\n        }\n        if (!cornerRadius) {\n            context.lineTo(0, height);\n        }\n        else {\n            context.lineTo(cornerRadius, height);\n            context.arc(cornerRadius, height - cornerRadius, cornerRadius, Math.PI / 2, Math.PI, false);\n        }\n        if (pointerDirection === LEFT) {\n            context.lineTo(0, (height + pointerHeight) / 2);\n            context.lineTo(-1 * pointerWidth, height / 2);\n            context.lineTo(0, (height - pointerHeight) / 2);\n        }\n        if (cornerRadius) {\n            context.lineTo(0, cornerRadius);\n            context.arc(cornerRadius, cornerRadius, cornerRadius, Math.PI, (Math.PI * 3) / 2, false);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Tag.prototype.getSelfRect = function () {\n        var x = 0, y = 0, pointerWidth = this.pointerWidth(), pointerHeight = this.pointerHeight(), direction = this.pointerDirection(), width = this.width(), height = this.height();\n        if (direction === UP) {\n            y -= pointerHeight;\n            height += pointerHeight;\n        }\n        else if (direction === DOWN) {\n            height += pointerHeight;\n        }\n        else if (direction === LEFT) {\n            x -= pointerWidth * 1.5;\n            width += pointerWidth;\n        }\n        else if (direction === RIGHT) {\n            width += pointerWidth * 1.5;\n        }\n        return {\n            x: x,\n            y: y,\n            width: width,\n            height: height\n        };\n    };\n    return Tag;\n}(Shape_1.Shape));\nexports.Tag = Tag;\nTag.prototype.className = 'Tag';\nGlobal_1._registerNode(Tag);\nFactory_1.Factory.addGetterSetter(Tag, 'pointerDirection', NONE);\nFactory_1.Factory.addGetterSetter(Tag, 'pointerWidth', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Tag, 'pointerHeight', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Tag, 'cornerRadius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Tag);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Global_1 = require(\"../Global\");\nvar Path = (function (_super) {\n    __extends(Path, _super);\n    function Path(config) {\n        var _this = _super.call(this, config) || this;\n        _this.dataArray = [];\n        _this.pathLength = 0;\n        _this.dataArray = Path.parsePathData(_this.data());\n        _this.pathLength = 0;\n        for (var i = 0; i < _this.dataArray.length; ++i) {\n            _this.pathLength += _this.dataArray[i].pathLength;\n        }\n        _this.on('dataChange.konva', function () {\n            this.dataArray = Path.parsePathData(this.data());\n            this.pathLength = 0;\n            for (var i = 0; i < this.dataArray.length; ++i) {\n                this.pathLength += this.dataArray[i].pathLength;\n            }\n        });\n        return _this;\n    }\n    Path.prototype._sceneFunc = function (context) {\n        var ca = this.dataArray;\n        context.beginPath();\n        var isClosed = false;\n        for (var n = 0; n < ca.length; n++) {\n            var c = ca[n].command;\n            var p = ca[n].points;\n            switch (c) {\n                case 'L':\n                    context.lineTo(p[0], p[1]);\n                    break;\n                case 'M':\n                    context.moveTo(p[0], p[1]);\n                    break;\n                case 'C':\n                    context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n                    break;\n                case 'Q':\n                    context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n                    break;\n                case 'A':\n                    var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6], fs = p[7];\n                    var r = rx > ry ? rx : ry;\n                    var scaleX = rx > ry ? 1 : rx / ry;\n                    var scaleY = rx > ry ? ry / rx : 1;\n                    context.translate(cx, cy);\n                    context.rotate(psi);\n                    context.scale(scaleX, scaleY);\n                    context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n                    context.scale(1 / scaleX, 1 / scaleY);\n                    context.rotate(-psi);\n                    context.translate(-cx, -cy);\n                    break;\n                case 'z':\n                    isClosed = true;\n                    context.closePath();\n                    break;\n            }\n        }\n        if (!isClosed && !this.hasFill()) {\n            context.strokeShape(this);\n        }\n        else {\n            context.fillStrokeShape(this);\n        }\n    };\n    Path.prototype.getSelfRect = function () {\n        var points = [];\n        this.dataArray.forEach(function (data) {\n            if (data.command === 'A') {\n                var start = data.points[4];\n                var dTheta = data.points[5];\n                var end = data.points[4] + dTheta;\n                var inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                if (dTheta < 0) {\n                    for (var t = start - inc; t > end; t -= inc) {\n                        var point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n                        points.push(point.x, point.y);\n                    }\n                }\n                else {\n                    for (var t = start + inc; t < end; t += inc) {\n                        var point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n                        points.push(point.x, point.y);\n                    }\n                }\n            }\n            else if (data.command === 'C') {\n                for (var t = 0.0; t <= 1; t += 0.01) {\n                    var point = Path.getPointOnCubicBezier(t, data.start.x, data.start.y, data.points[0], data.points[1], data.points[2], data.points[3], data.points[4], data.points[5]);\n                    points.push(point.x, point.y);\n                }\n            }\n            else {\n                points = points.concat(data.points);\n            }\n        });\n        var minX = points[0];\n        var maxX = points[0];\n        var minY = points[1];\n        var maxY = points[1];\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            if (!isNaN(x)) {\n                minX = Math.min(minX, x);\n                maxX = Math.max(maxX, x);\n            }\n            if (!isNaN(y)) {\n                minY = Math.min(minY, y);\n                maxY = Math.max(maxY, y);\n            }\n        }\n        return {\n            x: Math.round(minX),\n            y: Math.round(minY),\n            width: Math.round(maxX - minX),\n            height: Math.round(maxY - minY)\n        };\n    };\n    Path.prototype.getLength = function () {\n        return this.pathLength;\n    };\n    Path.prototype.getPointAtLength = function (length) {\n        var point, i = 0, ii = this.dataArray.length;\n        if (!ii) {\n            return null;\n        }\n        while (i < ii && length > this.dataArray[i].pathLength) {\n            length -= this.dataArray[i].pathLength;\n            ++i;\n        }\n        if (i === ii) {\n            point = this.dataArray[i - 1].points.slice(-2);\n            return {\n                x: point[0],\n                y: point[1]\n            };\n        }\n        if (length < 0.01) {\n            point = this.dataArray[i].points.slice(0, 2);\n            return {\n                x: point[0],\n                y: point[1]\n            };\n        }\n        var cp = this.dataArray[i];\n        var p = cp.points;\n        switch (cp.command) {\n            case 'L':\n                return Path.getPointOnLine(length, cp.start.x, cp.start.y, p[0], p[1]);\n            case 'C':\n                return Path.getPointOnCubicBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3], p[4], p[5]);\n            case 'Q':\n                return Path.getPointOnQuadraticBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3]);\n            case 'A':\n                var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6];\n                theta += (dTheta * length) / cp.pathLength;\n                return Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi);\n        }\n        return null;\n    };\n    Path.getLineLength = function (x1, y1, x2, y2) {\n        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    };\n    Path.getPointOnLine = function (dist, P1x, P1y, P2x, P2y, fromX, fromY) {\n        if (fromX === undefined) {\n            fromX = P1x;\n        }\n        if (fromY === undefined) {\n            fromY = P1y;\n        }\n        var m = (P2y - P1y) / (P2x - P1x + 0.00000001);\n        var run = Math.sqrt((dist * dist) / (1 + m * m));\n        if (P2x < P1x) {\n            run *= -1;\n        }\n        var rise = m * run;\n        var pt;\n        if (P2x === P1x) {\n            pt = {\n                x: fromX,\n                y: fromY + rise\n            };\n        }\n        else if ((fromY - P1y) / (fromX - P1x + 0.00000001) === m) {\n            pt = {\n                x: fromX + run,\n                y: fromY + rise\n            };\n        }\n        else {\n            var ix, iy;\n            var len = this.getLineLength(P1x, P1y, P2x, P2y);\n            if (len < 0.00000001) {\n                return undefined;\n            }\n            var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n            u = u / (len * len);\n            ix = P1x + u * (P2x - P1x);\n            iy = P1y + u * (P2y - P1y);\n            var pRise = this.getLineLength(fromX, fromY, ix, iy);\n            var pRun = Math.sqrt(dist * dist - pRise * pRise);\n            run = Math.sqrt((pRun * pRun) / (1 + m * m));\n            if (P2x < P1x) {\n                run *= -1;\n            }\n            rise = m * run;\n            pt = {\n                x: ix + run,\n                y: iy + rise\n            };\n        }\n        return pt;\n    };\n    Path.getPointOnCubicBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n        function CB1(t) {\n            return t * t * t;\n        }\n        function CB2(t) {\n            return 3 * t * t * (1 - t);\n        }\n        function CB3(t) {\n            return 3 * t * (1 - t) * (1 - t);\n        }\n        function CB4(t) {\n            return (1 - t) * (1 - t) * (1 - t);\n        }\n        var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n        var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n        return {\n            x: x,\n            y: y\n        };\n    };\n    Path.getPointOnQuadraticBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n        function QB1(t) {\n            return t * t;\n        }\n        function QB2(t) {\n            return 2 * t * (1 - t);\n        }\n        function QB3(t) {\n            return (1 - t) * (1 - t);\n        }\n        var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n        var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n        return {\n            x: x,\n            y: y\n        };\n    };\n    Path.getPointOnEllipticalArc = function (cx, cy, rx, ry, theta, psi) {\n        var cosPsi = Math.cos(psi), sinPsi = Math.sin(psi);\n        var pt = {\n            x: rx * Math.cos(theta),\n            y: ry * Math.sin(theta)\n        };\n        return {\n            x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n            y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n        };\n    };\n    Path.parsePathData = function (data) {\n        if (!data) {\n            return [];\n        }\n        var cs = data;\n        var cc = [\n            'm',\n            'M',\n            'l',\n            'L',\n            'v',\n            'V',\n            'h',\n            'H',\n            'z',\n            'Z',\n            'c',\n            'C',\n            'q',\n            'Q',\n            't',\n            'T',\n            's',\n            'S',\n            'a',\n            'A'\n        ];\n        cs = cs.replace(new RegExp(' ', 'g'), ',');\n        for (var n = 0; n < cc.length; n++) {\n            cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n        }\n        var arr = cs.split('|');\n        var ca = [];\n        var coords = [];\n        var cpx = 0;\n        var cpy = 0;\n        var re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/gi;\n        var match;\n        for (n = 1; n < arr.length; n++) {\n            var str = arr[n];\n            var c = str.charAt(0);\n            str = str.slice(1);\n            coords.length = 0;\n            while ((match = re.exec(str))) {\n                coords.push(match[0]);\n            }\n            var p = [];\n            for (var j = 0, jlen = coords.length; j < jlen; j++) {\n                var parsed = parseFloat(coords[j]);\n                if (!isNaN(parsed)) {\n                    p.push(parsed);\n                }\n                else {\n                    p.push(0);\n                }\n            }\n            while (p.length > 0) {\n                if (isNaN(p[0])) {\n                    break;\n                }\n                var cmd = null;\n                var points = [];\n                var startX = cpx, startY = cpy;\n                var prevCmd, ctlPtx, ctlPty;\n                var rx, ry, psi, fa, fs, x1, y1;\n                switch (c) {\n                    case 'l':\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'L':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'm':\n                        var dx = p.shift();\n                        var dy = p.shift();\n                        cpx += dx;\n                        cpy += dy;\n                        cmd = 'M';\n                        if (ca.length > 2 && ca[ca.length - 1].command === 'z') {\n                            for (var idx = ca.length - 2; idx >= 0; idx--) {\n                                if (ca[idx].command === 'M') {\n                                    cpx = ca[idx].points[0] + dx;\n                                    cpy = ca[idx].points[1] + dy;\n                                    break;\n                                }\n                            }\n                        }\n                        points.push(cpx, cpy);\n                        c = 'l';\n                        break;\n                    case 'M':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'M';\n                        points.push(cpx, cpy);\n                        c = 'L';\n                        break;\n                    case 'h':\n                        cpx += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'H':\n                        cpx = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'v':\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'V':\n                        cpy = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'C':\n                        points.push(p.shift(), p.shift(), p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'c':\n                        points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'S':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 's':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'Q':\n                        points.push(p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'q':\n                        points.push(cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'T':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 't':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 'A':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                    case 'a':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                }\n                ca.push({\n                    command: cmd || c,\n                    points: points,\n                    start: {\n                        x: startX,\n                        y: startY\n                    },\n                    pathLength: this.calcLength(startX, startY, cmd || c, points)\n                });\n            }\n            if (c === 'z' || c === 'Z') {\n                ca.push({\n                    command: 'z',\n                    points: [],\n                    start: undefined,\n                    pathLength: 0\n                });\n            }\n        }\n        return ca;\n    };\n    Path.calcLength = function (x, y, cmd, points) {\n        var len, p1, p2, t;\n        var path = Path;\n        switch (cmd) {\n            case 'L':\n                return path.getLineLength(x, y, points[0], points[1]);\n            case 'C':\n                len = 0.0;\n                p1 = path.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                for (t = 0.01; t <= 1; t += 0.01) {\n                    p2 = path.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n                return len;\n            case 'Q':\n                len = 0.0;\n                p1 = path.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n                for (t = 0.01; t <= 1; t += 0.01) {\n                    p2 = path.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n                return len;\n            case 'A':\n                len = 0.0;\n                var start = points[4];\n                var dTheta = points[5];\n                var end = points[4] + dTheta;\n                var inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n                if (dTheta < 0) {\n                    for (t = start - inc; t > end; t -= inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                else {\n                    for (t = start + inc; t < end; t += inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n                len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                return len;\n        }\n        return 0;\n    };\n    Path.convertEndpointToCenterParameterization = function (x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n        var psi = psiDeg * (Math.PI / 180.0);\n        var xp = (Math.cos(psi) * (x1 - x2)) / 2.0 + (Math.sin(psi) * (y1 - y2)) / 2.0;\n        var yp = (-1 * Math.sin(psi) * (x1 - x2)) / 2.0 +\n            (Math.cos(psi) * (y1 - y2)) / 2.0;\n        var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n        if (lambda > 1) {\n            rx *= Math.sqrt(lambda);\n            ry *= Math.sqrt(lambda);\n        }\n        var f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) /\n            (rx * rx * (yp * yp) + ry * ry * (xp * xp)));\n        if (fa === fs) {\n            f *= -1;\n        }\n        if (isNaN(f)) {\n            f = 0;\n        }\n        var cxp = (f * rx * yp) / ry;\n        var cyp = (f * -ry * xp) / rx;\n        var cx = (x1 + x2) / 2.0 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\n        var cy = (y1 + y2) / 2.0 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\n        var vMag = function (v) {\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n        };\n        var vRatio = function (u, v) {\n            return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n        };\n        var vAngle = function (u, v) {\n            return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n        };\n        var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n        var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n        var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n        var dTheta = vAngle(u, v);\n        if (vRatio(u, v) <= -1) {\n            dTheta = Math.PI;\n        }\n        if (vRatio(u, v) >= 1) {\n            dTheta = 0;\n        }\n        if (fs === 0 && dTheta > 0) {\n            dTheta = dTheta - 2 * Math.PI;\n        }\n        if (fs === 1 && dTheta < 0) {\n            dTheta = dTheta + 2 * Math.PI;\n        }\n        return [cx, cy, rx, ry, theta, dTheta, psi, fs];\n    };\n    return Path;\n}(Shape_1.Shape));\nexports.Path = Path;\nPath.prototype.className = 'Path';\nPath.prototype._attrsAffectingSize = ['data'];\nGlobal_1._registerNode(Path);\nFactory_1.Factory.addGetterSetter(Path, 'data');\nUtil_1.Collection.mapMethods(Path);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Global_1 = require(\"../Global\");\nvar Rect = (function (_super) {\n    __extends(Rect, _super);\n    function Rect() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Rect.prototype._sceneFunc = function (context) {\n        var cornerRadius = this.cornerRadius(), width = this.width(), height = this.height();\n        context.beginPath();\n        if (!cornerRadius) {\n            context.rect(0, 0, width, height);\n        }\n        else {\n            var topLeft = 0;\n            var topRight = 0;\n            var bottomLeft = 0;\n            var bottomRight = 0;\n            if (typeof cornerRadius === 'number') {\n                topLeft = topRight = bottomLeft = bottomRight = Math.min(cornerRadius, width / 2, height / 2);\n            }\n            else {\n                topLeft = Math.min(cornerRadius[0], width / 2, height / 2);\n                topRight = Math.min(cornerRadius[1], width / 2, height / 2);\n                bottomRight = Math.min(cornerRadius[2], width / 2, height / 2);\n                bottomLeft = Math.min(cornerRadius[3], width / 2, height / 2);\n            }\n            context.moveTo(topLeft, 0);\n            context.lineTo(width - topRight, 0);\n            context.arc(width - topRight, topRight, topRight, (Math.PI * 3) / 2, 0, false);\n            context.lineTo(width, height - bottomRight);\n            context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n            context.lineTo(bottomLeft, height);\n            context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n            context.lineTo(0, topLeft);\n            context.arc(topLeft, topLeft, topLeft, Math.PI, (Math.PI * 3) / 2, false);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    return Rect;\n}(Shape_1.Shape));\nexports.Rect = Rect;\nRect.prototype.className = 'Rect';\nGlobal_1._registerNode(Rect);\nFactory_1.Factory.addGetterSetter(Rect, 'cornerRadius', 0);\nUtil_1.Collection.mapMethods(Rect);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar RegularPolygon = (function (_super) {\n    __extends(RegularPolygon, _super);\n    function RegularPolygon() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RegularPolygon.prototype._sceneFunc = function (context) {\n        var sides = this.sides(), radius = this.radius(), n, x, y;\n        context.beginPath();\n        context.moveTo(0, 0 - radius);\n        for (n = 1; n < sides; n++) {\n            x = radius * Math.sin((n * 2 * Math.PI) / sides);\n            y = -1 * radius * Math.cos((n * 2 * Math.PI) / sides);\n            context.lineTo(x, y);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    RegularPolygon.prototype.getWidth = function () {\n        return this.radius() * 2;\n    };\n    RegularPolygon.prototype.getHeight = function () {\n        return this.radius() * 2;\n    };\n    RegularPolygon.prototype.setWidth = function (width) {\n        this.radius(width / 2);\n    };\n    RegularPolygon.prototype.setHeight = function (height) {\n        this.radius(height / 2);\n    };\n    return RegularPolygon;\n}(Shape_1.Shape));\nexports.RegularPolygon = RegularPolygon;\nRegularPolygon.prototype.className = 'RegularPolygon';\nRegularPolygon.prototype._centroid = true;\nRegularPolygon.prototype._attrsAffectingSize = ['radius'];\nGlobal_1._registerNode(RegularPolygon);\nFactory_1.Factory.addGetterSetter(RegularPolygon, 'radius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(RegularPolygon, 'sides', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(RegularPolygon);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar PIx2 = Math.PI * 2;\nvar Ring = (function (_super) {\n    __extends(Ring, _super);\n    function Ring() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Ring.prototype._sceneFunc = function (context) {\n        context.beginPath();\n        context.arc(0, 0, this.innerRadius(), 0, PIx2, false);\n        context.moveTo(this.outerRadius(), 0);\n        context.arc(0, 0, this.outerRadius(), PIx2, 0, true);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Ring.prototype.getWidth = function () {\n        return this.outerRadius() * 2;\n    };\n    Ring.prototype.getHeight = function () {\n        return this.outerRadius() * 2;\n    };\n    Ring.prototype.setWidth = function (width) {\n        this.outerRadius(width / 2);\n    };\n    Ring.prototype.setHeight = function (height) {\n        this.outerRadius(height / 2);\n    };\n    return Ring;\n}(Shape_1.Shape));\nexports.Ring = Ring;\nRing.prototype.className = 'Ring';\nRing.prototype._centroid = true;\nRing.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\nGlobal_1._registerNode(Ring);\nFactory_1.Factory.addGetterSetter(Ring, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Ring, 'outerRadius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Ring);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Animation_1 = require(\"../Animation\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Sprite = (function (_super) {\n    __extends(Sprite, _super);\n    function Sprite(config) {\n        var _this = _super.call(this, config) || this;\n        _this._updated = true;\n        _this.anim = new Animation_1.Animation(function () {\n            var updated = _this._updated;\n            _this._updated = false;\n            return updated;\n        });\n        _this.on('animationChange.konva', function () {\n            this.frameIndex(0);\n        });\n        _this.on('frameIndexChange.konva', function () {\n            this._updated = true;\n        });\n        _this.on('frameRateChange.konva', function () {\n            if (!this.anim.isRunning()) {\n                return;\n            }\n            clearInterval(this.interval);\n            this._setInterval();\n        });\n        return _this;\n    }\n    Sprite.prototype._sceneFunc = function (context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), x = set[ix4 + 0], y = set[ix4 + 1], width = set[ix4 + 2], height = set[ix4 + 3], image = this.image();\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            if (offsets) {\n                var offset = offsets[anim], ix2 = index * 2;\n                context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);\n            }\n            else {\n                context.drawImage(image, x, y, width, height, 0, 0, width, height);\n            }\n        }\n    };\n    Sprite.prototype._hitFunc = function (context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), width = set[ix4 + 2], height = set[ix4 + 3];\n        context.beginPath();\n        if (offsets) {\n            var offset = offsets[anim];\n            var ix2 = index * 2;\n            context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);\n        }\n        else {\n            context.rect(0, 0, width, height);\n        }\n        context.closePath();\n        context.fillShape(this);\n    };\n    Sprite.prototype._useBufferCanvas = function () {\n        return ((this.hasShadow() || this.getAbsoluteOpacity() !== 1) && this.hasStroke());\n    };\n    Sprite.prototype._setInterval = function () {\n        var that = this;\n        this.interval = setInterval(function () {\n            that._updateIndex();\n        }, 1000 / this.frameRate());\n    };\n    Sprite.prototype.start = function () {\n        if (this.isRunning()) {\n            return;\n        }\n        var layer = this.getLayer();\n        this.anim.setLayers(layer);\n        this._setInterval();\n        this.anim.start();\n    };\n    Sprite.prototype.stop = function () {\n        this.anim.stop();\n        clearInterval(this.interval);\n    };\n    Sprite.prototype.isRunning = function () {\n        return this.anim.isRunning();\n    };\n    Sprite.prototype._updateIndex = function () {\n        var index = this.frameIndex(), animation = this.animation(), animations = this.animations(), anim = animations[animation], len = anim.length / 4;\n        if (index < len - 1) {\n            this.frameIndex(index + 1);\n        }\n        else {\n            this.frameIndex(0);\n        }\n    };\n    return Sprite;\n}(Shape_1.Shape));\nexports.Sprite = Sprite;\nSprite.prototype.className = 'Sprite';\nGlobal_1._registerNode(Sprite);\nFactory_1.Factory.addGetterSetter(Sprite, 'animation');\nFactory_1.Factory.addGetterSetter(Sprite, 'animations');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameOffsets');\nFactory_1.Factory.addGetterSetter(Sprite, 'image');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameIndex', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Sprite, 'frameRate', 17, Validators_1.getNumberValidator());\nFactory_1.Factory.backCompat(Sprite, {\n    index: 'frameIndex',\n    getIndex: 'getFrameIndex',\n    setIndex: 'setFrameIndex'\n});\nUtil_1.Collection.mapMethods(Sprite);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Star = (function (_super) {\n    __extends(Star, _super);\n    function Star() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Star.prototype._sceneFunc = function (context) {\n        var innerRadius = this.innerRadius(), outerRadius = this.outerRadius(), numPoints = this.numPoints();\n        context.beginPath();\n        context.moveTo(0, 0 - outerRadius);\n        for (var n = 1; n < numPoints * 2; n++) {\n            var radius = n % 2 === 0 ? outerRadius : innerRadius;\n            var x = radius * Math.sin((n * Math.PI) / numPoints);\n            var y = -1 * radius * Math.cos((n * Math.PI) / numPoints);\n            context.lineTo(x, y);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Star.prototype.getWidth = function () {\n        return this.outerRadius() * 2;\n    };\n    Star.prototype.getHeight = function () {\n        return this.outerRadius() * 2;\n    };\n    Star.prototype.setWidth = function (width) {\n        this.outerRadius(width / 2);\n    };\n    Star.prototype.setHeight = function (height) {\n        this.outerRadius(height / 2);\n    };\n    return Star;\n}(Shape_1.Shape));\nexports.Star = Star;\nStar.prototype.className = 'Star';\nStar.prototype._centroid = true;\nStar.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\nGlobal_1._registerNode(Star);\nFactory_1.Factory.addGetterSetter(Star, 'numPoints', 5, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Star, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Star, 'outerRadius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Star);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Global_1 = require(\"../Global\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_2 = require(\"../Global\");\nvar AUTO = 'auto', CENTER = 'center', JUSTIFY = 'justify', CHANGE_KONVA = 'Change.konva', CONTEXT_2D = '2d', DASH = '-', LEFT = 'left', TEXT = 'text', TEXT_UPPER = 'Text', TOP = 'top', BOTTOM = 'bottom', MIDDLE = 'middle', NORMAL = 'normal', PX_SPACE = 'px ', SPACE = ' ', RIGHT = 'right', WORD = 'word', CHAR = 'char', NONE = 'none', ELLIPSIS = '', ATTR_CHANGE_LIST = [\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'fontVariant',\n    'padding',\n    'align',\n    'verticalAlign',\n    'lineHeight',\n    'text',\n    'width',\n    'height',\n    'wrap',\n    'ellipsis',\n    'letterSpacing'\n], attrChangeListLen = ATTR_CHANGE_LIST.length;\nvar dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = Util_1.Util.createCanvasElement().getContext(CONTEXT_2D);\n    return dummyContext;\n}\nfunction _fillFunc(context) {\n    context.fillText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction _strokeFunc(context) {\n    context.strokeText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction checkDefaultFill(config) {\n    config = config || {};\n    if (!config.fillLinearGradientColorStops &&\n        !config.fillRadialGradientColorStops &&\n        !config.fillPatternImage) {\n        config.fill = config.fill || 'black';\n    }\n    return config;\n}\nvar trimRight = String.prototype.trimRight ||\n    function polyfill() {\n        return this.replace(/[\\s\\xa0]+$/, '');\n    };\nvar Text = (function (_super) {\n    __extends(Text, _super);\n    function Text(config) {\n        var _this = _super.call(this, checkDefaultFill(config)) || this;\n        _this._partialTextX = 0;\n        _this._partialTextY = 0;\n        for (var n = 0; n < attrChangeListLen; n++) {\n            _this.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, _this._setTextData);\n        }\n        _this._setTextData();\n        return _this;\n    }\n    Text.prototype._sceneFunc = function (context) {\n        var padding = this.padding(), fontSize = this.fontSize(), lineHeightPx = this.lineHeight() * fontSize, textArr = this.textArr, textArrLen = textArr.length, verticalAlign = this.verticalAlign(), alignY = 0, align = this.align(), totalWidth = this.getWidth(), letterSpacing = this.letterSpacing(), fill = this.fill(), textDecoration = this.textDecoration(), shouldUnderline = textDecoration.indexOf('underline') !== -1, shouldLineThrough = textDecoration.indexOf('line-through') !== -1, n;\n        var translateY = 0;\n        var translateY = lineHeightPx / 2;\n        var lineTranslateX = 0;\n        var lineTranslateY = 0;\n        context.setAttr('font', this._getContextFont());\n        context.setAttr('textBaseline', MIDDLE);\n        context.setAttr('textAlign', LEFT);\n        if (verticalAlign === MIDDLE) {\n            alignY = (this.getHeight() - textArrLen * lineHeightPx - padding * 2) / 2;\n        }\n        else if (verticalAlign === BOTTOM) {\n            alignY = this.getHeight() - textArrLen * lineHeightPx - padding * 2;\n        }\n        context.translate(padding, alignY + padding);\n        for (n = 0; n < textArrLen; n++) {\n            var lineTranslateX = 0;\n            var lineTranslateY = 0;\n            var obj = textArr[n], text = obj.text, width = obj.width, lastLine = n !== textArrLen - 1, spacesNumber, oneWord, lineWidth;\n            context.save();\n            if (align === RIGHT) {\n                lineTranslateX += totalWidth - width - padding * 2;\n            }\n            else if (align === CENTER) {\n                lineTranslateX += (totalWidth - width - padding * 2) / 2;\n            }\n            if (shouldUnderline) {\n                context.save();\n                context.beginPath();\n                context.moveTo(lineTranslateX, translateY + lineTranslateY + Math.round(fontSize / 2));\n                spacesNumber = text.split(' ').length - 1;\n                oneWord = spacesNumber === 0;\n                lineWidth =\n                    align === JUSTIFY && lastLine && !oneWord\n                        ? totalWidth - padding * 2\n                        : width;\n                context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY + Math.round(fontSize / 2));\n                context.lineWidth = fontSize / 15;\n                context.strokeStyle = fill;\n                context.stroke();\n                context.restore();\n            }\n            if (shouldLineThrough) {\n                context.save();\n                context.beginPath();\n                context.moveTo(lineTranslateX, translateY + lineTranslateY);\n                spacesNumber = text.split(' ').length - 1;\n                oneWord = spacesNumber === 0;\n                lineWidth =\n                    align === JUSTIFY && lastLine && !oneWord\n                        ? totalWidth - padding * 2\n                        : width;\n                context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY);\n                context.lineWidth = fontSize / 15;\n                context.strokeStyle = fill;\n                context.stroke();\n                context.restore();\n            }\n            if (letterSpacing !== 0 || align === JUSTIFY) {\n                spacesNumber = text.split(' ').length - 1;\n                for (var li = 0; li < text.length; li++) {\n                    var letter = text[li];\n                    if (letter === ' ' && n !== textArrLen - 1 && align === JUSTIFY) {\n                        lineTranslateX += Math.floor((totalWidth - padding * 2 - width) / spacesNumber);\n                    }\n                    this._partialTextX = lineTranslateX;\n                    this._partialTextY = translateY + lineTranslateY;\n                    this._partialText = letter;\n                    context.fillStrokeShape(this);\n                    lineTranslateX +=\n                        Math.round(this.measureSize(letter).width) + letterSpacing;\n                }\n            }\n            else {\n                this._partialTextX = lineTranslateX;\n                this._partialTextY = translateY + lineTranslateY;\n                this._partialText = text;\n                context.fillStrokeShape(this);\n            }\n            context.restore();\n            if (textArrLen > 1) {\n                translateY += lineHeightPx;\n            }\n        }\n    };\n    Text.prototype._hitFunc = function (context) {\n        var width = this.getWidth(), height = this.getHeight();\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Text.prototype.setText = function (text) {\n        var str = Util_1.Util._isString(text)\n            ? text\n            : text === null || text === undefined\n                ? ''\n                : text + '';\n        this._setAttr(TEXT, str);\n        return this;\n    };\n    Text.prototype.getWidth = function () {\n        var isAuto = this.attrs.width === AUTO || this.attrs.width === undefined;\n        return isAuto ? this.getTextWidth() + this.padding() * 2 : this.attrs.width;\n    };\n    Text.prototype.getHeight = function () {\n        var isAuto = this.attrs.height === AUTO || this.attrs.height === undefined;\n        return isAuto\n            ? this.fontSize() * this.textArr.length * this.lineHeight() +\n                this.padding() * 2\n            : this.attrs.height;\n    };\n    Text.prototype.getTextWidth = function () {\n        return this.textWidth;\n    };\n    Text.prototype.getTextHeight = function () {\n        Util_1.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n        return this.textHeight;\n    };\n    Text.prototype.measureSize = function (text) {\n        var _context = getDummyContext(), fontSize = this.fontSize(), metrics;\n        _context.save();\n        _context.font = this._getContextFont();\n        metrics = _context.measureText(text);\n        _context.restore();\n        return {\n            width: metrics.width,\n            height: fontSize\n        };\n    };\n    Text.prototype._getContextFont = function () {\n        if (Global_1.Konva.UA.isIE) {\n            return (this.fontStyle() +\n                SPACE +\n                this.fontSize() +\n                PX_SPACE +\n                this.fontFamily());\n        }\n        return (this.fontStyle() +\n            SPACE +\n            this.fontVariant() +\n            SPACE +\n            this.fontSize() +\n            PX_SPACE +\n            this.fontFamily());\n    };\n    Text.prototype._addTextLine = function (line) {\n        if (this.align() === JUSTIFY) {\n            line = line.trim();\n        }\n        var width = this._getTextWidth(line);\n        return this.textArr.push({ text: line, width: width });\n    };\n    Text.prototype._getTextWidth = function (text) {\n        var letterSpacing = this.letterSpacing();\n        var length = text.length;\n        return (getDummyContext().measureText(text).width +\n            (length ? letterSpacing * (length - 1) : 0));\n    };\n    Text.prototype._setTextData = function () {\n        var lines = this.text().split('\\n'), fontSize = +this.fontSize(), textWidth = 0, lineHeightPx = this.lineHeight() * fontSize, width = this.attrs.width, height = this.attrs.height, fixedWidth = width !== AUTO && width !== undefined, fixedHeight = height !== AUTO && height !== undefined, padding = this.padding(), maxWidth = width - padding * 2, maxHeightPx = height - padding * 2, currentHeightPx = 0, wrap = this.wrap(), shouldWrap = wrap !== NONE, wrapAtWord = wrap !== CHAR && shouldWrap, shouldAddEllipsis = this.ellipsis() && !shouldWrap;\n        this.textArr = [];\n        getDummyContext().font = this._getContextFont();\n        var additionalWidth = shouldAddEllipsis ? this._getTextWidth(ELLIPSIS) : 0;\n        for (var i = 0, max = lines.length; i < max; ++i) {\n            var line = lines[i];\n            var lineWidth = this._getTextWidth(line);\n            if (fixedWidth && lineWidth > maxWidth) {\n                while (line.length > 0) {\n                    var low = 0, high = line.length, match = '', matchWidth = 0;\n                    while (low < high) {\n                        var mid = (low + high) >>> 1, substr = line.slice(0, mid + 1), substrWidth = this._getTextWidth(substr) + additionalWidth;\n                        if (substrWidth <= maxWidth) {\n                            low = mid + 1;\n                            match = substr + (shouldAddEllipsis ? ELLIPSIS : '');\n                            matchWidth = substrWidth;\n                        }\n                        else {\n                            high = mid;\n                        }\n                    }\n                    if (match) {\n                        if (wrapAtWord) {\n                            var wrapIndex;\n                            var nextChar = line[match.length];\n                            var nextIsSpaceOrDash = nextChar === SPACE || nextChar === DASH;\n                            if (nextIsSpaceOrDash && matchWidth <= maxWidth) {\n                                wrapIndex = match.length;\n                            }\n                            else {\n                                wrapIndex =\n                                    Math.max(match.lastIndexOf(SPACE), match.lastIndexOf(DASH)) +\n                                        1;\n                            }\n                            if (wrapIndex > 0) {\n                                low = wrapIndex;\n                                match = match.slice(0, low);\n                                matchWidth = this._getTextWidth(match);\n                            }\n                        }\n                        match = match.trimRight();\n                        this._addTextLine(match);\n                        textWidth = Math.max(textWidth, matchWidth);\n                        currentHeightPx += lineHeightPx;\n                        if (!shouldWrap ||\n                            (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx)) {\n                            break;\n                        }\n                        line = line.slice(low);\n                        line = line.trimLeft();\n                        if (line.length > 0) {\n                            lineWidth = this._getTextWidth(line);\n                            if (lineWidth <= maxWidth) {\n                                this._addTextLine(line);\n                                currentHeightPx += lineHeightPx;\n                                textWidth = Math.max(textWidth, lineWidth);\n                                break;\n                            }\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            else {\n                this._addTextLine(line);\n                currentHeightPx += lineHeightPx;\n                textWidth = Math.max(textWidth, lineWidth);\n            }\n            if (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n                break;\n            }\n        }\n        this.textHeight = fontSize;\n        this.textWidth = textWidth;\n    };\n    Text.prototype.getStrokeScaleEnabled = function () {\n        return true;\n    };\n    return Text;\n}(Shape_1.Shape));\nexports.Text = Text;\nText.prototype._fillFunc = _fillFunc;\nText.prototype._strokeFunc = _strokeFunc;\nText.prototype.className = TEXT_UPPER;\nText.prototype._attrsAffectingSize = [\n    'text',\n    'fontSize',\n    'padding',\n    'wrap',\n    'lineHeight'\n];\nGlobal_2._registerNode(Text);\nFactory_1.Factory.overWriteSetter(Text, 'width', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.overWriteSetter(Text, 'height', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.addGetterSetter(Text, 'fontFamily', 'Arial');\nFactory_1.Factory.addGetterSetter(Text, 'fontSize', 12, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'fontStyle', NORMAL);\nFactory_1.Factory.addGetterSetter(Text, 'fontVariant', NORMAL);\nFactory_1.Factory.addGetterSetter(Text, 'padding', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'align', LEFT);\nFactory_1.Factory.addGetterSetter(Text, 'verticalAlign', TOP);\nFactory_1.Factory.addGetterSetter(Text, 'lineHeight', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'wrap', WORD);\nFactory_1.Factory.addGetterSetter(Text, 'ellipsis', false);\nFactory_1.Factory.addGetterSetter(Text, 'letterSpacing', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'text', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Text, 'textDecoration', '');\nUtil_1.Collection.mapMethods(Text);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Path_1 = require(\"./Path\");\nvar Text_1 = require(\"./Text\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar EMPTY_STRING = '', NORMAL = 'normal';\nfunction _fillFunc(context) {\n    context.fillText(this.partialText, 0, 0);\n}\nfunction _strokeFunc(context) {\n    context.strokeText(this.partialText, 0, 0);\n}\nvar TextPath = (function (_super) {\n    __extends(TextPath, _super);\n    function TextPath(config) {\n        var _this = _super.call(this, config) || this;\n        _this.dummyCanvas = Util_1.Util.createCanvasElement();\n        _this.dataArray = [];\n        _this.dataArray = Path_1.Path.parsePathData(_this.attrs.data);\n        _this.on('dataChange.konva', function () {\n            this.dataArray = Path_1.Path.parsePathData(this.attrs.data);\n            this._setTextData();\n        });\n        _this.on('textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva', _this._setTextData);\n        if (config && config['getKerning']) {\n            Util_1.Util.warn('getKerning TextPath API is deprecated. Please use \"kerningFunc\" instead.');\n            _this.kerningFunc(config['getKerning']);\n        }\n        _this._setTextData();\n        return _this;\n    }\n    TextPath.prototype._sceneFunc = function (context) {\n        context.setAttr('font', this._getContextFont());\n        context.setAttr('textBaseline', this.textBaseline());\n        context.setAttr('textAlign', 'left');\n        context.save();\n        var textDecoration = this.textDecoration();\n        var fill = this.fill();\n        var fontSize = this.fontSize();\n        var glyphInfo = this.glyphInfo;\n        if (textDecoration === 'underline') {\n            context.beginPath();\n        }\n        for (var i = 0; i < glyphInfo.length; i++) {\n            context.save();\n            var p0 = glyphInfo[i].p0;\n            context.translate(p0.x, p0.y);\n            context.rotate(glyphInfo[i].rotation);\n            this.partialText = glyphInfo[i].text;\n            context.fillStrokeShape(this);\n            if (textDecoration === 'underline') {\n                if (i === 0) {\n                    context.moveTo(0, fontSize / 2 + 1);\n                }\n                context.lineTo(fontSize, fontSize / 2 + 1);\n            }\n            context.restore();\n        }\n        if (textDecoration === 'underline') {\n            context.strokeStyle = fill;\n            context.lineWidth = fontSize / 20;\n            context.stroke();\n        }\n        context.restore();\n    };\n    TextPath.prototype._hitFunc = function (context) {\n        context.beginPath();\n        var glyphInfo = this.glyphInfo;\n        if (glyphInfo.length >= 1) {\n            var p0 = glyphInfo[0].p0;\n            context.moveTo(p0.x, p0.y);\n        }\n        for (var i = 0; i < glyphInfo.length; i++) {\n            var p1 = glyphInfo[i].p1;\n            context.lineTo(p1.x, p1.y);\n        }\n        context.setAttr('lineWidth', this.fontSize());\n        context.setAttr('strokeStyle', this.colorKey);\n        context.stroke();\n    };\n    TextPath.prototype.getTextWidth = function () {\n        return this.textWidth;\n    };\n    TextPath.prototype.getTextHeight = function () {\n        Util_1.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n        return this.textHeight;\n    };\n    TextPath.prototype.setText = function (text) {\n        return Text_1.Text.prototype.setText.call(this, text);\n    };\n    TextPath.prototype._getContextFont = function () {\n        return Text_1.Text.prototype._getContextFont.call(this);\n    };\n    TextPath.prototype._getTextSize = function (text) {\n        var dummyCanvas = this.dummyCanvas;\n        var _context = dummyCanvas.getContext('2d');\n        _context.save();\n        _context.font = this._getContextFont();\n        var metrics = _context.measureText(text);\n        _context.restore();\n        return {\n            width: metrics.width,\n            height: parseInt(this.attrs.fontSize, 10)\n        };\n    };\n    TextPath.prototype._setTextData = function () {\n        var that = this;\n        var size = this._getTextSize(this.attrs.text);\n        var letterSpacing = this.letterSpacing();\n        var align = this.align();\n        var kerningFunc = this.kerningFunc();\n        this.textWidth = size.width;\n        this.textHeight = size.height;\n        var textFullWidth = Math.max(this.textWidth + ((this.attrs.text || '').length - 1) * letterSpacing, 0);\n        this.glyphInfo = [];\n        var fullPathWidth = 0;\n        for (var l = 0; l < that.dataArray.length; l++) {\n            if (that.dataArray[l].pathLength > 0) {\n                fullPathWidth += that.dataArray[l].pathLength;\n            }\n        }\n        var offset = 0;\n        if (align === 'center') {\n            offset = Math.max(0, fullPathWidth / 2 - textFullWidth / 2);\n        }\n        if (align === 'right') {\n            offset = Math.max(0, fullPathWidth - textFullWidth);\n        }\n        var charArr = this.text().split('');\n        var spacesNumber = this.text().split(' ').length - 1;\n        var p0, p1, pathCmd;\n        var pIndex = -1;\n        var currentT = 0;\n        var getNextPathSegment = function () {\n            currentT = 0;\n            var pathData = that.dataArray;\n            for (var j = pIndex + 1; j < pathData.length; j++) {\n                if (pathData[j].pathLength > 0) {\n                    pIndex = j;\n                    return pathData[j];\n                }\n                else if (pathData[j].command === 'M') {\n                    p0 = {\n                        x: pathData[j].points[0],\n                        y: pathData[j].points[1]\n                    };\n                }\n            }\n            return {};\n        };\n        var findSegmentToFitCharacter = function (c) {\n            var glyphWidth = that._getTextSize(c).width + letterSpacing;\n            if (c === ' ' && align === 'justify') {\n                glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber;\n            }\n            var currLen = 0;\n            var attempts = 0;\n            p1 = undefined;\n            while (Math.abs(glyphWidth - currLen) / glyphWidth > 0.01 &&\n                attempts < 25) {\n                attempts++;\n                var cumulativePathLength = currLen;\n                while (pathCmd === undefined) {\n                    pathCmd = getNextPathSegment();\n                    if (pathCmd &&\n                        cumulativePathLength + pathCmd.pathLength < glyphWidth) {\n                        cumulativePathLength += pathCmd.pathLength;\n                        pathCmd = undefined;\n                    }\n                }\n                if (pathCmd === {} || p0 === undefined) {\n                    return undefined;\n                }\n                var needNewSegment = false;\n                switch (pathCmd.command) {\n                    case 'L':\n                        if (Path_1.Path.getLineLength(p0.x, p0.y, pathCmd.points[0], pathCmd.points[1]) > glyphWidth) {\n                            p1 = Path_1.Path.getPointOnLine(glyphWidth, p0.x, p0.y, pathCmd.points[0], pathCmd.points[1], p0.x, p0.y);\n                        }\n                        else {\n                            pathCmd = undefined;\n                        }\n                        break;\n                    case 'A':\n                        var start = pathCmd.points[4];\n                        var dTheta = pathCmd.points[5];\n                        var end = pathCmd.points[4] + dTheta;\n                        if (currentT === 0) {\n                            currentT = start + 0.00000001;\n                        }\n                        else if (glyphWidth > currLen) {\n                            currentT += ((Math.PI / 180.0) * dTheta) / Math.abs(dTheta);\n                        }\n                        else {\n                            currentT -= ((Math.PI / 360.0) * dTheta) / Math.abs(dTheta);\n                        }\n                        if ((dTheta < 0 && currentT < end) ||\n                            (dTheta >= 0 && currentT > end)) {\n                            currentT = end;\n                            needNewSegment = true;\n                        }\n                        p1 = Path_1.Path.getPointOnEllipticalArc(pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], currentT, pathCmd.points[6]);\n                        break;\n                    case 'C':\n                        if (currentT === 0) {\n                            if (glyphWidth > pathCmd.pathLength) {\n                                currentT = 0.00000001;\n                            }\n                            else {\n                                currentT = glyphWidth / pathCmd.pathLength;\n                            }\n                        }\n                        else if (glyphWidth > currLen) {\n                            currentT += (glyphWidth - currLen) / pathCmd.pathLength;\n                        }\n                        else {\n                            currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\n                        }\n                        if (currentT > 1.0) {\n                            currentT = 1.0;\n                            needNewSegment = true;\n                        }\n                        p1 = Path_1.Path.getPointOnCubicBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], pathCmd.points[4], pathCmd.points[5]);\n                        break;\n                    case 'Q':\n                        if (currentT === 0) {\n                            currentT = glyphWidth / pathCmd.pathLength;\n                        }\n                        else if (glyphWidth > currLen) {\n                            currentT += (glyphWidth - currLen) / pathCmd.pathLength;\n                        }\n                        else {\n                            currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\n                        }\n                        if (currentT > 1.0) {\n                            currentT = 1.0;\n                            needNewSegment = true;\n                        }\n                        p1 = Path_1.Path.getPointOnQuadraticBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3]);\n                        break;\n                }\n                if (p1 !== undefined) {\n                    currLen = Path_1.Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n                }\n                if (needNewSegment) {\n                    needNewSegment = false;\n                    pathCmd = undefined;\n                }\n            }\n        };\n        var testChar = 'C';\n        var glyphWidth = that._getTextSize(testChar).width + letterSpacing;\n        var lettersInOffset = offset / glyphWidth - 1;\n        for (var k = 0; k < lettersInOffset; k++) {\n            findSegmentToFitCharacter(testChar);\n            if (p0 === undefined || p1 === undefined) {\n                break;\n            }\n            p0 = p1;\n        }\n        for (var i = 0; i < charArr.length; i++) {\n            findSegmentToFitCharacter(charArr[i]);\n            if (p0 === undefined || p1 === undefined) {\n                break;\n            }\n            var width = Path_1.Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n            var kern = 0;\n            if (kerningFunc) {\n                try {\n                    kern = kerningFunc(charArr[i - 1], charArr[i]) * this.fontSize();\n                }\n                catch (e) {\n                    kern = 0;\n                }\n            }\n            p0.x += kern;\n            p1.x += kern;\n            this.textWidth += kern;\n            var midpoint = Path_1.Path.getPointOnLine(kern + width / 2.0, p0.x, p0.y, p1.x, p1.y);\n            var rotation = Math.atan2(p1.y - p0.y, p1.x - p0.x);\n            this.glyphInfo.push({\n                transposeX: midpoint.x,\n                transposeY: midpoint.y,\n                text: charArr[i],\n                rotation: rotation,\n                p0: p0,\n                p1: p1\n            });\n            p0 = p1;\n        }\n    };\n    TextPath.prototype.getSelfRect = function () {\n        if (!this.glyphInfo.length) {\n            return {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0\n            };\n        }\n        var points = [];\n        this.glyphInfo.forEach(function (info) {\n            points.push(info.p0.x);\n            points.push(info.p0.y);\n            points.push(info.p1.x);\n            points.push(info.p1.y);\n        });\n        var minX = points[0] || 0;\n        var maxX = points[0] || 0;\n        var minY = points[1] || 0;\n        var maxY = points[1] || 0;\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        var fontSize = this.fontSize();\n        return {\n            x: minX - fontSize / 2,\n            y: minY - fontSize / 2,\n            width: maxX - minX + fontSize,\n            height: maxY - minY + fontSize\n        };\n    };\n    return TextPath;\n}(Shape_1.Shape));\nexports.TextPath = TextPath;\nTextPath.prototype._fillFunc = _fillFunc;\nTextPath.prototype._strokeFunc = _strokeFunc;\nTextPath.prototype._fillFuncHit = _fillFunc;\nTextPath.prototype._strokeFuncHit = _strokeFunc;\nTextPath.prototype.className = 'TextPath';\nTextPath.prototype._attrsAffectingSize = ['text', 'fontSize', 'data'];\nGlobal_1._registerNode(TextPath);\nFactory_1.Factory.addGetterSetter(TextPath, 'data');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontFamily', 'Arial');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontSize', 12, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(TextPath, 'fontStyle', NORMAL);\nFactory_1.Factory.addGetterSetter(TextPath, 'align', 'left');\nFactory_1.Factory.addGetterSetter(TextPath, 'letterSpacing', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(TextPath, 'textBaseline', 'middle');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontVariant', NORMAL);\nFactory_1.Factory.addGetterSetter(TextPath, 'text', EMPTY_STRING);\nFactory_1.Factory.addGetterSetter(TextPath, 'textDecoration', null);\nFactory_1.Factory.addGetterSetter(TextPath, 'kerningFunc', null);\nUtil_1.Collection.mapMethods(TextPath);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Shape_1 = require(\"../Shape\");\nvar Rect_1 = require(\"./Rect\");\nvar Group_1 = require(\"../Group\");\nvar Global_1 = require(\"../Global\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_2 = require(\"../Global\");\nvar EVENTS_NAME = 'tr-konva';\nvar ATTR_CHANGE_LIST = [\n    'resizeEnabledChange',\n    'rotateAnchorOffsetChange',\n    'rotateEnabledChange',\n    'enabledAnchorsChange',\n    'anchorSizeChange',\n    'borderEnabledChange',\n    'borderStrokeChange',\n    'borderStrokeWidthChange',\n    'borderDashChange',\n    'anchorStrokeChange',\n    'anchorStrokeWidthChange',\n    'anchorFillChange',\n    'anchorCornerRadiusChange',\n    'ignoreStrokeChange',\n]\n    .map(function (e) { return e + (\".\" + EVENTS_NAME); })\n    .join(' ');\nvar NODES_RECT = 'nodesRect';\nvar TRANSFORM_CHANGE_STR = [\n    'widthChange',\n    'heightChange',\n    'scaleXChange',\n    'scaleYChange',\n    'skewXChange',\n    'skewYChange',\n    'rotationChange',\n    'offsetXChange',\n    'offsetYChange',\n    'transformsEnabledChange',\n    'strokeWidthChange',\n]\n    .map(function (e) { return e + (\".\" + EVENTS_NAME); })\n    .join(' ');\nvar ANGLES = {\n    'top-left': -45,\n    'top-center': 0,\n    'top-right': 45,\n    'middle-right': -90,\n    'middle-left': 90,\n    'bottom-left': -135,\n    'bottom-center': 180,\n    'bottom-right': 135,\n};\nvar TOUCH_DEVICE = 'ontouchstart' in Global_1.Konva._global;\nfunction getCursor(anchorName, rad) {\n    if (anchorName === 'rotater') {\n        return 'crosshair';\n    }\n    rad += Util_1.Util._degToRad(ANGLES[anchorName] || 0);\n    var angle = ((Util_1.Util._radToDeg(rad) % 360) + 360) % 360;\n    if (Util_1.Util._inRange(angle, 315 + 22.5, 360) || Util_1.Util._inRange(angle, 0, 22.5)) {\n        return 'ns-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 45 - 22.5, 45 + 22.5)) {\n        return 'nesw-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 90 - 22.5, 90 + 22.5)) {\n        return 'ew-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 135 - 22.5, 135 + 22.5)) {\n        return 'nwse-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 180 - 22.5, 180 + 22.5)) {\n        return 'ns-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 225 - 22.5, 225 + 22.5)) {\n        return 'nesw-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 270 - 22.5, 270 + 22.5)) {\n        return 'ew-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 315 - 22.5, 315 + 22.5)) {\n        return 'nwse-resize';\n    }\n    else {\n        Util_1.Util.error('Transformer has unknown angle for cursor detection: ' + angle);\n        return 'pointer';\n    }\n}\nvar ANCHORS_NAMES = [\n    'top-left',\n    'top-center',\n    'top-right',\n    'middle-right',\n    'middle-left',\n    'bottom-left',\n    'bottom-center',\n    'bottom-right',\n];\nvar MAX_SAFE_INTEGER = 100000000;\nfunction getCenter(shape) {\n    return {\n        x: shape.x +\n            (shape.width / 2) * Math.cos(shape.rotation) +\n            (shape.height / 2) * Math.sin(-shape.rotation),\n        y: shape.y +\n            (shape.height / 2) * Math.cos(shape.rotation) +\n            (shape.width / 2) * Math.sin(shape.rotation),\n    };\n}\nfunction rotateAroundPoint(shape, angleRad, point) {\n    var x = point.x +\n        (shape.x - point.x) * Math.cos(angleRad) -\n        (shape.y - point.y) * Math.sin(angleRad);\n    var y = point.y +\n        (shape.x - point.x) * Math.sin(angleRad) +\n        (shape.y - point.y) * Math.cos(angleRad);\n    return __assign(__assign({}, shape), { rotation: shape.rotation + angleRad, x: x,\n        y: y });\n}\nfunction rotateAroundCenter(shape, deltaRad) {\n    var center = getCenter(shape);\n    return rotateAroundPoint(shape, deltaRad, center);\n}\nfunction getSnap(snaps, newRotationRad, tol) {\n    var snapped = newRotationRad;\n    for (var i = 0; i < snaps.length; i++) {\n        var angle = Global_1.Konva.getAngle(snaps[i]);\n        var absDiff = Math.abs(angle - newRotationRad) % (Math.PI * 2);\n        var dif = Math.min(absDiff, Math.PI * 2 - absDiff);\n        if (dif < tol) {\n            snapped = angle;\n        }\n    }\n    return snapped;\n}\nvar Transformer = (function (_super) {\n    __extends(Transformer, _super);\n    function Transformer(config) {\n        var _this = _super.call(this, config) || this;\n        _this._transforming = false;\n        _this._createElements();\n        _this._handleMouseMove = _this._handleMouseMove.bind(_this);\n        _this._handleMouseUp = _this._handleMouseUp.bind(_this);\n        _this.update = _this.update.bind(_this);\n        _this.on(ATTR_CHANGE_LIST, _this.update);\n        if (_this.getNode()) {\n            _this.update();\n        }\n        return _this;\n    }\n    Transformer.prototype.attachTo = function (node) {\n        this.setNode(node);\n        return this;\n    };\n    Transformer.prototype.setNode = function (node) {\n        Util_1.Util.warn('tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead.');\n        return this.setNodes([node]);\n    };\n    Transformer.prototype.getNode = function () {\n        return this._nodes && this._nodes[0];\n    };\n    Transformer.prototype.setNodes = function (nodes) {\n        var _this = this;\n        if (nodes === void 0) { nodes = []; }\n        if (this._nodes && this._nodes.length) {\n            this.detach();\n        }\n        this._nodes = nodes;\n        if (nodes.length === 1) {\n            this.rotation(nodes[0].rotation());\n        }\n        else {\n            this.rotation(0);\n        }\n        this._nodes.forEach(function (node) {\n            var additionalEvents = node._attrsAffectingSize\n                .map(function (prop) { return prop + 'Change.' + EVENTS_NAME; })\n                .join(' ');\n            var onChange = function () {\n                _this._resetTransformCache();\n                if (!_this._transforming) {\n                    _this.update();\n                }\n            };\n            node.on(additionalEvents, onChange);\n            node.on(TRANSFORM_CHANGE_STR, onChange);\n            node.on(\"_clearTransformCache.\" + EVENTS_NAME, onChange);\n            node.on(\"xChange.\" + EVENTS_NAME + \" yChange.\" + EVENTS_NAME, onChange);\n            _this._proxyDrag(node);\n        });\n        this._resetTransformCache();\n        var elementsCreated = !!this.findOne('.top-left');\n        if (elementsCreated) {\n            this.update();\n        }\n        return this;\n    };\n    Transformer.prototype._proxyDrag = function (node) {\n        var _this = this;\n        var lastPos;\n        node.on(\"dragstart.\" + EVENTS_NAME, function () {\n            lastPos = node.getAbsolutePosition();\n        });\n        node.on(\"dragmove.\" + EVENTS_NAME, function () {\n            if (!lastPos) {\n                return;\n            }\n            var abs = node.getAbsolutePosition();\n            var dx = abs.x - lastPos.x;\n            var dy = abs.y - lastPos.y;\n            _this.nodes().forEach(function (otherNode) {\n                if (otherNode === node) {\n                    return;\n                }\n                if (otherNode.isDragging()) {\n                    return;\n                }\n                var otherAbs = otherNode.getAbsolutePosition();\n                otherNode.setAbsolutePosition({\n                    x: otherAbs.x + dx,\n                    y: otherAbs.y + dy,\n                });\n                otherNode.startDrag();\n            });\n            lastPos = null;\n        });\n    };\n    Transformer.prototype.getNodes = function () {\n        return this._nodes;\n    };\n    Transformer.prototype.getActiveAnchor = function () {\n        return this._movingAnchorName;\n    };\n    Transformer.prototype.detach = function () {\n        if (this._nodes) {\n            this._nodes.forEach(function (node) {\n                node.off('.' + EVENTS_NAME);\n            });\n        }\n        this._nodes = [];\n        this._resetTransformCache();\n    };\n    Transformer.prototype._resetTransformCache = function () {\n        this._clearCache(NODES_RECT);\n        this._clearCache('transform');\n        this._clearSelfAndDescendantCache('absoluteTransform');\n    };\n    Transformer.prototype._getNodeRect = function () {\n        return this._getCache(NODES_RECT, this.__getNodeRect);\n    };\n    Transformer.prototype.__getNodeShape = function (node, rot, relative) {\n        if (rot === void 0) { rot = this.rotation(); }\n        var rect = node.getClientRect({\n            skipTransform: true,\n            skipShadow: true,\n            skipStroke: this.ignoreStroke(),\n        });\n        var absScale = node.getAbsoluteScale(relative);\n        var absPos = node.getAbsolutePosition(relative);\n        var dx = rect.x * absScale.x - node.offsetX() * absScale.x;\n        var dy = rect.y * absScale.y - node.offsetY() * absScale.y;\n        var rotation = (Global_1.Konva.getAngle(node.getAbsoluteRotation()) + Math.PI * 2) %\n            (Math.PI * 2);\n        var box = {\n            x: absPos.x + dx * Math.cos(rotation) + dy * Math.sin(-rotation),\n            y: absPos.y + dy * Math.cos(rotation) + dx * Math.sin(rotation),\n            width: rect.width * absScale.x,\n            height: rect.height * absScale.y,\n            rotation: rotation,\n        };\n        return rotateAroundPoint(box, -Global_1.Konva.getAngle(rot), {\n            x: 0,\n            y: 0,\n        });\n    };\n    Transformer.prototype.__getNodeRect = function () {\n        var _this = this;\n        var node = this.getNode();\n        if (!node) {\n            return {\n                x: -MAX_SAFE_INTEGER,\n                y: -MAX_SAFE_INTEGER,\n                width: 0,\n                height: 0,\n                rotation: 0,\n            };\n        }\n        var totalPoints = [];\n        this.nodes().map(function (node) {\n            var box = node.getClientRect({\n                skipTransform: true,\n                skipShadow: true,\n                skipStroke: _this.ignoreStroke(),\n            });\n            var points = [\n                { x: box.x, y: box.y },\n                { x: box.x + box.width, y: box.y },\n                { x: box.x + box.width, y: box.y + box.height },\n                { x: box.x, y: box.y + box.height },\n            ];\n            var trans = node.getAbsoluteTransform();\n            points.forEach(function (point) {\n                var transformed = trans.point(point);\n                totalPoints.push(transformed);\n            });\n        });\n        var tr = new Util_1.Transform();\n        tr.rotate(-Global_1.Konva.getAngle(this.rotation()));\n        var minX, minY, maxX, maxY;\n        totalPoints.forEach(function (point) {\n            var transformed = tr.point(point);\n            if (minX === undefined) {\n                minX = maxX = transformed.x;\n                minY = maxY = transformed.y;\n            }\n            minX = Math.min(minX, transformed.x);\n            minY = Math.min(minY, transformed.y);\n            maxX = Math.max(maxX, transformed.x);\n            maxY = Math.max(maxY, transformed.y);\n        });\n        tr.invert();\n        var p = tr.point({ x: minX, y: minY });\n        return {\n            x: p.x,\n            y: p.y,\n            width: maxX - minX,\n            height: maxY - minY,\n            rotation: Global_1.Konva.getAngle(this.rotation()),\n        };\n    };\n    Transformer.prototype.getX = function () {\n        return this._getNodeRect().x;\n    };\n    Transformer.prototype.getY = function () {\n        return this._getNodeRect().y;\n    };\n    Transformer.prototype.getWidth = function () {\n        return this._getNodeRect().width;\n    };\n    Transformer.prototype.getHeight = function () {\n        return this._getNodeRect().height;\n    };\n    Transformer.prototype._createElements = function () {\n        this._createBack();\n        ANCHORS_NAMES.forEach(function (name) {\n            this._createAnchor(name);\n        }.bind(this));\n        this._createAnchor('rotater');\n    };\n    Transformer.prototype._createAnchor = function (name) {\n        var _this = this;\n        var anchor = new Rect_1.Rect({\n            stroke: 'rgb(0, 161, 255)',\n            fill: 'white',\n            strokeWidth: 1,\n            name: name + ' _anchor',\n            dragDistance: 0,\n            draggable: true,\n            hitStrokeWidth: TOUCH_DEVICE ? 10 : 'auto',\n        });\n        var self = this;\n        anchor.on('mousedown touchstart', function (e) {\n            self._handleMouseDown(e);\n        });\n        anchor.on('dragstart', function (e) {\n            anchor.stopDrag();\n            e.cancelBubble = true;\n        });\n        anchor.on('dragend', function (e) {\n            e.cancelBubble = true;\n        });\n        anchor.on('mouseenter', function () {\n            var rad = Global_1.Konva.getAngle(_this.rotation());\n            var cursor = getCursor(name, rad);\n            anchor.getStage().content.style.cursor = cursor;\n            _this._cursorChange = true;\n        });\n        anchor.on('mouseout', function () {\n            anchor.getStage().content.style.cursor = '';\n            _this._cursorChange = false;\n        });\n        this.add(anchor);\n    };\n    Transformer.prototype._createBack = function () {\n        var _this = this;\n        var back = new Shape_1.Shape({\n            name: 'back',\n            width: 0,\n            height: 0,\n            draggable: true,\n            sceneFunc: function (ctx) {\n                var tr = this.getParent();\n                var padding = tr.padding();\n                ctx.beginPath();\n                ctx.rect(-padding, -padding, this.width() + padding * 2, this.height() + padding * 2);\n                ctx.moveTo(this.width() / 2, -padding);\n                if (tr.rotateEnabled()) {\n                    ctx.lineTo(this.width() / 2, -tr.rotateAnchorOffset() * Util_1.Util._sign(this.height()) - padding);\n                }\n                ctx.fillStrokeShape(this);\n            },\n            hitFunc: function (ctx, shape) {\n                if (!_this.shouldOverdrawWholeArea()) {\n                    return;\n                }\n                var padding = _this.padding();\n                ctx.beginPath();\n                ctx.rect(-padding, -padding, shape.width() + padding * 2, shape.height() + padding * 2);\n                ctx.fillStrokeShape(shape);\n            },\n        });\n        this.add(back);\n        this._proxyDrag(back);\n    };\n    Transformer.prototype._handleMouseDown = function (e) {\n        this._movingAnchorName = e.target.name().split(' ')[0];\n        var attrs = this._getNodeRect();\n        var width = attrs.width;\n        var height = attrs.height;\n        var hypotenuse = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n        this.sin = Math.abs(height / hypotenuse);\n        this.cos = Math.abs(width / hypotenuse);\n        window.addEventListener('mousemove', this._handleMouseMove);\n        window.addEventListener('touchmove', this._handleMouseMove);\n        window.addEventListener('mouseup', this._handleMouseUp, true);\n        window.addEventListener('touchend', this._handleMouseUp, true);\n        this._transforming = true;\n        var ap = e.target.getAbsolutePosition();\n        var pos = e.target.getStage().getPointerPosition();\n        this._anchorDragOffset = {\n            x: pos.x - ap.x,\n            y: pos.y - ap.y,\n        };\n        this._fire('transformstart', { evt: e, target: this.getNode() });\n        this.getNode()._fire('transformstart', { evt: e, target: this.getNode() });\n    };\n    Transformer.prototype._handleMouseMove = function (e) {\n        var x, y, newHypotenuse;\n        var anchorNode = this.findOne('.' + this._movingAnchorName);\n        var stage = anchorNode.getStage();\n        stage.setPointersPositions(e);\n        var pp = stage.getPointerPosition();\n        var newNodePos = {\n            x: pp.x - this._anchorDragOffset.x,\n            y: pp.y - this._anchorDragOffset.y,\n        };\n        var oldAbs = anchorNode.getAbsolutePosition();\n        anchorNode.setAbsolutePosition(newNodePos);\n        var newAbs = anchorNode.getAbsolutePosition();\n        if (oldAbs.x === newAbs.x && oldAbs.y === newAbs.y) {\n            return;\n        }\n        if (this._movingAnchorName === 'rotater') {\n            var attrs = this._getNodeRect();\n            x = anchorNode.x() - attrs.width / 2;\n            y = -anchorNode.y() + attrs.height / 2;\n            var delta = Math.atan2(-y, x) + Math.PI / 2;\n            if (attrs.height < 0) {\n                delta -= Math.PI;\n            }\n            var oldRotation = Global_1.Konva.getAngle(this.rotation());\n            var newRotation = oldRotation + delta;\n            var tol = Global_1.Konva.getAngle(this.rotationSnapTolerance());\n            var snappedRot = getSnap(this.rotationSnaps(), newRotation, tol);\n            var diff = snappedRot - attrs.rotation;\n            var shape = rotateAroundCenter(attrs, diff);\n            this._fitNodesInto(shape, e);\n            return;\n        }\n        var keepProportion = this.keepRatio() || e.shiftKey;\n        var centeredScaling = this.centeredScaling() || e.altKey;\n        if (this._movingAnchorName === 'top-left') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.bottom-right').x(),\n                        y: this.findOne('.bottom-right').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) +\n                    Math.pow(comparePoint.y - anchorNode.y(), 2));\n                var reverseX = this.findOne('.top-left').x() > comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.top-left').y() > comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.top-left').x(comparePoint.x - x);\n                this.findOne('.top-left').y(comparePoint.y - y);\n            }\n        }\n        else if (this._movingAnchorName === 'top-center') {\n            this.findOne('.top-left').y(anchorNode.y());\n        }\n        else if (this._movingAnchorName === 'top-right') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.bottom-left').x(),\n                        y: this.findOne('.bottom-left').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) +\n                    Math.pow(comparePoint.y - anchorNode.y(), 2));\n                var reverseX = this.findOne('.top-right').x() < comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.top-right').y() > comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.top-right').x(comparePoint.x + x);\n                this.findOne('.top-right').y(comparePoint.y - y);\n            }\n            var pos = anchorNode.position();\n            this.findOne('.top-left').y(pos.y);\n            this.findOne('.bottom-right').x(pos.x);\n        }\n        else if (this._movingAnchorName === 'middle-left') {\n            this.findOne('.top-left').x(anchorNode.x());\n        }\n        else if (this._movingAnchorName === 'middle-right') {\n            this.findOne('.bottom-right').x(anchorNode.x());\n        }\n        else if (this._movingAnchorName === 'bottom-left') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.top-right').x(),\n                        y: this.findOne('.top-right').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) +\n                    Math.pow(anchorNode.y() - comparePoint.y, 2));\n                var reverseX = comparePoint.x < anchorNode.x() ? -1 : 1;\n                var reverseY = anchorNode.y() < comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                anchorNode.x(comparePoint.x - x);\n                anchorNode.y(comparePoint.y + y);\n            }\n            pos = anchorNode.position();\n            this.findOne('.top-left').x(pos.x);\n            this.findOne('.bottom-right').y(pos.y);\n        }\n        else if (this._movingAnchorName === 'bottom-center') {\n            this.findOne('.bottom-right').y(anchorNode.y());\n        }\n        else if (this._movingAnchorName === 'bottom-right') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.top-left').x(),\n                        y: this.findOne('.top-left').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) +\n                    Math.pow(anchorNode.y() - comparePoint.y, 2));\n                var reverseX = this.findOne('.bottom-right').x() < comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.bottom-right').y() < comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.bottom-right').x(comparePoint.x + x);\n                this.findOne('.bottom-right').y(comparePoint.y + y);\n            }\n        }\n        else {\n            console.error(new Error('Wrong position argument of selection resizer: ' +\n                this._movingAnchorName));\n        }\n        var centeredScaling = this.centeredScaling() || e.altKey;\n        if (centeredScaling) {\n            var topLeft = this.findOne('.top-left');\n            var bottomRight = this.findOne('.bottom-right');\n            var topOffsetX = topLeft.x();\n            var topOffsetY = topLeft.y();\n            var bottomOffsetX = this.getWidth() - bottomRight.x();\n            var bottomOffsetY = this.getHeight() - bottomRight.y();\n            bottomRight.move({\n                x: -topOffsetX,\n                y: -topOffsetY,\n            });\n            topLeft.move({\n                x: bottomOffsetX,\n                y: bottomOffsetY,\n            });\n        }\n        var absPos = this.findOne('.top-left').getAbsolutePosition();\n        x = absPos.x;\n        y = absPos.y;\n        var width = this.findOne('.bottom-right').x() - this.findOne('.top-left').x();\n        var height = this.findOne('.bottom-right').y() - this.findOne('.top-left').y();\n        this._fitNodesInto({\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n            rotation: Global_1.Konva.getAngle(this.rotation()),\n        }, e);\n    };\n    Transformer.prototype._handleMouseUp = function (e) {\n        this._removeEvents(e);\n    };\n    Transformer.prototype.getAbsoluteTransform = function () {\n        return this.getTransform();\n    };\n    Transformer.prototype._removeEvents = function (e) {\n        if (this._transforming) {\n            this._transforming = false;\n            window.removeEventListener('mousemove', this._handleMouseMove);\n            window.removeEventListener('touchmove', this._handleMouseMove);\n            window.removeEventListener('mouseup', this._handleMouseUp, true);\n            window.removeEventListener('touchend', this._handleMouseUp, true);\n            var node = this.getNode();\n            this._fire('transformend', { evt: e, target: node });\n            if (node) {\n                node.fire('transformend', { evt: e, target: node });\n            }\n            this._movingAnchorName = null;\n        }\n    };\n    Transformer.prototype._fitNodesInto = function (newAttrs, evt) {\n        var _this = this;\n        var oldAttrs = this._getNodeRect();\n        var minSize = 1;\n        if (Util_1.Util._inRange(newAttrs.width, -this.padding() * 2 - minSize, minSize)) {\n            this.update();\n            return;\n        }\n        if (Util_1.Util._inRange(newAttrs.height, -this.padding() * 2 - minSize, minSize)) {\n            this.update();\n            return;\n        }\n        var allowNegativeScale = true;\n        var t = new Util_1.Transform();\n        t.rotate(Global_1.Konva.getAngle(this.rotation()));\n        if (this._movingAnchorName &&\n            newAttrs.width < 0 &&\n            this._movingAnchorName.indexOf('left') >= 0) {\n            var offset = t.point({\n                x: -this.padding() * 2,\n                y: 0,\n            });\n            newAttrs.x += offset.x;\n            newAttrs.y += offset.y;\n            newAttrs.width += this.padding() * 2;\n            this._movingAnchorName = this._movingAnchorName.replace('left', 'right');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        else if (this._movingAnchorName &&\n            newAttrs.width < 0 &&\n            this._movingAnchorName.indexOf('right') >= 0) {\n            var offset = t.point({\n                x: this.padding() * 2,\n                y: 0,\n            });\n            this._movingAnchorName = this._movingAnchorName.replace('right', 'left');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.width += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        if (this._movingAnchorName &&\n            newAttrs.height < 0 &&\n            this._movingAnchorName.indexOf('top') >= 0) {\n            var offset = t.point({\n                x: 0,\n                y: -this.padding() * 2,\n            });\n            newAttrs.x += offset.x;\n            newAttrs.y += offset.y;\n            this._movingAnchorName = this._movingAnchorName.replace('top', 'bottom');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.height += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        else if (this._movingAnchorName &&\n            newAttrs.height < 0 &&\n            this._movingAnchorName.indexOf('bottom') >= 0) {\n            var offset = t.point({\n                x: 0,\n                y: this.padding() * 2,\n            });\n            this._movingAnchorName = this._movingAnchorName.replace('bottom', 'top');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.height += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        if (this.boundBoxFunc()) {\n            var bounded = this.boundBoxFunc()(oldAttrs, newAttrs);\n            if (bounded) {\n                newAttrs = bounded;\n            }\n            else {\n                Util_1.Util.warn('boundBoxFunc returned falsy. You should return new bound rect from it!');\n            }\n        }\n        var baseSize = 10000000;\n        var oldTr = new Util_1.Transform();\n        oldTr.translate(oldAttrs.x, oldAttrs.y);\n        oldTr.rotate(oldAttrs.rotation);\n        oldTr.scale(oldAttrs.width / baseSize, oldAttrs.height / baseSize);\n        var newTr = new Util_1.Transform();\n        newTr.translate(newAttrs.x, newAttrs.y);\n        newTr.rotate(newAttrs.rotation);\n        newTr.scale(newAttrs.width / baseSize, newAttrs.height / baseSize);\n        var delta = newTr.multiply(oldTr.invert());\n        this._nodes.forEach(function (node) {\n            var parentTransform = node.getParent().getAbsoluteTransform();\n            var localTransform = node.getTransform().copy();\n            localTransform.translate(node.offsetX(), node.offsetY());\n            var newLocalTransform = new Util_1.Transform();\n            newLocalTransform\n                .multiply(parentTransform.copy().invert())\n                .multiply(delta)\n                .multiply(parentTransform)\n                .multiply(localTransform);\n            var attrs = newLocalTransform.decompose();\n            node._batchTransformChanges(function () {\n                node.setAttrs(attrs);\n            });\n            _this._fire('transform', { evt: evt, target: node });\n            node._fire('transform', { evt: evt, target: node });\n        });\n        this.rotation(Util_1.Util._getRotation(newAttrs.rotation));\n        this._resetTransformCache();\n        this.update();\n        this.getLayer().batchDraw();\n    };\n    Transformer.prototype.forceUpdate = function () {\n        this._resetTransformCache();\n        this.update();\n    };\n    Transformer.prototype._batchChangeChild = function (selector, attrs) {\n        var anchor = this.findOne(selector);\n        anchor._batchTransformChanges(function () {\n            anchor.setAttrs(attrs);\n        });\n    };\n    Transformer.prototype.update = function () {\n        var _this = this;\n        var attrs = this._getNodeRect();\n        this.rotation(Util_1.Util._getRotation(attrs.rotation));\n        var width = attrs.width;\n        var height = attrs.height;\n        var enabledAnchors = this.enabledAnchors();\n        var resizeEnabled = this.resizeEnabled();\n        var padding = this.padding();\n        var anchorSize = this.anchorSize();\n        this.find('._anchor').each(function (node) {\n            node._batchTransformChanges(function () {\n                node.setAttrs({\n                    width: anchorSize,\n                    height: anchorSize,\n                    offsetX: anchorSize / 2,\n                    offsetY: anchorSize / 2,\n                    stroke: _this.anchorStroke(),\n                    strokeWidth: _this.anchorStrokeWidth(),\n                    fill: _this.anchorFill(),\n                    cornerRadius: _this.anchorCornerRadius(),\n                });\n            });\n        });\n        this._batchChangeChild('.top-left', {\n            x: 0,\n            y: 0,\n            offsetX: anchorSize / 2 + padding,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-left') >= 0,\n        });\n        this._batchChangeChild('.top-center', {\n            x: width / 2,\n            y: 0,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-center') >= 0,\n        });\n        this._batchChangeChild('.top-right', {\n            x: width,\n            y: 0,\n            offsetX: anchorSize / 2 - padding,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-right') >= 0,\n        });\n        this._batchChangeChild('.middle-left', {\n            x: 0,\n            y: height / 2,\n            offsetX: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-left') >= 0,\n        });\n        this._batchChangeChild('.middle-right', {\n            x: width,\n            y: height / 2,\n            offsetX: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-right') >= 0,\n        });\n        this._batchChangeChild('.bottom-left', {\n            x: 0,\n            y: height,\n            offsetX: anchorSize / 2 + padding,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-left') >= 0,\n        });\n        this._batchChangeChild('.bottom-center', {\n            x: width / 2,\n            y: height,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-center') >= 0,\n        });\n        this._batchChangeChild('.bottom-right', {\n            x: width,\n            y: height,\n            offsetX: anchorSize / 2 - padding,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-right') >= 0,\n        });\n        this._batchChangeChild('.rotater', {\n            x: width / 2,\n            y: -this.rotateAnchorOffset() * Util_1.Util._sign(height) - padding,\n            visible: this.rotateEnabled(),\n        });\n        this._batchChangeChild('.back', {\n            width: width,\n            height: height,\n            visible: this.borderEnabled(),\n            stroke: this.borderStroke(),\n            strokeWidth: this.borderStrokeWidth(),\n            dash: this.borderDash(),\n            x: 0,\n            y: 0,\n        });\n    };\n    Transformer.prototype.isTransforming = function () {\n        return this._transforming;\n    };\n    Transformer.prototype.stopTransform = function () {\n        if (this._transforming) {\n            this._removeEvents();\n            var anchorNode = this.findOne('.' + this._movingAnchorName);\n            if (anchorNode) {\n                anchorNode.stopDrag();\n            }\n        }\n    };\n    Transformer.prototype.destroy = function () {\n        if (this.getStage() && this._cursorChange) {\n            this.getStage().content.style.cursor = '';\n        }\n        Group_1.Group.prototype.destroy.call(this);\n        this.detach();\n        this._removeEvents();\n        return this;\n    };\n    Transformer.prototype.toObject = function () {\n        return Node_1.Node.prototype.toObject.call(this);\n    };\n    return Transformer;\n}(Group_1.Group));\nexports.Transformer = Transformer;\nfunction validateAnchors(val) {\n    if (!(val instanceof Array)) {\n        Util_1.Util.warn('enabledAnchors value should be an array');\n    }\n    if (val instanceof Array) {\n        val.forEach(function (name) {\n            if (ANCHORS_NAMES.indexOf(name) === -1) {\n                Util_1.Util.warn('Unknown anchor name: ' +\n                    name +\n                    '. Available names are: ' +\n                    ANCHORS_NAMES.join(', '));\n            }\n        });\n    }\n    return val || [];\n}\nTransformer.prototype.className = 'Transformer';\nGlobal_2._registerNode(Transformer);\nFactory_1.Factory.addGetterSetter(Transformer, 'enabledAnchors', ANCHORS_NAMES, validateAnchors);\nFactory_1.Factory.addGetterSetter(Transformer, 'resizeEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorSize', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'rotationSnaps', []);\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateAnchorOffset', 50, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'rotationSnapTolerance', 5, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStroke', 'rgb(0, 161, 255)');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStrokeWidth', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorFill', 'white');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorCornerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStroke', 'rgb(0, 161, 255)');\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStrokeWidth', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderDash');\nFactory_1.Factory.addGetterSetter(Transformer, 'keepRatio', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'centeredScaling', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'ignoreStroke', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'padding', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'node');\nFactory_1.Factory.addGetterSetter(Transformer, 'nodes');\nFactory_1.Factory.addGetterSetter(Transformer, 'boundBoxFunc');\nFactory_1.Factory.addGetterSetter(Transformer, 'shouldOverdrawWholeArea', false);\nFactory_1.Factory.backCompat(Transformer, {\n    lineEnabled: 'borderEnabled',\n    rotateHandlerOffset: 'rotateAnchorOffset',\n    enabledHandlers: 'enabledAnchors',\n});\nUtil_1.Collection.mapMethods(Transformer);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Global_1 = require(\"../Global\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_2 = require(\"../Global\");\nvar Wedge = (function (_super) {\n    __extends(Wedge, _super);\n    function Wedge() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Wedge.prototype._sceneFunc = function (context) {\n        context.beginPath();\n        context.arc(0, 0, this.radius(), 0, Global_1.Konva.getAngle(this.angle()), this.clockwise());\n        context.lineTo(0, 0);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Wedge.prototype.getWidth = function () {\n        return this.radius() * 2;\n    };\n    Wedge.prototype.getHeight = function () {\n        return this.radius() * 2;\n    };\n    Wedge.prototype.setWidth = function (width) {\n        this.radius(width / 2);\n    };\n    Wedge.prototype.setHeight = function (height) {\n        this.radius(height / 2);\n    };\n    return Wedge;\n}(Shape_1.Shape));\nexports.Wedge = Wedge;\nWedge.prototype.className = 'Wedge';\nWedge.prototype._centroid = true;\nWedge.prototype._attrsAffectingSize = ['radius'];\nGlobal_2._registerNode(Wedge);\nFactory_1.Factory.addGetterSetter(Wedge, 'radius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Wedge, 'angle', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Wedge, 'clockwise', false);\nFactory_1.Factory.backCompat(Wedge, {\n    angleDeg: 'angle',\n    getAngleDeg: 'getAngle',\n    setAngleDeg: 'setAngle'\n});\nUtil_1.Collection.mapMethods(Wedge);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nfunction BlurStack() {\n    this.r = 0;\n    this.g = 0;\n    this.b = 0;\n    this.a = 0;\n    this.next = null;\n}\nvar mul_table = [\n    512,\n    512,\n    456,\n    512,\n    328,\n    456,\n    335,\n    512,\n    405,\n    328,\n    271,\n    456,\n    388,\n    335,\n    292,\n    512,\n    454,\n    405,\n    364,\n    328,\n    298,\n    271,\n    496,\n    456,\n    420,\n    388,\n    360,\n    335,\n    312,\n    292,\n    273,\n    512,\n    482,\n    454,\n    428,\n    405,\n    383,\n    364,\n    345,\n    328,\n    312,\n    298,\n    284,\n    271,\n    259,\n    496,\n    475,\n    456,\n    437,\n    420,\n    404,\n    388,\n    374,\n    360,\n    347,\n    335,\n    323,\n    312,\n    302,\n    292,\n    282,\n    273,\n    265,\n    512,\n    497,\n    482,\n    468,\n    454,\n    441,\n    428,\n    417,\n    405,\n    394,\n    383,\n    373,\n    364,\n    354,\n    345,\n    337,\n    328,\n    320,\n    312,\n    305,\n    298,\n    291,\n    284,\n    278,\n    271,\n    265,\n    259,\n    507,\n    496,\n    485,\n    475,\n    465,\n    456,\n    446,\n    437,\n    428,\n    420,\n    412,\n    404,\n    396,\n    388,\n    381,\n    374,\n    367,\n    360,\n    354,\n    347,\n    341,\n    335,\n    329,\n    323,\n    318,\n    312,\n    307,\n    302,\n    297,\n    292,\n    287,\n    282,\n    278,\n    273,\n    269,\n    265,\n    261,\n    512,\n    505,\n    497,\n    489,\n    482,\n    475,\n    468,\n    461,\n    454,\n    447,\n    441,\n    435,\n    428,\n    422,\n    417,\n    411,\n    405,\n    399,\n    394,\n    389,\n    383,\n    378,\n    373,\n    368,\n    364,\n    359,\n    354,\n    350,\n    345,\n    341,\n    337,\n    332,\n    328,\n    324,\n    320,\n    316,\n    312,\n    309,\n    305,\n    301,\n    298,\n    294,\n    291,\n    287,\n    284,\n    281,\n    278,\n    274,\n    271,\n    268,\n    265,\n    262,\n    259,\n    257,\n    507,\n    501,\n    496,\n    491,\n    485,\n    480,\n    475,\n    470,\n    465,\n    460,\n    456,\n    451,\n    446,\n    442,\n    437,\n    433,\n    428,\n    424,\n    420,\n    416,\n    412,\n    408,\n    404,\n    400,\n    396,\n    392,\n    388,\n    385,\n    381,\n    377,\n    374,\n    370,\n    367,\n    363,\n    360,\n    357,\n    354,\n    350,\n    347,\n    344,\n    341,\n    338,\n    335,\n    332,\n    329,\n    326,\n    323,\n    320,\n    318,\n    315,\n    312,\n    310,\n    307,\n    304,\n    302,\n    299,\n    297,\n    294,\n    292,\n    289,\n    287,\n    285,\n    282,\n    280,\n    278,\n    275,\n    273,\n    271,\n    269,\n    267,\n    265,\n    263,\n    261,\n    259\n];\nvar shg_table = [\n    9,\n    11,\n    12,\n    13,\n    13,\n    14,\n    14,\n    15,\n    15,\n    15,\n    15,\n    16,\n    16,\n    16,\n    16,\n    17,\n    17,\n    17,\n    17,\n    17,\n    17,\n    17,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24\n];\nfunction filterGaussBlurRGBA(imageData, radius) {\n    var pixels = imageData.data, width = imageData.width, height = imageData.height;\n    var x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum, r_out_sum, g_out_sum, b_out_sum, a_out_sum, r_in_sum, g_in_sum, b_in_sum, a_in_sum, pr, pg, pb, pa, rbs;\n    var div = radius + radius + 1, widthMinus1 = width - 1, heightMinus1 = height - 1, radiusPlus1 = radius + 1, sumFactor = (radiusPlus1 * (radiusPlus1 + 1)) / 2, stackStart = new BlurStack(), stackEnd = null, stack = stackStart, stackIn = null, stackOut = null, mul_sum = mul_table[radius], shg_sum = shg_table[radius];\n    for (i = 1; i < div; i++) {\n        stack = stack.next = new BlurStack();\n        if (i === radiusPlus1) {\n            stackEnd = stack;\n        }\n    }\n    stack.next = stackStart;\n    yw = yi = 0;\n    for (y = 0; y < height; y++) {\n        r_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n        a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        a_sum += sumFactor * pa;\n        stack = stackStart;\n        for (i = 0; i < radiusPlus1; i++) {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack.a = pa;\n            stack = stack.next;\n        }\n        for (i = 1; i < radiusPlus1; i++) {\n            p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n            r_sum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = pg = pixels[p + 1]) * rbs;\n            b_sum += (stack.b = pb = pixels[p + 2]) * rbs;\n            a_sum += (stack.a = pa = pixels[p + 3]) * rbs;\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            a_in_sum += pa;\n            stack = stack.next;\n        }\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (x = 0; x < width; x++) {\n            pixels[yi + 3] = pa = (a_sum * mul_sum) >> shg_sum;\n            if (pa !== 0) {\n                pa = 255 / pa;\n                pixels[yi] = ((r_sum * mul_sum) >> shg_sum) * pa;\n                pixels[yi + 1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n                pixels[yi + 2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n            }\n            else {\n                pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n            }\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            a_sum -= a_out_sum;\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            a_out_sum -= stackIn.a;\n            p = (yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1)) << 2;\n            r_in_sum += stackIn.r = pixels[p];\n            g_in_sum += stackIn.g = pixels[p + 1];\n            b_in_sum += stackIn.b = pixels[p + 2];\n            a_in_sum += stackIn.a = pixels[p + 3];\n            r_sum += r_in_sum;\n            g_sum += g_in_sum;\n            b_sum += b_in_sum;\n            a_sum += a_in_sum;\n            stackIn = stackIn.next;\n            r_out_sum += pr = stackOut.r;\n            g_out_sum += pg = stackOut.g;\n            b_out_sum += pb = stackOut.b;\n            a_out_sum += pa = stackOut.a;\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            a_in_sum -= pa;\n            stackOut = stackOut.next;\n            yi += 4;\n        }\n        yw += width;\n    }\n    for (x = 0; x < width; x++) {\n        g_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\n        yi = x << 2;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n        a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        a_sum += sumFactor * pa;\n        stack = stackStart;\n        for (i = 0; i < radiusPlus1; i++) {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack.a = pa;\n            stack = stack.next;\n        }\n        yp = width;\n        for (i = 1; i <= radius; i++) {\n            yi = (yp + x) << 2;\n            r_sum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = pg = pixels[yi + 1]) * rbs;\n            b_sum += (stack.b = pb = pixels[yi + 2]) * rbs;\n            a_sum += (stack.a = pa = pixels[yi + 3]) * rbs;\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            a_in_sum += pa;\n            stack = stack.next;\n            if (i < heightMinus1) {\n                yp += width;\n            }\n        }\n        yi = x;\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (y = 0; y < height; y++) {\n            p = yi << 2;\n            pixels[p + 3] = pa = (a_sum * mul_sum) >> shg_sum;\n            if (pa > 0) {\n                pa = 255 / pa;\n                pixels[p] = ((r_sum * mul_sum) >> shg_sum) * pa;\n                pixels[p + 1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n                pixels[p + 2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n            }\n            else {\n                pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;\n            }\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            a_sum -= a_out_sum;\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            a_out_sum -= stackIn.a;\n            p =\n                (x +\n                    ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width) <<\n                    2;\n            r_sum += r_in_sum += stackIn.r = pixels[p];\n            g_sum += g_in_sum += stackIn.g = pixels[p + 1];\n            b_sum += b_in_sum += stackIn.b = pixels[p + 2];\n            a_sum += a_in_sum += stackIn.a = pixels[p + 3];\n            stackIn = stackIn.next;\n            r_out_sum += pr = stackOut.r;\n            g_out_sum += pg = stackOut.g;\n            b_out_sum += pb = stackOut.b;\n            a_out_sum += pa = stackOut.a;\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            a_in_sum -= pa;\n            stackOut = stackOut.next;\n            yi += width;\n        }\n    }\n}\nexports.Blur = function Blur(imageData) {\n    var radius = Math.round(this.blurRadius());\n    if (radius > 0) {\n        filterGaussBlurRGBA(imageData, radius);\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blurRadius', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.Brighten = function (imageData) {\n    var brightness = this.brightness() * 255, data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 4) {\n        data[i] += brightness;\n        data[i + 1] += brightness;\n        data[i + 2] += brightness;\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'brightness', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.Contrast = function (imageData) {\n    var adjust = Math.pow((this.contrast() + 100) / 100, 2);\n    var data = imageData.data, nPixels = data.length, red = 150, green = 150, blue = 150, i;\n    for (i = 0; i < nPixels; i += 4) {\n        red = data[i];\n        green = data[i + 1];\n        blue = data[i + 2];\n        red /= 255;\n        red -= 0.5;\n        red *= adjust;\n        red += 0.5;\n        red *= 255;\n        green /= 255;\n        green -= 0.5;\n        green *= adjust;\n        green += 0.5;\n        green *= 255;\n        blue /= 255;\n        blue -= 0.5;\n        blue *= adjust;\n        blue += 0.5;\n        blue *= 255;\n        red = red < 0 ? 0 : red > 255 ? 255 : red;\n        green = green < 0 ? 0 : green > 255 ? 255 : green;\n        blue = blue < 0 ? 0 : blue > 255 ? 255 : blue;\n        data[i] = red;\n        data[i + 1] = green;\n        data[i + 2] = blue;\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'contrast', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Util_1 = require(\"../Util\");\nvar Validators_1 = require(\"../Validators\");\nexports.Emboss = function (imageData) {\n    var strength = this.embossStrength() * 10, greyLevel = this.embossWhiteLevel() * 255, direction = this.embossDirection(), blend = this.embossBlend(), dirY = 0, dirX = 0, data = imageData.data, w = imageData.width, h = imageData.height, w4 = w * 4, y = h;\n    switch (direction) {\n        case 'top-left':\n            dirY = -1;\n            dirX = -1;\n            break;\n        case 'top':\n            dirY = -1;\n            dirX = 0;\n            break;\n        case 'top-right':\n            dirY = -1;\n            dirX = 1;\n            break;\n        case 'right':\n            dirY = 0;\n            dirX = 1;\n            break;\n        case 'bottom-right':\n            dirY = 1;\n            dirX = 1;\n            break;\n        case 'bottom':\n            dirY = 1;\n            dirX = 0;\n            break;\n        case 'bottom-left':\n            dirY = 1;\n            dirX = -1;\n            break;\n        case 'left':\n            dirY = 0;\n            dirX = -1;\n            break;\n        default:\n            Util_1.Util.error('Unknown emboss direction: ' + direction);\n    }\n    do {\n        var offsetY = (y - 1) * w4;\n        var otherY = dirY;\n        if (y + otherY < 1) {\n            otherY = 0;\n        }\n        if (y + otherY > h) {\n            otherY = 0;\n        }\n        var offsetYOther = (y - 1 + otherY) * w * 4;\n        var x = w;\n        do {\n            var offset = offsetY + (x - 1) * 4;\n            var otherX = dirX;\n            if (x + otherX < 1) {\n                otherX = 0;\n            }\n            if (x + otherX > w) {\n                otherX = 0;\n            }\n            var offsetOther = offsetYOther + (x - 1 + otherX) * 4;\n            var dR = data[offset] - data[offsetOther];\n            var dG = data[offset + 1] - data[offsetOther + 1];\n            var dB = data[offset + 2] - data[offsetOther + 2];\n            var dif = dR;\n            var absDif = dif > 0 ? dif : -dif;\n            var absG = dG > 0 ? dG : -dG;\n            var absB = dB > 0 ? dB : -dB;\n            if (absG > absDif) {\n                dif = dG;\n            }\n            if (absB > absDif) {\n                dif = dB;\n            }\n            dif *= strength;\n            if (blend) {\n                var r = data[offset] + dif;\n                var g = data[offset + 1] + dif;\n                var b = data[offset + 2] + dif;\n                data[offset] = r > 255 ? 255 : r < 0 ? 0 : r;\n                data[offset + 1] = g > 255 ? 255 : g < 0 ? 0 : g;\n                data[offset + 2] = b > 255 ? 255 : b < 0 ? 0 : b;\n            }\n            else {\n                var grey = greyLevel - dif;\n                if (grey < 0) {\n                    grey = 0;\n                }\n                else if (grey > 255) {\n                    grey = 255;\n                }\n                data[offset] = data[offset + 1] = data[offset + 2] = grey;\n            }\n        } while (--x);\n    } while (--y);\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossStrength', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossWhiteLevel', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossDirection', 'top-left', null, Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossBlend', false, null, Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nfunction remap(fromValue, fromMin, fromMax, toMin, toMax) {\n    var fromRange = fromMax - fromMin, toRange = toMax - toMin, toValue;\n    if (fromRange === 0) {\n        return toMin + toRange / 2;\n    }\n    if (toRange === 0) {\n        return toMin;\n    }\n    toValue = (fromValue - fromMin) / fromRange;\n    toValue = toRange * toValue + toMin;\n    return toValue;\n}\nexports.Enhance = function (imageData) {\n    var data = imageData.data, nSubPixels = data.length, rMin = data[0], rMax = rMin, r, gMin = data[1], gMax = gMin, g, bMin = data[2], bMax = bMin, b, i;\n    var enhanceAmount = this.enhance();\n    if (enhanceAmount === 0) {\n        return;\n    }\n    for (i = 0; i < nSubPixels; i += 4) {\n        r = data[i + 0];\n        if (r < rMin) {\n            rMin = r;\n        }\n        else if (r > rMax) {\n            rMax = r;\n        }\n        g = data[i + 1];\n        if (g < gMin) {\n            gMin = g;\n        }\n        else if (g > gMax) {\n            gMax = g;\n        }\n        b = data[i + 2];\n        if (b < bMin) {\n            bMin = b;\n        }\n        else if (b > bMax) {\n            bMax = b;\n        }\n    }\n    if (rMax === rMin) {\n        rMax = 255;\n        rMin = 0;\n    }\n    if (gMax === gMin) {\n        gMax = 255;\n        gMin = 0;\n    }\n    if (bMax === bMin) {\n        bMax = 255;\n        bMin = 0;\n    }\n    var rMid, rGoalMax, rGoalMin, gMid, gGoalMax, gGoalMin, bMid, bGoalMax, bGoalMin;\n    if (enhanceAmount > 0) {\n        rGoalMax = rMax + enhanceAmount * (255 - rMax);\n        rGoalMin = rMin - enhanceAmount * (rMin - 0);\n        gGoalMax = gMax + enhanceAmount * (255 - gMax);\n        gGoalMin = gMin - enhanceAmount * (gMin - 0);\n        bGoalMax = bMax + enhanceAmount * (255 - bMax);\n        bGoalMin = bMin - enhanceAmount * (bMin - 0);\n    }\n    else {\n        rMid = (rMax + rMin) * 0.5;\n        rGoalMax = rMax + enhanceAmount * (rMax - rMid);\n        rGoalMin = rMin + enhanceAmount * (rMin - rMid);\n        gMid = (gMax + gMin) * 0.5;\n        gGoalMax = gMax + enhanceAmount * (gMax - gMid);\n        gGoalMin = gMin + enhanceAmount * (gMin - gMid);\n        bMid = (bMax + bMin) * 0.5;\n        bGoalMax = bMax + enhanceAmount * (bMax - bMid);\n        bGoalMin = bMin + enhanceAmount * (bMin - bMid);\n    }\n    for (i = 0; i < nSubPixels; i += 4) {\n        data[i + 0] = remap(data[i + 0], rMin, rMax, rGoalMin, rGoalMax);\n        data[i + 1] = remap(data[i + 1], gMin, gMax, gGoalMin, gGoalMax);\n        data[i + 2] = remap(data[i + 2], bMin, bMax, bGoalMin, bGoalMax);\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'enhance', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Grayscale = function (imageData) {\n    var data = imageData.data, len = data.length, i, brightness;\n    for (i = 0; i < len; i += 4) {\n        brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];\n        data[i] = brightness;\n        data[i + 1] = brightness;\n        data[i + 2] = brightness;\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'hue', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'saturation', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'luminance', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nexports.HSL = function (imageData) {\n    var data = imageData.data, nPixels = data.length, v = 1, s = Math.pow(2, this.saturation()), h = Math.abs(this.hue() + 360) % 360, l = this.luminance() * 127, i;\n    var vsu = v * s * Math.cos((h * Math.PI) / 180), vsw = v * s * Math.sin((h * Math.PI) / 180);\n    var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw, rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw, rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n    var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw, gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw, gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n    var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw, bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw, bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n    var r, g, b, a;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n        data[i + 0] = rr * r + rg * g + rb * b + l;\n        data[i + 1] = gr * r + gg * g + gb * b + l;\n        data[i + 2] = br * r + bg * g + bb * b + l;\n        data[i + 3] = a;\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.HSV = function (imageData) {\n    var data = imageData.data, nPixels = data.length, v = Math.pow(2, this.value()), s = Math.pow(2, this.saturation()), h = Math.abs(this.hue() + 360) % 360, i;\n    var vsu = v * s * Math.cos((h * Math.PI) / 180), vsw = v * s * Math.sin((h * Math.PI) / 180);\n    var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw, rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw, rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n    var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw, gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw, gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n    var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw, bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw, bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n    var r, g, b, a;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n        data[i + 0] = rr * r + rg * g + rb * b;\n        data[i + 1] = gr * r + gg * g + gb * b;\n        data[i + 2] = br * r + bg * g + bb * b;\n        data[i + 3] = a;\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'hue', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'saturation', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'value', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Invert = function (imageData) {\n    var data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 4) {\n        data[i] = 255 - data[i];\n        data[i + 1] = 255 - data[i + 1];\n        data[i + 2] = 255 - data[i + 2];\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Util_1 = require(\"../Util\");\nvar Validators_1 = require(\"../Validators\");\nvar ToPolar = function (src, dst, opt) {\n    var srcPixels = src.data, dstPixels = dst.data, xSize = src.width, ySize = src.height, xMid = opt.polarCenterX || xSize / 2, yMid = opt.polarCenterY || ySize / 2, i, x, y, r = 0, g = 0, b = 0, a = 0;\n    var rad, rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n    x = xSize - xMid;\n    y = ySize - yMid;\n    rad = Math.sqrt(x * x + y * y);\n    rMax = rad > rMax ? rad : rMax;\n    var rSize = ySize, tSize = xSize, radius, theta;\n    var conversion = ((360 / tSize) * Math.PI) / 180, sin, cos;\n    for (theta = 0; theta < tSize; theta += 1) {\n        sin = Math.sin(theta * conversion);\n        cos = Math.cos(theta * conversion);\n        for (radius = 0; radius < rSize; radius += 1) {\n            x = Math.floor(xMid + ((rMax * radius) / rSize) * cos);\n            y = Math.floor(yMid + ((rMax * radius) / rSize) * sin);\n            i = (y * xSize + x) * 4;\n            r = srcPixels[i + 0];\n            g = srcPixels[i + 1];\n            b = srcPixels[i + 2];\n            a = srcPixels[i + 3];\n            i = (theta + radius * xSize) * 4;\n            dstPixels[i + 0] = r;\n            dstPixels[i + 1] = g;\n            dstPixels[i + 2] = b;\n            dstPixels[i + 3] = a;\n        }\n    }\n};\nvar FromPolar = function (src, dst, opt) {\n    var srcPixels = src.data, dstPixels = dst.data, xSize = src.width, ySize = src.height, xMid = opt.polarCenterX || xSize / 2, yMid = opt.polarCenterY || ySize / 2, i, x, y, dx, dy, r = 0, g = 0, b = 0, a = 0;\n    var rad, rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n    x = xSize - xMid;\n    y = ySize - yMid;\n    rad = Math.sqrt(x * x + y * y);\n    rMax = rad > rMax ? rad : rMax;\n    var rSize = ySize, tSize = xSize, radius, theta, phaseShift = opt.polarRotation || 0;\n    var x1, y1;\n    for (x = 0; x < xSize; x += 1) {\n        for (y = 0; y < ySize; y += 1) {\n            dx = x - xMid;\n            dy = y - yMid;\n            radius = (Math.sqrt(dx * dx + dy * dy) * rSize) / rMax;\n            theta = ((Math.atan2(dy, dx) * 180) / Math.PI + 360 + phaseShift) % 360;\n            theta = (theta * tSize) / 360;\n            x1 = Math.floor(theta);\n            y1 = Math.floor(radius);\n            i = (y1 * xSize + x1) * 4;\n            r = srcPixels[i + 0];\n            g = srcPixels[i + 1];\n            b = srcPixels[i + 2];\n            a = srcPixels[i + 3];\n            i = (y * xSize + x) * 4;\n            dstPixels[i + 0] = r;\n            dstPixels[i + 1] = g;\n            dstPixels[i + 2] = b;\n            dstPixels[i + 3] = a;\n        }\n    }\n};\nexports.Kaleidoscope = function (imageData) {\n    var xSize = imageData.width, ySize = imageData.height;\n    var x, y, xoff, i, r, g, b, a, srcPos, dstPos;\n    var power = Math.round(this.kaleidoscopePower());\n    var angle = Math.round(this.kaleidoscopeAngle());\n    var offset = Math.floor((xSize * (angle % 360)) / 360);\n    if (power < 1) {\n        return;\n    }\n    var tempCanvas = Util_1.Util.createCanvasElement();\n    tempCanvas.width = xSize;\n    tempCanvas.height = ySize;\n    var scratchData = tempCanvas\n        .getContext('2d')\n        .getImageData(0, 0, xSize, ySize);\n    ToPolar(imageData, scratchData, {\n        polarCenterX: xSize / 2,\n        polarCenterY: ySize / 2\n    });\n    var minSectionSize = xSize / Math.pow(2, power);\n    while (minSectionSize <= 8) {\n        minSectionSize = minSectionSize * 2;\n        power -= 1;\n    }\n    minSectionSize = Math.ceil(minSectionSize);\n    var sectionSize = minSectionSize;\n    var xStart = 0, xEnd = sectionSize, xDelta = 1;\n    if (offset + minSectionSize > xSize) {\n        xStart = sectionSize;\n        xEnd = 0;\n        xDelta = -1;\n    }\n    for (y = 0; y < ySize; y += 1) {\n        for (x = xStart; x !== xEnd; x += xDelta) {\n            xoff = Math.round(x + offset) % xSize;\n            srcPos = (xSize * y + xoff) * 4;\n            r = scratchData.data[srcPos + 0];\n            g = scratchData.data[srcPos + 1];\n            b = scratchData.data[srcPos + 2];\n            a = scratchData.data[srcPos + 3];\n            dstPos = (xSize * y + x) * 4;\n            scratchData.data[dstPos + 0] = r;\n            scratchData.data[dstPos + 1] = g;\n            scratchData.data[dstPos + 2] = b;\n            scratchData.data[dstPos + 3] = a;\n        }\n    }\n    for (y = 0; y < ySize; y += 1) {\n        sectionSize = Math.floor(minSectionSize);\n        for (i = 0; i < power; i += 1) {\n            for (x = 0; x < sectionSize + 1; x += 1) {\n                srcPos = (xSize * y + x) * 4;\n                r = scratchData.data[srcPos + 0];\n                g = scratchData.data[srcPos + 1];\n                b = scratchData.data[srcPos + 2];\n                a = scratchData.data[srcPos + 3];\n                dstPos = (xSize * y + sectionSize * 2 - x - 1) * 4;\n                scratchData.data[dstPos + 0] = r;\n                scratchData.data[dstPos + 1] = g;\n                scratchData.data[dstPos + 2] = b;\n                scratchData.data[dstPos + 3] = a;\n            }\n            sectionSize *= 2;\n        }\n    }\n    FromPolar(scratchData, imageData, { polarRotation: 0 });\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'kaleidoscopePower', 2, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'kaleidoscopeAngle', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nfunction pixelAt(idata, x, y) {\n    var idx = (y * idata.width + x) * 4;\n    var d = [];\n    d.push(idata.data[idx++], idata.data[idx++], idata.data[idx++], idata.data[idx++]);\n    return d;\n}\nfunction rgbDistance(p1, p2) {\n    return Math.sqrt(Math.pow(p1[0] - p2[0], 2) +\n        Math.pow(p1[1] - p2[1], 2) +\n        Math.pow(p1[2] - p2[2], 2));\n}\nfunction rgbMean(pTab) {\n    var m = [0, 0, 0];\n    for (var i = 0; i < pTab.length; i++) {\n        m[0] += pTab[i][0];\n        m[1] += pTab[i][1];\n        m[2] += pTab[i][2];\n    }\n    m[0] /= pTab.length;\n    m[1] /= pTab.length;\n    m[2] /= pTab.length;\n    return m;\n}\nfunction backgroundMask(idata, threshold) {\n    var rgbv_no = pixelAt(idata, 0, 0);\n    var rgbv_ne = pixelAt(idata, idata.width - 1, 0);\n    var rgbv_so = pixelAt(idata, 0, idata.height - 1);\n    var rgbv_se = pixelAt(idata, idata.width - 1, idata.height - 1);\n    var thres = threshold || 10;\n    if (rgbDistance(rgbv_no, rgbv_ne) < thres &&\n        rgbDistance(rgbv_ne, rgbv_se) < thres &&\n        rgbDistance(rgbv_se, rgbv_so) < thres &&\n        rgbDistance(rgbv_so, rgbv_no) < thres) {\n        var mean = rgbMean([rgbv_ne, rgbv_no, rgbv_se, rgbv_so]);\n        var mask = [];\n        for (var i = 0; i < idata.width * idata.height; i++) {\n            var d = rgbDistance(mean, [\n                idata.data[i * 4],\n                idata.data[i * 4 + 1],\n                idata.data[i * 4 + 2]\n            ]);\n            mask[i] = d < thres ? 0 : 255;\n        }\n        return mask;\n    }\n}\nfunction applyMask(idata, mask) {\n    for (var i = 0; i < idata.width * idata.height; i++) {\n        idata.data[4 * i + 3] = mask[i];\n    }\n}\nfunction erodeMask(mask, sw, sh) {\n    var weights = [1, 1, 1, 1, 0, 1, 1, 1, 1];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a === 255 * 8 ? 255 : 0;\n        }\n    }\n    return maskResult;\n}\nfunction dilateMask(mask, sw, sh) {\n    var weights = [1, 1, 1, 1, 1, 1, 1, 1, 1];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a >= 255 * 4 ? 255 : 0;\n        }\n    }\n    return maskResult;\n}\nfunction smoothEdgeMask(mask, sw, sh) {\n    var weights = [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a;\n        }\n    }\n    return maskResult;\n}\nexports.Mask = function (imageData) {\n    var threshold = this.threshold(), mask = backgroundMask(imageData, threshold);\n    if (mask) {\n        mask = erodeMask(mask, imageData.width, imageData.height);\n        mask = dilateMask(mask, imageData.width, imageData.height);\n        mask = smoothEdgeMask(mask, imageData.width, imageData.height);\n        applyMask(imageData, mask);\n    }\n    return imageData;\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'threshold', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.Noise = function (imageData) {\n    var amount = this.noise() * 255, data = imageData.data, nPixels = data.length, half = amount / 2, i;\n    for (i = 0; i < nPixels; i += 4) {\n        data[i + 0] += half - 2 * half * Math.random();\n        data[i + 1] += half - 2 * half * Math.random();\n        data[i + 2] += half - 2 * half * Math.random();\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'noise', 0.2, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Util_1 = require(\"../Util\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.Pixelate = function (imageData) {\n    var pixelSize = Math.ceil(this.pixelSize()), width = imageData.width, height = imageData.height, x, y, i, red, green, blue, alpha, nBinsX = Math.ceil(width / pixelSize), nBinsY = Math.ceil(height / pixelSize), xBinStart, xBinEnd, yBinStart, yBinEnd, xBin, yBin, pixelsInBin, data = imageData.data;\n    if (pixelSize <= 0) {\n        Util_1.Util.error('pixelSize value can not be <= 0');\n        return;\n    }\n    for (xBin = 0; xBin < nBinsX; xBin += 1) {\n        for (yBin = 0; yBin < nBinsY; yBin += 1) {\n            red = 0;\n            green = 0;\n            blue = 0;\n            alpha = 0;\n            xBinStart = xBin * pixelSize;\n            xBinEnd = xBinStart + pixelSize;\n            yBinStart = yBin * pixelSize;\n            yBinEnd = yBinStart + pixelSize;\n            pixelsInBin = 0;\n            for (x = xBinStart; x < xBinEnd; x += 1) {\n                if (x >= width) {\n                    continue;\n                }\n                for (y = yBinStart; y < yBinEnd; y += 1) {\n                    if (y >= height) {\n                        continue;\n                    }\n                    i = (width * y + x) * 4;\n                    red += data[i + 0];\n                    green += data[i + 1];\n                    blue += data[i + 2];\n                    alpha += data[i + 3];\n                    pixelsInBin += 1;\n                }\n            }\n            red = red / pixelsInBin;\n            green = green / pixelsInBin;\n            blue = blue / pixelsInBin;\n            alpha = alpha / pixelsInBin;\n            for (x = xBinStart; x < xBinEnd; x += 1) {\n                if (x >= width) {\n                    continue;\n                }\n                for (y = yBinStart; y < yBinEnd; y += 1) {\n                    if (y >= height) {\n                        continue;\n                    }\n                    i = (width * y + x) * 4;\n                    data[i + 0] = red;\n                    data[i + 1] = green;\n                    data[i + 2] = blue;\n                    data[i + 3] = alpha;\n                }\n            }\n        }\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'pixelSize', 8, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.Posterize = function (imageData) {\n    var levels = Math.round(this.levels() * 254) + 1, data = imageData.data, len = data.length, scale = 255 / levels, i;\n    for (i = 0; i < len; i += 1) {\n        data[i] = Math.floor(data[i] / scale) * scale;\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'levels', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.RGB = function (imageData) {\n    var data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue(), i, brightness;\n    for (i = 0; i < nPixels; i += 4) {\n        brightness =\n            (0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2]) / 255;\n        data[i] = brightness * red;\n        data[i + 1] = brightness * green;\n        data[i + 2] = brightness * blue;\n        data[i + 3] = data[i + 3];\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'red', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'green', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blue', 0, Validators_1.RGBComponent, Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.RGBA = function (imageData) {\n    var data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue(), alpha = this.alpha(), i, ia;\n    for (i = 0; i < nPixels; i += 4) {\n        ia = 1 - alpha;\n        data[i] = red * alpha + data[i] * ia;\n        data[i + 1] = green * alpha + data[i + 1] * ia;\n        data[i + 2] = blue * alpha + data[i + 2] * ia;\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'red', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'green', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blue', 0, Validators_1.RGBComponent, Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'alpha', 1, function (val) {\n    this._filterUpToDate = false;\n    if (val > 1) {\n        return 1;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return val;\n    }\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sepia = function (imageData) {\n    var data = imageData.data, nPixels = data.length, i, r, g, b;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        data[i + 0] = Math.min(255, r * 0.393 + g * 0.769 + b * 0.189);\n        data[i + 1] = Math.min(255, r * 0.349 + g * 0.686 + b * 0.168);\n        data[i + 2] = Math.min(255, r * 0.272 + g * 0.534 + b * 0.131);\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Solarize = function (imageData) {\n    var data = imageData.data, w = imageData.width, h = imageData.height, w4 = w * 4, y = h;\n    do {\n        var offsetY = (y - 1) * w4;\n        var x = w;\n        do {\n            var offset = offsetY + (x - 1) * 4;\n            var r = data[offset];\n            var g = data[offset + 1];\n            var b = data[offset + 2];\n            if (r > 127) {\n                r = 255 - r;\n            }\n            if (g > 127) {\n                g = 255 - g;\n            }\n            if (b > 127) {\n                b = 255 - b;\n            }\n            data[offset] = r;\n            data[offset + 1] = g;\n            data[offset + 2] = b;\n        } while (--x);\n    } while (--y);\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Validators_1 = require(\"../Validators\");\nexports.Threshold = function (imageData) {\n    var level = this.threshold() * 255, data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 1) {\n        data[i] = data[i] < level ? 0 : 255;\n    }\n};\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'threshold', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _CoreInternals_1 = require(\"./_CoreInternals\");\nvar Arc_1 = require(\"./shapes/Arc\");\nvar Arrow_1 = require(\"./shapes/Arrow\");\nvar Circle_1 = require(\"./shapes/Circle\");\nvar Ellipse_1 = require(\"./shapes/Ellipse\");\nvar Image_1 = require(\"./shapes/Image\");\nvar Label_1 = require(\"./shapes/Label\");\nvar Line_1 = require(\"./shapes/Line\");\nvar Path_1 = require(\"./shapes/Path\");\nvar Rect_1 = require(\"./shapes/Rect\");\nvar RegularPolygon_1 = require(\"./shapes/RegularPolygon\");\nvar Ring_1 = require(\"./shapes/Ring\");\nvar Sprite_1 = require(\"./shapes/Sprite\");\nvar Star_1 = require(\"./shapes/Star\");\nvar Text_1 = require(\"./shapes/Text\");\nvar TextPath_1 = require(\"./shapes/TextPath\");\nvar Transformer_1 = require(\"./shapes/Transformer\");\nvar Wedge_1 = require(\"./shapes/Wedge\");\nvar Blur_1 = require(\"./filters/Blur\");\nvar Brighten_1 = require(\"./filters/Brighten\");\nvar Contrast_1 = require(\"./filters/Contrast\");\nvar Emboss_1 = require(\"./filters/Emboss\");\nvar Enhance_1 = require(\"./filters/Enhance\");\nvar Grayscale_1 = require(\"./filters/Grayscale\");\nvar HSL_1 = require(\"./filters/HSL\");\nvar HSV_1 = require(\"./filters/HSV\");\nvar Invert_1 = require(\"./filters/Invert\");\nvar Kaleidoscope_1 = require(\"./filters/Kaleidoscope\");\nvar Mask_1 = require(\"./filters/Mask\");\nvar Noise_1 = require(\"./filters/Noise\");\nvar Pixelate_1 = require(\"./filters/Pixelate\");\nvar Posterize_1 = require(\"./filters/Posterize\");\nvar RGB_1 = require(\"./filters/RGB\");\nvar RGBA_1 = require(\"./filters/RGBA\");\nvar Sepia_1 = require(\"./filters/Sepia\");\nvar Solarize_1 = require(\"./filters/Solarize\");\nvar Threshold_1 = require(\"./filters/Threshold\");\nexports.Konva = _CoreInternals_1.Konva.Util._assign(_CoreInternals_1.Konva, {\n    Arc: Arc_1.Arc,\n    Arrow: Arrow_1.Arrow,\n    Circle: Circle_1.Circle,\n    Ellipse: Ellipse_1.Ellipse,\n    Image: Image_1.Image,\n    Label: Label_1.Label,\n    Tag: Label_1.Tag,\n    Line: Line_1.Line,\n    Path: Path_1.Path,\n    Rect: Rect_1.Rect,\n    RegularPolygon: RegularPolygon_1.RegularPolygon,\n    Ring: Ring_1.Ring,\n    Sprite: Sprite_1.Sprite,\n    Star: Star_1.Star,\n    Text: Text_1.Text,\n    TextPath: TextPath_1.TextPath,\n    Transformer: Transformer_1.Transformer,\n    Wedge: Wedge_1.Wedge,\n    Filters: {\n        Blur: Blur_1.Blur,\n        Brighten: Brighten_1.Brighten,\n        Contrast: Contrast_1.Contrast,\n        Emboss: Emboss_1.Emboss,\n        Enhance: Enhance_1.Enhance,\n        Grayscale: Grayscale_1.Grayscale,\n        HSL: HSL_1.HSL,\n        HSV: HSV_1.HSV,\n        Invert: Invert_1.Invert,\n        Kaleidoscope: Kaleidoscope_1.Kaleidoscope,\n        Mask: Mask_1.Mask,\n        Noise: Noise_1.Noise,\n        Pixelate: Pixelate_1.Pixelate,\n        Posterize: Posterize_1.Posterize,\n        RGB: RGB_1.RGB,\n        RGBA: RGBA_1.RGBA,\n        Sepia: Sepia_1.Sepia,\n        Solarize: Solarize_1.Solarize,\n        Threshold: Threshold_1.Threshold\n    }\n});\n","var Konva = require('./_FullInternals').Konva;\nKonva._injectGlobal(Konva);\nexports['default'] = Konva;\nmodule.exports = exports['default'];\n","export default \":host {\\n  --light-bg: #d9e4ea;\\n  --dark-bg: #333333;\\n  --gray: #bdbdbd;\\n  --black: #0d0b0d;\\n  --green: #0ecb66;\\n  --red: #fa4f23;\\n  --blue: #0b98dd;\\n  --white: #ffffff;\\n  --light-bg-02: #cbc9c9;\\n  --block-height: calc((100vh / 9) - 11px);\\n  --block-min-height: 55px;\\n  --block-max-height: 84px;\\n  --block-height-header: calc(100vh / 9);\\n}\\n\\n.ShareCanvas {\\n  position: fixed;\\n  left: 50%;\\n  top: 50%;\\n  transform: translate3d(-150%, -50%, 0);\\n}\\n\"","import Konva from 'konva';\n\nconst LIGHT_BG = '#D9E4EA';\nconst DARK_BG = '#333333';\nconst GAP = 3;\nconst CANVAS_WIDTH = 414;\nconst CANVAS_HEIGHT = 788;\nconst HEIGHT = 84;\nconst HEADER_HEIGHT = 126;\nconst FONT_SIZE = 24;\n\nconst DEFAULT_BOX = {\n  stroke: LIGHT_BG,\n  strokeWidth: 2,\n  cornerRadius: 9,\n};\n\nconst DEFAULT_TEXT = {\n  fontSize: FONT_SIZE,\n  fontFamily: 'Helvetica',\n  fill: LIGHT_BG,\n  align: 'center',\n};\n\nconst SMALL_BOX = {\n  ...DEFAULT_BOX,\n  width: 85,\n  height: HEADER_HEIGHT,\n};\n\nconst MEDIUM_BOX = {\n  ...DEFAULT_BOX,\n  width: 173,\n  height: HEIGHT,\n};\n\nconst LARGE_BOX = {\n  ...DEFAULT_BOX,\n  width: 230,\n  height: HEIGHT,\n};\n\nconst LOGO = {\n  ...DEFAULT_BOX,\n  width: 228,\n  height: HEADER_HEIGHT,\n  x: SMALL_BOX.width + 8,\n  y: GAP,\n};\n\nimport styles from './ShareCanvas.css?raw';\n\nclass ShareCanvas extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this.firstPerson = { name: '', salary: '' };\n    this.secondPerson = { name: 'person 1', salary: '' };\n    this.expenses = '0';\n    this.currency = '$';\n    this.stage = null;\n    this.layer = null;\n  }\n\n  static get observedAttributes() {\n    return ['first-person', 'second-person', 'expenses', 'currency'];\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'first-person') {\n      this.firstPerson = JSON.parse(newValue);\n    } else if (name === 'second-person') {\n      this.secondPerson = JSON.parse(newValue);\n    } else if (name === 'expenses') {\n      this.expenses = newValue;\n    } else if (name === 'currency') {\n      this.currency = newValue;\n    }\n    if (this.stage) {\n      this.draw();\n    }\n  }\n\n  connectedCallback() {\n    this.render();\n    this.initCanvas();\n  }\n\n  render() {\n    this.shadowRoot.innerHTML = `\n      <style>${styles}</style>\n      <div class=\"ShareCanvas\"></div>\n    `;\n  }\n\n  initCanvas() {\n    const container = this.shadowRoot.querySelector('.ShareCanvas');\n    this.stage = new Konva.Stage({\n      container: container,\n      width: CANVAS_WIDTH,\n      height: CANVAS_HEIGHT,\n    });\n\n    this.layer = new Konva.Layer();\n    this.stage.add(this.layer);\n\n    const bg = new Konva.Rect({\n      x: 0,\n      y: 0,\n      width: CANVAS_WIDTH,\n      height: CANVAS_HEIGHT,\n      fill: DARK_BG,\n    });\n    this.layer.add(bg);\n\n    this.drawHeader();\n    this.drawRow1();\n    this.drawRow2();\n\n    this.layer.draw();\n  }\n\n  drawHeader() {\n    const smallBox1 = new Konva.Rect({ ...SMALL_BOX, x: GAP, y: GAP });\n    const logo = new Konva.Rect(LOGO);\n    const smallBox2 = new Konva.Rect({\n      ...SMALL_BOX,\n      x: SMALL_BOX.width + LOGO.width + 13,\n      y: GAP,\n    });\n\n    Konva.Image.fromURL(`${import.meta.env.BASE_URL}img/logo.ea9ec231.svg`, (image) => {\n      image.setAttrs({\n        x: CANVAS_WIDTH / 2 - 20,\n        y: 35,\n        scaleX: 1,\n      });\n      this.layer.add(image);\n      this.layer.draw();\n    });\n\n    this.layer.add(smallBox1);\n    this.layer.add(logo);\n    this.layer.add(smallBox2);\n  }\n\n  drawRow1() {\n    const ROW_1_COL_1 = {\n      ...MEDIUM_BOX,\n      x: 3,\n      y: HEADER_HEIGHT + 8,\n    };\n\n    const ROW_1_COL_2 = {\n      ...LARGE_BOX,\n      x: ROW_1_COL_1.width + 8,\n      y: HEADER_HEIGHT + 8,\n    };\n\n    const FIRST_NAME = {\n      ...DEFAULT_TEXT,\n      width: ROW_1_COL_1.width,\n      height: ROW_1_COL_1.height,\n      x: ROW_1_COL_1.x,\n      y: ROW_1_COL_1.y + ROW_1_COL_1.height / 2 - FONT_SIZE / 2,\n      text: this.firstPerson.name,\n    };\n\n    const FIRST_SALARY = {\n      ...DEFAULT_TEXT,\n      width: ROW_1_COL_2.width,\n      height: ROW_1_COL_2.height,\n      x: ROW_1_COL_2.x,\n      y: ROW_1_COL_2.y + ROW_1_COL_2.height / 2 - FONT_SIZE / 2,\n      text: `${this.currency}${this.firstPerson.salary}`,\n    };\n\n    this.layer.add(new Konva.Rect(ROW_1_COL_1));\n    this.layer.add(new Konva.Rect(ROW_1_COL_2));\n    this.layer.add(new Konva.Text(FIRST_NAME));\n    this.layer.add(new Konva.Text(FIRST_SALARY));\n  }\n\n  drawRow2() {\n    const ROW_2_COL_1 = {\n      ...MEDIUM_BOX,\n      x: 3,\n      y: HEADER_HEIGHT + 8 + HEIGHT + 5,\n    };\n\n    const ROW_2_COL_2 = {\n      ...LARGE_BOX,\n      x: ROW_2_COL_1.width + 8,\n      y: HEADER_HEIGHT + 8 + HEIGHT + 5,\n    };\n\n    const SECOND_NAME = {\n      ...DEFAULT_TEXT,\n      width: ROW_2_COL_1.width,\n      height: ROW_2_COL_1.height,\n      x: ROW_2_COL_1.x,\n      y: ROW_2_COL_1.y + ROW_2_COL_1.height / 2 - FONT_SIZE / 2,\n      text: this.secondPerson.name,\n    };\n\n    const SECOND_SALARY = {\n      ...DEFAULT_TEXT,\n      width: ROW_2_COL_2.width,\n      height: ROW_2_COL_2.height,\n      x: ROW_2_COL_2.x,\n      y: ROW_2_COL_2.y + ROW_2_COL_2.height / 2 - FONT_SIZE / 2,\n      text: `${this.currency}${this.secondPerson.salary}`,\n    };\n\n    this.layer.add(new Konva.Rect(ROW_2_COL_1));\n    this.layer.add(new Konva.Rect(ROW_2_COL_2));\n    this.layer.add(new Konva.Text(SECOND_NAME));\n    this.layer.add(new Konva.Text(SECOND_SALARY));\n  }\n\n  draw() {\n    // Redraw if needed\n    this.layer.draw();\n  }\n}\n\ncustomElements.define('share-canvas', ShareCanvas);\n","const store = {\n  state: {\n    firstPerson: {\n      name: 'person 1',\n      salary: 0,\n      percent: 0,\n      total: 0,\n    },\n    secondPerson: {\n      name: 'person 2',\n      salary: 0,\n      percent: 0,\n      total: 0,\n    },\n    currency: '',\n    sumOfDebts: 0,\n    basePercentage: 0,\n  },\n  mutations: {\n    updateFirstPerson(payload) {\n      this.state.firstPerson = {\n        ...this.state.firstPerson,\n        ...payload,\n      };\n    },\n    updateSecondPerson(payload) {\n      this.state.secondPerson = {\n        ...this.state.secondPerson,\n        ...payload,\n      };\n    },\n    setDebts(payload) {\n      this.state.sumOfDebts = payload === '' ? 0 : payload;\n    },\n    setBasePercentage(payload) {\n      this.state.basePercentage = payload === '' ? 0 : payload;\n    },\n    reset() {\n      this.state.firstPerson.salary = 0;\n      this.state.firstPerson.percent = 0;\n      this.state.firstPerson.total = 0;\n      this.state.secondPerson.salary = 0;\n      this.state.secondPerson.percent = 0;\n      this.state.secondPerson.total = 0;\n      this.state.sumOfDebts = 0;\n      this.state.basePercentage = 0;\n    },\n  },\n};\n\nexport default store;\n","export default \":host {\\n  --light-bg: #d9e4ea;\\n  --dark-bg: #333333;\\n  --gray: #bdbdbd;\\n  --black: #0d0b0d;\\n  --green: #0ecb66;\\n  --red: #fa4f23;\\n  --blue: #0b98dd;\\n  --white: #ffffff;\\n  --light-bg-02: #cbc9c9;\\n  --block-height: calc((100vh / 9) - 11px);\\n  --block-min-height: 55px;\\n  --block-max-height: 84px;\\n  --block-height-header: calc(100vh / 9);\\n}\\n\\n@keyframes blink-animation {\\n  to {\\n    visibility: hidden;\\n  }\\n}\\n\\n.App {\\n  width: 400px;\\n  fill: #D9E4EA;\\n  filter: drop-shadow(-9px -14px 39px rgba(255, 255, 255, 0.93));\\n  drop-shadow(10px 16px 39px rgba(0, 0, 0, 0.12)) blur(2px);\\n}\\n\\n:host(.menuOpened) .App {\\n  transform: translate3d(-25vw, -50%, 0);\\n}\\n\\n.bg {\\n  display: none;\\n  background-color: var(--black);\\n  width: 100%;\\n  max-width: 414px;\\n  margin: 0 auto;\\n  padding: 3px;\\n  box-sizing: border-box;\\n  font-family: Helvetica;\\n  font-size: 24px;\\n  border-radius: 9px;\\n  padding-bottom: 38px;\\n  position: relative;\\n  border: 10px solid var(--light-bg);\\n  box-shadow: 0px 0px 40px var(--white);\\n  transform: translate3d(-50%, -50%, 0);\\n  transition: transform 500ms ease;\\n  left: 50%;\\n  top: 50%;\\n  position: absolute;\\n}\\n\\n.App .bg {\\n  background-color: var(--black);\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  z-index: -1;\\n  border-radius: 9px;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.App header {\\n  margin-bottom: 3px;\\n  border-radius: 10px 10px 0 0;\\n  overflow: hidden;\\n}\\n\\n.App header .wrap-logo {\\n  display: grid;\\n  width: 100%;\\n  grid-gap: 3px;\\n  grid-template-columns: 1fr 1fr 1fr;\\n}\\n\\n.App header .wrap-logo .logo {\\n  height: 70%;\\n}\\n\\n.App .block {\\n  background-color: white;\\n  box-sizing: border-box;\\n  border-radius: 9px;\\n  padding: 0 29px;\\n  display: flex;\\n  height: var(--block-height);\\n  min-height: var(--block-min-height);\\n  max-height: var(--block-max-height);\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.App .input {\\n  background-color: transparent;\\n  border: 0;\\n  width: 100%;\\n  height: 100%;\\n  text-align: center;\\n  font-size: 24px;\\n  outline: none;\\n  position: relative;\\n}\\n\\n.App .input::-webkit-outer-spin-button,\\n.App .input::-webkit-inner-spin-button {\\n  -webkit-appearance: none;\\n  margin: 0;\\n}\\n\\n.App .input[type='number'] {\\n  -moz-appearance: textfield;\\n  appearance: textfield;\\n}\\n\\n.App .input::placeholder {\\n  color: var(--gray);\\n}\\n\\n.App .input.firstSalaryField,\\n.App .input.secondSalaryField {\\n  color: var(--green);\\n}\\n\\n.App .input.expensesField {\\n  color: var(--red);\\n}\\n\\n.App .split-btn {\\n  height: var(--block-height);\\n  min-height: var(--block-min-height);\\n  max-height: var(--block-max-height);\\n  width: 100%;\\n  font-style: normal;\\n  font-weight: normal;\\n  font-size: 24px;\\n  line-height: 24px;\\n  text-align: center;\\n  background-color: var(--blue);\\n  color: var(--light-bg);\\n  border: 0;\\n  outline: 0;\\n  margin-bottom: 3px;\\n    cursor: url(/splitfair-app/cursor-red.png), auto;\\n}\\n\\n.App .split-btn:hover,\\n.App .split-btn:focus {\\n  background-color: #0a8ac5;\\n}\\n\\n.incomings {\\n  display: flex;\\n  flex-direction: column;\\n  width: 100%;\\n}\\n\\n.wrap-income {\\n  display: grid;\\n  grid-gap: 3px;\\n  grid-template-columns: minmax(43%, 1fr) minmax(calc(57% - 3px), 1fr);\\n  height: var(--block-height);\\n  min-height: var(--block-min-height);\\n  max-height: var(--block-max-height);\\n  margin-bottom: 3px;\\n}\\n\\n.label,\\n.income {\\n  display: flex;\\n  align-items: center;\\n  font-style: normal;\\n  font-weight: normal;\\n  font-size: 24px;\\n  line-height: 24px;\\n  text-align: center;\\n}\\n\\n.label {\\n  justify-content: center;\\n}\\n\\n.income {\\n  color: var(--green);\\n  justify-content: flex-end;\\n}\\n\\n.expenses {\\n  display: grid;\\n  grid-gap: 3px;\\n  grid-template-columns: minmax(43%, 1fr) minmax(calc(57% - 3px), 1fr);\\n  height: var(--block-height);\\n  min-height: var(--block-min-height);\\n  max-height: var(--block-max-height);\\n  margin-bottom: 3px;\\n}\\n\\n.expenses.active .value::before {\\n  opacity: 1;\\n  animation: blink-animation 1s steps(5, start) infinite;\\n}\\n\\n.expenses .label {\\n  background-color: var(--red);\\n  color: var(--black);\\n}\\n\\n.expenses .value {\\n  background-color: var(--black);\\n  color: var(--red);\\n  justify-content: flex-end;\\n  position: relative;\\n}\\n\\n.expenses .value::before {\\n  content: '';\\n  width: 4px;\\n  height: 40px;\\n  background-color: var(--red);\\n  margin-right: 5px;\\n  opacity: 0;\\n  display: inline-block;\\n  position: absolute;\\n  left: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n.results {\\n  display: flex;\\n  flex-direction: column;\\n  width: 100%;\\n}\\n\\n.results .title {\\n  margin-bottom: 3px;\\n}\\n\\n.results .wrap-results {\\n  display: grid;\\n  grid-gap: 3px;\\n  grid-template-columns: minmax(43%, 1fr) minmax(calc(57% - 3px), 1fr);\\n  height: var(--block-height);\\n  min-height: var(--block-min-height);\\n  max-height: var(--block-max-height);\\n  margin-bottom: 3px;\\n}\\n\\n.results .wrap-results .value {\\n  justify-content: flex-end;\\n  color: var(--blue);\\n}\\n\\n.results .percent-each {\\n  margin-bottom: 3px;\\n}\\n\\n.results .wrap-buttons {\\n  display: grid;\\n  grid-gap: 3px;\\n  grid-template-columns: minmax(calc(67% - 3px), 1fr) minmax(33%, 1fr);\\n  height: var(--block-height);\\n  min-height: var(--block-min-height);\\n  max-height: var(--block-max-height);\\n  margin-bottom: 3px;\\n}\\n\\n.results .wrap-buttons .share {\\n  background-color: var(--blue);\\n  color: var(--white);\\n}\\n\\n.results .wrap-buttons .clear {\\n  background-color: var(--red);\\n  color: var(--black);\\n}\"","import globalStore from '../store/globalStore.js';\n\nimport styles from './App.css?raw';\n\nclass App extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this.firstSalary = '0';\n    this.secondSalary = '0';\n    this.expenses = '0';\n    this.selectedField = 'firstSalary';\n    this.showCanvas = false;\n    this.store = globalStore;\n    this.onFocusFirstSalaryBound = this.onFocusFirstSalary.bind(this);\n    this.onFocusSecondSalaryBound = this.onFocusSecondSalary.bind(this);\n    this.onFocusExpensesBound = this.onFocusExpenses.bind(this);\n  }\n\n  connectedCallback() {\n    this.render();\n  }\n\n  onInputFirstName(e) {\n    this.store.mutations.updateFirstPerson({ name: e.target.value });\n    this.render();\n  }\n\n  onInputSecondName(e) {\n    this.store.mutations.updateSecondPerson({ name: e.target.value });\n    this.render();\n  }\n\n  onFocusFirstSalary() {\n    this.setSelectedField('firstSalary');\n  }\n\n  onFocusSecondSalary() {\n    this.setSelectedField('secondSalary');\n  }\n\n  onFocusExpenses() {\n    this.setSelectedField('expenses');\n  }\n\n  onTapButtonNumberpad(e) {\n    const tappedButton = e.detail;\n    if (tappedButton === '<') {\n      if (this.selectedField === 'firstSalary') {\n        this.firstSalary = '0';\n      } else if (this.selectedField === 'secondSalary') {\n        this.secondSalary = '0';\n      } else if (this.selectedField === 'expenses') {\n        this.expenses = '0';\n      }\n      this.render();\n      return;\n    }\n    if (tappedButton === 'Enter') {\n      return;\n    }\n    if (this.selectedField === 'firstSalary') {\n      if (this.firstSalary.length > 7) return;\n      this.firstSalary = this.firstSalary === '0' ? tappedButton : this.firstSalary + tappedButton;\n    } else if (this.selectedField === 'secondSalary') {\n      if (this.secondSalary.length > 7) return;\n      this.secondSalary =\n        this.secondSalary === '0' ? tappedButton : this.secondSalary + tappedButton;\n    } else if (this.selectedField === 'expenses') {\n      if (this.expenses.length > 7) return;\n      this.expenses = this.expenses === '0' ? tappedButton : this.expenses + tappedButton;\n    }\n    this.render();\n  }\n\n  calculate() {\n    if (this.firstSalary === '0' || this.secondSalary === '0' || this.expenses === '0') return;\n    let sum = 0;\n    let incrementPercent = 0;\n    const format = (val, decimals = 1) => parseFloat(val.toFixed(decimals));\n    const p1 = {\n      salary: this.firstSalary,\n      total: 0,\n    };\n    const p2 = {\n      salary: this.secondSalary,\n      total: 0,\n    };\n    while (sum <= parseFloat(this.expenses)) {\n      p1.total = format((Number(this.firstSalary) / 100) * incrementPercent, 0);\n      p2.total = format((Number(this.secondSalary) / 100) * incrementPercent, 0);\n      sum = p1.total + p2.total;\n      incrementPercent += 0.01;\n    }\n    this.store.mutations.setDebts(parseFloat(this.expenses));\n    this.store.mutations.setBasePercentage(format(incrementPercent));\n    this.store.mutations.updateFirstPerson(p1);\n    this.store.mutations.updateSecondPerson(p2);\n    this.render();\n  }\n\n  onClickClear() {\n    this.firstSalary = '0';\n    this.secondSalary = '0';\n    this.expenses = '0';\n    this.store.mutations.reset();\n    this.render();\n  }\n\n  onClickShare() {\n    this.showCanvas = true;\n    this.render();\n  }\n\n  setSelectedField(field) {\n    this.selectedField = field;\n    this.render();\n  }\n\n  render() {\n    const firstPerson = this.store.state.firstPerson;\n    const secondPerson = this.store.state.secondPerson;\n    const currency = this.store.state.currency;\n    const basePercentage = this.store.state.basePercentage;\n    const shouldShowResults = basePercentage !== 0;\n    const firstPersonResultName = firstPerson.name ? firstPerson.name : 'First person';\n    const secondPersonResultName = secondPerson.name ? secondPerson.name : 'Second person';\n\n    this.shadowRoot.innerHTML = `\n      <style>${styles}</style>\n      <div class=\"App\">\n        <div class=\"bg\"></div>\n        <header>\n          <div class=\"wrap-logo\">\n            <div class=\"block block-02\"></div>\n             <div class=\"block block-03\">\n                <img src=\"/splitfair-app/logo.svg\" alt=\"logo\" class=\"logo\" />\n             </div>\n            <div class=\"block block-04\"></div>\n          </div>\n        </header>\n        <section class=\"incomings\">\n          <div class=\"wrap-income\">\n            <h2 class=\"block label\">\n              <input\n                value=\"${firstPerson.name}\"\n                type=\"text\"\n                placeholder=\"Name\"\n                tabindex=\"1\"\n                class=\"input\"\n                autofocus\n              />\n            </h2>\n            <div class=\"block income ${this.selectedField === 'firstSalary' ? 'active' : ''}\">\n              ${this.firstSalary !== '0' ? `<span>${currency}</span>` : ''}\n              <input\n                value=\"${this.firstSalary}\"\n                type=\"text\"\n                placeholder=\"salary\"\n                tabindex=\"3\"\n                class=\"input firstSalaryField\"\n                readonly\n              />\n            </div>\n          </div>\n          <div class=\"wrap-income\">\n            <h2 class=\"block label\">\n              <input\n                value=\"${secondPerson.name}\"\n                type=\"text\"\n                placeholder=\"Name\"\n                tabindex=\"2\"\n                class=\"input\"\n              />\n            </h2>\n            <div class=\"block income ${this.selectedField === 'secondSalary' ? 'active' : ''}\">\n              ${this.secondSalary !== '0' ? `<span>${currency}</span>` : ''}\n              <input\n                value=\"${this.secondSalary}\"\n                type=\"number\"\n                placeholder=\"salary\"\n                tabindex=\"4\"\n                class=\"input secondSalaryField\"\n                readonly\n              />\n            </div>\n          </div>\n        </section>\n        <section class=\"expenses ${this.selectedField === 'expenses' ? 'active' : ''}\">\n          <div class=\"block label\">Expenses</div>\n          <div class=\"block value\">\n            ${this.expenses !== '0' ? `<span>${currency}</span>` : ''}\n            <input\n              value=\"${this.expenses}\"\n              type=\"text\"\n              placeholder=\"expenses\"\n              tabindex=\"5\"\n              class=\"input expensesField\"\n              readonly\n            />\n          </div>\n        </section>\n        <a class=\"block split-btn\" tabindex=\"6\"> Split </a>\n        <number-pad></number-pad>\n        ${\n          shouldShowResults\n            ? `\n        <section class=\"results\">\n          <div class=\"block title\">Results</div>\n          <div class=\"wrap-results\">\n            <div class=\"block label\">${firstPersonResultName}</div>\n            <div class=\"block value\">${currency}${firstPerson.total}</div>\n          </div>\n          <div class=\"wrap-results\">\n            <div class=\"block label\">${secondPersonResultName}</div>\n            <div class=\"block value\">${currency}${secondPerson.total}</div>\n          </div>\n          <div class=\"block percent-each\">%${basePercentage} each</div>\n          <div class=\"wrap-buttons\">\n            <div class=\"block share\">Share</div>\n            <div class=\"block clear\">Clear</div>\n          </div>\n        </section>\n        `\n            : ''\n        }\n        ${this.showCanvas ? `<share-canvas first-person='${JSON.stringify(firstPerson)}' second-person='${JSON.stringify(secondPerson)}' currency='${currency}'></share-canvas>` : ''}\n      </div>\n    `;\n\n    // Add event listeners\n    const inputs = this.shadowRoot.querySelectorAll('input[placeholder=\"Name\"]');\n    inputs[0].addEventListener('input', this.onInputFirstName);\n    inputs[1].addEventListener('input', this.onInputSecondName);\n\n    this.shadowRoot\n      .querySelector('.firstSalaryField')\n      .addEventListener('focus', this.onFocusFirstSalaryBound);\n    this.shadowRoot\n      .querySelector('.secondSalaryField')\n      .addEventListener('focus', this.onFocusSecondSalaryBound);\n    this.shadowRoot\n      .querySelector('.expensesField')\n      .addEventListener('focus', this.onFocusExpensesBound);\n\n    this.shadowRoot.querySelector('.split-btn').addEventListener('click', this.calculate);\n\n    this.shadowRoot\n      .querySelector('number-pad')\n      .addEventListener('tapped-button', this.onTapButtonNumberpad);\n\n    if (shouldShowResults) {\n      this.shadowRoot.querySelector('.clear').addEventListener('click', this.onClickClear);\n      this.shadowRoot.querySelector('.share').addEventListener('click', this.onClickShare);\n    }\n  }\n}\n\ncustomElements.define('app-component', App);\n","class Application extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this.menuOpened = false;\n    this.desktopOnly = true;\n  }\n\n  connectedCallback() {\n    const mql = window.matchMedia('(max-width: 600px)');\n    this.desktopOnly = !mql.matches;\n    mql.addEventListener('change', this.screenTest);\n    this.render();\n  }\n\n  moveAppSideways(e) {\n    this.menuOpened = e.detail;\n    this.render();\n  }\n\n  screenTest(e) {\n    this.desktopOnly = !e.matches;\n    this.render();\n  }\n\n  render() {\n    this.shadowRoot.innerHTML = `\n      <style>\n        :host {\n          --light-bg: #d9e4ea;\n          --dark-bg: #333333;\n          --gray: #bdbdbd;\n          --black: #0d0b0d;\n          --green: #0ecb66;\n          --red: #fa4f23;\n          --blue: #0b98dd;\n          --white: #ffffff;\n          --light-bg-02: #cbc9c9;\n          --block-height: calc((100vh / 9) - 11px);\n          --block-min-height: 55px;\n          --block-max-height: 84px;\n          --block-height-header: calc(100vh / 9);\n          font-family: 'Avenir', Helvetica, Arial, sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n          text-align: center;\n          overflow-y: auto;\n          overflow-x: hidden;\n          width: 100vw;\n          height: 100vh;\n          position: relative;\n            cursor: url(/splitfair-app/cursor-red.png), auto;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n        }\n\n        .Application__link {\n          position: absolute;\n          text-decoration: none;\n          color: var(--black);\n          font-size: 28px;\n          z-index: 1;\n          transition: opacity 250ms ease;\n        }\n\n        .Application__link.menuOpened {\n          opacity: 0;\n          pointer-events: none;\n        }\n\n        .Application__link.logo {\n          top: 4vw;\n          left: 5vw;\n        }\n\n        .Application__version {\n          position: absolute;\n          bottom: 4vw;\n          left: 5vw;\n          color: var(--black);\n          font-size: 28px;\n          opacity: 0.4;\n          transition: opacity 250ms ease;\n        }\n\n        .Application__version.menuOpened {\n          opacity: 0;\n          pointer-events: none;\n        }\n      </style>\n      ${this.desktopOnly ? `<a href=\"#\" class=\"Application__link logo ${this.menuOpened ? 'menuOpened' : ''}\"> splitfair </a>` : ''}\n      ${this.desktopOnly ? `<span class=\"Application__version ${this.menuOpened ? 'menuOpened' : ''}\"> v0.1 </span>` : ''}\n      <app-component class=\"${this.menuOpened ? 'menuOpened' : ''}\"></app-component>\n      ${this.desktopOnly ? '<download-app-section></download-app-section>' : ''}\n      ${this.desktopOnly ? '<about-section></about-section>' : ''}\n    `;\n\n    if (this.desktopOnly) {\n      this.shadowRoot\n        .querySelector('download-app-section')\n        .addEventListener('is-menu-open', this.moveAppSideways);\n      this.shadowRoot\n        .querySelector('about-section')\n        .addEventListener('is-menu-open', this.moveAppSideways);\n    }\n  }\n}\n\ncustomElements.define('splitfair-application', Application);\n","// Import Web Components\nimport './components/AboutSection.js';\nimport './components/DownloadAppSection.js';\nimport './components/NumberPad.js';\nimport './components/ShareCanvas.js';\nimport './components/App.js';\nimport './Application.js';\n\n// Global CSS variables\nimport './styles/variables.css';\n\n// Initialize the application\nconst app = document.createElement('splitfair-application');\ndocument.getElementById('app').appendChild(app);\n"],"names":["styles$4","AboutSection","e","styles","styles$3","DownloadAppSection","styles$2","NumberPad","el","isBackspace","isEnter","isNumber","key","buttonEl","_e","value","reg","button","exports","PI_OVER_180","detectBrowser","_detectIE","ua","msie","trident","rv","edge","userAgent","match","mobile","ieMobile","global","param","angle","Konva","NodeClass","Global_1","require$$0","Collection","arr","collection","len","n","methodName","i","args","constructor","prot","func","Transform","m","point","x","y","sx","sy","rad","c","s","m11","m12","m21","m22","matrix","dx","dy","d","m0","m1","m2","m3","m4","m5","yt","xt","a","b","f","delta","result","r","OBJECT_ARRAY","OBJECT_NUMBER","OBJECT_STRING","OBJECT_BOOLEAN","PI_OVER_DEG180","DEG180_OVER_PI","HASH","EMPTY_STRING","ZERO","KONVA_WARNING","KONVA_ERROR","RGB_PAREN","COLORS","RGB_REGEX","animQueue","obj","val","selector","firstChar","number","callback","queue","cb","canvas","retArr","util","url","imageObj","g","hex","bigint","randColor","def","color","rgb","str","parts","_a","hsl","h","l","t2","t3","t1","r1","r2","retObj","deg","radians","child","parent","Ctor","oldProto","x0","y0","x1","y1","x2","y2","t","d01","d12","fa","fb","p1x","p1y","p2x","p2y","p","tension","allPoints","cp","left","right","x3","y3","dist","pd2","u","pt","line","isClosed","pc","p1","p2","proj","px","py","pdist","startArray","endArray","start","end","temp","newStart","pr","desc","target","source","evt","Validators","Util_1","require$$1","_formatValue","RGBComponent","alphaComponent","getNumberValidator","attr","getNumberOrAutoValidator","isAuto","getStringValidator","getFunctionValidator","getNumberArrayValidator","item","getBooleanValidator","isBool","getComponentValidator","components","Validators_1","GET","SET","validator","after","method","capitalize","getter","setter","component","ret","basicValidator","oldVal","capitalizedAttr","message","methods","oldMethodName","newMethodName","oldGetter","oldSetter","deprecated","__extends","this","extendStatics","__","Context_1","COMMA","OPEN_PAREN","CLOSE_PAREN","OPEN_PAREN_BRACKET","CLOSE_BRACKET_PAREN","SEMICOLON","DOUBLE_PAREN","EQUALS","CONTEXT_METHODS","CONTEXT_PROPERTIES","traceArrMax","Context","shape","relaxed","traceArr","trace","pixelRatio","bounds","lineCap","absOpacity","lineJoin","a0","a1","a2","a3","a4","a5","a6","a7","a8","_context","width","height","text","that","_simplifyArray","origSetter","origMethod","prop","node","globalCompositeOperation","SceneContext","_super","fill","fillPatternX","fillPatternY","fillPatternRotation","fillPatternOffsetX","fillPatternOffsetY","fillPatternScaleX","fillPatternScaleY","grd","hasColor","fillPriority","hasPattern","hasLinearGradient","hasRadialGradient","colorStops","dash","strokeScaleEnabled","blur","offset","scale","ratio","scaleX","scaleY","HitContext","hitStrokeWidth","strokeWidth","Canvas_1","require$$2","Factory_1","require$$3","require$$4","_pixelRatio","getDevicePixelRatio","context","devicePixelRatio","backingStoreRatio","Canvas","config","conf","previousRatio","mimeType","quality","err","SceneCanvas","_this","HitCanvas","flag","elem","stage","pos","dragDistance","distance","drawNode","DragAndDrop_1","require$$5","_addId","id","name","_id","nodes","no","ABSOLUTE_OPACITY","ABSOLUTE_TRANSFORM","ABSOLUTE_SCALE","CANVAS","CHANGE","CHILDREN","KONVA","LISTENING","MOUSEENTER","MOUSELEAVE","NAME","SHAPE","SPACE","STAGE","TRANSFORM","UPPER_STAGE","VISIBLE","TRANSFORM_CHANGE_STR","emptyChildren","idCounter","Node","privateGetter","cache","forceEvent","rect","drawBorder","cachedSceneCanvas","cachedFilterCanvas","cachedHitCanvas","sceneContext","hitContext","top","points","minX","minY","maxX","maxY","trans","transformed","canvasCache","cacheCanvas","hitCanvas","filters","cachedCanvas","sceneCanvas","filterCanvas","filterContext","imageData","filter","evtStr","handler","events","event","baseEvent","type","stopNode","targets","names","subname","ancestors","listening","relativeTo","visible","layer","depth","index","addChildren","children","haveCachedParent","absoluteMatrix","absoluteTransform","origTrans","it","change","changeX","changeY","family","theta","zIndex","newContainer","attrs","defaultValue","nonPlainObject","includeSelf","res","ancestor","selectorArr","sel","eventType","bubble","at","transformsEnabled","transform","rotation","skewX","skewY","offsetX","offsetY","allListeners","listener","box","img","size","evtListeners","evtName","newVal","oldId","oldNames","newNames","oldName","newName","fullName","compareShape","shouldStop","stopBubble","pointerId","ap","newNodePos","dbf","bounded","draggable","shouldCheckButton","canDrag","hasDraggingChild","data","container","className","Class","isValid","Container_1","Node_1","Container","filterFunc","results","_i","_children","findOne","valid","fn","can","caching","drawMethod","skipBuffer","skipComposition","clipWidth","clipHeight","clipFunc","hasClip","clipX","clipY","hasComposition","layerUnderDrag","dragSkip","skipTransform","selfRect","shapes","hasVisible","PointerEvents","Captures","SUPPORT_POINTER_EVENTS","getCapturedShape","createEvent","hasPointerCapture","setPointerCapture","releaseCapture","Global_2","require$$6","STRING","PX","MOUSEOUT","MOUSEOVER","MOUSEMOVE","MOUSEDOWN","MOUSEUP","POINTERMOVE","POINTERDOWN","POINTERUP","POINTERCANCEL","LOSTPOINTERCAPTURE","CONTEXTMENU","CLICK","DBL_CLICK","TOUCHSTART","TOUCHEND","TAP","DBL_TAP","TOUCHMOVE","WHEEL","CONTENT_MOUSEOUT","CONTENT_MOUSEOVER","CONTENT_MOUSEMOVE","CONTENT_MOUSEDOWN","CONTENT_MOUSEUP","CONTENT_CONTEXTMENU","CONTENT_CLICK","CONTENT_DBL_CLICK","CONTENT_TOUCHSTART","CONTENT_TOUCHEND","CONTENT_DBL_TAP","CONTENT_TAP","CONTENT_TOUCHMOVE","CONTENT_WHEEL","RELATIVE","KONVA_CONTENT","UNDERSCORE","CONTAINER","MAX_LAYERS_NUMBER","EVENTS","eventsLength","addEvent","ctx","eventName","NO_POINTERS_MESSAGE","checkNoClip","Stage","isLayer","isFastLayer","style","layers","content","layerCanvas","length","targetShape","eventsEnabled","differentTarget","clickStartShape","clickEndShape","fireDblClick","triggeredOnShape","hasShape","processedShapesIds","tapTriggered","dblTapTriggered","contentPosition","touch","BaseLayer_1","BaseLayer","moved","_canvas","HAS_SHADOW","SHADOW_RGBA","patternImage","linearGradient","radialGradient","dummyContext","getDummyContext","_fillFunc","_strokeFunc","_fillFuncHit","_strokeFuncHit","_clearHasShadowCache","_clearGetShadowRGBACache","_clearFillPatternCache","_clearLinearGradientCache","_clearRadialGradientCache","Shape","pattern","rgba","bufferHitCanvas","fillRect","applyStroke","fillAndStrokeWidth","fillAndStrokeHeight","applyShadow","shadowOffsetX","shadowOffsetY","preWidth","preHeight","blurRadius","roundingOffset","drawFunc","hasShadow","hasStroke","bufferCanvas","bufferContext","o","alphaThreshold","hitWidth","hitHeight","hitImageData","hitData","rgbColorKey","alpha","Layer_1","Shape_1","require$$7","BEFORE_DRAW","DRAW","INTERSECTION_OFFSETS","INTERSECTION_OFFSETS_LEN","Layer","intersectionOffset","spiralSearchDistance","continueSearch","p3","colorKey","added","FastLayer_1","FastLayer","Group_1","Group","Animation_1","now","Animation","lays","animations","time","anim","layerHash","layersLen","needRedraw","Anim","blacklist","PAUSED","PLAYING","REVERSING","colorAttrs","TweenEngine","propFunc","begin","finish","duration","yoyo","Tween","nodeId","easing","diff","tweenId","trueEnd","trueStart","endRGBA","startRGBA","thisId","params","onFinish","tween","_CoreInternals","Stage_1","require$$8","require$$9","require$$10","Tween_1","require$$11","require$$12","require$$13","Arc_1","Arc","clockwise","__spreadArrays","il","k","j","jl","Line_1","Line","closed","bezier","tp","firstControlPoints","lastControlPoints","middle","Arrow_1","Arrow","PI2","fromTension","isDashEnabled","lineRect","Circle_1","Circle","Ellipse_1","Ellipse","rx","ry","Image_1","Image","image","cropWidth","cropHeight","Label_1","ATTR_CHANGE_LIST","CHANGE_KONVA","NONE","UP","RIGHT","DOWN","LEFT","attrChangeListLen","Label","tag","pointerDirection","pointerWidth","pointerHeight","Tag","cornerRadius","direction","Path_1","Path","ca","cx","cy","dTheta","psi","fs","inc","ii","P1x","P1y","P2x","P2y","fromX","fromY","run","rise","ix","iy","pRise","pRun","pct","P3x","P3y","P4x","P4y","CB1","CB2","CB3","CB4","QB1","QB2","QB3","cosPsi","sinPsi","cs","cc","coords","cpx","cpy","re","jlen","parsed","cmd","startX","startY","prevCmd","ctlPtx","ctlPty","idx","path","psiDeg","xp","yp","lambda","cxp","cyp","vMag","v","vRatio","vAngle","Rect_1","Rect","topLeft","topRight","bottomLeft","bottomRight","RegularPolygon_1","RegularPolygon","sides","radius","Ring_1","PIx2","Ring","Sprite_1","Sprite","updated","ix4","set","offsets","ix2","animation","Star_1","Star","innerRadius","outerRadius","numPoints","Text_1","AUTO","CENTER","JUSTIFY","CONTEXT_2D","DASH","TEXT","TEXT_UPPER","TOP","BOTTOM","MIDDLE","NORMAL","PX_SPACE","WORD","CHAR","ELLIPSIS","checkDefaultFill","Text","padding","fontSize","lineHeightPx","textArr","textArrLen","verticalAlign","alignY","align","totalWidth","letterSpacing","textDecoration","shouldUnderline","shouldLineThrough","translateY","lineTranslateX","lineTranslateY","lastLine","spacesNumber","oneWord","lineWidth","li","letter","metrics","lines","textWidth","fixedWidth","fixedHeight","maxWidth","maxHeightPx","currentHeightPx","wrap","shouldWrap","wrapAtWord","shouldAddEllipsis","additionalWidth","max","low","high","matchWidth","mid","substr","substrWidth","wrapIndex","nextChar","nextIsSpaceOrDash","TextPath_1","TextPath","glyphInfo","p0","dummyCanvas","kerningFunc","textFullWidth","fullPathWidth","charArr","pathCmd","pIndex","currentT","getNextPathSegment","pathData","findSegmentToFitCharacter","glyphWidth","currLen","attempts","cumulativePathLength","needNewSegment","testChar","lettersInOffset","kern","midpoint","info","__assign","Transformer_1","EVENTS_NAME","NODES_RECT","ANGLES","TOUCH_DEVICE","getCursor","anchorName","ANCHORS_NAMES","getCenter","rotateAroundPoint","angleRad","rotateAroundCenter","deltaRad","center","getSnap","snaps","newRotationRad","tol","snapped","absDiff","dif","Transformer","additionalEvents","onChange","elementsCreated","lastPos","abs","otherNode","otherAbs","rot","relative","absScale","absPos","totalPoints","tr","anchor","self","cursor","back","hypotenuse","newHypotenuse","anchorNode","pp","oldAbs","newAbs","oldRotation","newRotation","snappedRot","keepProportion","centeredScaling","comparePoint","reverseX","reverseY","topOffsetX","topOffsetY","bottomOffsetX","bottomOffsetY","newAttrs","oldAttrs","minSize","baseSize","oldTr","newTr","parentTransform","localTransform","newLocalTransform","enabledAnchors","resizeEnabled","anchorSize","validateAnchors","Wedge_1","Wedge","Blur","BlurStack","mul_table","shg_table","filterGaussBlurRGBA","pixels","yi","yw","r_sum","g_sum","b_sum","a_sum","r_out_sum","g_out_sum","b_out_sum","a_out_sum","r_in_sum","g_in_sum","b_in_sum","a_in_sum","pg","pb","pa","rbs","div","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","stackEnd","stack","stackIn","stackOut","mul_sum","shg_sum","Brighten","brightness","Contrast","adjust","nPixels","red","green","blue","Emboss","strength","greyLevel","blend","dirY","dirX","w","w4","otherY","offsetYOther","otherX","offsetOther","dR","dG","dB","absDif","absG","absB","grey","Enhance","remap","fromValue","fromMin","fromMax","toMin","toMax","fromRange","toRange","toValue","nSubPixels","rMin","rMax","gMin","gMax","bMin","bMax","enhanceAmount","rMid","rGoalMax","rGoalMin","gMid","gGoalMax","gGoalMin","bMid","bGoalMax","bGoalMin","Grayscale","HSL","vsu","vsw","rr","rg","rb","gr","gg","gb","br","bg","bb","HSV","Invert","Kaleidoscope","ToPolar","src","dst","opt","srcPixels","dstPixels","xSize","ySize","xMid","yMid","rSize","tSize","conversion","sin","cos","FromPolar","phaseShift","xoff","srcPos","dstPos","power","tempCanvas","scratchData","minSectionSize","sectionSize","xStart","xEnd","xDelta","Mask","pixelAt","idata","rgbDistance","rgbMean","pTab","backgroundMask","threshold","rgbv_no","rgbv_ne","rgbv_so","rgbv_se","thres","mean","mask","applyMask","erodeMask","sw","sh","weights","side","halfSide","maskResult","so","scy","scx","srcOff","wt","dilateMask","smoothEdgeMask","Noise","amount","half","Pixelate","pixelSize","nBinsX","nBinsY","xBinStart","xBinEnd","yBinStart","yBinEnd","xBin","yBin","pixelsInBin","Posterize","levels","RGB","RGBA","ia","Sepia","Solarize","Threshold","level","_FullInternals","_CoreInternals_1","require$$14","require$$15","require$$16","require$$17","Blur_1","require$$18","Brighten_1","require$$19","Contrast_1","require$$20","Emboss_1","require$$21","Enhance_1","require$$22","Grayscale_1","require$$23","HSL_1","require$$24","HSV_1","require$$25","Invert_1","require$$26","Kaleidoscope_1","require$$27","Mask_1","require$$28","Noise_1","require$$29","Pixelate_1","require$$30","Posterize_1","require$$31","RGB_1","require$$32","RGBA_1","require$$33","Sepia_1","require$$34","Solarize_1","require$$35","Threshold_1","require$$36","module","styles$1","LIGHT_BG","DARK_BG","GAP","CANVAS_WIDTH","CANVAS_HEIGHT","HEIGHT","HEADER_HEIGHT","FONT_SIZE","DEFAULT_BOX","DEFAULT_TEXT","SMALL_BOX","MEDIUM_BOX","LARGE_BOX","LOGO","ShareCanvas","oldValue","newValue","smallBox1","logo","smallBox2","ROW_1_COL_1","ROW_1_COL_2","FIRST_NAME","FIRST_SALARY","ROW_2_COL_1","ROW_2_COL_2","SECOND_NAME","SECOND_SALARY","store","payload","App","globalStore","tappedButton","sum","incrementPercent","format","decimals","field","firstPerson","secondPerson","currency","basePercentage","shouldShowResults","firstPersonResultName","secondPersonResultName","inputs","Application","mql","app"],"mappings":"ssBAAA,MAAAA,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECEf,MAAMC,WAAqB,WAAY,CACrC,aAAc,CACZ,MAAK,EACL,KAAK,aAAa,CAAE,KAAM,MAAM,CAAE,EAClC,KAAK,YAAc,EACrB,CAEA,mBAAoB,CAClB,KAAK,OAAM,CACb,CAEA,gBAAgBC,EAAG,CACjBA,EAAE,eAAc,EAChB,KAAK,YAAc,CAAC,KAAK,YACzB,KAAK,OAAM,EACX,KAAK,cAAc,IAAI,YAAY,gBAAiB,CAAE,OAAQ,KAAK,WAAW,CAAE,CAAC,CACnF,CAEA,QAAS,CACP,KAAK,WAAW,UAAY;AAAA,eACjBC,EAAM;AAAA,qCACgB,KAAK,YAAc,cAAgB,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAUtE,KAAK,WAAW,cAAc,QAAQ,EAAE,iBAAiB,QAAS,KAAK,eAAe,EACtF,KAAK,WAAW,cAAc,eAAe,EAAE,iBAAiB,QAAS,KAAK,eAAe,CAC/F,CACF,CAEA,eAAe,OAAO,gBAAiBF,EAAY,ECtCnD,MAAAG,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECEf,MAAMC,WAA2B,WAAY,CAC3C,aAAc,CACZ,MAAK,EACL,KAAK,aAAa,CAAE,KAAM,MAAM,CAAE,EAClC,KAAK,YAAc,EACrB,CAEA,mBAAoB,CAClB,KAAK,OAAM,CACb,CAEA,mBAAmBH,EAAG,CACpBA,EAAE,eAAc,EAChB,KAAK,YAAc,CAAC,KAAK,YACzB,KAAK,OAAM,EACX,KAAK,cAAc,IAAI,YAAY,eAAgB,CAAE,OAAQ,KAAK,WAAW,CAAE,CAAC,CAClF,CAEA,QAAS,CACP,KAAK,WAAW,UAAY;AAAA,eACjBC,EAAM;AAAA,2CACsB,KAAK,YAAc,cAAgB,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAW5E,KAAK,WACF,cAAc,eAAe,EAC7B,iBAAiB,QAAS,KAAK,kBAAkB,EACpD,KAAK,WACF,cAAc,eAAe,EAC7B,iBAAiB,QAAS,KAAK,kBAAkB,CACtD,CACF,CAEA,eAAe,OAAO,uBAAwBE,EAAkB,EC3ChE,MAAAC,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECEf,MAAMC,WAAkB,WAAY,CAClC,aAAc,CACZ,MAAK,EACL,KAAK,aAAa,CAAE,KAAM,MAAM,CAAE,EAClC,KAAK,QAAU,KACf,KAAK,eAAiB,KAAK,UAAU,KAAK,IAAI,EAC9C,KAAK,aAAe,KAAK,QAAQ,KAAK,IAAI,CAC5C,CAEA,mBAAoB,CAClB,KAAK,OAAM,EACX,SAAS,iBAAiB,UAAW,KAAK,cAAc,EACxD,SAAS,iBAAiB,QAAS,KAAK,YAAY,CACtD,CAEA,sBAAuB,CACrB,SAAS,oBAAoB,UAAW,KAAK,cAAc,EAC3D,SAAS,oBAAoB,QAAS,KAAK,YAAY,CACzD,CAEA,MAAML,EAAG,CACP,MAAMM,EAAKN,EAAE,cACb,aAAa,KAAK,OAAO,EACzBM,EAAG,UAAU,IAAI,SAAS,EAC1B,KAAK,QAAU,WAAW,IAAM,CAC9BA,EAAG,UAAU,OAAO,SAAS,CAC/B,EAAG,GAAG,EACN,KAAK,cAAc,IAAI,YAAY,gBAAiB,CAAE,OAAQA,EAAG,UAAU,KAAI,CAAE,CAAE,CAAC,CACtF,CAEA,QAAQN,EAAG,CACT,MAAMO,EAAcP,EAAE,MAAQ,YACxBQ,EAAUR,EAAE,MAAQ,QACpBS,EAAW,KAAK,YAAYT,EAAE,GAAG,EAUvC,GATIS,GACF,KAAK,cAAc,IAAI,YAAY,gBAAiB,CAAE,OAAQT,EAAE,GAAG,CAAE,CAAC,EAEpEO,GACF,KAAK,cAAc,IAAI,YAAY,gBAAiB,CAAE,OAAQ,GAAG,CAAE,CAAC,EAElEC,GACF,KAAK,cAAc,IAAI,YAAY,gBAAiB,CAAE,OAAQ,OAAO,CAAE,CAAC,EAEtEC,GAAYF,GAAeC,EAAS,CACtC,MAAME,EAAMH,EAAc,YAAcC,EAAU,QAAUR,EAAE,IACxDW,EAAW,KAAK,WAAW,cAAc,WAAWD,CAAG,EAAE,EAC3DC,IACFA,EAAS,UAAU,IAAI,SAAS,EAChC,WAAW,IAAM,CACfA,EAAS,UAAU,OAAO,SAAS,CACrC,EAAG,GAAG,EAEV,CACF,CAGA,UAAUC,EAAI,CAAC,CAEf,YAAYC,EAAO,CACjB,IAAIC,EAAM,IAAI,OAAO,UAAU,EAC/B,OAAOA,EAAI,KAAKD,CAAK,CACvB,CAEA,QAAS,CACP,KAAK,WAAW,UAAY;AAAA,eACjBZ,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAwBjB,KAAK,WAAW,iBAAiB,SAAS,EAAE,QAASc,GAAW,CAC9DA,EAAO,iBAAiB,QAAS,KAAK,KAAK,CAC7C,CAAC,CACH,CACF,CAEA,eAAe,OAAO,aAAcV,EAAS,0QChG7C,OAAO,eAAcW,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5D,IAAIC,EAAc,KAAK,GAAK,IAC5B,SAASC,GAAgB,CACrB,OAAQ,OAAO,OAAW,MACrB,CAAA,EAAG,SAAS,KAAK,MAAM,IAAM,mBAC1B,CAAA,EAAG,SAAS,KAAK,MAAM,IAAM,kBACzC,CACA,IAAIC,EAAY,SAAUC,EAAI,CAC1B,IAAIC,EAAOD,EAAG,QAAQ,OAAO,EAC7B,GAAIC,EAAO,EACP,OAAO,SAASD,EAAG,UAAUC,EAAO,EAAGD,EAAG,QAAQ,IAAKC,CAAI,CAAC,EAAG,EAAE,EAErE,IAAIC,EAAUF,EAAG,QAAQ,UAAU,EACnC,GAAIE,EAAU,EAAG,CACb,IAAIC,EAAKH,EAAG,QAAQ,KAAK,EACzB,OAAO,SAASA,EAAG,UAAUG,EAAK,EAAGH,EAAG,QAAQ,IAAKG,CAAE,CAAC,EAAG,EAAE,CACrE,CACI,IAAIC,EAAOJ,EAAG,QAAQ,OAAO,EAC7B,OAAII,EAAO,EACA,SAASJ,EAAG,UAAUI,EAAO,EAAGJ,EAAG,QAAQ,IAAKI,CAAI,CAAC,EAAG,EAAE,EAE9D,EACX,EACAR,EAAA,SAAmB,SAAUS,EAAW,CACpC,IAAIL,EAAKK,EAAU,YAAW,EAAIC,EAAQ,uBAAuB,KAAKN,CAAE,GACpE,uBAAuB,KAAKA,CAAE,GAC9B,oCAAoC,KAAKA,CAAE,GAC3C,kBAAkB,KAAKA,CAAE,GACxBA,EAAG,QAAQ,YAAY,EAAI,GACxB,gCAAgC,KAAKA,CAAE,GAC3C,CAAA,EAAIO,EAAS,CAAC,CAACF,EAAU,MAAM,0DAA0D,EAAGG,EAAW,CAAC,CAACH,EAAU,MAAM,WAAW,EACxI,MAAO,CACH,QAASC,EAAM,CAAC,GAAK,GACrB,QAASA,EAAM,CAAC,GAAK,IACrB,KAAMP,EAAUC,CAAE,EAClB,OAAQO,EACR,SAAUC,CAClB,CACA,EACAZ,EAAA,KAAe,OAAOa,EAAW,IAC3BA,EACA,OAAO,OAAW,IACd,OACA,OAAO,kBAAsB,IACzB,KACA,CAAA,EACdb,EAAA,MAAgB,CACZ,QAASA,EAAQ,KACjB,QAAS,QACT,UAAWE,EAAa,EACxB,aAAc,QAAQ,MAAK,SAAUY,EAAO,CAAA,GAAI,UAAU,EAC1D,eAAgB,IAChB,SAAU,SAAUC,EAAO,CACvB,OAAOf,EAAQ,MAAM,SAAWe,EAAQd,EAAcc,CAC9D,EACI,YAAa,GACb,sBAAuB,GACvB,iBAAkB,GAClB,0BAA2B,GAC3B,eAAgB,GAChB,iBAAkB,GAClB,WAAY,OACZ,aAAc,EACd,SAAU,GACV,aAAc,GACd,YAAa,CAAC,EAAG,CAAC,EAClB,WAAY,UAAY,CACpB,OAAOf,EAAQ,MAAM,GAAM,UACnC,EACI,YAAa,UAAY,CACrB,MAAO,CAAC,CAACA,EAAQ,MAAM,GAAM,IACrC,EACI,GAAIA,EAAQ,SAAUA,EAAQ,KAAK,WAAaA,EAAQ,KAAK,UAAU,WAAc,EAAE,EACvF,SAAUA,EAAQ,KAAK,SACvB,cAAe,SAAUgB,EAAO,CAC5BhB,EAAQ,KAAK,MAAQgB,CAC7B,EACI,SAAUhB,EAAQ,QACtB,EACAA,EAAA,gBAA0B,CAAA,EAC1BA,EAAA,cAAwB,SAAUiB,EAAW,CACzCjB,EAAQ,gBAAgBiB,EAAU,UAAU,aAAY,CAAE,EAAIA,EAC9DjB,EAAQ,MAAMiB,EAAU,UAAU,aAAY,CAAE,EAAIA,CACxD,6BCnFA,OAAO,eAAcjB,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5D,IAAIkB,EAAWC,EACXC,EAAc,UAAY,CAC1B,SAASA,GAAa,CAC1B,CACI,OAAAA,EAAW,aAAe,SAAUC,EAAK,CACrC,IAAIC,EAAa,IAAIF,EAAcG,EAAMF,EAAI,OAAQG,EACrD,IAAKA,EAAI,EAAGA,EAAID,EAAKC,IACjBF,EAAW,KAAKD,EAAIG,CAAC,CAAC,EAE1B,OAAOF,CACf,EACIF,EAAW,WAAa,SAAUK,EAAY,CAC1CL,EAAW,UAAUK,CAAU,EAAI,UAAY,CAC3C,IAAIF,EAAM,KAAK,OAAQG,EACnBC,EAAO,CAAA,EAAG,MAAM,KAAK,SAAS,EAClC,IAAKD,EAAI,EAAGA,EAAIH,EAAKG,IACjB,KAAKA,CAAC,EAAED,CAAU,EAAE,MAAM,KAAKC,CAAC,EAAGC,CAAI,EAE3C,OAAO,IACnB,CACA,EACIP,EAAW,WAAa,SAAUQ,EAAa,CAC3C,IAAIC,EAAOD,EAAY,UACvB,QAASH,KAAcI,EACnBT,EAAW,WAAWK,CAAU,CAE5C,EACWL,CACX,IACApB,EAAA,WAAqBoB,EACrBA,EAAW,UAAY,CAAA,EACvBA,EAAW,UAAU,KAAO,SAAUU,EAAM,CACxC,QAASN,EAAI,EAAGA,EAAI,KAAK,OAAQA,IAC7BM,EAAK,KAAKN,CAAC,EAAGA,CAAC,CAEvB,EACAJ,EAAW,UAAU,QAAU,UAAY,CACvC,IAAIC,EAAM,CAAA,EAAIE,EAAM,KAAK,OAAQC,EACjC,IAAKA,EAAI,EAAGA,EAAID,EAAKC,IACjBH,EAAI,KAAK,KAAKG,CAAC,CAAC,EAEpB,OAAOH,CACX,EACA,IAAIU,EAAa,UAAY,CACzB,SAASA,EAAUC,EAAG,CACdA,IAAM,SAAUA,EAAI,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,GACzC,KAAK,EAAKA,GAAKA,EAAE,MAAK,GAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,CACtD,CACI,OAAAD,EAAU,UAAU,KAAO,UAAY,CACnC,OAAO,IAAIA,EAAU,KAAK,CAAC,CACnC,EACIA,EAAU,UAAU,MAAQ,SAAUE,EAAO,CACzC,IAAI,EAAI,KAAK,EACb,MAAO,CACH,EAAG,EAAE,CAAC,EAAIA,EAAM,EAAI,EAAE,CAAC,EAAIA,EAAM,EAAI,EAAE,CAAC,EACxC,EAAG,EAAE,CAAC,EAAIA,EAAM,EAAI,EAAE,CAAC,EAAIA,EAAM,EAAI,EAAE,CAAC,CACpD,CACA,EACIF,EAAU,UAAU,UAAY,SAAUG,EAAGC,EAAG,CAC5C,YAAK,EAAE,CAAC,GAAK,KAAK,EAAE,CAAC,EAAID,EAAI,KAAK,EAAE,CAAC,EAAIC,EACzC,KAAK,EAAE,CAAC,GAAK,KAAK,EAAE,CAAC,EAAID,EAAI,KAAK,EAAE,CAAC,EAAIC,EAClC,IACf,EACIJ,EAAU,UAAU,MAAQ,SAAUK,EAAIC,EAAI,CAC1C,YAAK,EAAE,CAAC,GAAKD,EACb,KAAK,EAAE,CAAC,GAAKA,EACb,KAAK,EAAE,CAAC,GAAKC,EACb,KAAK,EAAE,CAAC,GAAKA,EACN,IACf,EACIN,EAAU,UAAU,OAAS,SAAUO,EAAK,CACxC,IAAIC,EAAI,KAAK,IAAID,CAAG,EAChBE,EAAI,KAAK,IAAIF,CAAG,EAChBG,EAAM,KAAK,EAAE,CAAC,EAAIF,EAAI,KAAK,EAAE,CAAC,EAAIC,EAClCE,EAAM,KAAK,EAAE,CAAC,EAAIH,EAAI,KAAK,EAAE,CAAC,EAAIC,EAClCG,EAAM,KAAK,EAAE,CAAC,EAAI,CAACH,EAAI,KAAK,EAAE,CAAC,EAAID,EACnCK,EAAM,KAAK,EAAE,CAAC,EAAI,CAACJ,EAAI,KAAK,EAAE,CAAC,EAAID,EACvC,YAAK,EAAE,CAAC,EAAIE,EACZ,KAAK,EAAE,CAAC,EAAIC,EACZ,KAAK,EAAE,CAAC,EAAIC,EACZ,KAAK,EAAE,CAAC,EAAIC,EACL,IACf,EACIb,EAAU,UAAU,eAAiB,UAAY,CAC7C,MAAO,CACH,EAAG,KAAK,EAAE,CAAC,EACX,EAAG,KAAK,EAAE,CAAC,CACvB,CACA,EACIA,EAAU,UAAU,KAAO,SAAUK,EAAIC,EAAI,CACzC,IAAII,EAAM,KAAK,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAIJ,EAC9BK,EAAM,KAAK,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAIL,EAC9BM,EAAM,KAAK,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAIP,EAC9BQ,EAAM,KAAK,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAIR,EAClC,YAAK,EAAE,CAAC,EAAIK,EACZ,KAAK,EAAE,CAAC,EAAIC,EACZ,KAAK,EAAE,CAAC,EAAIC,EACZ,KAAK,EAAE,CAAC,EAAIC,EACL,IACf,EACIb,EAAU,UAAU,SAAW,SAAUc,EAAQ,CAC7C,IAAIJ,EAAM,KAAK,EAAE,CAAC,EAAII,EAAO,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAIA,EAAO,EAAE,CAAC,EACtDH,EAAM,KAAK,EAAE,CAAC,EAAIG,EAAO,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAIA,EAAO,EAAE,CAAC,EACtDF,EAAM,KAAK,EAAE,CAAC,EAAIE,EAAO,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAIA,EAAO,EAAE,CAAC,EACtDD,EAAM,KAAK,EAAE,CAAC,EAAIC,EAAO,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAIA,EAAO,EAAE,CAAC,EACtDC,EAAK,KAAK,EAAE,CAAC,EAAID,EAAO,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAIA,EAAO,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EACjEE,EAAK,KAAK,EAAE,CAAC,EAAIF,EAAO,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAIA,EAAO,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EACrE,YAAK,EAAE,CAAC,EAAIJ,EACZ,KAAK,EAAE,CAAC,EAAIC,EACZ,KAAK,EAAE,CAAC,EAAIC,EACZ,KAAK,EAAE,CAAC,EAAIC,EACZ,KAAK,EAAE,CAAC,EAAIE,EACZ,KAAK,EAAE,CAAC,EAAIC,EACL,IACf,EACIhB,EAAU,UAAU,OAAS,UAAY,CACrC,IAAIiB,EAAI,GAAK,KAAK,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,GACrDC,EAAK,KAAK,EAAE,CAAC,EAAID,EACjBE,EAAK,CAAC,KAAK,EAAE,CAAC,EAAIF,EAClBG,EAAK,CAAC,KAAK,EAAE,CAAC,EAAIH,EAClBI,EAAK,KAAK,EAAE,CAAC,EAAIJ,EACjBK,EAAKL,GAAK,KAAK,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,GACtDM,EAAKN,GAAK,KAAK,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,EAAI,KAAK,EAAE,CAAC,GAC1D,YAAK,EAAE,CAAC,EAAIC,EACZ,KAAK,EAAE,CAAC,EAAIC,EACZ,KAAK,EAAE,CAAC,EAAIC,EACZ,KAAK,EAAE,CAAC,EAAIC,EACZ,KAAK,EAAE,CAAC,EAAIC,EACZ,KAAK,EAAE,CAAC,EAAIC,EACL,IACf,EACIvB,EAAU,UAAU,UAAY,UAAY,CACxC,OAAO,KAAK,CACpB,EACIA,EAAU,UAAU,oBAAsB,SAAUG,EAAGC,EAAG,CACtD,IAAIc,EAAK,KAAK,EAAE,CAAC,EAAGC,EAAK,KAAK,EAAE,CAAC,EAAGC,EAAK,KAAK,EAAE,CAAC,EAAGC,EAAK,KAAK,EAAE,CAAC,EAAGC,EAAK,KAAK,EAAE,CAAC,EAAGC,EAAK,KAAK,EAAE,CAAC,EAAGC,GAAMN,GAAMd,EAAImB,GAAMJ,GAAMhB,EAAImB,KAAQJ,EAAKG,EAAKF,EAAKC,GAAKK,GAAMtB,EAAImB,EAAKF,EAAKI,GAAMN,EAC1L,OAAO,KAAK,UAAUO,EAAID,CAAE,CACpC,EACIxB,EAAU,UAAU,UAAY,UAAY,CACxC,IAAI0B,EAAI,KAAK,EAAE,CAAC,EACZC,EAAI,KAAK,EAAE,CAAC,EACZnB,EAAI,KAAK,EAAE,CAAC,EACZS,EAAI,KAAK,EAAE,CAAC,EACZhE,EAAI,KAAK,EAAE,CAAC,EACZ2E,EAAI,KAAK,EAAE,CAAC,EACZC,EAAQH,EAAIT,EAAIU,EAAInB,EACpBsB,EAAS,CACT,EAAG7E,EACH,EAAG2E,EACH,SAAU,EACV,OAAQ,EACR,OAAQ,EACR,MAAO,EACP,MAAO,CACnB,EACQ,GAAIF,GAAK,GAAKC,GAAK,EAAG,CAClB,IAAII,EAAI,KAAK,KAAKL,EAAIA,EAAIC,EAAIA,CAAC,EAC/BG,EAAO,SAAWH,EAAI,EAAI,KAAK,KAAKD,EAAIK,CAAC,EAAI,CAAC,KAAK,KAAKL,EAAIK,CAAC,EAC7DD,EAAO,OAASC,EAChBD,EAAO,OAASD,EAAQE,EACxBD,EAAO,OAASJ,EAAIlB,EAAImB,EAAIV,GAAKY,EACjCC,EAAO,MAAQ,CAC3B,SACiBtB,GAAK,GAAKS,GAAK,EAAG,CACvB,IAAIR,EAAI,KAAK,KAAKD,EAAIA,EAAIS,EAAIA,CAAC,EAC/Ba,EAAO,SACH,KAAK,GAAK,GAAKb,EAAI,EAAI,KAAK,KAAK,CAACT,EAAIC,CAAC,EAAI,CAAC,KAAK,KAAKD,EAAIC,CAAC,GAC/DqB,EAAO,OAASD,EAAQpB,EACxBqB,EAAO,OAASrB,EAChBqB,EAAO,MAAQ,EACfA,EAAO,OAASJ,EAAIlB,EAAImB,EAAIV,GAAKY,CAC7C,CAGQ,OAAAC,EAAO,SAAW7D,EAAQ,KAAK,aAAa6D,EAAO,QAAQ,EACpDA,CACf,EACW9B,CACX,IACA/B,EAAA,UAAoB+B,EACpB,IAAIgC,EAAe,iBAAkBC,EAAgB,kBAAmBC,EAAgB,kBAAmBC,EAAiB,mBAAoBC,EAAiB,KAAK,GAAK,IAAKC,EAAiB,IAAM,KAAK,GAAIC,EAAO,IAAKC,EAAe,GAAIC,EAAO,IAAKC,EAAgB,kBAAmBC,EAAc,gBAAiBC,EAAY,OAAQC,EAAS,CACtV,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,aAAc,CAAC,IAAK,IAAK,GAAG,EAC5B,KAAM,CAAC,EAAG,IAAK,GAAG,EAClB,WAAY,CAAC,IAAK,IAAK,GAAG,EAC1B,MAAO,CAAC,IAAK,IAAK,GAAG,EACrB,MAAO,CAAC,IAAK,IAAK,GAAG,EACrB,OAAQ,CAAC,IAAK,IAAK,GAAG,EACtB,MAAO,CAAC,EAAG,EAAG,CAAC,EACf,eAAgB,CAAC,IAAK,IAAK,GAAG,EAC9B,KAAM,CAAC,EAAG,EAAG,GAAG,EAChB,WAAY,CAAC,IAAK,GAAI,GAAG,EACzB,MAAO,CAAC,IAAK,GAAI,EAAE,EACnB,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,UAAW,CAAC,GAAI,IAAK,GAAG,EACxB,WAAY,CAAC,IAAK,IAAK,CAAC,EACxB,UAAW,CAAC,IAAK,IAAK,EAAE,EACxB,MAAO,CAAC,IAAK,IAAK,EAAE,EACpB,eAAgB,CAAC,IAAK,IAAK,GAAG,EAC9B,SAAU,CAAC,IAAK,IAAK,GAAG,EACxB,QAAS,CAAC,IAAK,GAAI,EAAE,EACrB,KAAM,CAAC,EAAG,IAAK,GAAG,EAClB,SAAU,CAAC,EAAG,EAAG,GAAG,EACpB,SAAU,CAAC,EAAG,IAAK,GAAG,EACtB,cAAe,CAAC,IAAK,IAAK,EAAE,EAC5B,SAAU,CAAC,IAAK,IAAK,GAAG,EACxB,UAAW,CAAC,EAAG,IAAK,CAAC,EACrB,SAAU,CAAC,IAAK,IAAK,GAAG,EACxB,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,YAAa,CAAC,IAAK,EAAG,GAAG,EACzB,eAAgB,CAAC,GAAI,IAAK,EAAE,EAC5B,WAAY,CAAC,IAAK,IAAK,CAAC,EACxB,WAAY,CAAC,IAAK,GAAI,GAAG,EACzB,QAAS,CAAC,IAAK,EAAG,CAAC,EACnB,WAAY,CAAC,IAAK,IAAK,GAAG,EAC1B,aAAc,CAAC,IAAK,IAAK,GAAG,EAC5B,cAAe,CAAC,GAAI,GAAI,GAAG,EAC3B,cAAe,CAAC,GAAI,GAAI,EAAE,EAC1B,cAAe,CAAC,GAAI,GAAI,EAAE,EAC1B,cAAe,CAAC,EAAG,IAAK,GAAG,EAC3B,WAAY,CAAC,IAAK,EAAG,GAAG,EACxB,SAAU,CAAC,IAAK,GAAI,GAAG,EACvB,YAAa,CAAC,EAAG,IAAK,GAAG,EACzB,QAAS,CAAC,IAAK,IAAK,GAAG,EACvB,QAAS,CAAC,IAAK,IAAK,GAAG,EACvB,WAAY,CAAC,GAAI,IAAK,GAAG,EACzB,UAAW,CAAC,IAAK,GAAI,EAAE,EACvB,YAAa,CAAC,IAAK,IAAK,GAAG,EAC3B,YAAa,CAAC,GAAI,IAAK,EAAE,EACzB,QAAS,CAAC,IAAK,EAAG,GAAG,EACrB,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,WAAY,CAAC,IAAK,IAAK,GAAG,EAC1B,KAAM,CAAC,IAAK,IAAK,CAAC,EAClB,UAAW,CAAC,IAAK,IAAK,EAAE,EACxB,KAAM,CAAC,IAAK,IAAK,GAAG,EACpB,MAAO,CAAC,EAAG,IAAK,CAAC,EACjB,YAAa,CAAC,IAAK,IAAK,EAAE,EAC1B,KAAM,CAAC,IAAK,IAAK,GAAG,EACpB,SAAU,CAAC,IAAK,IAAK,GAAG,EACxB,QAAS,CAAC,IAAK,IAAK,GAAG,EACvB,UAAW,CAAC,IAAK,GAAI,EAAE,EACvB,OAAQ,CAAC,GAAI,EAAG,GAAG,EACnB,MAAO,CAAC,IAAK,IAAK,GAAG,EACrB,MAAO,CAAC,IAAK,IAAK,GAAG,EACrB,SAAU,CAAC,IAAK,IAAK,GAAG,EACxB,cAAe,CAAC,IAAK,IAAK,GAAG,EAC7B,UAAW,CAAC,IAAK,IAAK,CAAC,EACvB,aAAc,CAAC,IAAK,IAAK,GAAG,EAC5B,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,WAAY,CAAC,IAAK,IAAK,GAAG,EAC1B,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,qBAAsB,CAAC,IAAK,IAAK,GAAG,EACpC,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,WAAY,CAAC,IAAK,IAAK,GAAG,EAC1B,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,YAAa,CAAC,IAAK,IAAK,GAAG,EAC3B,cAAe,CAAC,GAAI,IAAK,GAAG,EAC5B,aAAc,CAAC,IAAK,IAAK,GAAG,EAC5B,eAAgB,CAAC,IAAK,IAAK,GAAG,EAC9B,eAAgB,CAAC,IAAK,IAAK,GAAG,EAC9B,eAAgB,CAAC,IAAK,IAAK,GAAG,EAC9B,YAAa,CAAC,IAAK,IAAK,GAAG,EAC3B,KAAM,CAAC,EAAG,IAAK,CAAC,EAChB,UAAW,CAAC,GAAI,IAAK,EAAE,EACvB,MAAO,CAAC,IAAK,IAAK,GAAG,EACrB,QAAS,CAAC,IAAK,EAAG,GAAG,EACrB,OAAQ,CAAC,IAAK,EAAG,CAAC,EAClB,iBAAkB,CAAC,IAAK,IAAK,GAAG,EAChC,WAAY,CAAC,EAAG,EAAG,GAAG,EACtB,aAAc,CAAC,IAAK,GAAI,GAAG,EAC3B,aAAc,CAAC,IAAK,IAAK,GAAG,EAC5B,eAAgB,CAAC,GAAI,IAAK,GAAG,EAC7B,gBAAiB,CAAC,IAAK,IAAK,GAAG,EAC/B,kBAAmB,CAAC,EAAG,IAAK,GAAG,EAC/B,gBAAiB,CAAC,GAAI,IAAK,GAAG,EAC9B,gBAAiB,CAAC,IAAK,GAAI,GAAG,EAC9B,aAAc,CAAC,GAAI,GAAI,GAAG,EAC1B,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,SAAU,CAAC,IAAK,IAAK,GAAG,EACxB,YAAa,CAAC,IAAK,IAAK,GAAG,EAC3B,KAAM,CAAC,EAAG,EAAG,GAAG,EAChB,QAAS,CAAC,IAAK,IAAK,GAAG,EACvB,MAAO,CAAC,IAAK,IAAK,CAAC,EACnB,UAAW,CAAC,IAAK,IAAK,EAAE,EACxB,OAAQ,CAAC,IAAK,IAAK,CAAC,EACpB,UAAW,CAAC,IAAK,GAAI,CAAC,EACtB,OAAQ,CAAC,IAAK,IAAK,GAAG,EACtB,cAAe,CAAC,IAAK,IAAK,GAAG,EAC7B,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,cAAe,CAAC,IAAK,IAAK,GAAG,EAC7B,cAAe,CAAC,IAAK,IAAK,GAAG,EAC7B,WAAY,CAAC,IAAK,IAAK,GAAG,EAC1B,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,KAAM,CAAC,IAAK,IAAK,EAAE,EACnB,KAAM,CAAC,IAAK,IAAK,GAAG,EACpB,KAAM,CAAC,IAAK,IAAK,GAAG,EACpB,WAAY,CAAC,IAAK,IAAK,GAAG,EAC1B,OAAQ,CAAC,IAAK,EAAG,GAAG,EACpB,cAAe,CAAC,IAAK,GAAI,GAAG,EAC5B,IAAK,CAAC,IAAK,EAAG,CAAC,EACf,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,UAAW,CAAC,GAAI,IAAK,GAAG,EACxB,YAAa,CAAC,IAAK,GAAI,EAAE,EACzB,OAAQ,CAAC,IAAK,IAAK,GAAG,EACtB,WAAY,CAAC,IAAK,IAAK,EAAE,EACzB,SAAU,CAAC,GAAI,IAAK,EAAE,EACtB,SAAU,CAAC,IAAK,IAAK,GAAG,EACxB,OAAQ,CAAC,IAAK,GAAI,EAAE,EACpB,OAAQ,CAAC,IAAK,IAAK,GAAG,EACtB,QAAS,CAAC,IAAK,IAAK,GAAG,EACvB,UAAW,CAAC,IAAK,GAAI,GAAG,EACxB,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,UAAW,CAAC,IAAK,IAAK,GAAG,EACzB,KAAM,CAAC,IAAK,IAAK,GAAG,EACpB,YAAa,CAAC,EAAG,IAAK,GAAG,EACzB,UAAW,CAAC,GAAI,IAAK,GAAG,EACxB,IAAK,CAAC,IAAK,IAAK,GAAG,EACnB,KAAM,CAAC,EAAG,IAAK,GAAG,EAClB,QAAS,CAAC,IAAK,IAAK,GAAG,EACvB,YAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAC9B,OAAQ,CAAC,IAAK,GAAI,EAAE,EACpB,UAAW,CAAC,GAAI,IAAK,GAAG,EACxB,OAAQ,CAAC,IAAK,IAAK,GAAG,EACtB,MAAO,CAAC,IAAK,IAAK,GAAG,EACrB,MAAO,CAAC,IAAK,IAAK,GAAG,EACrB,WAAY,CAAC,IAAK,IAAK,GAAG,EAC1B,OAAQ,CAAC,IAAK,IAAK,CAAC,EACpB,YAAa,CAAC,IAAK,IAAK,CAAC,GAC1BC,EAAY,uCAAwCC,EAAY,CAAA,EACnE7E,EAAA,KAAe,CACX,WAAY,SAAU8E,EAAK,CACvB,MAAO,CAAC,EAAEA,GAAOA,EAAI,UAAY,EACzC,EACI,YAAa,SAAUA,EAAK,CACxB,MAAO,CAAC,EAAEA,GAAOA,EAAI,aAAeA,EAAI,MAAQA,EAAI,MAC5D,EACI,eAAgB,SAAUA,EAAK,CAC3B,MAAO,CAAC,CAACA,GAAOA,EAAI,cAAgB,MAC5C,EACI,SAAU,SAAUA,EAAK,CACrB,OAAO,OAAO,UAAU,SAAS,KAAKA,CAAG,IAAMf,CACvD,EACI,UAAW,SAAUe,EAAK,CACtB,OAAQ,OAAO,UAAU,SAAS,KAAKA,CAAG,IAAMd,GAC5C,CAAC,MAAMc,CAAG,GACV,SAASA,CAAG,CACxB,EACI,UAAW,SAAUA,EAAK,CACtB,OAAO,OAAO,UAAU,SAAS,KAAKA,CAAG,IAAMb,CACvD,EACI,WAAY,SAAUa,EAAK,CACvB,OAAO,OAAO,UAAU,SAAS,KAAKA,CAAG,IAAMZ,CACvD,EACI,SAAU,SAAUa,EAAK,CACrB,OAAOA,aAAe,MAC9B,EACI,gBAAiB,SAAUC,EAAU,CACjC,GAAI,OAAOA,GAAa,SACpB,MAAO,GAEX,IAAIC,EAAYD,EAAS,CAAC,EAC1B,OAAQC,IAAc,KAClBA,IAAc,KACdA,IAAcA,EAAU,YAAW,CAC/C,EACI,MAAO,SAAUC,EAAQ,CACrB,OAAIA,IAAW,EACJ,EAEPA,EAAS,EACF,EAGA,EAEnB,EACI,iBAAkB,SAAUC,EAAU,CAClCN,EAAU,KAAKM,CAAQ,EACnBN,EAAU,SAAW,GACrB,sBAAsB,UAAY,CAC9B,IAAIO,EAAQP,EACZA,EAAY,CAAA,EACZO,EAAM,QAAQ,SAAUC,EAAI,CACxBA,EAAE,CACtB,CAAiB,CACjB,CAAa,CAEb,EACI,oBAAqB,UAAY,CAC7B,IAAIC,EAAS,SAAS,cAAc,QAAQ,EAC5C,GAAI,CACAA,EAAO,MAAQA,EAAO,OAAS,CAAA,CAC3C,MACkB,CAAA,CACV,OAAOA,CACf,EACI,mBAAoB,UAAY,CAC5B,OAAO,SAAS,cAAc,KAAK,CAC3C,EACI,cAAe,SAAUhG,EAAI,CACzB,KAAQA,EAAKA,EAAG,YACZ,GAAIA,GAAM,SACN,MAAO,GAGf,MAAO,EACf,EACI,eAAgB,SAAU+B,EAAK,CAC3B,IAAIkE,EAAS,GAAIhE,EAAMF,EAAI,OAAQmE,EAAOxF,EAAQ,KAAMwB,EAAGuD,EAC3D,IAAKvD,EAAI,EAAGA,EAAID,EAAKC,IACjBuD,EAAM1D,EAAIG,CAAC,EACPgE,EAAK,UAAUT,CAAG,EAClBA,EAAM,KAAK,MAAMA,EAAM,GAAI,EAAI,IAEzBS,EAAK,UAAUT,CAAG,IACxBA,EAAMA,EAAI,SAAQ,GAEtBQ,EAAO,KAAKR,CAAG,EAEnB,OAAOQ,CACf,EACI,YAAa,SAAUE,EAAKN,EAAU,CAClC,IAAIO,EAAW,IAAIxE,EAAS,KAAK,MACjCwE,EAAS,OAAS,UAAY,CAC1BP,EAASO,CAAQ,CAC7B,EACQA,EAAS,IAAMD,CACvB,EACI,UAAW,SAAU3B,EAAG6B,EAAGjC,EAAG,CAC1B,QAAS,GAAK,KAAOI,GAAK,KAAO6B,GAAK,GAAKjC,GAAG,SAAS,EAAE,EAAE,MAAM,CAAC,CAC1E,EACI,UAAW,SAAUkC,EAAK,CACtBA,EAAMA,EAAI,QAAQvB,EAAMC,CAAY,EACpC,IAAIuB,EAAS,SAASD,EAAK,EAAE,EAC7B,MAAO,CACH,EAAIC,GAAU,GAAM,IACpB,EAAIA,GAAU,EAAK,IACnB,EAAGA,EAAS,GACxB,CACA,EACI,eAAgB,UAAY,CAExB,QADIC,GAAc,KAAK,OAAM,EAAK,UAAa,GAAG,SAAS,EAAE,EACtDA,EAAU,OAAS,GACtBA,EAAYvB,EAAOuB,EAEvB,OAAOzB,EAAOyB,CACtB,EACI,IAAK,SAAUf,EAAKgB,EAAK,CACrB,OAAIhB,IAAQ,OACDgB,EAGAhB,CAEnB,EACI,OAAQ,SAAUiB,EAAO,CACrB,IAAIC,EACJ,OAAID,KAASrB,GACTsB,EAAMtB,EAAOqB,CAAK,EACX,CACH,EAAGC,EAAI,CAAC,EACR,EAAGA,EAAI,CAAC,EACR,EAAGA,EAAI,CAAC,CACxB,GAEiBD,EAAM,CAAC,IAAM3B,EACX,KAAK,UAAU2B,EAAM,UAAU,CAAC,CAAC,EAEnCA,EAAM,OAAO,EAAG,CAAC,IAAMtB,GAC5BuB,EAAMrB,EAAU,KAAKoB,EAAM,QAAQ,KAAM,EAAE,CAAC,EACrC,CACH,EAAG,SAASC,EAAI,CAAC,EAAG,EAAE,EACtB,EAAG,SAASA,EAAI,CAAC,EAAG,EAAE,EACtB,EAAG,SAASA,EAAI,CAAC,EAAG,EAAE,CACtC,GAGmB,CACH,EAAG,EACH,EAAG,EACH,EAAG,CACnB,CAEA,EACI,YAAa,SAAUC,EAAK,CACxB,OAAAA,EAAMA,GAAO,QACLlG,EAAQ,KAAK,iBAAiBkG,CAAG,GACrClG,EAAQ,KAAK,iBAAiBkG,CAAG,GACjClG,EAAQ,KAAK,iBAAiBkG,CAAG,GACjClG,EAAQ,KAAK,gBAAgBkG,CAAG,GAChClG,EAAQ,KAAK,iBAAiBkG,CAAG,GACjClG,EAAQ,KAAK,gBAAgBkG,CAAG,CAC5C,EACI,iBAAkB,SAAUA,EAAK,CAC7B,IAAI3D,EAAIoC,EAAOuB,EAAI,YAAW,CAAE,EAChC,OAAK3D,EAGE,CACH,EAAGA,EAAE,CAAC,EACN,EAAGA,EAAE,CAAC,EACN,EAAGA,EAAE,CAAC,EACN,EAAG,CACf,EAPmB,IAQnB,EACI,gBAAiB,SAAU2D,EAAK,CAC5B,GAAIA,EAAI,QAAQ,MAAM,IAAM,EAAG,CAC3BA,EAAMA,EAAI,MAAM,gBAAgB,EAAE,CAAC,EACnC,IAAIC,EAAQD,EAAI,MAAM,OAAO,EAAE,IAAI,MAAM,EACzC,MAAO,CACH,EAAGC,EAAM,CAAC,EACV,EAAGA,EAAM,CAAC,EACV,EAAGA,EAAM,CAAC,EACV,EAAG,CACnB,CACA,CACA,EACI,iBAAkB,SAAUD,EAAK,CAC7B,GAAIA,EAAI,QAAQ,OAAO,IAAM,EAAG,CAC5BA,EAAMA,EAAI,MAAM,iBAAiB,EAAE,CAAC,EACpC,IAAIC,EAAQD,EAAI,MAAM,OAAO,EAAE,IAAI,MAAM,EACzC,MAAO,CACH,EAAGC,EAAM,CAAC,EACV,EAAGA,EAAM,CAAC,EACV,EAAGA,EAAM,CAAC,EACV,EAAGA,EAAM,CAAC,CAC1B,CACA,CACA,EACI,iBAAkB,SAAUD,EAAK,CAC7B,GAAIA,EAAI,CAAC,IAAM,KAAOA,EAAI,SAAW,EACjC,MAAO,CACH,EAAG,SAASA,EAAI,MAAM,EAAG,CAAC,EAAG,EAAE,EAC/B,EAAG,SAASA,EAAI,MAAM,EAAG,CAAC,EAAG,EAAE,EAC/B,EAAG,SAASA,EAAI,MAAM,EAAG,CAAC,EAAG,EAAE,EAC/B,EAAG,CACnB,CAEA,EACI,iBAAkB,SAAUA,EAAK,CAC7B,GAAIA,EAAI,CAAC,IAAM,KAAOA,EAAI,SAAW,EACjC,MAAO,CACH,EAAG,SAASA,EAAI,CAAC,EAAIA,EAAI,CAAC,EAAG,EAAE,EAC/B,EAAG,SAASA,EAAI,CAAC,EAAIA,EAAI,CAAC,EAAG,EAAE,EAC/B,EAAG,SAASA,EAAI,CAAC,EAAIA,EAAI,CAAC,EAAG,EAAE,EAC/B,EAAG,CACnB,CAEA,EACI,gBAAiB,SAAUA,EAAK,CAC5B,GAAI,0CAA0C,KAAKA,CAAG,EAAG,CACrD,IAAIE,EAAK,0CAA0C,KAAKF,CAAG,EAAOE,EAAG,CAAC,EAAC,IAAEC,EAAMD,EAAG,MAAM,CAAC,EACrFE,EAAI,OAAOD,EAAI,CAAC,CAAC,EAAI,IACrB7D,EAAI,OAAO6D,EAAI,CAAC,CAAC,EAAI,IACrBE,EAAI,OAAOF,EAAI,CAAC,CAAC,EAAI,IACrBG,EAAK,OACLC,EAAK,OACL1B,EAAM,OACV,GAAIvC,IAAM,EACN,OAAAuC,EAAMwB,EAAI,IACH,CACH,EAAG,KAAK,MAAMxB,CAAG,EACjB,EAAG,KAAK,MAAMA,CAAG,EACjB,EAAG,KAAK,MAAMA,CAAG,EACjB,EAAG,CACvB,EAEgBwB,EAAI,GACJC,EAAKD,GAAK,EAAI/D,GAGdgE,EAAKD,EAAI/D,EAAI+D,EAAI/D,EAIrB,QAFIkE,EAAK,EAAIH,EAAIC,EACbP,EAAM,CAAC,EAAG,EAAG,CAAC,EACTvE,EAAI,EAAGA,EAAI,EAAGA,IACnB+E,EAAKH,EAAK,EAAI,EAAK,EAAE5E,EAAI,GACrB+E,EAAK,GACLA,IAEAA,EAAK,GACLA,IAEA,EAAIA,EAAK,EACT1B,EAAM2B,GAAMF,EAAKE,GAAM,EAAID,EAEtB,EAAIA,EAAK,EACd1B,EAAMyB,EAED,EAAIC,EAAK,EACd1B,EAAM2B,GAAMF,EAAKE,IAAO,EAAI,EAAID,GAAM,EAGtC1B,EAAM2B,EAEVT,EAAIvE,CAAC,EAAIqD,EAAM,IAEnB,MAAO,CACH,EAAG,KAAK,MAAMkB,EAAI,CAAC,CAAC,EACpB,EAAG,KAAK,MAAMA,EAAI,CAAC,CAAC,EACpB,EAAG,KAAK,MAAMA,EAAI,CAAC,CAAC,EACpB,EAAG,CACnB,CACA,CACA,EACI,iBAAkB,SAAUU,EAAIC,EAAI,CAChC,MAAO,EAAEA,EAAG,EAAID,EAAG,EAAIA,EAAG,OACtBC,EAAG,EAAIA,EAAG,MAAQD,EAAG,GACrBC,EAAG,EAAID,EAAG,EAAIA,EAAG,QACjBC,EAAG,EAAIA,EAAG,OAASD,EAAG,EAClC,EACI,YAAa,SAAU7B,EAAK,CACxB,IAAI+B,EAAS,CAAA,EACb,QAASnH,KAAOoF,EACR,KAAK,eAAeA,EAAIpF,CAAG,CAAC,EAC5BmH,EAAOnH,CAAG,EAAI,KAAK,YAAYoF,EAAIpF,CAAG,CAAC,EAElC,KAAK,SAASoF,EAAIpF,CAAG,CAAC,EAC3BmH,EAAOnH,CAAG,EAAI,KAAK,WAAWoF,EAAIpF,CAAG,CAAC,EAGtCmH,EAAOnH,CAAG,EAAIoF,EAAIpF,CAAG,EAG7B,OAAOmH,CACf,EACI,WAAY,SAAUxF,EAAK,CACvB,OAAOA,EAAI,MAAM,CAAC,CAC1B,EACI,UAAW,SAAUyF,EAAK,CACtB,OAAOA,EAAM3C,CACrB,EACI,UAAW,SAAU7B,EAAK,CACtB,OAAOA,EAAM8B,CACrB,EACI,aAAc,SAAU2C,EAAS,CAC7B,OAAO7F,EAAS,MAAM,SAAWlB,EAAQ,KAAK,UAAU+G,CAAO,EAAIA,CAC3E,EACI,YAAa,SAAUb,EAAK,CACxB,OAAOA,EAAI,OAAO,CAAC,EAAE,YAAW,EAAKA,EAAI,MAAM,CAAC,CACxD,EACI,MAAO,SAAUA,EAAK,CAClB,MAAM,IAAI,MAAMzB,EAAcyB,CAAG,CACzC,EACI,MAAO,SAAUA,EAAK,CAClB,QAAQ,MAAMzB,EAAcyB,CAAG,CACvC,EACI,KAAM,SAAUA,EAAK,CACZhF,EAAS,MAAM,cAGpB,QAAQ,KAAKsD,EAAgB0B,CAAG,CACxC,EACI,OAAQ,SAAUc,EAAOC,EAAQ,CAC7B,SAASC,GAAO,CACZ,KAAK,YAAcF,CAC/B,CACQE,EAAK,UAAYD,EAAO,UACxB,IAAIE,EAAWH,EAAM,UACrBA,EAAM,UAAY,IAAIE,EACtB,QAASxH,KAAOyH,EACRA,EAAS,eAAezH,CAAG,IAC3BsH,EAAM,UAAUtH,CAAG,EAAIyH,EAASzH,CAAG,GAG3CsH,EAAM,UAAYC,EAAO,UACzBD,EAAM,MAAQC,CACtB,EACI,kBAAmB,SAAUG,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAG,CACpD,IAAIC,EAAM,KAAK,KAAK,KAAK,IAAIL,EAAKF,EAAI,CAAC,EAAI,KAAK,IAAIG,EAAKF,EAAI,CAAC,CAAC,EAAGO,EAAM,KAAK,KAAK,KAAK,IAAIJ,EAAKF,EAAI,CAAC,EAAI,KAAK,IAAIG,EAAKF,EAAI,CAAC,CAAC,EAAGM,EAAMH,EAAIC,GAAQA,EAAMC,GAAME,EAAMJ,EAAIE,GAAQD,EAAMC,GAAMG,EAAMT,EAAKO,GAAML,EAAKJ,GAAKY,EAAMT,EAAKM,GAAMJ,EAAKJ,GAAKY,EAAMX,EAAKQ,GAAMN,EAAKJ,GAAKc,EAAMX,EAAKO,GAAML,EAAKJ,GACnS,MAAO,CAACU,EAAKC,EAAKC,EAAKC,CAAG,CAClC,EACI,cAAe,SAAUC,EAAGC,EAAS,CACjC,IAAI7G,EAAM4G,EAAE,OAAQE,EAAY,CAAA,EAAI7G,EAAG8G,EACvC,IAAK9G,EAAI,EAAGA,EAAID,EAAM,EAAGC,GAAK,EAC1B8G,EAAKtI,EAAQ,KAAK,kBAAkBmI,EAAE3G,EAAI,CAAC,EAAG2G,EAAE3G,EAAI,CAAC,EAAG2G,EAAE3G,CAAC,EAAG2G,EAAE3G,EAAI,CAAC,EAAG2G,EAAE3G,EAAI,CAAC,EAAG2G,EAAE3G,EAAI,CAAC,EAAG4G,CAAO,EACnGC,EAAU,KAAKC,EAAG,CAAC,CAAC,EACpBD,EAAU,KAAKC,EAAG,CAAC,CAAC,EACpBD,EAAU,KAAKF,EAAE3G,CAAC,CAAC,EACnB6G,EAAU,KAAKF,EAAE3G,EAAI,CAAC,CAAC,EACvB6G,EAAU,KAAKC,EAAG,CAAC,CAAC,EACpBD,EAAU,KAAKC,EAAG,CAAC,CAAC,EAExB,OAAOD,CACf,EACI,KAAM,SAAUvD,EAAKhD,EAAM,CACvB,QAASpC,KAAOoF,EACZhD,EAAKpC,EAAKoF,EAAIpF,CAAG,CAAC,CAE9B,EACI,SAAU,SAAUqF,EAAKwD,EAAMC,EAAO,CAClC,OAAOD,GAAQxD,GAAOA,EAAMyD,CACpC,EACI,wBAAyB,SAAUlB,EAAIC,EAAIC,EAAIC,EAAIgB,EAAIC,EAAI,CACvD,IAAIxG,EAAGC,EAAGwG,EACNC,GAAOtB,EAAKE,IAAOF,EAAKE,IAAOD,EAAKE,IAAOF,EAAKE,GACpD,GAAImB,GAAO,EACP1G,EAAIoF,EACJnF,EAAIoF,EACJoB,GAAQF,EAAKjB,IAAOiB,EAAKjB,IAAOkB,EAAKjB,IAAOiB,EAAKjB,OAEhD,CACD,IAAIoB,IAAMJ,EAAKnB,IAAOE,EAAKF,IAAOoB,EAAKnB,IAAOE,EAAKF,IAAOqB,EACtDC,EAAI,GACJ3G,EAAIoF,EACJnF,EAAIoF,EACJoB,GAAQrB,EAAKmB,IAAOnB,EAAKmB,IAAOlB,EAAKmB,IAAOnB,EAAKmB,IAE5CG,EAAI,GACT3G,EAAIsF,EACJrF,EAAIsF,EACJkB,GAAQnB,EAAKiB,IAAOjB,EAAKiB,IAAOhB,EAAKiB,IAAOjB,EAAKiB,KAGjDxG,EAAIoF,EAAKuB,GAAKrB,EAAKF,GACnBnF,EAAIoF,EAAKsB,GAAKpB,EAAKF,GACnBoB,GAAQzG,EAAIuG,IAAOvG,EAAIuG,IAAOtG,EAAIuG,IAAOvG,EAAIuG,GAE7D,CACQ,MAAO,CAACxG,EAAGC,EAAGwG,CAAI,CAC1B,EACI,qBAAsB,SAAUG,EAAIC,EAAMC,EAAU,CAChD,IAAIC,EAAKjJ,EAAQ,KAAK,YAAY8I,CAAE,EAChCH,EAAO,OAAO,UAClB,OAAAI,EAAK,QAAQ,SAAUG,EAAIxH,EAAG,CAC1B,GAAI,GAACsH,GAAYtH,IAAMqH,EAAK,OAAS,GAGrC,KAAII,EAAKJ,GAAMrH,EAAI,GAAKqH,EAAK,MAAM,EAC/BK,EAAOpJ,EAAQ,KAAK,wBAAwBkJ,EAAG,EAAGA,EAAG,EAAGC,EAAG,EAAGA,EAAG,EAAGL,EAAG,EAAGA,EAAG,CAAC,EAC9EO,EAAKD,EAAK,CAAC,EAAGE,EAAKF,EAAK,CAAC,EAAGG,EAAQH,EAAK,CAAC,EAC1CG,EAAQZ,IACRM,EAAG,EAAII,EACPJ,EAAG,EAAIK,EACPX,EAAOY,GAEvB,CAAS,EACMN,CACf,EACI,sBAAuB,SAAUO,EAAYC,EAAUT,EAAU,CAC7D,IAAIxH,EAAGkI,EAAQ,CAAA,EAAIC,EAAM,CAAA,EACzB,GAAIH,EAAW,OAASC,EAAS,OAAQ,CACrC,IAAIG,EAAOH,EACXA,EAAWD,EACXA,EAAaI,CACzB,CACQ,IAAKpI,EAAI,EAAGA,EAAIgI,EAAW,OAAQhI,GAAK,EACpCkI,EAAM,KAAK,CACP,EAAGF,EAAWhI,CAAC,EACf,EAAGgI,EAAWhI,EAAI,CAAC,CACnC,CAAa,EAEL,IAAKA,EAAI,EAAGA,EAAIiI,EAAS,OAAQjI,GAAK,EAClCmI,EAAI,KAAK,CACL,EAAGF,EAASjI,CAAC,EACb,EAAGiI,EAASjI,EAAI,CAAC,CACjC,CAAa,EAEL,IAAIqI,EAAW,CAAA,EACf,OAAAF,EAAI,QAAQ,SAAU1H,EAAO,CACzB,IAAI6H,EAAK9J,EAAQ,KAAK,qBAAqBiC,EAAOyH,EAAOV,CAAQ,EACjEa,EAAS,KAAKC,EAAG,CAAC,EAClBD,EAAS,KAAKC,EAAG,CAAC,CAC9B,CAAS,EACMD,CACf,EACI,oBAAqB,SAAU/E,EAAK,CAChC,IAAIiF,EACJjF,EAAI,kCAAoC,GACxC,QAASpF,KAAOoF,EACZ,GAAMA,EAAI,eAAepF,CAAG,GAAKoF,EAAIpF,CAAG,GAAK,OAAOoF,EAAIpF,CAAG,GAAK,UAIhE,GADAqK,EAAO,OAAO,yBAAyBjF,EAAKpF,CAAG,EAC3CoF,EAAIpF,CAAG,EAAE,mCACTM,EAAQ,KAAK,WAAW8E,EAAIpF,CAAG,CAAC,EAChC,GAAIqK,EAAK,aACL,OAAOjF,EAAIpF,CAAG,MAGd,QAAO,aAGNM,EAAQ,KAAK,oBAAoB8E,EAAIpF,CAAG,CAAC,IAAM,KACpD,GAAIqK,EAAK,aACL,OAAOjF,EAAIpF,CAAG,MAGd,QAAO,KAInB,cAAOoF,EAAI,kCACJA,CACf,EACI,QAAS,SAAUkF,EAAQC,EAAQ,CAC/B,QAASvK,KAAOuK,EACZD,EAAOtK,CAAG,EAAIuK,EAAOvK,CAAG,EAE5B,OAAOsK,CACf,EACI,mBAAoB,SAAUE,EAAK,CAC/B,OAAKA,EAAI,QAIEA,EAAI,eAAe,CAAC,EAAE,WAHtB,GAKnB,4BC3yBA,OAAO,eAAeC,EAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIjJ,GAAWC,EACXiJ,GAASC,EACb,SAASC,GAAavF,EAAK,CACvB,OAAIqF,GAAO,KAAK,UAAUrF,CAAG,EAClB,IAAMA,EAAM,IAEnB,OAAO,UAAU,SAAS,KAAKA,CAAG,IAAM,mBAGxCqF,GAAO,KAAK,WAAWrF,CAAG,EACnBA,EAEJ,OAAO,UAAU,SAAS,KAAKA,CAAG,CAC7C,CACA,SAASwF,GAAaxF,EAAK,CACvB,OAAIA,EAAM,IACC,IAEFA,EAAM,EACJ,EAEJ,KAAK,MAAMA,CAAG,CACzB,CACAoF,EAAA,aAAuBI,GACvB,SAASC,GAAezF,EAAK,CACzB,OAAIA,EAAM,EACC,EAEFA,EAAM,KACJ,KAEJA,CACX,CACAoF,EAAA,eAAyBK,GACzB,SAASC,IAAqB,CAC1B,GAAIvJ,GAAS,MAAM,aACf,OAAO,SAAU6D,EAAK2F,EAAM,CACxB,OAAKN,GAAO,KAAK,UAAUrF,CAAG,GAC1BqF,GAAO,KAAK,KAAKE,GAAavF,CAAG,EAC7B,8BACA2F,EACA,4CAA4C,EAE7C3F,CACnB,CAEA,CACAoF,EAAA,mBAA6BM,GAC7B,SAASE,IAA2B,CAChC,GAAIzJ,GAAS,MAAM,aACf,OAAO,SAAU6D,EAAK2F,EAAM,CACxB,IAAIjL,EAAW2K,GAAO,KAAK,UAAUrF,CAAG,EACpC6F,EAAS7F,IAAQ,OACrB,OAAMtF,GAAYmL,GACdR,GAAO,KAAK,KAAKE,GAAavF,CAAG,EAC7B,8BACA2F,EACA,sDAAsD,EAEvD3F,CACnB,CAEA,CACAoF,EAAA,yBAAmCQ,GACnC,SAASE,IAAqB,CAC1B,GAAI3J,GAAS,MAAM,aACf,OAAO,SAAU6D,EAAK2F,EAAM,CACxB,OAAKN,GAAO,KAAK,UAAUrF,CAAG,GAC1BqF,GAAO,KAAK,KAAKE,GAAavF,CAAG,EAC7B,8BACA2F,EACA,4CAA4C,EAE7C3F,CACnB,CAEA,CACAoF,EAAA,mBAA6BU,GAC7B,SAASC,IAAuB,CAC5B,GAAI5J,GAAS,MAAM,aACf,OAAO,SAAU6D,EAAK2F,EAAM,CACxB,OAAKN,GAAO,KAAK,YAAYrF,CAAG,GAC5BqF,GAAO,KAAK,KAAKE,GAAavF,CAAG,EAC7B,8BACA2F,EACA,8CAA8C,EAE/C3F,CACnB,CAEA,CACAoF,EAAA,qBAA+BW,GAC/B,SAASC,IAA0B,CAC/B,GAAI7J,GAAS,MAAM,aACf,OAAO,SAAU6D,EAAK2F,EAAM,CACxB,OAAKN,GAAO,KAAK,SAASrF,CAAG,EAOzBA,EAAI,QAAQ,SAAUiG,EAAM,CACnBZ,GAAO,KAAK,UAAUY,CAAI,GAC3BZ,GAAO,KAAK,KAAK,IACbM,EACA,uCACAM,EACA,4CAA4C,CAExE,CAAiB,EAdDZ,GAAO,KAAK,KAAKE,GAAavF,CAAG,EAC7B,8BACA2F,EACA,sDAAsD,EAavD3F,CACnB,CAEA,CACAoF,EAAA,wBAAkCY,GAClC,SAASE,IAAsB,CAC3B,GAAI/J,GAAS,MAAM,aACf,OAAO,SAAU6D,EAAK2F,EAAM,CACxB,IAAIQ,EAASnG,IAAQ,IAAQA,IAAQ,GACrC,OAAKmG,GACDd,GAAO,KAAK,KAAKE,GAAavF,CAAG,EAC7B,8BACA2F,EACA,6CAA6C,EAE9C3F,CACnB,CAEA,CACAoF,EAAA,oBAA8Bc,GAC9B,SAASE,GAAsBC,EAAY,CACvC,GAAIlK,GAAS,MAAM,aACf,OAAO,SAAU6D,EAAK2F,EAAM,CACxB,OAAKN,GAAO,KAAK,SAASrF,CAAG,GACzBqF,GAAO,KAAK,KAAKE,GAAavF,CAAG,EAC7B,8BACA2F,EACA,8DACAU,CAAU,EAEXrG,CACnB,CAEA,CACAoF,EAAA,sBAAgCgB,gBCnJhC,OAAO,eAAcnL,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5D,IAAIoK,EAASjJ,EACTkK,EAAehB,EACfiB,EAAM,MAAOC,EAAM,MACvBvL,EAAA,QAAkB,CACd,gBAAiB,SAAU4B,EAAa8I,EAAM3E,EAAKyF,EAAWC,EAAO,CACjE,KAAK,UAAU7J,EAAa8I,EAAM3E,CAAG,EACrC,KAAK,UAAUnE,EAAa8I,EAAMc,EAAWC,CAAK,EAClD,KAAK,0BAA0B7J,EAAa8I,CAAI,CACxD,EACI,UAAW,SAAU9I,EAAa8I,EAAM3E,EAAK,CACzC,IAAI2F,EAASJ,EAAMlB,EAAO,KAAK,YAAYM,CAAI,EAC/C9I,EAAY,UAAU8J,CAAM,EACxB9J,EAAY,UAAU8J,CAAM,GACxB,UAAY,CACR,IAAI3G,EAAM,KAAK,MAAM2F,CAAI,EACzB,OAAO3F,IAAQ,OAAYgB,EAAMhB,CACrD,CACA,EACI,UAAW,SAAUnD,EAAa8I,EAAMc,EAAWC,EAAO,CACtD,IAAIC,EAASH,EAAMnB,EAAO,KAAK,YAAYM,CAAI,EAC1C9I,EAAY,UAAU8J,CAAM,GAC7B1L,EAAQ,QAAQ,gBAAgB4B,EAAa8I,EAAMc,EAAWC,CAAK,CAE/E,EACI,gBAAiB,SAAU7J,EAAa8I,EAAMc,EAAWC,EAAO,CAC5D,IAAIC,EAASH,EAAMnB,EAAO,KAAK,YAAYM,CAAI,EAC/C9I,EAAY,UAAU8J,CAAM,EAAI,SAAU3G,EAAK,CAC3C,OAAIyG,GAAazG,IAAQ,QAAaA,IAAQ,OAC1CA,EAAMyG,EAAU,KAAK,KAAMzG,EAAK2F,CAAI,GAExC,KAAK,SAASA,EAAM3F,CAAG,EACnB0G,GACAA,EAAM,KAAK,IAAI,EAEZ,IACnB,CACA,EACI,0BAA2B,SAAU7J,EAAa8I,EAAMU,EAAYI,EAAWC,EAAO,CAClF,IAAIlK,EAAM6J,EAAW,OAAQO,EAAavB,EAAO,KAAK,YAAawB,EAASN,EAAMK,EAAWjB,CAAI,EAAGmB,EAASN,EAAMI,EAAWjB,CAAI,EAAGlJ,EAAGsK,EACxIlK,EAAY,UAAUgK,CAAM,EAAI,UAAY,CACxC,IAAIG,EAAM,CAAA,EACV,IAAKvK,EAAI,EAAGA,EAAID,EAAKC,IACjBsK,EAAYV,EAAW5J,CAAC,EACxBuK,EAAID,CAAS,EAAI,KAAK,QAAQpB,EAAOiB,EAAWG,CAAS,CAAC,EAE9D,OAAOC,CACnB,EACQ,IAAIC,EAAiBX,EAAa,sBAAsBD,CAAU,EAClExJ,EAAY,UAAUiK,CAAM,EAAI,SAAU9G,EAAK,CAC3C,IAAIkH,EAAS,KAAK,MAAMvB,CAAI,EAAGhL,EAC3B8L,IACAzG,EAAMyG,EAAU,KAAK,KAAMzG,CAAG,GAE9BiH,GACAA,EAAe,KAAK,KAAMjH,EAAK2F,CAAI,EAEvC,IAAKhL,KAAOqF,EACHA,EAAI,eAAerF,CAAG,GAG3B,KAAK,SAASgL,EAAOiB,EAAWjM,CAAG,EAAGqF,EAAIrF,CAAG,CAAC,EAElD,YAAK,iBAAiBgL,EAAMuB,EAAQlH,CAAG,EACnC0G,GACAA,EAAM,KAAK,IAAI,EAEZ,IACnB,EACQ,KAAK,0BAA0B7J,EAAa8I,CAAI,CACxD,EACI,0BAA2B,SAAU9I,EAAa8I,EAAM,CACpD,IAAIwB,EAAkB9B,EAAO,KAAK,YAAYM,CAAI,EAAGmB,EAASN,EAAMW,EAAiBN,EAASN,EAAMY,EACpGtK,EAAY,UAAU8I,CAAI,EAAI,UAAY,CACtC,OAAI,UAAU,QACV,KAAKmB,CAAM,EAAE,UAAU,CAAC,CAAC,EAClB,MAEJ,KAAKD,CAAM,EAAC,CAC/B,CACA,EACI,0BAA2B,SAAUhK,EAAa8I,EAAM3E,EAAKyF,EAAW,CACpEpB,EAAO,KAAK,MAAM,qBAAuBM,CAAI,EAC7C,IAAIgB,EAASJ,EAAMlB,EAAO,KAAK,YAAYM,CAAI,EAC3CyB,EAAUzB,EACV,mGACJ9I,EAAY,UAAU8J,CAAM,EAAI,UAAY,CACxCtB,EAAO,KAAK,MAAM+B,CAAO,EACzB,IAAIpH,EAAM,KAAK,MAAM2F,CAAI,EACzB,OAAO3F,IAAQ,OAAYgB,EAAMhB,CAC7C,EACQ,KAAK,UAAUnD,EAAa8I,EAAMc,EAAW,UAAY,CACrDpB,EAAO,KAAK,MAAM+B,CAAO,CACrC,CAAS,EACD,KAAK,0BAA0BvK,EAAa8I,CAAI,CACxD,EACI,WAAY,SAAU9I,EAAawK,EAAS,CACxChC,EAAO,KAAK,KAAKgC,EAAS,SAAUC,EAAeC,EAAe,CAC9D,IAAIZ,EAAS9J,EAAY,UAAU0K,CAAa,EAC5CC,EAAYjB,EAAMlB,EAAO,KAAK,YAAYiC,CAAa,EACvDG,EAAYjB,EAAMnB,EAAO,KAAK,YAAYiC,CAAa,EAC3D,SAASI,GAAa,CAClBf,EAAO,MAAM,KAAM,SAAS,EAC5BtB,EAAO,KAAK,MAAM,IACdiC,EACA,0DACAC,EACA,YAAY,CAChC,CACY1K,EAAY,UAAUyK,CAAa,EAAII,EACvC7K,EAAY,UAAU2K,CAAS,EAAIE,EACnC7K,EAAY,UAAU4K,CAAS,EAAIC,CAC/C,CAAS,CACT,EACI,eAAgB,UAAY,CACxB,KAAK,gBAAkB,EAC/B,wBCpHIC,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAeC,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAI1C,GAASjJ,EACTD,GAAWmJ,EACX0C,GAAQ,IAAKC,GAAa,IAAKC,GAAc,IAAKC,GAAqB,KAAMC,GAAsB,KAAMC,GAAY,IAAKC,GAAe,KAAMC,GAAS,IAAKC,GAAkB,CAC/K,MACA,QACA,YACA,gBACA,YACA,OACA,YACA,uBACA,gBACA,uBACA,YACA,UACA,OACA,WACA,eACA,kBACA,SACA,SACA,eACA,mBACA,OACA,UACA,SACA,OACA,QACA,cACA,eACA,SACA,aACA,YACA,WACJ,EACIC,GAAqB,CACrB,YACA,cACA,cACA,aACA,gBACA,gBACA,UACA,iBACA,WACA,YACA,aACA,OACA,YACA,eACA,cACA,2BACA,uBACJ,EACIC,GAAc,IACdC,GAAW,UAAY,CACvB,SAASA,EAAQpI,EAAQ,CACrB,KAAK,OAASA,EACd,KAAK,SAAWA,EAAO,QAAQ,WAAW,IAAI,EAC1CpE,GAAS,MAAM,cACf,KAAK,SAAW,CAAA,EAChB,KAAK,aAAY,EAE7B,CACI,OAAAwM,EAAQ,UAAU,UAAY,SAAUC,EAAO,CACvCA,EAAM,eACN,KAAK,MAAMA,CAAK,CAE5B,EACID,EAAQ,UAAU,MAAQ,SAAUC,EAAO,CAC/C,EACID,EAAQ,UAAU,YAAc,SAAUC,EAAO,CACzCA,EAAM,aACN,KAAK,QAAQA,CAAK,CAE9B,EACID,EAAQ,UAAU,QAAU,SAAUC,EAAO,CACjD,EACID,EAAQ,UAAU,gBAAkB,SAAUC,EAAO,CACjD,KAAK,UAAUA,CAAK,EACpB,KAAK,YAAYA,CAAK,CAC9B,EACID,EAAQ,UAAU,SAAW,SAAUE,EAAS,CAC5C,IAAIC,EAAW,KAAK,SAAUtM,EAAMsM,EAAS,OAAQ3H,EAAM,GAAI,EAAG4H,EAAOpC,EAAQ/J,EACjF,IAAK,EAAI,EAAG,EAAIJ,EAAK,IACjBuM,EAAQD,EAAS,CAAC,EAClBnC,EAASoC,EAAM,OACXpC,GACA/J,EAAOmM,EAAM,KACb5H,GAAOwF,EACHkC,EACA1H,GAAOmH,GAGHjD,GAAO,KAAK,SAASzI,EAAK,CAAC,CAAC,EAC5BuE,GAAOgH,GAAqBvL,EAAK,KAAKoL,EAAK,EAAII,GAG/CjH,GAAO8G,GAAarL,EAAK,KAAKoL,EAAK,EAAIE,KAK/C/G,GAAO4H,EAAM,SACRF,IACD1H,GAAOoH,GAASQ,EAAM,MAG9B5H,GAAOkH,GAEX,OAAOlH,CACf,EACIwH,EAAQ,UAAU,WAAa,UAAY,CACvC,KAAK,SAAW,CAAA,CACxB,EACIA,EAAQ,UAAU,OAAS,SAAUxH,EAAK,CACtC,IAAI2H,EAAW,KAAK,SAAUtM,EAC9BsM,EAAS,KAAK3H,CAAG,EACjB3E,EAAMsM,EAAS,OACXtM,GAAOkM,IACPI,EAAS,MAAK,CAE1B,EACIH,EAAQ,UAAU,MAAQ,UAAY,CAClC,IAAIK,EAAa,KAAK,UAAS,EAAG,cAAa,EAC/C,KAAK,aAAa,EAAIA,EAAY,EAAG,EAAG,EAAIA,EAAY,EAAG,CAAC,CACpE,EACIL,EAAQ,UAAU,UAAY,UAAY,CACtC,OAAO,KAAK,MACpB,EACIA,EAAQ,UAAU,MAAQ,SAAUM,EAAQ,CACxC,IAAI1I,EAAS,KAAK,UAAS,EACvB0I,EACA,KAAK,UAAUA,EAAO,GAAK,EAAGA,EAAO,GAAK,EAAGA,EAAO,OAAS,EAAGA,EAAO,QAAU,CAAC,EAGlF,KAAK,UAAU,EAAG,EAAG1I,EAAO,SAAQ,EAAKA,EAAO,WAAYA,EAAO,UAAS,EAAKA,EAAO,UAAU,CAE9G,EACIoI,EAAQ,UAAU,cAAgB,SAAUC,EAAO,CAC/C,IAAIM,EAAUN,EAAM,WAAU,EAC1BM,GACA,KAAK,QAAQ,UAAWA,CAAO,CAE3C,EACIP,EAAQ,UAAU,cAAgB,SAAUC,EAAO,CAC/C,IAAIO,EAAaP,EAAM,mBAAkB,EACrCO,IAAe,GACf,KAAK,QAAQ,cAAeA,CAAU,CAElD,EACIR,EAAQ,UAAU,eAAiB,SAAUC,EAAO,CAChD,IAAIQ,EAAWR,EAAM,YAAW,EAC5BQ,GACA,KAAK,QAAQ,WAAYA,CAAQ,CAE7C,EACIT,EAAQ,UAAU,QAAU,SAAUhD,EAAM3F,EAAK,CAC7C,KAAK,SAAS2F,CAAI,EAAI3F,CAC9B,EACI2I,EAAQ,UAAU,IAAM,SAAUU,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAI,CACtD,KAAK,SAAS,IAAIL,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,CAAE,CAChD,EACIf,EAAQ,UAAU,MAAQ,SAAUU,EAAIC,EAAIC,EAAIC,EAAIC,EAAI,CACpD,KAAK,SAAS,MAAMJ,EAAIC,EAAIC,EAAIC,EAAIC,CAAE,CAC9C,EACId,EAAQ,UAAU,UAAY,UAAY,CACtC,KAAK,SAAS,UAAS,CAC/B,EACIA,EAAQ,UAAU,cAAgB,SAAUU,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAI,CAChE,KAAK,SAAS,cAAcL,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,CAAE,CAC1D,EACIf,EAAQ,UAAU,UAAY,SAAUU,EAAIC,EAAIC,EAAIC,EAAI,CACpD,KAAK,SAAS,UAAUH,EAAIC,EAAIC,EAAIC,CAAE,CAC9C,EACIb,EAAQ,UAAU,KAAO,UAAY,CACjC,KAAK,SAAS,KAAI,CAC1B,EACIA,EAAQ,UAAU,UAAY,UAAY,CACtC,KAAK,SAAS,UAAS,CAC/B,EACIA,EAAQ,UAAU,gBAAkB,SAAUU,EAAIC,EAAI,CAClD,IAAI5K,EAAI,UACR,GAAIA,EAAE,SAAW,EACb,OAAO,KAAK,SAAS,gBAAgB2K,EAAIC,CAAE,EAE1C,GAAI5K,EAAE,SAAW,EAClB,OAAO,KAAK,SAAS,gBAAgB2K,CAAE,CAEnD,EACIV,EAAQ,UAAU,qBAAuB,SAAUU,EAAIC,EAAIC,EAAIC,EAAI,CAC/D,OAAO,KAAK,SAAS,qBAAqBH,EAAIC,EAAIC,EAAIC,CAAE,CAChE,EACIb,EAAQ,UAAU,cAAgB,SAAUU,EAAIC,EAAI,CAChD,OAAO,KAAK,SAAS,cAAcD,EAAIC,CAAE,CACjD,EACIX,EAAQ,UAAU,qBAAuB,SAAUU,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAI,CACvE,OAAO,KAAK,SAAS,qBAAqBL,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,CAAE,CACxE,EACIf,EAAQ,UAAU,UAAY,SAAUU,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAI,CACxE,IAAInL,EAAI,UAAWoL,EAAW,KAAK,SAC/BpL,EAAE,SAAW,EACboL,EAAS,UAAUT,EAAIC,EAAIC,CAAE,EAExB7K,EAAE,SAAW,EAClBoL,EAAS,UAAUT,EAAIC,EAAIC,EAAIC,EAAIC,CAAE,EAEhC/K,EAAE,SAAW,GAClBoL,EAAS,UAAUT,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,CAAE,CAEjE,EACIlB,EAAQ,UAAU,QAAU,SAAUU,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAI,CAClE,KAAK,SAAS,QAAQP,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,CAAE,CAC5D,EACIjB,EAAQ,UAAU,cAAgB,SAAUxL,EAAGC,EAAG,CAC9C,OAAO,KAAK,SAAS,cAAcD,EAAGC,CAAC,CAC/C,EACIuL,EAAQ,UAAU,KAAO,UAAY,CACjC,KAAK,SAAS,KAAI,CAC1B,EACIA,EAAQ,UAAU,SAAW,SAAUxL,EAAGC,EAAG2M,EAAOC,EAAQ,CACxD,KAAK,SAAS,SAAS7M,EAAGC,EAAG2M,EAAOC,CAAM,CAClD,EACIrB,EAAQ,UAAU,WAAa,SAAUxL,EAAGC,EAAG2M,EAAOC,EAAQ,CAC1D,KAAK,SAAS,WAAW7M,EAAGC,EAAG2M,EAAOC,CAAM,CACpD,EACIrB,EAAQ,UAAU,SAAW,SAAUU,EAAIC,EAAIC,EAAI,CAC/C,KAAK,SAAS,SAASF,EAAIC,EAAIC,CAAE,CACzC,EACIZ,EAAQ,UAAU,YAAc,SAAUsB,EAAM,CAC5C,OAAO,KAAK,SAAS,YAAYA,CAAI,CAC7C,EACItB,EAAQ,UAAU,aAAe,SAAUU,EAAIC,EAAIC,EAAIC,EAAI,CACvD,OAAO,KAAK,SAAS,aAAaH,EAAIC,EAAIC,EAAIC,CAAE,CACxD,EACIb,EAAQ,UAAU,OAAS,SAAUU,EAAIC,EAAI,CACzC,KAAK,SAAS,OAAOD,EAAIC,CAAE,CACnC,EACIX,EAAQ,UAAU,OAAS,SAAUU,EAAIC,EAAI,CACzC,KAAK,SAAS,OAAOD,EAAIC,CAAE,CACnC,EACIX,EAAQ,UAAU,KAAO,SAAUU,EAAIC,EAAIC,EAAIC,EAAI,CAC/C,KAAK,SAAS,KAAKH,EAAIC,EAAIC,EAAIC,CAAE,CACzC,EACIb,EAAQ,UAAU,aAAe,SAAUU,EAAIC,EAAIC,EAAI,CACnD,KAAK,SAAS,aAAaF,EAAIC,EAAIC,CAAE,CAC7C,EACIZ,EAAQ,UAAU,iBAAmB,SAAUU,EAAIC,EAAIC,EAAIC,EAAI,CAC3D,KAAK,SAAS,iBAAiBH,EAAIC,EAAIC,EAAIC,CAAE,CACrD,EACIb,EAAQ,UAAU,QAAU,UAAY,CACpC,KAAK,SAAS,QAAO,CAC7B,EACIA,EAAQ,UAAU,OAAS,SAAUU,EAAI,CACrC,KAAK,SAAS,OAAOA,CAAE,CAC/B,EACIV,EAAQ,UAAU,KAAO,UAAY,CACjC,KAAK,SAAS,KAAI,CAC1B,EACIA,EAAQ,UAAU,MAAQ,SAAUU,EAAIC,EAAI,CACxC,KAAK,SAAS,MAAMD,EAAIC,CAAE,CAClC,EACIX,EAAQ,UAAU,YAAc,SAAUU,EAAI,CACtC,KAAK,SAAS,YACd,KAAK,SAAS,YAAYA,CAAE,EAEvB,YAAa,KAAK,SACvB,KAAK,SAAS,QAAaA,EAEtB,mBAAoB,KAAK,WAC9B,KAAK,SAAS,eAAoBA,EAE9C,EACIV,EAAQ,UAAU,YAAc,UAAY,CACxC,OAAO,KAAK,SAAS,YAAW,CACxC,EACIA,EAAQ,UAAU,aAAe,SAAUU,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAI,CAC/D,KAAK,SAAS,aAAaL,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,CAAE,CACzD,EACIf,EAAQ,UAAU,OAAS,UAAY,CACnC,KAAK,SAAS,OAAM,CAC5B,EACIA,EAAQ,UAAU,WAAa,SAAUU,EAAIC,EAAIC,EAAIC,EAAI,CACrD,KAAK,SAAS,WAAWH,EAAIC,EAAIC,EAAIC,CAAE,CAC/C,EACIb,EAAQ,UAAU,UAAY,SAAUU,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAI,CAC5D,KAAK,SAAS,UAAUL,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,CAAE,CACtD,EACIf,EAAQ,UAAU,UAAY,SAAUU,EAAIC,EAAI,CAC5C,KAAK,SAAS,UAAUD,EAAIC,CAAE,CACtC,EACIX,EAAQ,UAAU,aAAe,UAAY,CACzC,IAAIuB,EAAO,KAAM1N,EAAMgM,GAAgB,OAAQ2B,EAAiB9E,GAAO,KAAK,eAAgB+E,EAAa,KAAK,QAAS,EAAGxN,EACtHG,EAAO,SAAUL,EAAY,CAC7B,IAAI2N,EAAaH,EAAKxN,CAAU,EAAGsK,EACnCkD,EAAKxN,CAAU,EAAI,UAAY,CAC3B,OAAAE,EAAOuN,EAAe,MAAM,UAAU,MAAM,KAAK,UAAW,CAAC,CAAC,EAC9DnD,EAAMqD,EAAW,MAAMH,EAAM,SAAS,EACtCA,EAAK,OAAO,CACR,OAAQxN,EACR,KAAME,CAC1B,CAAiB,EACMoK,CACvB,CACA,EACQ,IAAK,EAAI,EAAG,EAAIxK,EAAK,IACjBO,EAAKyL,GAAgB,CAAC,CAAC,EAE3B0B,EAAK,QAAU,UAAY,CACvBE,EAAW,MAAMF,EAAM,SAAS,EAChC,IAAII,EAAO,UAAU,CAAC,EAClBtK,EAAM,UAAU,CAAC,GACjBsK,IAAS,iBACTA,IAAS,iBACTA,IAAS,gBACTtK,EAAMA,EAAM,KAAK,OAAO,cAAa,GAEzCkK,EAAK,OAAO,CACR,SAAUI,EACV,IAAKtK,CACrB,CAAa,CACb,CACA,EACI2I,EAAQ,UAAU,+BAAiC,SAAU4B,EAAM,CAC/D,IAAIC,EAA2BD,EAAK,4BAA2B,EAC3DC,IAA6B,eAC7B,KAAK,QAAQ,2BAA4BA,CAAwB,CAE7E,EACW7B,CACX,IACAZ,GAAA,QAAkBY,GAClBF,GAAmB,QAAQ,SAAU6B,EAAM,CACvC,OAAO,eAAe3B,GAAQ,UAAW2B,EAAM,CAC3C,IAAK,UAAY,CACb,OAAO,KAAK,SAASA,CAAI,CACrC,EACQ,IAAK,SAAUtK,EAAK,CAChB,KAAK,SAASsK,CAAI,EAAItK,CAClC,CACA,CAAK,CACL,CAAC,EACD,IAAIyK,GAAgB,SAAUC,EAAQ,CAClC/C,GAAU8C,EAAcC,CAAM,EAC9B,SAASD,GAAe,CACpB,OAAOC,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAAD,EAAa,UAAU,WAAa,SAAU7B,EAAO,CACjD,IAAI+B,EAAO/B,EAAM,KAAI,EACrB,KAAK,QAAQ,YAAa+B,CAAI,EAC9B/B,EAAM,UAAU,IAAI,CAC5B,EACI6B,EAAa,UAAU,aAAe,SAAU7B,EAAO,CACnD,IAAIgC,EAAehC,EAAM,gBAAe,EAAIiC,EAAejC,EAAM,gBAAe,EAAIkC,EAAsB3O,GAAS,MAAM,SAASyM,EAAM,uBAAsB,CAAE,EAAGmC,EAAqBnC,EAAM,sBAAqB,EAAIoC,EAAqBpC,EAAM,sBAAqB,EAAIqC,EAAoBrC,EAAM,qBAAoB,EAAIsC,EAAoBtC,EAAM,qBAAoB,GACvWgC,GAAgBC,IAChB,KAAK,UAAUD,GAAgB,EAAGC,GAAgB,CAAC,EAEnDC,GACA,KAAK,OAAOA,CAAmB,GAE/BG,GAAqBC,IACrB,KAAK,MAAMD,EAAmBC,CAAiB,GAE/CH,GAAsBC,IACtB,KAAK,UAAU,GAAKD,EAAoB,GAAKC,CAAkB,EAEnE,KAAK,QAAQ,YAAapC,EAAM,gBAAe,CAAE,EACjDA,EAAM,UAAU,IAAI,CAC5B,EACI6B,EAAa,UAAU,oBAAsB,SAAU7B,EAAO,CAC1D,IAAIuC,EAAMvC,EAAM,mBAAkB,EAC9BuC,IACA,KAAK,QAAQ,YAAaA,CAAG,EAC7BvC,EAAM,UAAU,IAAI,EAEhC,EACI6B,EAAa,UAAU,oBAAsB,SAAU7B,EAAO,CAC1D,IAAIuC,EAAMvC,EAAM,mBAAkB,EAC9BuC,IACA,KAAK,QAAQ,YAAaA,CAAG,EAC7BvC,EAAM,UAAU,IAAI,EAEhC,EACI6B,EAAa,UAAU,MAAQ,SAAU7B,EAAO,CAC5C,IAAIwC,EAAWxC,EAAM,KAAI,EAAIyC,EAAezC,EAAM,gBAAe,EACjE,GAAIwC,GAAYC,IAAiB,QAAS,CACtC,KAAK,WAAWzC,CAAK,EACrB,MACZ,CACQ,IAAI0C,EAAa1C,EAAM,oBAAmB,EAC1C,GAAI0C,GAAcD,IAAiB,UAAW,CAC1C,KAAK,aAAazC,CAAK,EACvB,MACZ,CACQ,IAAI2C,EAAoB3C,EAAM,gCAA+B,EAC7D,GAAI2C,GAAqBF,IAAiB,kBAAmB,CACzD,KAAK,oBAAoBzC,CAAK,EAC9B,MACZ,CACQ,IAAI4C,EAAoB5C,EAAM,gCAA+B,EAC7D,GAAI4C,GAAqBH,IAAiB,kBAAmB,CACzD,KAAK,oBAAoBzC,CAAK,EAC9B,MACZ,CACYwC,EACA,KAAK,WAAWxC,CAAK,EAEhB0C,EACL,KAAK,aAAa1C,CAAK,EAElB2C,EACL,KAAK,oBAAoB3C,CAAK,EAEzB4C,GACL,KAAK,oBAAoB5C,CAAK,CAE1C,EACI6B,EAAa,UAAU,sBAAwB,SAAU7B,EAAO,CAC5D,IAAIjE,EAAQiE,EAAM,oCAAqChE,EAAMgE,EAAM,gCAA+B,EAAI6C,EAAa7C,EAAM,kCAAiC,EAAIuC,EAAM,KAAK,qBAAqBxG,EAAM,EAAGA,EAAM,EAAGC,EAAI,EAAGA,EAAI,CAAC,EAC5N,GAAI6G,EAAY,CACZ,QAAShP,EAAI,EAAGA,EAAIgP,EAAW,OAAQhP,GAAK,EACxC0O,EAAI,aAAaM,EAAWhP,CAAC,EAAGgP,EAAWhP,EAAI,CAAC,CAAC,EAErD,KAAK,QAAQ,cAAe0O,CAAG,CAC3C,CACA,EACIV,EAAa,UAAU,QAAU,SAAU7B,EAAO,CAC9C,IAAI8C,EAAO9C,EAAM,KAAI,EAAI+C,EAAqB/C,EAAM,sBAAqB,EACzE,GAAIA,EAAM,YAAa,CACnB,GAAI,CAAC+C,EAAoB,CACrB,KAAK,KAAI,EACT,IAAI3C,EAAa,KAAK,UAAS,EAAG,cAAa,EAC/C,KAAK,aAAaA,EAAY,EAAG,EAAGA,EAAY,EAAG,CAAC,CACpE,CACY,KAAK,cAAcJ,CAAK,EACpB8C,GAAQ9C,EAAM,gBACd,KAAK,YAAY8C,CAAI,EACrB,KAAK,QAAQ,iBAAkB9C,EAAM,WAAU,CAAE,GAErD,KAAK,QAAQ,YAAaA,EAAM,YAAW,CAAE,EACxCA,EAAM,6BACP,KAAK,QAAQ,cAAe,eAAe,EAE/C,IAAI2C,EAAoB3C,EAAM,kCAAiC,EAC3D2C,EACA,KAAK,sBAAsB3C,CAAK,EAGhC,KAAK,QAAQ,cAAeA,EAAM,OAAM,CAAE,EAE9CA,EAAM,YAAY,IAAI,EACjB+C,GACD,KAAK,QAAO,CAE5B,CACA,EACIlB,EAAa,UAAU,aAAe,SAAU7B,EAAO,CACnD,IAAInI,EAAO4E,GAAO,KAAMpE,EAAQR,EAAK,IAAImI,EAAM,gBAAiB,OAAO,EAAGgD,EAAOnL,EAAK,IAAImI,EAAM,cAAa,EAAI,CAAC,EAAGiD,EAASpL,EAAK,IAAImI,EAAM,gBAAe,EAAI,CAC5J,EAAG,EACH,EAAG,CACf,CAAS,EAAGkD,EAAQlD,EAAM,iBAAgB,EAAImD,EAAQ,KAAK,OAAO,cAAa,EAAIC,EAASF,EAAM,EAAIC,EAAOE,EAASH,EAAM,EAAIC,EACxH,KAAK,QAAQ,cAAe9K,CAAK,EACjC,KAAK,QAAQ,aAAc2K,EAAO,KAAK,IAAI,KAAK,IAAII,CAAM,EAAG,KAAK,IAAIC,CAAM,CAAC,CAAC,EAC9E,KAAK,QAAQ,gBAAiBJ,EAAO,EAAIG,CAAM,EAC/C,KAAK,QAAQ,gBAAiBH,EAAO,EAAII,CAAM,CACvD,EACWxB,CACX,EAAE9B,EAAO,EACTZ,GAAA,aAAuB0C,GACvB,IAAIyB,GAAc,SAAUxB,EAAQ,CAChC/C,GAAUuE,EAAYxB,CAAM,EAC5B,SAASwB,GAAa,CAClB,OAAOxB,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAAwB,EAAW,UAAU,MAAQ,SAAUtD,EAAO,CAC1C,KAAK,KAAI,EACT,KAAK,QAAQ,YAAaA,EAAM,QAAQ,EACxCA,EAAM,aAAa,IAAI,EACvB,KAAK,QAAO,CACpB,EACIsD,EAAW,UAAU,YAAc,SAAUtD,EAAO,CAC5CA,EAAM,gBACN,KAAK,QAAQA,CAAK,CAE9B,EACIsD,EAAW,UAAU,QAAU,SAAUtD,EAAO,CAC5C,GAAIA,EAAM,eAAgB,CACtB,IAAI+C,EAAqB/C,EAAM,sBAAqB,EACpD,GAAI,CAAC+C,EAAoB,CACrB,KAAK,KAAI,EACT,IAAI3C,EAAa,KAAK,UAAS,EAAG,cAAa,EAC/C,KAAK,aAAaA,EAAY,EAAG,EAAGA,EAAY,EAAG,CAAC,CACpE,CACY,KAAK,cAAcJ,CAAK,EACxB,IAAIuD,EAAiBvD,EAAM,eAAc,EACrCwD,EAAcD,IAAmB,OAASvD,EAAM,YAAW,EAAKuD,EACpE,KAAK,QAAQ,YAAaC,CAAW,EACrC,KAAK,QAAQ,cAAexD,EAAM,QAAQ,EAC1CA,EAAM,eAAe,IAAI,EACpB+C,GACD,KAAK,QAAO,CAE5B,CACA,EACWO,CACX,EAAEvD,EAAO,EACTZ,GAAA,WAAqBmE,GCxgBrB,IAAIvE,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAeuE,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIhH,GAASjJ,EACT2L,GAAYzC,GACZnJ,GAAWmQ,EACXC,GAAYC,EACZlG,GAAemG,EACfC,GACJ,SAASC,IAAsB,CAC3B,GAAID,GACA,OAAOA,GAEX,IAAInM,EAAS8E,GAAO,KAAK,oBAAmB,EACxCuH,EAAUrM,EAAO,WAAW,IAAI,EACpC,OAAAmM,GAAe,UAAY,CACvB,IAAIG,EAAmB1Q,GAAS,MAAM,QAAQ,kBAAoB,EAAG2Q,EAAoBF,EAAQ,8BAC7FA,EAAQ,2BACRA,EAAQ,0BACRA,EAAQ,yBACRA,EAAQ,wBACR,EACJ,OAAOC,EAAmBC,CAClC,EAAK,EACMJ,EACX,CACA,IAAIK,GAAU,UAAY,CACtB,SAASA,EAAOC,EAAQ,CACpB,KAAK,WAAa,EAClB,KAAK,MAAQ,EACb,KAAK,OAAS,EACd,KAAK,QAAU,GACf,IAAIC,EAAOD,GAAU,CAAA,EACjBhE,EAAaiE,EAAK,YAAc9Q,GAAS,MAAM,YAAcwQ,GAAmB,EACpF,KAAK,WAAa3D,EAClB,KAAK,QAAU3D,GAAO,KAAK,oBAAmB,EAC9C,KAAK,QAAQ,MAAM,QAAU,IAC7B,KAAK,QAAQ,MAAM,OAAS,IAC5B,KAAK,QAAQ,MAAM,OAAS,IAC5B,KAAK,QAAQ,MAAM,WAAa,cAChC,KAAK,QAAQ,MAAM,SAAW,WAC9B,KAAK,QAAQ,MAAM,IAAM,IACzB,KAAK,QAAQ,MAAM,KAAO,GAClC,CACI,OAAA0H,EAAO,UAAU,WAAa,UAAY,CACtC,OAAO,KAAK,OACpB,EACIA,EAAO,UAAU,cAAgB,UAAY,CACzC,OAAO,KAAK,UACpB,EACIA,EAAO,UAAU,cAAgB,SAAU/D,EAAY,CACnD,IAAIkE,EAAgB,KAAK,WACzB,KAAK,WAAalE,EAClB,KAAK,QAAQ,KAAK,SAAQ,EAAKkE,EAAe,KAAK,UAAS,EAAKA,CAAa,CACtF,EACIH,EAAO,UAAU,SAAW,SAAUhD,EAAO,CACzC,KAAK,MAAQ,KAAK,QAAQ,MAAQA,EAAQ,KAAK,WAC/C,KAAK,QAAQ,MAAM,MAAQA,EAAQ,KACnC,IAAIf,EAAa,KAAK,WAAYc,EAAW,KAAK,WAAU,EAAG,SAC/DA,EAAS,MAAMd,EAAYA,CAAU,CAC7C,EACI+D,EAAO,UAAU,UAAY,SAAU/C,EAAQ,CAC3C,KAAK,OAAS,KAAK,QAAQ,OAASA,EAAS,KAAK,WAClD,KAAK,QAAQ,MAAM,OAASA,EAAS,KACrC,IAAIhB,EAAa,KAAK,WAAYc,EAAW,KAAK,WAAU,EAAG,SAC/DA,EAAS,MAAMd,EAAYA,CAAU,CAC7C,EACI+D,EAAO,UAAU,SAAW,UAAY,CACpC,OAAO,KAAK,KACpB,EACIA,EAAO,UAAU,UAAY,UAAY,CACrC,OAAO,KAAK,MACpB,EACIA,EAAO,UAAU,QAAU,SAAUhD,EAAOC,EAAQ,CAChD,KAAK,SAASD,GAAS,CAAC,EACxB,KAAK,UAAUC,GAAU,CAAC,CAClC,EACI+C,EAAO,UAAU,UAAY,SAAUI,EAAUC,EAAS,CACtD,GAAI,CACA,OAAO,KAAK,QAAQ,UAAUD,EAAUC,CAAO,CAC3D,MACkB,CACN,GAAI,CACA,OAAO,KAAK,QAAQ,UAAS,CAC7C,OACmBC,EAAK,CACRhI,OAAAA,GAAO,KAAK,MAAM,2BACdgI,EAAI,QACJ,yEAAyE,EACtE,EACvB,CACA,CACA,EACWN,CACX,IACAV,GAAA,OAAiBU,GACjBR,GAAU,QAAQ,gBAAgBQ,GAAQ,aAAc,OAAWzG,GAAa,oBAAoB,EACpG,IAAIgH,GAAe,SAAU5C,EAAQ,CACjC/C,GAAU2F,EAAa5C,CAAM,EAC7B,SAAS4C,EAAYN,EAAQ,CACrBA,IAAW,SAAUA,EAAS,CAAE,MAAO,EAAG,OAAQ,CAAC,GACvD,IAAIO,EAAQ7C,EAAO,KAAK,KAAMsC,CAAM,GAAK,KACzC,OAAAO,EAAM,QAAU,IAAIxF,GAAU,aAAawF,CAAK,EAChDA,EAAM,QAAQP,EAAO,MAAOA,EAAO,MAAM,EAClCO,CACf,CACI,OAAOD,CACX,EAAEP,EAAM,EACRV,GAAA,YAAsBiB,GACtB,IAAIE,GAAa,SAAU9C,EAAQ,CAC/B/C,GAAU6F,EAAW9C,CAAM,EAC3B,SAAS8C,EAAUR,EAAQ,CACnBA,IAAW,SAAUA,EAAS,CAAE,MAAO,EAAG,OAAQ,CAAC,GACvD,IAAIO,EAAQ7C,EAAO,KAAK,KAAMsC,CAAM,GAAK,KACzC,OAAAO,EAAM,UAAY,GAClBA,EAAM,QAAU,IAAIxF,GAAU,WAAWwF,CAAK,EAC9CA,EAAM,QAAQP,EAAO,MAAOA,EAAO,MAAM,EAClCO,CACf,CACI,OAAOC,CACX,EAAET,EAAM,EACRV,GAAA,UAAoBmB,0BCpIpB,OAAO,eAAcvS,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5D,IAAIkB,EAAWC,EACXiJ,EAASC,EACbrK,EAAA,GAAa,CACT,IAAI,YAAa,CACb,IAAIwS,EAAO,GACX,OAAAxS,EAAQ,GAAG,cAAc,QAAQ,SAAUyS,EAAM,CACzCA,EAAK,aAAe,aACpBD,EAAO,GAEvB,CAAS,EACMA,CACf,EACI,YAAa,GACb,IAAI,MAAO,CACP,IAAIlD,EACJ,OAAAtP,EAAQ,GAAG,cAAc,QAAQ,SAAUyS,EAAM,CAC7CnD,EAAOmD,EAAK,IACxB,CAAS,EACMnD,CACf,EACI,cAAe,IAAI,IACnB,MAAO,SAAUpF,EAAK,CAClBlK,EAAQ,GAAG,cAAc,QAAQ,SAAUyS,EAAM/S,EAAK,CAClD,IAAI4P,EAAOmD,EAAK,KACZC,EAAQpD,EAAK,SAAQ,EACzBoD,EAAM,qBAAqBxI,CAAG,EAC1BuI,EAAK,YAAc,SACnBA,EAAK,UAAYrI,EAAO,KAAK,mBAAmBF,CAAG,GAEvD,IAAIyI,EAAMD,EAAM,yBAAyB,KAAK,SAAUC,EAAK,CAAE,OAAOA,EAAI,KAAOF,EAAK,SAAU,CAAE,EAClG,GAAKE,EAGL,IAAIF,EAAK,aAAe,WAAY,CAChC,IAAIG,EAAetD,EAAK,aAAY,EAChCuD,EAAW,KAAK,IAAI,KAAK,IAAIF,EAAI,EAAIF,EAAK,gBAAgB,CAAC,EAAG,KAAK,IAAIE,EAAI,EAAIF,EAAK,gBAAgB,CAAC,CAAC,EAK1G,GAJII,EAAWD,IAGftD,EAAK,UAAU,CAAE,IAAKpF,CAAG,CAAE,EACvB,CAACoF,EAAK,cACN,MAEpB,CACYA,EAAK,iBAAiBpF,EAAKuI,CAAI,EAC/BnD,EAAK,KAAK,WAAY,CAClB,KAAM,WACN,OAAQA,EACR,IAAKpF,GACN,EAAI,EACnB,CAAS,CACT,EACI,eAAgB,SAAUA,EAAK,CAC3BlK,EAAQ,GAAG,cAAc,QAAQ,SAAUyS,EAAM/S,EAAK,CAClD,IAAI4P,EAAOmD,EAAK,KACZC,EAAQpD,EAAK,SAAQ,EACrBpF,GACAwI,EAAM,qBAAqBxI,CAAG,EAElC,IAAIyI,EAAMD,EAAM,yBAAyB,KAAK,SAAUC,EAAK,CAAE,OAAOA,EAAI,KAAOF,EAAK,SAAU,CAAE,EAClG,GAAKE,EAGL,EAAIF,EAAK,aAAe,YAAcA,EAAK,aAAe,aACtDzS,EAAQ,GAAG,YAAc,GACzBkB,EAAS,MAAM,eAAiB,GAChCuR,EAAK,WAAa,WAEtB,IAAIK,EAAWL,EAAK,KAAK,SAAQ,GAC5BA,EAAK,gBAAgBvR,EAAS,MAAM,OAAYuR,EAAK,KACtDK,GACAA,EAAS,KAAI,EAE7B,CAAS,CACT,EACI,cAAe,SAAU5I,EAAK,CAC1BlK,EAAQ,GAAG,cAAc,QAAQ,SAAUyS,EAAM/S,EAAK,CAC9C+S,EAAK,aAAe,WACpBA,EAAK,KAAK,KAAK,UAAW,CACtB,KAAM,UACN,OAAQA,EAAK,KACb,IAAKvI,GACN,EAAI,EAEPuI,EAAK,aAAe,YACpBzS,EAAQ,GAAG,cAAc,OAAON,CAAG,CAEnD,CAAS,CACT,CACA,EACIwB,EAAS,MAAM,YACf,OAAO,iBAAiB,UAAWlB,EAAQ,GAAG,eAAgB,EAAI,EAClE,OAAO,iBAAiB,WAAYA,EAAQ,GAAG,eAAgB,EAAI,EACnE,OAAO,iBAAiB,YAAaA,EAAQ,GAAG,KAAK,EACrD,OAAO,iBAAiB,YAAaA,EAAQ,GAAG,KAAK,EACrD,OAAO,iBAAiB,UAAWA,EAAQ,GAAG,cAAe,EAAK,EAClE,OAAO,iBAAiB,WAAYA,EAAQ,GAAG,cAAe,EAAK,sBCjGvE,OAAO,eAAcA,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5D,IAAIoK,EAASjJ,EACTmQ,EAAYjH,EACZ+G,EAAWC,GACXnQ,EAAWqQ,EACXwB,EAAgBvB,GAChBnG,EAAe2H,EACnBhT,EAAA,IAAc,CAAA,EACdA,EAAA,MAAgB,CAAA,EAChB,IAAIiT,EAAS,SAAU3D,EAAM4D,EAAI,CACxBA,IAGLlT,EAAQ,IAAIkT,CAAE,EAAI5D,EACtB,EACAtP,EAAA,UAAoB,SAAUkT,EAAI5D,EAAM,CAC/B4D,GAGDlT,EAAQ,IAAIkT,CAAE,IAAM5D,GAGxB,OAAOtP,EAAQ,IAAIkT,CAAE,CACzB,EACAlT,EAAA,SAAmB,SAAUsP,EAAM6D,EAAM,CACjCA,IACKnT,EAAQ,MAAMmT,CAAI,IACnBnT,EAAQ,MAAMmT,CAAI,EAAI,CAAA,GAE1BnT,EAAQ,MAAMmT,CAAI,EAAE,KAAK7D,CAAI,EAErC,EACAtP,EAAA,YAAsB,SAAUmT,EAAMC,EAAK,CACvC,GAAKD,EAGL,KAAIE,EAAQrT,EAAQ,MAAMmT,CAAI,EAC9B,GAAKE,EAGL,SAAS7R,EAAI,EAAGA,EAAI6R,EAAM,OAAQ7R,IAAK,CACnC,IAAI8R,EAAKD,EAAM7R,CAAC,EACZ8R,EAAG,MAAQF,GACXC,EAAM,OAAO7R,EAAG,CAAC,CAE7B,CACQ6R,EAAM,SAAW,GACjB,OAAOrT,EAAQ,MAAMmT,CAAI,GAEjC,EACA,IAAII,EAAmB,kBAAmBC,EAAqB,oBAAqBC,EAAiB,gBAAiBC,EAAS,SAAUC,EAAS,SAAUC,EAAW,WAAYC,EAAQ,QAASC,EAAY,YAAaC,EAAa,aAAcC,EAAa,aAAcC,EAAO,OAAQ1I,EAAM,MAAO2I,EAAQ,QAASC,EAAQ,IAAKC,EAAQ,QAASC,EAAY,YAAaC,EAAc,QAASC,EAAU,UAAWC,EAAuB,CACtb,gBACA,gBACA,qBACA,qBACA,oBACA,oBACA,uBACA,sBACA,sBACA,+BACJ,EAAE,KAAKL,CAAK,EACRM,EAAgB,IAAIrK,EAAO,WAC3BsK,EAAY,EACZC,EAAQ,UAAY,CACpB,SAASA,EAAK5C,EAAQ,CAClB,IAAIO,EAAQ,KACZ,KAAK,IAAMoC,IACX,KAAK,eAAiB,CAAA,EACtB,KAAK,MAAQ,CAAA,EACb,KAAK,MAAQ,EACb,KAAK,OAAS,KACd,KAAK,OAAS,IAAI,IAClB,KAAK,SAAW,KAChB,KAAK,yBAA2B,GAChC,KAAK,yBAA2B,GAChC,KAAK,gBAAkB,GACvB,KAAK,cAAgB,GACrB,KAAK,SAAWD,EAChB,KAAK,aAAe,KACpB,KAAK,SAAS1C,CAAM,EACpB,KAAK,GAAGyC,EAAsB,UAAY,CACtC,GAAIlC,EAAM,yBAA0B,CAChCA,EAAM,yBAA2B,GACjC,MAChB,CACYA,EAAM,YAAY+B,CAAS,EAC3B/B,EAAM,6BAA6BkB,CAAkB,CACjE,CAAS,EACD,KAAK,GAAG,sBAAuB,UAAY,CACvClB,EAAM,6BAA6BiC,CAAO,CACtD,CAAS,EACD,KAAK,GAAG,wBAAyB,UAAY,CACzCjC,EAAM,6BAA6BwB,CAAS,CACxD,CAAS,EACD,KAAK,GAAG,sBAAuB,UAAY,CACvCxB,EAAM,6BAA6BiB,CAAgB,CAC/D,CAAS,CACT,CACI,OAAAoB,EAAK,UAAU,YAAc,UAAY,CACrC,MAAO,EACf,EACIA,EAAK,UAAU,YAAc,UAAY,CACrC,OAAOF,CACf,EACIE,EAAK,UAAU,YAAc,SAAUjK,EAAM,CACrCA,EACA,KAAK,OAAO,OAAOA,CAAI,EAGvB,KAAK,OAAO,MAAK,CAE7B,EACIiK,EAAK,UAAU,UAAY,SAAUjK,EAAMkK,EAAe,CACtD,IAAIC,EAAQ,KAAK,OAAO,IAAInK,CAAI,EAChC,OAAImK,IAAU,SACVA,EAAQD,EAAc,KAAK,IAAI,EAC/B,KAAK,OAAO,IAAIlK,EAAMmK,CAAK,GAExBA,CACf,EACIF,EAAK,UAAU,gBAAkB,UAAY,CACzC,OAAO,KAAK,OAAO,IAAIjB,CAAM,CACrC,EACIiB,EAAK,UAAU,6BAA+B,SAAUjK,EAAMoK,EAAY,CACtE,KAAK,YAAYpK,CAAI,EACjBoK,GAAcpK,IAAS8I,GACvB,KAAK,KAAK,sBAAsB,EAEhC,MAAK,YAGL,KAAK,UACL,KAAK,SAAS,KAAK,SAAUlE,EAAM,CAC/BA,EAAK,6BAA6B5E,EAAM,EAAI,CAC5D,CAAa,CAEb,EACIiK,EAAK,UAAU,WAAa,UAAY,CACpC,YAAK,OAAO,OAAOjB,CAAM,EACzB,KAAK,6BAA4B,EAC1B,IACf,EACIiB,EAAK,UAAU,MAAQ,SAAU5C,EAAQ,CACrC,IAAIC,EAAOD,GAAU,CAAA,EACjBgD,EAAO,CAAA,GACP/C,EAAK,IAAM,QACXA,EAAK,IAAM,QACXA,EAAK,QAAU,QACfA,EAAK,SAAW,UAChB+C,EAAO,KAAK,cAAc,CACtB,cAAe,GACf,WAAY,KAAK,UAAS,CAC1C,CAAa,GAEL,IAAIjG,EAAQ,KAAK,KAAKkD,EAAK,OAAS+C,EAAK,KAAK,EAAGhG,EAAS,KAAK,KAAKiD,EAAK,QAAU+C,EAAK,MAAM,EAAGhH,EAAaiE,EAAK,WAAY9P,EAAI8P,EAAK,IAAM,OAAY+C,EAAK,EAAI/C,EAAK,EAAG7P,EAAI6P,EAAK,IAAM,OAAY+C,EAAK,EAAI/C,EAAK,EAAGpB,EAASoB,EAAK,QAAU,EAAGgD,EAAahD,EAAK,YAAc,GAClR,GAAI,CAAClD,GAAS,CAACC,EAAQ,CACnB3E,EAAO,KAAK,MAAM,mFAAmF,EACrG,MACZ,CACQ0E,GAAS8B,EAAS,EAClB7B,GAAU6B,EAAS,EACnB1O,GAAK0O,EACLzO,GAAKyO,EACL,IAAIqE,GAAoB,IAAI7D,EAAS,YAAY,CAC7C,WAAYrD,EACZ,MAAOe,EACP,OAAQC,EACX,EAAGmG,GAAqB,IAAI9D,EAAS,YAAY,CAC9C,WAAYrD,EACZ,MAAO,EACP,OAAQ,EACX,EAAGoH,GAAkB,IAAI/D,EAAS,UAAU,CACzC,WAAY,EACZ,MAAOtC,EACP,OAAQC,CACpB,CAAS,EAAGqG,GAAeH,GAAkB,WAAU,EAAII,GAAaF,GAAgB,WAAU,EAC1F,OAAAA,GAAgB,QAAU,GAC1B,KAAK,OAAO,OAAO,QAAQ,EAC3B,KAAK,gBAAkB,GACnBnD,EAAK,wBAA0B,KAC/BiD,GAAkB,WAAU,EAAG,SAAS,sBAAwB,GAChEC,GAAmB,WAAU,EAAG,SAAS,sBAAwB,IAErEE,GAAa,KAAI,EACjBC,GAAW,KAAI,EACfD,GAAa,UAAU,CAAClT,EAAG,CAACC,CAAC,EAC7BkT,GAAW,UAAU,CAACnT,EAAG,CAACC,CAAC,EAC3B,KAAK,cAAgB,GACrB,KAAK,6BAA6BoR,CAAgB,EAClD,KAAK,6BAA6BE,CAAc,EAChD,KAAK,UAAUwB,GAAmB,KAAM,EAAI,EAC5C,KAAK,QAAQE,GAAiB,KAAM,EAAI,EACxC,KAAK,cAAgB,GACrBC,GAAa,QAAO,EACpBC,GAAW,QAAO,EACdL,IACAI,GAAa,KAAI,EACjBA,GAAa,UAAS,EACtBA,GAAa,KAAK,EAAG,EAAGtG,EAAOC,CAAM,EACrCqG,GAAa,UAAS,EACtBA,GAAa,QAAQ,cAAe,KAAK,EACzCA,GAAa,QAAQ,YAAa,CAAC,EACnCA,GAAa,OAAM,EACnBA,GAAa,QAAO,GAExB,KAAK,OAAO,IAAI1B,EAAQ,CACpB,MAAOuB,GACP,OAAQC,GACR,IAAKC,GACL,EAAGjT,EACH,EAAGC,CACf,CAAS,EACM,IACf,EACIwS,EAAK,UAAU,SAAW,UAAY,CAClC,OAAO,KAAK,OAAO,IAAI,QAAQ,CACvC,EACIA,EAAK,UAAU,cAAgB,SAAU5C,EAAQ,CAC7C,MAAM,IAAI,MAAM,sCAAsC,CAC9D,EACI4C,EAAK,UAAU,iBAAmB,SAAUI,EAAMO,EAAK,CACnD,IAAIC,EAAS,CACT,CAAE,EAAGR,EAAK,EAAG,EAAGA,EAAK,CAAC,EACtB,CAAE,EAAGA,EAAK,EAAIA,EAAK,MAAO,EAAGA,EAAK,CAAC,EACnC,CAAE,EAAGA,EAAK,EAAIA,EAAK,MAAO,EAAGA,EAAK,EAAIA,EAAK,MAAM,EACjD,CAAE,EAAGA,EAAK,EAAG,EAAGA,EAAK,EAAIA,EAAK,MAAM,CAChD,EACYS,EAAMC,EAAMC,EAAMC,EAClBC,EAAQ,KAAK,qBAAqBN,CAAG,EACzC,OAAAC,EAAO,QAAQ,SAAUtT,EAAO,CAC5B,IAAI4T,EAAcD,EAAM,MAAM3T,CAAK,EAC/BuT,IAAS,SACTA,EAAOE,EAAOG,EAAY,EAC1BJ,EAAOE,EAAOE,EAAY,GAE9BL,EAAO,KAAK,IAAIA,EAAMK,EAAY,CAAC,EACnCJ,EAAO,KAAK,IAAIA,EAAMI,EAAY,CAAC,EACnCH,EAAO,KAAK,IAAIA,EAAMG,EAAY,CAAC,EACnCF,EAAO,KAAK,IAAIA,EAAME,EAAY,CAAC,CAC/C,CAAS,EACM,CACH,EAAGL,EACH,EAAGC,EACH,MAAOC,EAAOF,EACd,OAAQG,EAAOF,CAC3B,CACA,EACId,EAAK,UAAU,uBAAyB,SAAUhD,EAAS,CACvDA,EAAQ,KAAI,EACZA,EAAQ,cAAc,IAAI,EAC1BA,EAAQ,+BAA+B,IAAI,EAC3C,IAAImE,EAAc,KAAK,gBAAe,EACtCnE,EAAQ,UAAUmE,EAAY,EAAGA,EAAY,CAAC,EAC9C,IAAIC,EAAc,KAAK,sBAAqB,EACxCjF,EAAQiF,EAAY,WACxBpE,EAAQ,UAAUoE,EAAY,QAAS,EAAG,EAAGA,EAAY,MAAQjF,EAAOiF,EAAY,OAASjF,CAAK,EAClGa,EAAQ,QAAO,CACvB,EACIgD,EAAK,UAAU,qBAAuB,SAAUhD,EAAS,CACrD,IAAImE,EAAc,KAAK,gBAAe,EAAIE,EAAYF,EAAY,IAClEnE,EAAQ,KAAI,EACZA,EAAQ,UAAUmE,EAAY,EAAGA,EAAY,CAAC,EAC9CnE,EAAQ,UAAUqE,EAAU,QAAS,EAAG,CAAC,EACzCrE,EAAQ,QAAO,CACvB,EACIgD,EAAK,UAAU,sBAAwB,UAAY,CAC/C,IAAIsB,EAAU,KAAK,UAAWC,EAAe,KAAK,gBAAe,EAAIC,EAAcD,EAAa,MAAOE,EAAeF,EAAa,OAAQG,EAAgBD,EAAa,WAAU,EAAI7U,EAAK+U,EAAW9U,EAAG+U,EACzM,GAAIN,EAAS,CACT,GAAI,CAAC,KAAK,gBAAiB,CACvB,IAAInF,EAAQqF,EAAY,WACxBC,EAAa,QAAQD,EAAY,MAAQA,EAAY,WAAYA,EAAY,OAASA,EAAY,UAAU,EAC5G,GAAI,CAKA,IAJA5U,EAAM0U,EAAQ,OACdI,EAAc,MAAK,EACnBA,EAAc,UAAUF,EAAY,QAAS,EAAG,EAAGA,EAAY,SAAQ,EAAKrF,EAAOqF,EAAY,UAAS,EAAKrF,CAAK,EAClHwF,EAAYD,EAAc,aAAa,EAAG,EAAGD,EAAa,SAAQ,EAAIA,EAAa,WAAW,EACzF5U,EAAI,EAAGA,EAAID,EAAKC,IAAK,CAEtB,GADA+U,EAASN,EAAQzU,CAAC,EACd,OAAO+U,GAAW,WAAY,CAC9BnM,EAAO,KAAK,MAAM,8CACd,OAAOmM,EACP,wCAAwC,EAC5C,QAC5B,CACwBA,EAAO,KAAK,KAAMD,CAAS,EAC3BD,EAAc,aAAaC,EAAW,EAAG,CAAC,CAClE,CACA,OACuBtX,GAAG,CACNoL,EAAO,KAAK,MAAM,2BACdpL,GAAE,QACF,4EAA4E,CACpG,CACgB,KAAK,gBAAkB,EACvC,CACY,OAAOoX,CACnB,CACQ,OAAOD,CACf,EACIxB,EAAK,UAAU,GAAK,SAAU6B,EAAQC,EAAS,CAC3C,GAAI,UAAU,SAAW,EACrB,OAAO,KAAK,UAAU,MAAM,KAAM,SAAS,EAE/C,IAAIC,EAASF,EAAO,MAAMrC,CAAK,EAAG5S,EAAMmV,EAAO,OAAQlV,EAAGmV,EAAOxQ,EAAOyQ,EAAWzD,EACnF,IAAK3R,EAAI,EAAGA,EAAID,EAAKC,IACjBmV,EAAQD,EAAOlV,CAAC,EAChB2E,EAAQwQ,EAAM,MAAM,GAAG,EACvBC,EAAYzQ,EAAM,CAAC,EACnBgN,EAAOhN,EAAM,CAAC,GAAK,GACd,KAAK,eAAeyQ,CAAS,IAC9B,KAAK,eAAeA,CAAS,EAAI,CAAA,GAErC,KAAK,eAAeA,CAAS,EAAE,KAAK,CAChC,KAAMzD,EACN,QAASsD,CACzB,CAAa,EAEL,OAAO,IACf,EACI9B,EAAK,UAAU,IAAM,SAAU6B,EAAQrR,EAAU,CAC7C,IAAIuR,GAAUF,GAAU,IAAI,MAAMrC,CAAK,EAAG5S,EAAMmV,EAAO,OAAQlV,EAAGkG,EAAGiP,EAAOxQ,EAAOyQ,EAAWzD,EAC9F,GAAI,CAACqD,EACD,IAAK9O,KAAK,KAAK,eACX,KAAK,KAAKA,CAAC,EAGnB,IAAKlG,EAAI,EAAGA,EAAID,EAAKC,IAKjB,GAJAmV,EAAQD,EAAOlV,CAAC,EAChB2E,EAAQwQ,EAAM,MAAM,GAAG,EACvBC,EAAYzQ,EAAM,CAAC,EACnBgN,EAAOhN,EAAM,CAAC,EACVyQ,EACI,KAAK,eAAeA,CAAS,GAC7B,KAAK,KAAKA,EAAWzD,EAAMhO,CAAQ,MAIvC,KAAKuC,KAAK,KAAK,eACX,KAAK,KAAKA,EAAGyL,EAAMhO,CAAQ,EAIvC,OAAO,IACf,EACIwP,EAAK,UAAU,cAAgB,SAAUzK,EAAK,CAC1C,IAAIlL,EAAI,CACJ,OAAQ,KACR,KAAMkL,EAAI,KACV,IAAKA,CACjB,EACQ,YAAK,KAAKA,EAAI,KAAMlL,CAAC,EACd,IACf,EACI2V,EAAK,UAAU,iBAAmB,SAAUkC,EAAMJ,EAAS,CACvD,YAAK,GAAGI,EAAM,SAAU3M,EAAK,CACzBuM,EAAQ,KAAK,KAAMvM,EAAI,GAAG,CACtC,CAAS,EACM,IACf,EACIyK,EAAK,UAAU,oBAAsB,SAAUkC,EAAM,CACjD,YAAK,IAAIA,CAAI,EACN,IACf,EACIlC,EAAK,UAAU,UAAY,SAAUgC,EAAO3R,EAAUyR,EAAS,CAC3D,IAAIK,EAAW,KACf,KAAK,GAAGH,EAAO,SAAUzM,EAAK,CAE1B,QADI6M,EAAU7M,EAAI,OAAO,cAAclF,EAAU,GAAM8R,CAAQ,EACtDpV,EAAI,EAAGA,EAAIqV,EAAQ,OAAQrV,IAChCwI,EAAME,EAAO,KAAK,YAAYF,CAAG,EACjCA,EAAI,cAAgB6M,EAAQrV,CAAC,EAC7B+U,EAAQ,KAAKM,EAAQrV,CAAC,EAAGwI,CAAG,CAE5C,CAAS,CACT,EACIyK,EAAK,UAAU,OAAS,UAAY,CAChC,OAAI,KAAK,cACL,KAAK,SAAQ,EAEjB5B,EAAc,GAAG,cAAc,OAAO,KAAK,GAAG,EAC9C,KAAK,QAAO,EACL,IACf,EACI4B,EAAK,UAAU,aAAe,UAAY,CACtC,KAAK,6BAA6BnB,CAAkB,EACpD,KAAK,6BAA6BD,CAAgB,EAClD,KAAK,6BAA6BE,CAAc,EAChD,KAAK,6BAA6BW,CAAK,EACvC,KAAK,6BAA6BG,CAAO,EACzC,KAAK,6BAA6BT,CAAS,CACnD,EACIa,EAAK,UAAU,QAAU,UAAY,CACjC,KAAK,aAAY,EACjB,IAAI1N,EAAS,KAAK,UAAS,EACvBA,GAAUA,EAAO,WACjBA,EAAO,SAAS,OAAO,KAAK,MAAO,CAAC,EACpCA,EAAO,oBAAmB,EAC1B,KAAK,OAAS,KAE1B,EACI0N,EAAK,UAAU,QAAU,UAAY,CACjC3U,EAAQ,UAAU,KAAK,GAAE,EAAI,IAAI,EAEjC,QADIgX,GAAS,KAAK,KAAI,GAAM,IAAI,MAAM,KAAK,EAClCtV,EAAI,EAAGA,EAAIsV,EAAM,OAAQtV,IAAK,CACnC,IAAIuV,EAAUD,EAAMtV,CAAC,EACrB1B,EAAQ,YAAYiX,EAAS,KAAK,GAAG,CACjD,CACQ,YAAK,OAAM,EACJ,IACf,EACItC,EAAK,UAAU,QAAU,SAAUjK,EAAM,CACrC,IAAIgB,EAAS,MAAQtB,EAAO,KAAK,YAAYM,CAAI,EACjD,OAAIN,EAAO,KAAK,YAAY,KAAKsB,CAAM,CAAC,EAC7B,KAAKA,CAAM,EAAC,EAEhB,KAAK,MAAMhB,CAAI,CAC9B,EACIiK,EAAK,UAAU,aAAe,UAAY,CAEtC,QADI1N,EAAS,KAAK,UAAS,EAAIiQ,EAAY,IAAI9M,EAAO,WAC/CnD,GACHiQ,EAAU,KAAKjQ,CAAM,EACrBA,EAASA,EAAO,UAAS,EAE7B,OAAOiQ,CACf,EACIvC,EAAK,UAAU,SAAW,UAAY,CAClC,OAAO,KAAK,OAAS,CAAA,CAC7B,EACIA,EAAK,UAAU,SAAW,SAAU5C,EAAQ,CACxC,IAAIrS,EAAKgM,EACT,GAAI,CAACqG,EACD,OAAO,KAEX,IAAKrS,KAAOqS,EACJrS,IAAQkU,IAGZlI,EAASH,EAAMnB,EAAO,KAAK,YAAY1K,CAAG,EACtC0K,EAAO,KAAK,YAAY,KAAKsB,CAAM,CAAC,EACpC,KAAKA,CAAM,EAAEqG,EAAOrS,CAAG,CAAC,EAGxB,KAAK,SAASA,EAAKqS,EAAOrS,CAAG,CAAC,GAGtC,OAAO,IACf,EACIiV,EAAK,UAAU,YAAc,UAAY,CACrC,OAAO,KAAK,UAAUb,EAAW,KAAK,YAAY,CAC1D,EACIa,EAAK,UAAU,aAAe,UAAY,CACtC,IAAIwC,EAAY,KAAK,UAAS,EAAIlQ,EAAS,KAAK,UAAS,EACzD,OAAIkQ,IAAc,UACVlQ,EACOA,EAAO,YAAW,EAGlB,GAIJkQ,CAEnB,EACIxC,EAAK,UAAU,UAAY,UAAY,CACnC,OAAO,KAAK,UAAUJ,EAAS,KAAK,UAAU,CACtD,EACII,EAAK,UAAU,WAAa,SAAUyC,EAAY,CAC9C,IAAIC,EAAU,KAAK,QAAO,EAAIpQ,EAAS,KAAK,UAAS,EACrD,OAAIoQ,IAAY,UACRpQ,GAAUA,IAAWmQ,EACdnQ,EAAO,WAAWmQ,CAAU,EAG5B,GAGNA,GAAcA,IAAenQ,EAC3BoQ,GAAWpQ,EAAO,WAAWmQ,CAAU,EAGvCC,CAEnB,EACI1C,EAAK,UAAU,cAAgB,UAAY,CACvC,IAAI2C,EAAQ,KAAK,SAAQ,EACzB,MAAS,CAACA,GAAS,KAAK,YAAW,GAAM,KAAK,UAAS,GAClDA,GACGA,EAAM,gBAAe,GACrB,KAAK,YAAW,GAChB,KAAK,UAAS,CAC9B,EACI3C,EAAK,UAAU,KAAO,UAAY,CAC9B,YAAK,QAAQ,EAAI,EACV,IACf,EACIA,EAAK,UAAU,KAAO,UAAY,CAC9B,YAAK,QAAQ,EAAK,EACX,IACf,EACIA,EAAK,UAAU,UAAY,UAAY,CACnC,OAAO,KAAK,OAAS,CAC7B,EACIA,EAAK,UAAU,kBAAoB,UAAY,CAC3C,IAAI4C,EAAQ,KAAK,SAAQ,EAAItI,EAAO,KAAMuI,EAAQ,EAAGnE,EAAO9R,EAAKC,EAAGwF,EACpE,SAASyQ,EAAYC,EAAU,CAG3B,IAFArE,EAAQ,CAAA,EACR9R,EAAMmW,EAAS,OACVlW,EAAI,EAAGA,EAAID,EAAKC,IACjBwF,EAAQ0Q,EAASlW,CAAC,EAClBgW,IACIxQ,EAAM,WAAakN,IACnBb,EAAQA,EAAM,OAAOrM,EAAM,YAAW,EAAG,SAAS,GAElDA,EAAM,MAAQiI,EAAK,MACnBzN,EAAID,GAGR8R,EAAM,OAAS,GAAKA,EAAM,CAAC,EAAE,SAAQ,GAAMkE,GAC3CE,EAAYpE,CAAK,CAEjC,CACQ,OAAIpE,EAAK,WAAaqF,GAClBmD,EAAYxI,EAAK,SAAQ,EAAG,YAAW,CAAE,EAEtCuI,CACf,EACI7C,EAAK,UAAU,SAAW,UAAY,CAElC,QADI4C,EAAQ,EAAGtQ,EAAS,KAAK,OACtBA,GACHsQ,IACAtQ,EAASA,EAAO,OAEpB,OAAOsQ,CACf,EACI5C,EAAK,UAAU,uBAAyB,SAAU7S,EAAM,CACpD,KAAK,yBAA2B,GAChCA,EAAI,EACJ,KAAK,yBAA2B,GAC5B,KAAK,2BACL,KAAK,YAAYuS,CAAS,EAC1B,KAAK,6BAA6Bb,EAAoB,EAAI,GAE9D,KAAK,yBAA2B,EACxC,EACImB,EAAK,UAAU,YAAc,SAAUhC,EAAK,CACxC,IAAIL,EAAQ,KACZ,YAAK,uBAAuB,UAAY,CACpCA,EAAM,EAAEK,EAAI,CAAC,EACbL,EAAM,EAAEK,EAAI,CAAC,CACzB,CAAS,EACM,IACf,EACIgC,EAAK,UAAU,YAAc,UAAY,CACrC,MAAO,CACH,EAAG,KAAK,EAAC,EACT,EAAG,KAAK,EAAC,CACrB,CACA,EACIA,EAAK,UAAU,oBAAsB,SAAUW,EAAK,CAGhD,QAFIqC,EAAmB,GACnB1Q,EAAS,KAAK,OACXA,GAAQ,CACX,GAAIA,EAAO,WAAY,CACnB0Q,EAAmB,GACnB,KAChB,CACY1Q,EAASA,EAAO,MAC5B,CACY0Q,GAAoB,CAACrC,IACrBA,EAAM,IAEV,IAAIsC,EAAiB,KAAK,qBAAqBtC,CAAG,EAAE,UAAS,EAAIuC,EAAoB,IAAIzN,EAAO,UAAawG,EAAS,KAAK,OAAM,EACjI,OAAAiH,EAAkB,EAAID,EAAe,MAAK,EAC1CC,EAAkB,UAAUjH,EAAO,EAAGA,EAAO,CAAC,EACvCiH,EAAkB,eAAc,CAC/C,EACIlD,EAAK,UAAU,oBAAsB,SAAUhC,EAAK,CAChD,IAAImF,EAAY,KAAK,gBAAe,EAAIC,EACxC,YAAK,MAAM,EAAID,EAAU,EACzB,KAAK,MAAM,EAAIA,EAAU,EACzB,OAAOA,EAAU,EACjB,OAAOA,EAAU,EACjB,KAAK,YAAYzD,CAAS,EAC1B0D,EAAK,KAAK,sBAAqB,EAC/BA,EAAG,OAAM,EACTA,EAAG,UAAUpF,EAAI,EAAGA,EAAI,CAAC,EACzBA,EAAM,CACF,EAAG,KAAK,MAAM,EAAIoF,EAAG,eAAc,EAAG,EACtC,EAAG,KAAK,MAAM,EAAIA,EAAG,eAAc,EAAG,CAClD,EACQ,KAAK,cAAcD,CAAS,EAC5B,KAAK,YAAY,CAAE,EAAGnF,EAAI,EAAG,EAAGA,EAAI,EAAG,EAChC,IACf,EACIgC,EAAK,UAAU,cAAgB,SAAUiB,EAAO,CAC5C,IAAIlW,EACJ,IAAKA,KAAOkW,EACR,KAAK,MAAMlW,CAAG,EAAIkW,EAAMlW,CAAG,CAEvC,EACIiV,EAAK,UAAU,gBAAkB,UAAY,CACzC,IAAIiB,EAAQ,CACR,EAAG,KAAK,EAAC,EACT,EAAG,KAAK,EAAC,EACT,SAAU,KAAK,SAAQ,EACvB,OAAQ,KAAK,OAAM,EACnB,OAAQ,KAAK,OAAM,EACnB,QAAS,KAAK,QAAO,EACrB,QAAS,KAAK,QAAO,EACrB,MAAO,KAAK,MAAK,EACjB,MAAO,KAAK,MAAK,CAC7B,EACQ,YAAK,MAAM,EAAI,EACf,KAAK,MAAM,EAAI,EACf,KAAK,MAAM,SAAW,EACtB,KAAK,MAAM,OAAS,EACpB,KAAK,MAAM,OAAS,EACpB,KAAK,MAAM,QAAU,EACrB,KAAK,MAAM,QAAU,EACrB,KAAK,MAAM,MAAQ,EACnB,KAAK,MAAM,MAAQ,EACZA,CACf,EACIjB,EAAK,UAAU,KAAO,SAAUqD,EAAQ,CACpC,IAAIC,EAAUD,EAAO,EAAGE,EAAUF,EAAO,EAAG9V,EAAI,KAAK,EAAC,EAAIC,EAAI,KAAK,EAAC,EACpE,OAAI8V,IAAY,SACZ/V,GAAK+V,GAELC,IAAY,SACZ/V,GAAK+V,GAET,KAAK,YAAY,CAAE,EAAGhW,EAAG,EAAGC,EAAG,EACxB,IACf,EACIwS,EAAK,UAAU,qBAAuB,SAAU7S,EAAMwT,EAAK,CACvD,IAAI6C,EAAS,CAAA,EAAIlR,EAAS,KAAK,UAAS,EAAI1F,EAAKC,EACjD,GAAI8T,GAAOA,EAAI,MAAQ,KAAK,IAAK,CAC7BxT,EAAK,IAAI,EACT,MACZ,CAEQ,IADAqW,EAAO,QAAQ,IAAI,EACZlR,IAAW,CAACqO,GAAOrO,EAAO,MAAQqO,EAAI,MACzC6C,EAAO,QAAQlR,CAAM,EACrBA,EAASA,EAAO,OAGpB,IADA1F,EAAM4W,EAAO,OACR3W,EAAI,EAAGA,EAAID,EAAKC,IACjBM,EAAKqW,EAAO3W,CAAC,CAAC,CAE1B,EACImT,EAAK,UAAU,OAAS,SAAUyD,EAAO,CACrC,YAAK,SAAS,KAAK,SAAQ,EAAKA,CAAK,EAC9B,IACf,EACIzD,EAAK,UAAU,UAAY,UAAY,CACnC,GAAI,CAAC,KAAK,OACN,OAAAvK,EAAO,KAAK,KAAK,oDAAoD,EAC9D,GAEX,IAAIoN,EAAQ,KAAK,MACjB,YAAK,OAAO,SAAS,OAAOA,EAAO,CAAC,EACpC,KAAK,OAAO,SAAS,KAAK,IAAI,EAC9B,KAAK,OAAO,oBAAmB,EACxB,EACf,EACI7C,EAAK,UAAU,OAAS,UAAY,CAChC,GAAI,CAAC,KAAK,OACN,OAAAvK,EAAO,KAAK,KAAK,iDAAiD,EAC3D,GAEX,IAAIoN,EAAQ,KAAK,MAAOjW,EAAM,KAAK,OAAO,YAAW,EAAG,OACxD,OAAIiW,EAAQjW,EAAM,GACd,KAAK,OAAO,SAAS,OAAOiW,EAAO,CAAC,EACpC,KAAK,OAAO,SAAS,OAAOA,EAAQ,EAAG,EAAG,IAAI,EAC9C,KAAK,OAAO,oBAAmB,EACxB,IAEJ,EACf,EACI7C,EAAK,UAAU,SAAW,UAAY,CAClC,GAAI,CAAC,KAAK,OACN,OAAAvK,EAAO,KAAK,KAAK,mDAAmD,EAC7D,GAEX,IAAIoN,EAAQ,KAAK,MACjB,OAAIA,EAAQ,GACR,KAAK,OAAO,SAAS,OAAOA,EAAO,CAAC,EACpC,KAAK,OAAO,SAAS,OAAOA,EAAQ,EAAG,EAAG,IAAI,EAC9C,KAAK,OAAO,oBAAmB,EACxB,IAEJ,EACf,EACI7C,EAAK,UAAU,aAAe,UAAY,CACtC,GAAI,CAAC,KAAK,OACN,OAAAvK,EAAO,KAAK,KAAK,uDAAuD,EACjE,GAEX,IAAIoN,EAAQ,KAAK,MACjB,OAAIA,EAAQ,GACR,KAAK,OAAO,SAAS,OAAOA,EAAO,CAAC,EACpC,KAAK,OAAO,SAAS,QAAQ,IAAI,EACjC,KAAK,OAAO,oBAAmB,EACxB,IAEJ,EACf,EACI7C,EAAK,UAAU,UAAY,SAAU0D,EAAQ,CACzC,GAAI,CAAC,KAAK,OACN,OAAAjO,EAAO,KAAK,KAAK,kDAAkD,EAC5D,MAEPiO,EAAS,GAAKA,GAAU,KAAK,OAAO,SAAS,SAC7CjO,EAAO,KAAK,KAAK,oBACbiO,EACA,gHACC,KAAK,OAAO,SAAS,OAAS,GAC/B,GAAG,EAEX,IAAIb,EAAQ,KAAK,MACjB,YAAK,OAAO,SAAS,OAAOA,EAAO,CAAC,EACpC,KAAK,OAAO,SAAS,OAAOa,EAAQ,EAAG,IAAI,EAC3C,KAAK,OAAO,oBAAmB,EACxB,IACf,EACI1D,EAAK,UAAU,mBAAqB,UAAY,CAC5C,OAAO,KAAK,UAAUpB,EAAkB,KAAK,mBAAmB,CACxE,EACIoB,EAAK,UAAU,oBAAsB,UAAY,CAC7C,IAAIzG,EAAa,KAAK,QAAO,EACzBjH,EAAS,KAAK,UAAS,EAC3B,OAAIA,GAAU,CAACA,EAAO,gBAClBiH,GAAcjH,EAAO,mBAAkB,GAEpCiH,CACf,EACIyG,EAAK,UAAU,OAAS,SAAU2D,EAAc,CAC5C,OAAI,KAAK,UAAS,IAAOA,IACrB,KAAK,QAAO,EACZA,EAAa,IAAI,IAAI,GAElB,IACf,EACI3D,EAAK,UAAU,SAAW,UAAY,CAClC,IAAI7P,EAAM,CAAA,EAAIyT,EAAQ,KAAK,WAAY7Y,EAAKqF,EAAK6G,EAAQ4M,EAAcC,EACvE3T,EAAI,MAAQ,CAAA,EACZ,IAAKpF,KAAO6Y,EACRxT,EAAMwT,EAAM7Y,CAAG,EACf+Y,EACIrO,EAAO,KAAK,SAASrF,CAAG,GAAK,CAACqF,EAAO,KAAK,eAAerF,CAAG,GAAK,CAACqF,EAAO,KAAK,SAASrF,CAAG,EAC1F,CAAA0T,IAGJ7M,EAAS,OAAO,KAAKlM,CAAG,GAAM,YAAc,KAAKA,CAAG,EACpD,OAAO6Y,EAAM7Y,CAAG,EAChB8Y,EAAe5M,EAASA,EAAO,KAAK,IAAI,EAAI,KAC5C2M,EAAM7Y,CAAG,EAAIqF,EACTyT,IAAiBzT,IACjBD,EAAI,MAAMpF,CAAG,EAAIqF,IAGzB,OAAAD,EAAI,UAAY,KAAK,aAAY,EAC1BsF,EAAO,KAAK,oBAAoBtF,CAAG,CAClD,EACI6P,EAAK,UAAU,OAAS,UAAY,CAChC,OAAO,KAAK,UAAU,KAAK,SAAQ,CAAE,CAC7C,EACIA,EAAK,UAAU,UAAY,UAAY,CACnC,OAAO,KAAK,MACpB,EACIA,EAAK,UAAU,cAAgB,SAAU3P,EAAU0T,EAAa5B,EAAU,CACtE,IAAI6B,EAAM,CAAA,EACND,GAAe,KAAK,SAAS1T,CAAQ,GACrC2T,EAAI,KAAK,IAAI,EAGjB,QADIC,EAAW,KAAK,OACbA,GAAU,CACb,GAAIA,IAAa9B,EACb,OAAO6B,EAEPC,EAAS,SAAS5T,CAAQ,GAC1B2T,EAAI,KAAKC,CAAQ,EAErBA,EAAWA,EAAS,MAChC,CACQ,OAAOD,CACf,EACIhE,EAAK,UAAU,aAAe,SAAUrF,EAAM,CAC1C,MAAO,EACf,EACIqF,EAAK,UAAU,aAAe,SAAU3P,EAAU0T,EAAa5B,EAAU,CACrE,OAAO,KAAK,cAAc9R,EAAU0T,EAAa5B,CAAQ,EAAE,CAAC,CACpE,EACInC,EAAK,UAAU,SAAW,SAAU3P,EAAU,CAC1C,GAAI,CAACA,EACD,MAAO,GAEX,GAAI,OAAOA,GAAa,WACpB,OAAOA,EAAS,IAAI,EAExB,IAAI6T,EAAc7T,EAAS,QAAQ,KAAM,EAAE,EAAE,MAAM,GAAG,EAAGzD,EAAMsX,EAAY,OAAQrX,EAAGsX,EACtF,IAAKtX,EAAI,EAAGA,EAAID,EAAKC,IASjB,GARAsX,EAAMD,EAAYrX,CAAC,EACd4I,EAAO,KAAK,gBAAgB0O,CAAG,IAChC1O,EAAO,KAAK,KAAK,aACb0O,EACA,yEAAyE,EAC7E1O,EAAO,KAAK,KAAK,8GAA8G,EAC/HA,EAAO,KAAK,KAAK,0BAA0B,GAE3C0O,EAAI,OAAO,CAAC,IAAM,KAClB,GAAI,KAAK,GAAE,IAAOA,EAAI,MAAM,CAAC,EACzB,MAAO,WAGNA,EAAI,OAAO,CAAC,IAAM,KACvB,GAAI,KAAK,QAAQA,EAAI,MAAM,CAAC,CAAC,EACzB,MAAO,WAGN,KAAK,YAAcA,GAAO,KAAK,WAAaA,EACjD,MAAO,GAGf,MAAO,EACf,EACInE,EAAK,UAAU,SAAW,UAAY,CAClC,IAAI1N,EAAS,KAAK,UAAS,EAC3B,OAAOA,EAASA,EAAO,SAAQ,EAAK,IAC5C,EACI0N,EAAK,UAAU,SAAW,UAAY,CAClC,OAAO,KAAK,UAAUP,EAAO,KAAK,SAAS,CACnD,EACIO,EAAK,UAAU,UAAY,UAAY,CACnC,IAAI1N,EAAS,KAAK,UAAS,EAC3B,GAAIA,EACA,OAAOA,EAAO,SAAQ,CAKlC,EACI0N,EAAK,UAAU,KAAO,SAAUoE,EAAW7O,EAAK8O,EAAQ,CACpD,OAAI9O,IAAQ,SAAUA,EAAM,CAAA,GAC5BA,EAAI,OAASA,EAAI,QAAU,KACvB8O,EACA,KAAK,eAAeD,EAAW7O,CAAG,EAGlC,KAAK,MAAM6O,EAAW7O,CAAG,EAEtB,IACf,EACIyK,EAAK,UAAU,qBAAuB,SAAUW,EAAK,CACjD,OAAIA,EACO,KAAK,sBAAsBA,CAAG,EAG9B,KAAK,UAAU9B,EAAoB,KAAK,qBAAqB,CAEhF,EACImB,EAAK,UAAU,sBAAwB,SAAUW,EAAK,CAClD,IAAI2D,EACJ,GAAI3D,EACA,OAAA2D,EAAK,IAAI7O,EAAO,UAChB,KAAK,qBAAqB,SAAUkF,EAAM,CACtC,IAAI4J,EAAoB5J,EAAK,kBAAiB,EAC1C4J,IAAsB,MACtBD,EAAG,SAAS3J,EAAK,cAAc,EAE1B4J,IAAsB,YAC3BD,EAAG,UAAU3J,EAAK,EAAC,EAAKA,EAAK,QAAO,EAAIA,EAAK,EAAC,EAAKA,EAAK,QAAO,CAAE,CAErF,EAAegG,CAAG,EACC2D,EAGH,KAAK,OACLA,EAAK,KAAK,OAAO,qBAAoB,EAAG,KAAI,EAG5CA,EAAK,IAAI7O,EAAO,UAEpB,IAAI8O,EAAoB,KAAK,kBAAiB,EAC9C,OAAIA,IAAsB,MACtBD,EAAG,SAAS,KAAK,cAAc,EAE1BC,IAAsB,YAC3BD,EAAG,UAAU,KAAK,EAAC,EAAK,KAAK,QAAO,EAAI,KAAK,EAAC,EAAK,KAAK,QAAO,CAAE,EAE9DA,CAEnB,EACItE,EAAK,UAAU,iBAAmB,SAAUW,EAAK,CAE7C,QADIrO,EAAS,KACNA,GACCA,EAAO,gBACPqO,EAAMrO,GAEVA,EAASA,EAAO,UAAS,EAE7B,IAAIkS,EAAY,KAAK,qBAAqB7D,CAAG,EACzCiD,EAAQY,EAAU,UAAS,EAC/B,MAAO,CACH,EAAGZ,EAAM,OACT,EAAGA,EAAM,MACrB,CACA,EACI5D,EAAK,UAAU,oBAAsB,UAAY,CAC7C,OAAO,KAAK,uBAAuB,UAAS,EAAG,QACvD,EACIA,EAAK,UAAU,aAAe,UAAY,CACtC,OAAO,KAAK,UAAUN,EAAW,KAAK,aAAa,CAC3D,EACIM,EAAK,UAAU,cAAgB,UAAY,CACvC,IAAI3S,EAAI,IAAIoI,EAAO,UAAalI,EAAI,KAAK,EAAC,EAAIC,EAAI,KAAK,EAAC,EAAIiX,EAAWlY,EAAS,MAAM,SAAS,KAAK,SAAQ,CAAE,EAAG6P,EAAS,KAAK,OAAM,EAAIC,EAAS,KAAK,OAAM,EAAIqI,EAAQ,KAAK,MAAK,EAAIC,EAAQ,KAAK,MAAK,EAAIC,EAAU,KAAK,UAAWC,EAAU,KAAK,QAAO,EAC7P,OAAItX,IAAM,GAAKC,IAAM,IACjBH,EAAE,UAAUE,EAAGC,CAAC,EAEhBiX,IAAa,GACbpX,EAAE,OAAOoX,CAAQ,GAEjBC,IAAU,GAAKC,IAAU,IACzBtX,EAAE,KAAKqX,EAAOC,CAAK,GAEnBvI,IAAW,GAAKC,IAAW,IAC3BhP,EAAE,MAAM+O,EAAQC,CAAM,GAEtBuI,IAAY,GAAKC,IAAY,IAC7BxX,EAAE,UAAU,GAAKuX,EAAS,GAAKC,CAAO,EAEnCxX,CACf,EACI2S,EAAK,UAAU,MAAQ,SAAU7P,EAAK,CAClC,IAAIyT,EAAQnO,EAAO,KAAK,YAAY,KAAK,KAAK,EAAG1K,EAAK+Z,EAAclY,EAAKC,EAAGkY,EAC5E,IAAKha,KAAOoF,EACRyT,EAAM7Y,CAAG,EAAIoF,EAAIpF,CAAG,EAExB,IAAI4P,EAAO,IAAI,KAAK,YAAYiJ,CAAK,EACrC,IAAK7Y,KAAO,KAAK,eAGb,IAFA+Z,EAAe,KAAK,eAAe/Z,CAAG,EACtC6B,EAAMkY,EAAa,OACdjY,EAAI,EAAGA,EAAID,EAAKC,IACjBkY,EAAWD,EAAajY,CAAC,EACrBkY,EAAS,KAAK,QAAQ7F,CAAK,EAAI,IAC1BvE,EAAK,eAAe5P,CAAG,IACxB4P,EAAK,eAAe5P,CAAG,EAAI,CAAA,GAE/B4P,EAAK,eAAe5P,CAAG,EAAE,KAAKga,CAAQ,GAIlD,OAAOpK,CACf,EACIqF,EAAK,UAAU,eAAiB,SAAU5C,EAAQ,CAC9CA,EAASA,GAAU,CAAA,EACnB,IAAI4H,EAAM,KAAK,cAAa,EACxBjH,EAAQ,KAAK,SAAQ,EAAIxQ,EAAI6P,EAAO,IAAM,OAAYA,EAAO,EAAI4H,EAAI,EAAGxX,EAAI4P,EAAO,IAAM,OAAYA,EAAO,EAAI4H,EAAI,EAAG5L,EAAagE,EAAO,YAAc,EAAGzM,EAAS,IAAI8L,EAAS,YAAY,CAC9L,MAAOW,EAAO,OAAS4H,EAAI,QAAUjH,EAAQA,EAAM,MAAK,EAAK,GAC7D,OAAQX,EAAO,QAAU4H,EAAI,SAAWjH,EAAQA,EAAM,OAAM,EAAK,GACjE,WAAY3E,EACf,EAAG4D,EAAUrM,EAAO,WAAU,EAC/B,OAAAqM,EAAQ,KAAI,GACRzP,GAAKC,IACLwP,EAAQ,UAAU,GAAKzP,EAAG,GAAKC,CAAC,EAEpC,KAAK,UAAUmD,CAAM,EACrBqM,EAAQ,QAAO,EACRrM,CACf,EACIqP,EAAK,UAAU,SAAW,SAAU5C,EAAQ,CACxC,OAAO,KAAK,eAAeA,CAAM,EAAE,OAC3C,EACI4C,EAAK,UAAU,UAAY,SAAU5C,EAAQ,CACzCA,EAASA,GAAU,CAAA,EACnB,IAAIG,EAAWH,EAAO,UAAY,KAAMI,EAAUJ,EAAO,SAAW,KAChEtM,EAAM,KAAK,eAAesM,CAAM,EAAE,UAAUG,EAAUC,CAAO,EACjE,OAAIJ,EAAO,UACPA,EAAO,SAAStM,CAAG,EAEhBA,CACf,EACIkP,EAAK,UAAU,QAAU,SAAU5C,EAAQ,CACvC,GAAI,CAACA,GAAU,CAACA,EAAO,SACnB,KAAM,uDAEV,IAAI5M,EAAW4M,EAAO,SACtB,OAAOA,EAAO,SACd3H,EAAO,KAAK,YAAY,KAAK,UAAU2H,CAAM,EAAG,SAAU6H,EAAK,CAC3DzU,EAASyU,CAAG,CACxB,CAAS,CACT,EACIjF,EAAK,UAAU,QAAU,SAAUkF,EAAM,CACrC,YAAK,MAAMA,EAAK,KAAK,EACrB,KAAK,OAAOA,EAAK,MAAM,EAChB,IACf,EACIlF,EAAK,UAAU,QAAU,UAAY,CACjC,MAAO,CACH,MAAO,KAAK,MAAK,EACjB,OAAQ,KAAK,OAAM,CAC/B,CACA,EACIA,EAAK,UAAU,aAAe,UAAY,CACtC,OAAO,KAAK,WAAa,KAAK,QACtC,EACIA,EAAK,UAAU,QAAU,UAAY,CACjC,OAAO,KAAK,QACpB,EACIA,EAAK,UAAU,gBAAkB,UAAY,CACzC,OAAI,KAAK,MAAM,eAAiB,OACrB,KAAK,MAAM,aAEb,KAAK,OACH,KAAK,OAAO,gBAAe,EAG3BzT,EAAS,MAAM,YAElC,EACIyT,EAAK,UAAU,KAAO,SAAUkC,EAAM1D,EAAMhO,EAAU,CAClD,IAAI2U,EAAe,KAAK,eAAejD,CAAI,EAAGnV,EAAGqY,EAAStD,EAC1D,IAAK/U,EAAI,EAAGA,EAAIoY,EAAa,OAAQpY,IAGjC,GAFAqY,EAAUD,EAAapY,CAAC,EAAE,KAC1B+U,EAAUqD,EAAapY,CAAC,EAAE,SACrBqY,IAAY,SAAW5G,IAAS,WAChC,CAACA,GAAQ4G,IAAY5G,KACrB,CAAChO,GAAYA,IAAasR,GAAU,CAErC,GADAqD,EAAa,OAAOpY,EAAG,CAAC,EACpBoY,EAAa,SAAW,EAAG,CAC3B,OAAO,KAAK,eAAejD,CAAI,EAC/B,KACpB,CACgBnV,GAChB,CAEA,EACIiT,EAAK,UAAU,iBAAmB,SAAUjK,EAAMuB,EAAQ+N,EAAQ,CAC9D,KAAK,MAAMtP,EAAOiJ,EAAQ,CACtB,OAAQ1H,EACR,OAAQ+N,CACpB,CAAS,CACT,EACIrF,EAAK,UAAU,MAAQ,SAAUzB,EAAI,CACjC,IAAI+G,EAAQ,KAAK,GAAE,EACnB,OAAAja,EAAQ,UAAUia,EAAO,IAAI,EAC7BhH,EAAO,KAAMC,CAAE,EACf,KAAK,SAAS,KAAMA,CAAE,EACf,IACf,EACIyB,EAAK,UAAU,QAAU,SAAUxB,EAAM,CACrC,IAAI+G,GAAY,KAAK,KAAI,GAAM,IAAI,MAAM,KAAK,EAC1CC,GAAYhH,GAAQ,IAAI,MAAM,KAAK,EACnC8D,EAASvV,EACb,IAAKA,EAAI,EAAGA,EAAIwY,EAAS,OAAQxY,IAC7BuV,EAAUiD,EAASxY,CAAC,EAChByY,EAAS,QAAQlD,CAAO,IAAM,IAAMA,GACpCjX,EAAQ,YAAYiX,EAAS,KAAK,GAAG,EAG7C,IAAKvV,EAAI,EAAGA,EAAIyY,EAAS,OAAQzY,IAC7BuV,EAAUkD,EAASzY,CAAC,EAChBwY,EAAS,QAAQjD,CAAO,IAAM,IAAMA,GACpCjX,EAAQ,SAAS,KAAMiX,CAAO,EAGtC,YAAK,SAAShD,EAAMd,CAAI,EACjB,IACf,EACIwB,EAAK,UAAU,QAAU,SAAUxB,EAAM,CACrC,GAAI,CAAC,KAAK,QAAQA,CAAI,EAAG,CACrB,IAAIiH,EAAU,KAAK,KAAI,EACnBC,EAAUD,EAAUA,EAAU,IAAMjH,EAAOA,EAC/C,KAAK,QAAQkH,CAAO,CAChC,CACQ,OAAO,IACf,EACI1F,EAAK,UAAU,QAAU,SAAUxB,EAAM,CACrC,GAAI,CAACA,EACD,MAAO,GAEX,IAAImH,EAAW,KAAK,KAAI,EACxB,GAAI,CAACA,EACD,MAAO,GAEX,IAAItD,GAASsD,GAAY,IAAI,MAAM,KAAK,EACxC,OAAOtD,EAAM,QAAQ7D,CAAI,IAAM,EACvC,EACIwB,EAAK,UAAU,WAAa,SAAUxB,EAAM,CACxC,IAAI6D,GAAS,KAAK,KAAI,GAAM,IAAI,MAAM,KAAK,EACvCQ,EAAQR,EAAM,QAAQ7D,CAAI,EAC9B,OAAIqE,IAAU,KACVR,EAAM,OAAOQ,EAAO,CAAC,EACrB,KAAK,QAAQR,EAAM,KAAK,GAAG,CAAC,GAEzB,IACf,EACIrC,EAAK,UAAU,QAAU,SAAUjK,EAAM3F,EAAK,CAC1C,IAAIjD,EAAO,KAAKyJ,EAAMnB,EAAO,KAAK,YAAYM,CAAI,CAAC,EACnD,OAAIN,EAAO,KAAK,YAAYtI,CAAI,EAC5BA,EAAK,KAAK,KAAMiD,CAAG,EAGnB,KAAK,SAAS2F,EAAM3F,CAAG,EAEpB,IACf,EACI4P,EAAK,UAAU,SAAW,SAAUjV,EAAKqF,EAAK,CAC1C,IAAIkH,EAAS,KAAK,MAAMvM,CAAG,EACvBuM,IAAWlH,GAAO,CAACqF,EAAO,KAAK,SAASrF,CAAG,IAGtBA,GAAQ,KAC7B,OAAO,KAAK,MAAMrF,CAAG,EAGrB,KAAK,MAAMA,CAAG,EAAIqF,EAEtB,KAAK,iBAAiBrF,EAAKuM,EAAQlH,CAAG,EAC9C,EACI4P,EAAK,UAAU,kBAAoB,SAAUjV,EAAKoM,EAAW/G,EAAK,CAC9D,IAAIkH,EACAlH,IAAQ,SACRkH,EAAS,KAAK,MAAMvM,CAAG,EAClBuM,IACD,KAAK,MAAMvM,CAAG,EAAI,KAAK,QAAQA,CAAG,GAEtC,KAAK,MAAMA,CAAG,EAAEoM,CAAS,EAAI/G,EAC7B,KAAK,iBAAiBrF,EAAKuM,EAAQlH,CAAG,EAElD,EACI4P,EAAK,UAAU,eAAiB,SAAUoE,EAAW7O,EAAKqQ,EAAc,CAChErQ,GAAO,KAAK,WAAagK,IACzBhK,EAAI,OAAS,MAEjB,IAAIsQ,GAAczB,IAAchF,GAAcgF,IAAc/E,KACtDuG,IACG,OAASA,GACL,KAAK,cAAgB,KAAK,aAAaA,CAAY,IACvD,KAAK,WAAa,SAAW,CAACA,GACvC,GAAI,CAACC,EAAY,CACb,KAAK,MAAMzB,EAAW7O,CAAG,EACzB,IAAIuQ,GAAc1B,IAAchF,GAAcgF,IAAc/E,IACxDuG,GACAA,EAAa,cACbA,EAAa,aAAa,IAAI,GAC9B,CAACA,EAAa,aAAa,KAAK,MAAM,GACpCrQ,GAAO,CAACA,EAAI,cAAiB,CAACA,IAChC,KAAK,QACL,KAAK,OAAO,YAAW,GACvB,CAACuQ,IACGF,GAAgBA,EAAa,OAC7B,KAAK,eAAe,KAAK,KAAK,OAAQxB,EAAW7O,EAAKqQ,CAAY,EAGlE,KAAK,eAAe,KAAK,KAAK,OAAQxB,EAAW7O,CAAG,EAGxE,CACA,EACIyK,EAAK,UAAU,MAAQ,SAAUoE,EAAW7O,EAAK,CAC7C,IAAIwM,EAAS,KAAK,eAAeqC,CAAS,EAAGrX,EAC7C,GAAIgV,EAIA,IAHAxM,EAAMA,GAAO,CAAA,EACbA,EAAI,cAAgB,KACpBA,EAAI,KAAO6O,EACNrX,EAAI,EAAGA,EAAIgV,EAAO,OAAQhV,IAC3BgV,EAAOhV,CAAC,EAAE,QAAQ,KAAK,KAAMwI,CAAG,CAGhD,EACIyK,EAAK,UAAU,KAAO,UAAY,CAC9B,YAAK,UAAS,EACd,KAAK,QAAO,EACL,IACf,EACIA,EAAK,UAAU,mBAAqB,SAAUzK,EAAK,CAC/C,IAAIwQ,EAAYxQ,EAAMA,EAAI,UAAY,OAClCwI,EAAQ,KAAK,SAAQ,EACrBiI,EAAK,KAAK,oBAAmB,EAC7BhI,EAAMD,EAAM,gBAAgBgI,CAAS,GACrChI,EAAM,yBAAyB,CAAC,GAChCiI,EACJ5H,EAAc,GAAG,cAAc,IAAI,KAAK,IAAK,CACzC,KAAM,KACN,gBAAiBJ,EACjB,OAAQ,CACJ,EAAGA,EAAI,EAAIgI,EAAG,EACd,EAAGhI,EAAI,EAAIgI,EAAG,GAElB,WAAY,QACZ,UAAWD,CACvB,CAAS,CACT,EACI/F,EAAK,UAAU,UAAY,SAAUzK,EAAK,CACjC6I,EAAc,GAAG,cAAc,IAAI,KAAK,GAAG,GAC5C,KAAK,mBAAmB7I,CAAG,EAE/B,IAAIuI,EAAOM,EAAc,GAAG,cAAc,IAAI,KAAK,GAAG,EACtDN,EAAK,WAAa,WAClB,KAAK,KAAK,YAAa,CACnB,KAAM,YACN,OAAQ,KACR,IAAKvI,GAAOA,EAAI,KACjB,EAAI,CACf,EACIyK,EAAK,UAAU,iBAAmB,SAAUzK,EAAKuI,EAAM,CACnD,IAAIE,EAAM,KAAK,SAAQ,EAAG,gBAAgBF,EAAK,SAAS,EACxD,GAAKE,EAGL,KAAIiI,EAAa,CACb,EAAGjI,EAAI,EAAIF,EAAK,OAAO,EACvB,EAAGE,EAAI,EAAIF,EAAK,OAAO,CACnC,EACYoI,EAAM,KAAK,cAAa,EAC5B,GAAIA,IAAQ,OAAW,CACnB,IAAIC,EAAUD,EAAI,KAAK,KAAMD,EAAY1Q,CAAG,EACvC4Q,EAIDF,EAAaE,EAHb1Q,EAAO,KAAK,KAAK,gIAAgI,CAKjK,EACY,CAAC,KAAK,UACN,KAAK,SAAS,IAAMwQ,EAAW,GAC/B,KAAK,SAAS,IAAMA,EAAW,KAC/B,KAAK,oBAAoBA,CAAU,EAC/B,KAAK,WACL,KAAK,SAAQ,EAAG,UAAS,EAEpB,KAAK,YACV,KAAK,SAAQ,EAAG,UAAS,GAGjC,KAAK,SAAWA,EACxB,EACIjG,EAAK,UAAU,SAAW,SAAUzK,EAAK,CACrC,IAAIuI,EAAOM,EAAc,GAAG,cAAc,IAAI,KAAK,GAAG,EAClDN,IACAA,EAAK,WAAa,WAEtBM,EAAc,GAAG,eAAe7I,CAAG,EACnC6I,EAAc,GAAG,cAAc7I,CAAG,CAC1C,EACIyK,EAAK,UAAU,aAAe,SAAUoG,EAAW,CAC/C,KAAK,SAAS,YAAaA,CAAS,EACpC,KAAK,YAAW,CACxB,EACIpG,EAAK,UAAU,WAAa,UAAY,CACpC,IAAIlC,EAAOM,EAAc,GAAG,cAAc,IAAI,KAAK,GAAG,EACtD,OAAON,EAAOA,EAAK,aAAe,WAAa,EACvD,EACIkC,EAAK,UAAU,YAAc,UAAY,CACrC,KAAK,aAAY,EACjB,KAAK,GAAG,mCAAoC,SAAUzK,EAAK,CACvD,IAAIoI,EAAQ,KACR0I,EAAoB9Q,EAAI,IAAI,SAAc,OAC1C+Q,EAAU,CAACD,GAAqB9Z,EAAS,MAAM,YAAY,QAAQgJ,EAAI,IAAI,MAAS,GAAK,EAC7F,GAAK+Q,GAGD,MAAK,aAGT,KAAIC,EAAmB,GACvBnI,EAAc,GAAG,cAAc,QAAQ,SAAUN,EAAM,CAC/CH,EAAM,aAAaG,EAAK,IAAI,IAC5ByI,EAAmB,GAEvC,CAAa,EACIA,GACD,KAAK,mBAAmBhR,CAAG,EAE3C,CAAS,CACT,EACIyK,EAAK,UAAU,YAAc,UAAY,CACrC,GAAI,KAAK,MAAM,UACX,KAAK,YAAW,MAEf,CACD,KAAK,aAAY,EACjB,IAAIjC,EAAQ,KAAK,SAAQ,EACrBA,GAASK,EAAc,GAAG,cAAc,IAAI,KAAK,GAAG,GACpD,KAAK,SAAQ,CAE7B,CACA,EACI4B,EAAK,UAAU,aAAe,UAAY,CACtC,KAAK,IAAI,iBAAiB,EAC1B,KAAK,IAAI,kBAAkB,CACnC,EACIA,EAAK,OAAS,SAAUwG,EAAMC,EAAW,CACrC,OAAIhR,EAAO,KAAK,UAAU+Q,CAAI,IAC1BA,EAAO,KAAK,MAAMA,CAAI,GAEnB,KAAK,YAAYA,EAAMC,CAAS,CAC/C,EACIzG,EAAK,YAAc,SAAU7P,EAAKsW,EAAW,CACzC,IAAIC,EAAY1G,EAAK,UAAU,aAAa,KAAK7P,CAAG,EAAG4S,EAAW5S,EAAI,SAAUwO,EAAI/R,EAAKC,EACrF4Z,IACAtW,EAAI,MAAM,UAAYsW,GAErBla,EAAS,gBAAgBma,CAAS,IACnCjR,EAAO,KAAK,KAAK,wCACbiR,EACA,yBAAyB,EAC7BA,EAAY,SAEhB,IAAIC,EAAQpa,EAAS,gBAAgBma,CAAS,EAE9C,GADA/H,EAAK,IAAIgI,EAAMxW,EAAI,KAAK,EACpB4S,EAEA,IADAnW,EAAMmW,EAAS,OACVlW,EAAI,EAAGA,EAAID,EAAKC,IACjB8R,EAAG,IAAIqB,EAAK,YAAY+C,EAASlW,CAAC,CAAC,CAAC,EAG5C,OAAO8R,CACf,EACWqB,CACX,IACA3U,EAAA,KAAe2U,EACfA,EAAK,UAAU,SAAW,OAC1BA,EAAK,UAAU,oBAAsB,CAAA,EACrCrD,EAAU,QAAQ,gBAAgBqD,EAAM,QAAQ,EAChDrD,EAAU,QAAQ,gBAAgBqD,EAAM,kBAAkB,EAC1DrD,EAAU,QAAQ,gBAAgBqD,EAAM,UAAU,EAClDrD,EAAU,QAAQ,gBAAgBqD,EAAM,IAAK,EAAGtJ,EAAa,oBAAoB,EACjFiG,EAAU,QAAQ,gBAAgBqD,EAAM,IAAK,EAAGtJ,EAAa,oBAAoB,EACjFiG,EAAU,QAAQ,gBAAgBqD,EAAM,2BAA4B,cAAetJ,EAAa,oBAAoB,EACpHiG,EAAU,QAAQ,gBAAgBqD,EAAM,UAAW,EAAGtJ,EAAa,oBAAoB,EACvFiG,EAAU,QAAQ,gBAAgBqD,EAAM,OAAQ,GAAItJ,EAAa,oBAAoB,EACrFiG,EAAU,QAAQ,gBAAgBqD,EAAM,KAAM,GAAItJ,EAAa,oBAAoB,EACnFiG,EAAU,QAAQ,gBAAgBqD,EAAM,WAAY,EAAGtJ,EAAa,oBAAoB,EACxFiG,EAAU,QAAQ,0BAA0BqD,EAAM,QAAS,CAAC,IAAK,GAAG,CAAC,EACrErD,EAAU,QAAQ,gBAAgBqD,EAAM,SAAU,EAAGtJ,EAAa,oBAAoB,EACtFiG,EAAU,QAAQ,gBAAgBqD,EAAM,SAAU,EAAGtJ,EAAa,oBAAoB,EACtFiG,EAAU,QAAQ,0BAA0BqD,EAAM,OAAQ,CAAC,IAAK,GAAG,CAAC,EACpErD,EAAU,QAAQ,gBAAgBqD,EAAM,QAAS,EAAGtJ,EAAa,oBAAoB,EACrFiG,EAAU,QAAQ,gBAAgBqD,EAAM,QAAS,EAAGtJ,EAAa,oBAAoB,EACrFiG,EAAU,QAAQ,0BAA0BqD,EAAM,SAAU,CAAC,IAAK,GAAG,CAAC,EACtErD,EAAU,QAAQ,gBAAgBqD,EAAM,UAAW,EAAGtJ,EAAa,oBAAoB,EACvFiG,EAAU,QAAQ,gBAAgBqD,EAAM,UAAW,EAAGtJ,EAAa,oBAAoB,EACvFiG,EAAU,QAAQ,gBAAgBqD,EAAM,eAAgB,KAAMtJ,EAAa,oBAAoB,EAC/FiG,EAAU,QAAQ,gBAAgBqD,EAAM,QAAS,EAAGtJ,EAAa,oBAAoB,EACrFiG,EAAU,QAAQ,gBAAgBqD,EAAM,SAAU,EAAGtJ,EAAa,oBAAoB,EACtFiG,EAAU,QAAQ,gBAAgBqD,EAAM,YAAa,UAAW,SAAU5P,EAAK,CAC3E,IAAIwW,EAAUxW,IAAQ,IAAQA,IAAQ,IAASA,IAAQ,UACvD,OAAKwW,GACDnR,EAAO,KAAK,KAAKrF,EACb,6FAA6F,EAE9FA,CACX,CAAC,EACDuM,EAAU,QAAQ,gBAAgBqD,EAAM,iBAAkB,GAAMtJ,EAAa,qBAAqB,EAClGiG,EAAU,QAAQ,gBAAgBqD,EAAM,UAAW,KAAM,SAAU5P,EAAK,CACpE,YAAK,gBAAkB,GAChBA,CACX,CAAC,EACDuM,EAAU,QAAQ,gBAAgBqD,EAAM,UAAW,UAAW,SAAU5P,EAAK,CACzE,IAAIwW,EAAUxW,IAAQ,IAAQA,IAAQ,IAASA,IAAQ,UACvD,OAAKwW,GACDnR,EAAO,KAAK,KAAKrF,EACb,2FAA2F,EAE5FA,CACX,CAAC,EACDuM,EAAU,QAAQ,gBAAgBqD,EAAM,oBAAqB,MAAOtJ,EAAa,oBAAoB,EACrGiG,EAAU,QAAQ,gBAAgBqD,EAAM,MAAM,EAC9CrD,EAAU,QAAQ,gBAAgBqD,EAAM,eAAe,EACvDrD,EAAU,QAAQ,gBAAgBqD,EAAM,YAAa,GAAOtJ,EAAa,qBAAqB,EAC9FiG,EAAU,QAAQ,WAAWqD,EAAM,CAC/B,UAAW,SACX,eAAgB,cAChB,eAAgB,aACpB,CAAC,EACDvK,EAAO,WAAW,WAAWuK,CAAI,kBCl2C7BjI,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAe2O,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIpR,GAASjJ,EACTmQ,GAAYjH,EACZoR,GAASpK,GACT0B,GAAgBxB,GAChBlG,GAAemG,EACftQ,GAAW8R,EACX0I,GAAa,SAAUjM,EAAQ,CAC/B/C,GAAUgP,EAAWjM,CAAM,EAC3B,SAASiM,GAAY,CACjB,IAAIpJ,EAAQ7C,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAA6C,EAAM,SAAW,IAAIlI,GAAO,WACrBkI,CACf,CACI,OAAAoJ,EAAU,UAAU,YAAc,SAAUC,EAAY,CACpD,GAAI,CAACA,EACD,OAAO,KAAK,SAEhB,IAAIC,EAAU,IAAIxR,GAAO,WACzB,YAAK,SAAS,KAAK,SAAUpD,EAAO,CAC5B2U,EAAW3U,CAAK,GAChB4U,EAAQ,KAAK5U,CAAK,CAElC,CAAS,EACM4U,CACf,EACIF,EAAU,UAAU,YAAc,UAAY,CAC1C,OAAO,KAAK,cAAc,OAAS,CAC3C,EACIA,EAAU,UAAU,eAAiB,UAAY,CAE7C,QADI1U,EACKtF,EAAI,EAAGA,EAAI,KAAK,SAAS,OAAQA,IACtCsF,EAAQ,KAAK,SAAStF,CAAC,EACvBsF,EAAM,OAAS,KACfA,EAAM,MAAQ,EACdA,EAAM,OAAM,EAEhB,YAAK,SAAW,IAAIoD,GAAO,WACpB,IACf,EACIsR,EAAU,UAAU,gBAAkB,UAAY,CAE9C,QADI1U,EACKtF,EAAI,EAAGA,EAAI,KAAK,SAAS,OAAQA,IACtCsF,EAAQ,KAAK,SAAStF,CAAC,EACvBsF,EAAM,OAAS,KACfA,EAAM,MAAQ,EACdA,EAAM,QAAO,EAEjB,YAAK,SAAW,IAAIoD,GAAO,WACpB,IACf,EACIsR,EAAU,UAAU,IAAM,UAAY,CAElC,QADIhE,EAAW,CAAA,EACNmE,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCnE,EAASmE,CAAE,EAAI,UAAUA,CAAE,EAE/B,GAAI,UAAU,OAAS,EAAG,CACtB,QAAS,EAAI,EAAG,EAAI,UAAU,OAAQ,IAClC,KAAK,IAAI,UAAU,CAAC,CAAC,EAEzB,OAAO,IACnB,CACQ,IAAI7U,EAAQ0Q,EAAS,CAAC,EACtB,GAAI1Q,EAAM,YACN,OAAAA,EAAM,OAAO,IAAI,EACV,KAEX,IAAI8U,EAAY,KAAK,SACrB,YAAK,aAAa9U,CAAK,EACvBA,EAAM,aAAY,EAClBA,EAAM,MAAQ8U,EAAU,OACxB9U,EAAM,OAAS,KACf8U,EAAU,KAAK9U,CAAK,EACpB,KAAK,MAAM,MAAO,CACd,MAAOA,CACnB,CAAS,EACM,IACf,EACI0U,EAAU,UAAU,QAAU,UAAY,CACtC,OAAI,KAAK,eACL,KAAK,gBAAe,EAExBjM,EAAO,UAAU,QAAQ,KAAK,IAAI,EAC3B,IACf,EACIiM,EAAU,UAAU,KAAO,SAAU1W,EAAU,CAC3C,OAAO,KAAK,aAAaA,EAAU,EAAK,CAChD,EACI0W,EAAU,UAAU,IAAM,SAAU1W,EAAU,CAC1CoF,OAAAA,GAAO,KAAK,KAAK,8EAA8E,EACxF,KAAK,KAAKpF,CAAQ,CACjC,EACI0W,EAAU,UAAU,QAAU,SAAU1W,EAAU,CAC9C,IAAInB,EAAS,KAAK,aAAamB,EAAU,EAAI,EAC7C,OAAOnB,EAAO,OAAS,EAAIA,EAAO,CAAC,EAAI,MAC/C,EACI6X,EAAU,UAAU,aAAe,SAAU1W,EAAU+W,EAAS,CAC5D,IAAIxW,EAAS,CAAA,EACb,YAAK,aAAa,SAAU+J,EAAM,CAC9B,IAAI0M,EAAQ1M,EAAK,SAAStK,CAAQ,EAIlC,OAHIgX,GACAzW,EAAO,KAAK+J,CAAI,EAEhB,GAAA0M,GAASD,EAIzB,CAAS,EACM3R,GAAO,WAAW,aAAa7E,CAAM,CACpD,EACImW,EAAU,UAAU,aAAe,SAAUO,EAAI,CAE7C,QADIzB,EAAa,GACR,EAAI,EAAG,EAAI,KAAK,SAAS,OAAQ,IAAK,CAC3C,IAAIxT,EAAQ,KAAK,SAAS,CAAC,EAE3B,GADAwT,EAAayB,EAAGjV,CAAK,EACjBwT,EACA,MAAO,GAEX,GAAKxT,EAAM,gBAGXwT,EAAaxT,EAAM,aAAaiV,CAAE,EAC9BzB,GACA,MAAO,EAEvB,CACQ,MAAO,EACf,EACIkB,EAAU,UAAU,SAAW,UAAY,CACvC,IAAI5W,EAAM2W,GAAO,KAAK,UAAU,SAAS,KAAK,IAAI,EAClD3W,EAAI,SAAW,CAAA,EAGf,QAFI4S,EAAW,KAAK,YAAW,EAC3BnW,EAAMmW,EAAS,OACV,EAAI,EAAG,EAAInW,EAAK,IAAK,CAC1B,IAAIyF,EAAQ0Q,EAAS,CAAC,EACtB5S,EAAI,SAAS,KAAKkC,EAAM,SAAQ,CAAE,CAC9C,CACQ,OAAOlC,CACf,EACI4W,EAAU,UAAU,aAAe,SAAUpM,EAAM,CAE/C,QADIrI,EAASqI,EAAK,UAAS,EACpBrI,GAAQ,CACX,GAAIA,EAAO,MAAQ,KAAK,IACpB,MAAO,GAEXA,EAASA,EAAO,UAAS,CACrC,CACQ,MAAO,EACf,EACIyU,EAAU,UAAU,MAAQ,SAAU5W,EAAK,CACvC,IAAIwK,EAAOmM,GAAO,KAAK,UAAU,MAAM,KAAK,KAAM3W,CAAG,EACrD,YAAK,YAAW,EAAG,KAAK,SAAUwO,EAAI,CAClChE,EAAK,IAAIgE,EAAG,OAAO,CAC/B,CAAS,EACMhE,CACf,EACIoM,EAAU,UAAU,oBAAsB,SAAU/I,EAAK,CACrD,IAAItR,EAAM,CAAA,EACV,YAAK,KAAK,OAAO,EAAE,KAAK,SAAUsM,EAAO,CACjCA,EAAM,UAAS,GAAMA,EAAM,WAAWgF,CAAG,GACzCtR,EAAI,KAAKsM,CAAK,CAE9B,CAAS,EACMtM,CACf,EACIqa,EAAU,UAAU,oBAAsB,UAAY,CAClD,KAAK,SAAS,KAAK,SAAU1U,EAAOxF,EAAG,CACnCwF,EAAM,MAAQxF,CAC1B,CAAS,CACT,EACIka,EAAU,UAAU,UAAY,SAAUQ,EAAK5G,EAAK6G,EAAS,CACzD,IAAI7E,EAAQ,KAAK,WAAYhS,EAAS4W,GAAQ5E,GAASA,EAAM,UAAS,EAAK3F,EAAUrM,GAAUA,EAAO,WAAU,EAAI4Q,EAAe,KAAK,gBAAe,EAAIjB,EAAoBiB,GAAgBA,EAAa,MAC5M,OAAI,KAAK,UAAS,GAAMiG,KAChB,CAACA,GAAWlH,GACZtD,EAAQ,KAAI,EACZ2F,EAAM,gBAAgB,KAAM3F,EAAS2D,CAAG,EACxC,KAAK,uBAAuB3D,CAAO,EACnCA,EAAQ,QAAO,GAGf,KAAK,cAAcrM,EAAQ,YAAagQ,EAAK,GAAO6G,EAASA,CAAO,GAGrE,IACf,EACIT,EAAU,UAAU,QAAU,SAAUQ,EAAK5G,EAAK6G,EAAS,CACvD,IAAI7E,EAAQ,KAAK,WAAYhS,EAAS4W,GAAQ5E,GAASA,EAAM,UAAY3F,EAAUrM,GAAUA,EAAO,WAAU,EAAI4Q,EAAe,KAAK,gBAAe,EAAIf,EAAkBe,GAAgBA,EAAa,IACxM,OAAI,KAAK,cAAc5Q,CAAM,GAAK6W,KAC1B,CAACA,GAAWhH,GACZxD,EAAQ,KAAI,EACZ2F,EAAM,gBAAgB,KAAM3F,EAAS2D,CAAG,EACxC,KAAK,qBAAqB3D,CAAO,EACjCA,EAAQ,QAAO,GAGf,KAAK,cAAcrM,EAAQ,UAAWgQ,EAAK,GAAO6G,EAASA,CAAO,GAGnE,IACf,EACIT,EAAU,UAAU,cAAgB,SAAUpW,EAAQ8W,EAAY9G,EAAK6G,EAASE,EAAYC,EAAiB,CACzG,IAAIhF,EAAQ,KAAK,SAAQ,EAAI3F,EAAUrM,GAAUA,EAAO,WAAU,EAAIiX,EAAY,KAAK,UAAS,EAAIC,EAAa,KAAK,WAAU,EAAIC,EAAW,KAAK,SAAQ,EAAIC,EAAWH,GAAaC,GAAeC,EAAUE,EAAOC,EACxN,GAAIF,GAAWpF,EAAO,CAClB3F,EAAQ,KAAI,EACZ,IAAIwH,EAAY,KAAK,qBAAqB7D,CAAG,EACzCtT,EAAImX,EAAU,UAAS,EAC3BxH,EAAQ,UAAU3P,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,EACpD2P,EAAQ,UAAS,EACb8K,EACAA,EAAS,KAAK,KAAM9K,EAAS,IAAI,GAGjCgL,EAAQ,KAAK,MAAK,EAClBC,EAAQ,KAAK,MAAK,EAClBjL,EAAQ,KAAKgL,EAAOC,EAAOL,EAAWC,CAAU,GAEpD7K,EAAQ,KAAI,EACZ3P,EAAImX,EACC,KAAI,EACJ,OAAM,EACN,UAAS,EACdxH,EAAQ,UAAU3P,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,CAChE,CACQ,IAAI6a,EAAiB,KAAK,yBAAwB,IAAO,eACrD,CAACP,GACDF,IAAe,YACfS,GAAkBvF,IAClB3F,EAAQ,KAAI,EACZA,EAAQ,+BAA+B,IAAI,GAE/C,KAAK,SAAS,KAAK,SAAU3K,EAAO,CAChCA,EAAMoV,CAAU,EAAE9W,EAAQgQ,EAAK6G,EAASE,CAAU,CAC9D,CAAS,EACGQ,GAAkBvF,GAClB3F,EAAQ,QAAO,EAEf+K,GAAWpF,GACX3F,EAAQ,QAAO,CAE3B,EACI+J,EAAU,UAAU,cAAgB,SAAUpW,EAAQ,CAClD,GAAIA,GAAUA,EAAO,QACjB,MAAO,GAEX,IAAIgS,EAAQ,KAAK,SAAQ,EACrBwF,EAAiB,GACrB/J,GAAc,GAAG,cAAc,QAAQ,SAAUN,EAAM,CAC/CA,EAAK,aAAe,YAAcA,EAAK,KAAK,SAAQ,IAAO6E,IAC3DwF,EAAiB,GAEjC,CAAS,EACD,IAAIC,EAAW,CAAC7b,GAAS,MAAM,kBAAoB4b,EACnD,OAAOxF,GAASA,EAAM,gBAAe,GAAM,KAAK,UAAS,GAAM,CAACyF,CACxE,EACIrB,EAAU,UAAU,cAAgB,SAAU3J,EAAQ,CAClDA,EAASA,GAAU,CAAA,EACnB,IAAIiL,EAAgBjL,EAAO,cACvBqF,EAAarF,EAAO,WACpByD,EAAMC,EAAMC,EAAMC,EAClBsH,EAAW,CACX,EAAG,IACH,EAAG,IACH,MAAO,EACP,OAAQ,CACpB,EACYhO,EAAO,KACX,KAAK,SAAS,KAAK,SAAUjI,EAAO,CAChC,GAAKA,EAAM,UAGX,KAAI+N,EAAO/N,EAAM,cAAc,CAC3B,WAAYiI,EACZ,WAAY8C,EAAO,WACnB,WAAYA,EAAO,UACnC,CAAa,EACGgD,EAAK,QAAU,GAAKA,EAAK,SAAW,IAGpCS,IAAS,QACTA,EAAOT,EAAK,EACZU,EAAOV,EAAK,EACZW,EAAOX,EAAK,EAAIA,EAAK,MACrBY,EAAOZ,EAAK,EAAIA,EAAK,SAGrBS,EAAO,KAAK,IAAIA,EAAMT,EAAK,CAAC,EAC5BU,EAAO,KAAK,IAAIA,EAAMV,EAAK,CAAC,EAC5BW,EAAO,KAAK,IAAIA,EAAMX,EAAK,EAAIA,EAAK,KAAK,EACzCY,EAAO,KAAK,IAAIA,EAAMZ,EAAK,EAAIA,EAAK,MAAM,IAE1D,CAAS,EAGD,QAFImI,EAAS,KAAK,KAAK,OAAO,EAC1BC,EAAa,GACRzb,EAAI,EAAGA,EAAIwb,EAAO,OAAQxb,IAAK,CACpC,IAAIiM,EAAQuP,EAAOxb,CAAC,EACpB,GAAIiM,EAAM,WAAW,IAAI,EAAG,CACxBwP,EAAa,GACb,KAChB,CACA,CAiBQ,OAhBIA,GAAc3H,IAAS,OACvByH,EAAW,CACP,EAAGzH,EACH,EAAGC,EACH,MAAOC,EAAOF,EACd,OAAQG,EAAOF,CAC/B,EAGYwH,EAAW,CACP,EAAG,EACH,EAAG,EACH,MAAO,EACP,OAAQ,CACxB,EAEaD,EAGEC,EAFI,KAAK,iBAAiBA,EAAU7F,CAAU,CAG7D,EACWsE,CACX,EAAED,GAAO,IAAI,EACbD,GAAA,UAAoBE,GACpBpK,GAAU,QAAQ,0BAA0BoK,GAAW,OAAQ,CAC3D,IACA,IACA,QACA,QACJ,CAAC,EACDpK,GAAU,QAAQ,gBAAgBoK,GAAW,QAAS,OAAWrQ,GAAa,oBAAoB,EAClGiG,GAAU,QAAQ,gBAAgBoK,GAAW,QAAS,OAAWrQ,GAAa,oBAAoB,EAClGiG,GAAU,QAAQ,gBAAgBoK,GAAW,YAAa,OAAWrQ,GAAa,oBAAoB,EACtGiG,GAAU,QAAQ,gBAAgBoK,GAAW,aAAc,OAAWrQ,GAAa,oBAAoB,EACvGiG,GAAU,QAAQ,gBAAgBoK,GAAW,UAAU,EACvDtR,GAAO,WAAW,WAAWsR,EAAS,kBC5VtC,OAAO,eAAe0B,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIlc,GAAWC,EACXkc,GAAW,IAAI,IACfC,GAAyBpc,GAAS,MAAM,QAAQ,eAAoB,OACxE,SAASqc,GAAiB7C,EAAW,CACjC,OAAO2C,GAAS,IAAI3C,CAAS,CACjC,CACA0C,GAAA,iBAA2BG,GAC3B,SAASC,GAAYtT,EAAK,CACtB,MAAO,CACH,IAAKA,EACL,UAAWA,EAAI,SACvB,CACA,CACAkT,GAAA,YAAsBI,GACtB,SAASC,GAAkB/C,EAAW/M,EAAO,CACzC,OAAO0P,GAAS,IAAI3C,CAAS,IAAM/M,CACvC,CACAyP,GAAA,kBAA4BK,GAC5B,SAASC,GAAkBhD,EAAW/M,EAAO,CACzCgQ,GAAejD,CAAS,EACxB,IAAIhI,EAAQ/E,EAAM,SAAQ,EACrB+E,IAEL2K,GAAS,IAAI3C,EAAW/M,CAAK,EACzB2P,IACA3P,EAAM,MAAM,oBAAqB6P,GAAY,IAAI,aAAa,mBAAmB,CAAC,CAAC,EAE3F,CACAJ,GAAA,kBAA4BM,GAC5B,SAASC,GAAejD,EAAW1Q,EAAQ,CACvC,IAAI2D,EAAQ0P,GAAS,IAAI3C,CAAS,EAClC,GAAK/M,EAEL,KAAI+E,EAAQ/E,EAAM,SAAQ,EACtB+E,GAASA,EAAM,QAEnB2K,GAAS,OAAO3C,CAAS,EACrB4C,IACA3P,EAAM,MAAM,qBAAsB6P,GAAY,IAAI,aAAa,oBAAoB,CAAC,CAAC,EAE7F,CACAJ,GAAA,eAAyBO,gBC1CzB,IAAIjR,EAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,GAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,GAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,GAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,GAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAc7M,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5D,IAAIoK,EAASjJ,EACTmQ,EAAYjH,EACZmR,EAAcnK,GACdnQ,EAAWqQ,EACXH,EAAWI,GACXuB,EAAgBC,GAChB4K,EAAWrM,EACX6L,EAAgBS,GAChBzJ,EAAQ,QAAS0J,EAAS,SAAUC,EAAK,KAAMC,EAAW,WAAYhK,EAAa,aAAciK,EAAY,YAAalK,EAAa,aAAcmK,EAAY,YAAaC,EAAY,YAAaC,EAAU,UAAWC,EAAc,cAAeC,EAAc,cAAeC,EAAY,YAAaC,EAAgB,gBAAiBC,EAAqB,qBAAsBC,EAAc,cAAeC,EAAQ,QAASC,EAAY,WAAYC,EAAa,aAAcC,EAAW,WAAYC,EAAM,MAAOC,EAAU,SAAUC,EAAY,YAAaC,EAAQ,QAASC,EAAmB,kBAAmBC,EAAoB,mBAAoBC,EAAoB,mBAAoBC,EAAoB,mBAAoBC,EAAkB,iBAAkBC,EAAsB,qBAAsBC,EAAgB,eAAgBC,GAAoB,kBAAmBC,GAAqB,oBAAqBC,GAAmB,kBAAmBC,GAAkB,gBAAiBC,GAAc,aAAcC,GAAoB,mBAAoJC,GAAgB,eAAgBC,GAAW,WAAYC,GAAgB,kBAAgCC,GAAa,IAAKC,GAAY,YAAaC,GAAoB,EAAG/b,GAAe,GAAIgc,GAAS,CAC/2CvM,EACAoK,EACAD,EACAE,EACAJ,EACAa,EACAI,EACAH,EACAb,EACAiB,EACAR,EACAJ,EACAD,EACAE,EACAC,EACAC,CACJ,EAAG8B,GAAeD,GAAO,OACzB,SAASE,GAASC,GAAKC,EAAW,CAC9BD,GAAI,QAAQ,iBAAiBC,EAAW,SAAUxW,EAAK,CACnDuW,GAAIN,GAAaO,CAAS,EAAExW,CAAG,CACvC,EAAO,EAAK,CACZ,CACA,IAAIyW,GAAsB,uLAC1B3gB,EAAA,OAAiB,CAAA,EACjB,SAAS4gB,GAAYrI,GAAO,CACxB,OAAIA,KAAU,SAAUA,GAAQ,CAAA,IAC5BA,GAAM,UAAYA,GAAM,WAAaA,GAAM,aAC3CnO,EAAO,KAAK,KAAK,wEAAwE,EAEtFmO,EACX,CACA,IAAIsI,GAAS,SAAUpR,GAAQ,CAC3B/C,EAAUmU,EAAOpR,EAAM,EACvB,SAASoR,EAAM9O,EAAQ,CACnB,IAAIO,EAAQ7C,GAAO,KAAK,KAAMmR,GAAY7O,CAAM,CAAC,GAAK,KACtD,OAAAO,EAAM,kBAAoB,CAAA,EAC1BA,EAAM,yBAA2B,CAAA,EACjCA,EAAM,UAAS,EACfA,EAAM,mBAAkB,EACxBtS,EAAQ,OAAO,KAAKsS,CAAK,EACzBA,EAAM,GAAG,uCAAwCA,EAAM,UAAU,EACjEA,EAAM,GAAG,sBAAuBA,EAAM,gBAAgB,EACtDA,EAAM,GAAG,oEAAqE,UAAY,CACtFsO,GAAYtO,EAAM,KAAK,CACnC,CAAS,EACDA,EAAM,iBAAgB,EACfA,CACf,CACI,OAAAuO,EAAM,UAAU,aAAe,SAAU7Z,EAAO,CAC5C,IAAI8Z,EAAU9Z,EAAM,QAAO,IAAO,QAC9B+Z,EAAc/Z,EAAM,QAAO,IAAO,YAClCgV,EAAQ8E,GAAWC,EAClB/E,GACD5R,EAAO,KAAK,MAAM,uCAAuC,CAErE,EACIyW,EAAM,UAAU,iBAAmB,UAAY,CAC3C,GAAK,KAAK,QAGV,KAAIG,EAAQ,KAAK,QAAO,EAAK,GAAK,OAClC,KAAK,QAAQ,MAAM,QAAUA,EACrC,EACIH,EAAM,UAAU,aAAe,SAAUzF,EAAW,CAChD,GAAI,OAAOA,IAAc0C,EAAQ,CAC7B,GAAI1C,EAAU,OAAO,CAAC,IAAM,IAAK,CAC7B,IAAIC,EAAYD,EAAU,MAAM,CAAC,EACjCA,EAAY,SAAS,uBAAuBC,CAAS,EAAE,CAAC,CACxE,KACiB,CACD,IAAInI,EACAkI,EAAU,OAAO,CAAC,IAAM,IACxBlI,EAAKkI,EAGLlI,EAAKkI,EAAU,MAAM,CAAC,EAE1BA,EAAY,SAAS,eAAelI,CAAE,CACtD,CACY,GAAI,CAACkI,EACD,KAAM,8CAAgDlI,CAEtE,CACQ,YAAK,SAASkN,GAAWhF,CAAS,EAC9B,KAAK,UACD,KAAK,QAAQ,eACb,KAAK,QAAQ,cAAc,YAAY,KAAK,OAAO,EAEvDA,EAAU,YAAY,KAAK,OAAO,GAE/B,IACf,EACIyF,EAAM,UAAU,cAAgB,UAAY,CACxC,MAAO,EACf,EACIA,EAAM,UAAU,MAAQ,UAAY,CAChC,IAAII,EAAS,KAAK,SAAU1f,EAAM0f,EAAO,OAAQzf,EACjD,IAAKA,EAAI,EAAGA,EAAID,EAAKC,IACjByf,EAAOzf,CAAC,EAAE,MAAK,EAEnB,OAAO,IACf,EACIqf,EAAM,UAAU,MAAQ,SAAU/b,EAAK,CACnC,OAAKA,IACDA,EAAM,CAAA,GAEVA,EAAI,UAAY,SAAS,cAAc,KAAK,EACrC0W,EAAY,UAAU,UAAU,MAAM,KAAK,KAAM1W,CAAG,CACnE,EACI+b,EAAM,UAAU,QAAU,UAAY,CAClCpR,GAAO,UAAU,QAAQ,KAAK,IAAI,EAClC,IAAIyR,EAAU,KAAK,QACfA,GAAW9W,EAAO,KAAK,cAAc8W,CAAO,GAC5C,KAAK,UAAS,EAAG,YAAYA,CAAO,EAExC,IAAI1J,EAAQxX,EAAQ,OAAO,QAAQ,IAAI,EACvC,OAAIwX,EAAQ,IACRxX,EAAQ,OAAO,OAAOwX,EAAO,CAAC,EAE3B,IACf,EACIqJ,EAAM,UAAU,mBAAqB,UAAY,CAC7C,IAAIlO,EAAM,KAAK,kBAAkB,CAAC,GAAK,KAAK,yBAAyB,CAAC,EACtE,OAAKA,EAIE,CACH,EAAGA,EAAI,EACP,EAAGA,EAAI,CACnB,GANYvI,EAAO,KAAK,KAAKuW,EAAmB,EAC7B,KAMnB,EACIE,EAAM,UAAU,gBAAkB,SAAU3N,EAAI,CAC5C,OAAO,KAAK,kBAAkB,KAAK,SAAU/K,EAAG,CAAE,OAAOA,EAAE,KAAO+K,CAAG,CAAE,CAC/E,EACI2N,EAAM,UAAU,qBAAuB,UAAY,CAC/C,OAAO,KAAK,iBACpB,EACIA,EAAM,UAAU,SAAW,UAAY,CACnC,OAAO,IACf,EACIA,EAAM,UAAU,WAAa,UAAY,CACrC,OAAO,KAAK,OACpB,EACIA,EAAM,UAAU,eAAiB,SAAU9O,EAAQ,CAC/CA,EAASA,GAAU,CAAA,EACnB,IAAI7P,EAAI6P,EAAO,GAAK,EAAG5P,EAAI4P,EAAO,GAAK,EAAGzM,EAAS,IAAI8L,EAAS,YAAY,CACxE,MAAOW,EAAO,OAAS,KAAK,MAAK,EACjC,OAAQA,EAAO,QAAU,KAAK,OAAM,EACpC,WAAYA,EAAO,YAAc,CAC7C,CAAS,EAAGlD,EAAWvJ,EAAO,WAAU,EAAG,SAAU2b,EAAS,KAAK,SAC3D,OAAI/e,GAAKC,IACL0M,EAAS,UAAU,GAAK3M,EAAG,GAAKC,CAAC,EAErC8e,EAAO,KAAK,SAAU3J,GAAO,CACzB,GAAKA,GAAM,YAGX,KAAI6J,GAAc7J,GAAM,eAAevF,CAAM,EAC7ClD,EAAS,UAAUsS,GAAY,QAASjf,EAAGC,EAAGgf,GAAY,SAAQ,EAAKA,GAAY,cAAa,EAAIA,GAAY,UAAS,EAAKA,GAAY,eAAe,EACrK,CAAS,EACM7b,CACf,EACIub,EAAM,UAAU,gBAAkB,SAAUlO,EAAK3N,EAAU,CACvD,GAAI,CAAC2N,EACD,OAAO,KAEX,IAAIsO,EAAS,KAAK,SAAU1f,EAAM0f,EAAO,OAAQtX,EAAMpI,EAAM,EAAGC,EAAGmM,GACnE,IAAKnM,EAAImI,EAAKnI,GAAK,EAAGA,IAElB,GADAmM,GAAQsT,EAAOzf,CAAC,EAAE,gBAAgBmR,EAAK3N,CAAQ,EAC3C2I,GACA,OAAOA,GAGf,OAAO,IACf,EACIkT,EAAM,UAAU,WAAa,UAAY,CACrC,IAAI/R,EAAQ,KAAK,MAAK,EAClBC,EAAS,KAAK,OAAM,EACpB,KAAK,UACL,KAAK,QAAQ,MAAM,MAAQD,EAAQiP,EACnC,KAAK,QAAQ,MAAM,OAAShP,EAASgP,GAEzC,KAAK,aAAa,QAAQjP,EAAOC,CAAM,EACvC,KAAK,gBAAgB,QAAQD,EAAOC,CAAM,EAC1C,KAAK,SAAS,KAAK,SAAUuI,EAAO,CAChCA,EAAM,QAAQ,CAAE,MAAOxI,EAAO,OAAQC,EAAQ,EAC9CuI,EAAM,KAAI,CACtB,CAAS,CACT,EACIuJ,EAAM,UAAU,IAAM,SAAUvJ,EAAO,CACnC,GAAI,UAAU,OAAS,EAAG,CACtB,QAAS5V,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAClC,KAAK,IAAI,UAAUA,CAAC,CAAC,EAEzB,OAAO,IACnB,CACQ+N,GAAO,UAAU,IAAI,KAAK,KAAM6H,CAAK,EACrC,IAAI8J,EAAS,KAAK,SAAS,OAC3B,OAAIA,EAASf,IACTjW,EAAO,KAAK,KAAK,iBACbgX,EACA,yKAAyK,EAEjL9J,EAAM,QAAQ,CAAE,MAAO,KAAK,MAAK,EAAI,OAAQ,KAAK,OAAM,EAAI,EAC5DA,EAAM,KAAI,EACNpW,EAAS,MAAM,WACf,KAAK,QAAQ,YAAYoW,EAAM,OAAO,OAAO,EAE1C,IACf,EACIuJ,EAAM,UAAU,UAAY,UAAY,CACpC,OAAO,IACf,EACIA,EAAM,UAAU,SAAW,UAAY,CACnC,OAAO,IACf,EACIA,EAAM,UAAU,kBAAoB,SAAUnG,EAAW,CACrD,OAAO0C,EAAc,kBAAkB1C,EAAW,IAAI,CAC9D,EACImG,EAAM,UAAU,kBAAoB,SAAUnG,EAAW,CACrD0C,EAAc,kBAAkB1C,EAAW,IAAI,CACvD,EACImG,EAAM,UAAU,eAAiB,SAAUnG,EAAW,CAClD0C,EAAc,eAAe1C,EAAW,IAAI,CACpD,EACImG,EAAM,UAAU,UAAY,UAAY,CACpC,OAAO,KAAK,YAAW,CAC/B,EACIA,EAAM,UAAU,mBAAqB,UAAY,CAC7C,GAAK3f,EAAS,MAAM,UAGpB,QAASM,EAAI,EAAGA,EAAI+e,GAAc/e,IAC9Bgf,GAAS,KAAMF,GAAO9e,CAAC,CAAC,CAEpC,EACIqf,EAAM,UAAU,YAAc,SAAU3W,EAAK,CACzC,KAAK,qBAAqBA,CAAG,EAC7B,KAAK,MAAM6J,EAAY,CAAE,IAAK7J,EAAK,OAAQ,KAAM,cAAe,KAAM,CAC9E,EACI2W,EAAM,UAAU,WAAa,SAAU3W,EAAK,CACxC,KAAK,qBAAqBA,CAAG,EAC7B,KAAK,MAAMkV,EAAmB,CAAE,IAAKlV,CAAG,CAAE,EAC1C,KAAK,MAAM+T,EAAW,CAAE,IAAK/T,EAAK,OAAQ,KAAM,cAAe,KAAM,CAC7E,EACI2W,EAAM,UAAU,UAAY,SAAU3W,EAAK,CACvC,IAAI9D,EACJ,KAAK,qBAAqB8D,CAAG,EAC7B,IAAImX,EAAgB,GAAAjb,EAAK,KAAK,eAAiB,MAAQA,IAAO,SAAkBA,EAAG,SAAQ,EAAM,KAAK,YAAc,KAChHkb,EAAgB,CAACvO,EAAc,GAAG,YAAc7R,EAAS,MAAM,iBAC/DmgB,GAAeC,GACfD,EAAY,eAAerD,EAAU,CAAE,IAAK9T,CAAG,CAAE,EACjDmX,EAAY,eAAerN,EAAY,CAAE,IAAK9J,CAAG,CAAE,EACnD,KAAK,MAAM8J,EAAY,CAAE,IAAK9J,EAAK,OAAQ,KAAM,cAAe,KAAM,EACtE,KAAK,YAAc,MAEdoX,IACL,KAAK,MAAMtN,EAAY,CACnB,IAAK9J,EACL,OAAQ,KACR,cAAe,IAC/B,CAAa,EACD,KAAK,MAAM8T,EAAU,CACjB,IAAK9T,EACL,OAAQ,KACR,cAAe,IAC/B,CAAa,GAEL,KAAK,WAAa,OAClB,KAAK,kBAAoB,CAAA,EACzB,KAAK,MAAMiV,EAAkB,CAAE,IAAKjV,CAAG,CAAE,CACjD,EACI2W,EAAM,UAAU,WAAa,SAAU3W,EAAK,CACxC,IAAI9D,EACJ,GAAIlF,EAAS,MAAM,GAAG,SAClB,OAAO,KAAK,WAAWgJ,CAAG,EAE9B,KAAK,qBAAqBA,CAAG,EAC7B,IAAIwQ,EAAYtQ,EAAO,KAAK,mBAAmBF,CAAG,EAC9CyD,EACA0T,EAAgB,GAAAjb,EAAK,KAAK,eAAiB,MAAQA,IAAO,SAAkBA,EAAG,SAAQ,EAAM,KAAK,YAAc,KAChHkb,EAAgB,CAACvO,EAAc,GAAG,YAAc7R,EAAS,MAAM,iBACnE,GAAIogB,EAAe,CAEf,GADA3T,EAAQ,KAAK,gBAAgB,KAAK,mBAAkB,CAAE,EAClDA,GAASA,EAAM,cAAe,CAC9B,IAAI4T,GAAkBF,IAAgB1T,EAClC2T,GAAiBC,IACbF,IACAA,EAAY,eAAerD,EAAU,CAAE,IAAK9T,EAAK,UAAWwQ,CAAS,EAAI/M,CAAK,EAC9E0T,EAAY,eAAerN,EAAY,CAAE,IAAK9J,EAAK,UAAWwQ,CAAS,EAAI/M,CAAK,GAEpFA,EAAM,eAAesQ,EAAW,CAAE,IAAK/T,EAAK,UAAWwQ,CAAS,EAAI2G,CAAW,EAC/E1T,EAAM,eAAeoG,EAAY,CAAE,IAAK7J,EAAK,UAAWwQ,CAAS,EAAI2G,CAAW,EAChF1T,EAAM,eAAeuQ,EAAW,CAAE,IAAKhU,EAAK,UAAWwQ,EAAW,EAClE,KAAK,YAAc/M,GAGnBA,EAAM,eAAeuQ,EAAW,CAAE,IAAKhU,EAAK,UAAWwQ,EAAW,CAEtF,MAEoB2G,GAAeC,IACfD,EAAY,eAAerD,EAAU,CAAE,IAAK9T,EAAK,UAAWwQ,EAAW,EACvE2G,EAAY,eAAerN,EAAY,CAAE,IAAK9J,EAAK,UAAWwQ,EAAW,EACzE,KAAK,MAAMuD,EAAW,CAClB,IAAK/T,EACL,OAAQ,KACR,cAAe,KACf,UAAWwQ,CACnC,CAAqB,EACD,KAAK,YAAc,MAEvB,KAAK,MAAMwD,EAAW,CAClB,IAAKhU,EACL,OAAQ,KACR,cAAe,KACf,UAAWwQ,CAC/B,CAAiB,EAEL,KAAK,MAAM2E,EAAmB,CAAE,IAAKnV,CAAG,CAAE,CACtD,CACYA,EAAI,YACJA,EAAI,eAAc,CAE9B,EACI2W,EAAM,UAAU,WAAa,SAAU3W,EAAK,CACxC,GAAIhJ,EAAS,MAAM,GAAG,SAClB,OAAO,KAAK,YAAYgJ,CAAG,EAE/B,KAAK,qBAAqBA,CAAG,EAC7B,IAAIwQ,EAAYtQ,EAAO,KAAK,mBAAmBF,CAAG,EAC9CyD,EAAQ,KAAK,gBAAgB,KAAK,mBAAkB,CAAE,EAC1DoF,EAAc,GAAG,YAAc,GAC/B7R,EAAS,MAAM,eAAiB,GAC5ByM,GAASA,EAAM,eACf,KAAK,gBAAkBA,EACvBA,EAAM,eAAewQ,EAAW,CAAE,IAAKjU,EAAK,UAAWwQ,EAAW,GAGlE,KAAK,MAAMyD,EAAW,CAClB,IAAKjU,EACL,OAAQ,KACR,cAAe,KACf,UAAWwQ,CAC3B,CAAa,EAEL,KAAK,MAAM4E,EAAmB,CAAE,IAAKpV,CAAG,CAAE,CAClD,EACI2W,EAAM,UAAU,SAAW,SAAU3W,EAAK,CACtC,GAAIhJ,EAAS,MAAM,GAAG,SAClB,OAAO,KAAK,UAAUgJ,CAAG,EAE7B,KAAK,qBAAqBA,CAAG,EAC7B,IAAIwQ,EAAYtQ,EAAO,KAAK,mBAAmBF,CAAG,EAC9CyD,EAAQ,KAAK,gBAAgB,KAAK,mBAAkB,CAAE,EAAG6T,EAAkB,KAAK,gBAAiBC,EAAgB,KAAK,cAAeC,EAAe,GACpJxgB,EAAS,MAAM,kBACfwgB,EAAe,GACf,aAAa,KAAK,UAAU,GAEtB3O,EAAc,GAAG,cACvB7R,EAAS,MAAM,iBAAmB,GAClC,aAAa,KAAK,UAAU,GAEhC,KAAK,WAAa,WAAW,UAAY,CACrCA,EAAS,MAAM,iBAAmB,EAC9C,EAAWA,EAAS,MAAM,cAAc,EAC5ByM,GAASA,EAAM,eACf,KAAK,cAAgBA,EACrBA,EAAM,eAAeyQ,EAAS,CAAE,IAAKlU,EAAK,UAAWwQ,EAAW,EAC5DxZ,EAAS,MAAM,gBACfsgB,GACAA,EAAgB,MAAQ7T,EAAM,MAC9BA,EAAM,eAAegR,EAAO,CAAE,IAAKzU,EAAK,UAAWwQ,EAAW,EAC1DgH,GAAgBD,GAAiBA,IAAkB9T,GACnDA,EAAM,eAAeiR,EAAW,CAAE,IAAK1U,EAAK,UAAWwQ,EAAW,KAK1E,KAAK,MAAM0D,EAAS,CAChB,IAAKlU,EACL,OAAQ,KACR,cAAe,KACf,UAAWwQ,CAC3B,CAAa,EACGxZ,EAAS,MAAM,gBACf,KAAK,MAAMyd,EAAO,CACd,IAAKzU,EACL,OAAQ,KACR,cAAe,KACf,UAAWwQ,CAC/B,CAAiB,EAEDgH,GACA,KAAK,MAAM9C,EAAW,CAClB,IAAK1U,EACL,OAAQ,KACR,cAAe,KACf,UAAWwQ,CAC/B,CAAiB,GAGT,KAAK,MAAM6E,EAAiB,CAAE,IAAKrV,CAAG,CAAE,EACpChJ,EAAS,MAAM,iBACf,KAAK,MAAMue,EAAe,CAAE,IAAKvV,CAAG,CAAE,EAClCwX,GACA,KAAK,MAAMhC,GAAmB,CAAE,IAAKxV,CAAG,CAAE,GAGlDhJ,EAAS,MAAM,eAAiB,GAC5BgJ,EAAI,YACJA,EAAI,eAAc,CAE9B,EACI2W,EAAM,UAAU,aAAe,SAAU3W,EAAK,CAC1C,KAAK,qBAAqBA,CAAG,EAC7B,IAAIyD,EAAQ,KAAK,gBAAgB,KAAK,mBAAkB,CAAE,EACtDA,GAASA,EAAM,cACfA,EAAM,eAAe+Q,EAAa,CAAE,IAAKxU,CAAG,CAAE,EAG9C,KAAK,MAAMwU,EAAa,CACpB,IAAKxU,EACL,OAAQ,KACR,cAAe,IAC/B,CAAa,EAEL,KAAK,MAAMsV,EAAqB,CAAE,IAAKtV,CAAG,CAAE,CACpD,EACI2W,EAAM,UAAU,YAAc,SAAU3W,EAAK,CACzC,IAAIoI,EAAQ,KACZ,KAAK,qBAAqBpI,CAAG,EAC7B,IAAIyX,EAAmB,GACvB,KAAK,yBAAyB,QAAQ,SAAUhP,EAAK,CACjD,IAAIhF,EAAQ2E,EAAM,gBAAgBK,CAAG,EACrCzR,EAAS,MAAM,eAAiB,GAChC6R,EAAc,GAAG,YAAc,GAC/B,IAAI6O,EAAWjU,GAASA,EAAM,YAAW,EACpCiU,IAGD1gB,EAAS,MAAM,2BACfyM,EAAM,kBAAkBgF,EAAI,EAAE,EAElCL,EAAM,cAAgB3E,EACtBA,EAAM,eAAekR,EAAY,CAAE,IAAK3U,EAAK,UAAWyI,EAAI,EAAE,EAAIL,CAAK,EACvEqP,EAAmB,GACfhU,EAAM,eAAiBA,EAAM,eAAc,GAAMzD,EAAI,YACrDA,EAAI,eAAc,EAElC,CAAS,EACIyX,GACD,KAAK,MAAM9C,EAAY,CACnB,IAAK3U,EACL,OAAQ,KACR,cAAe,KACf,UAAW,KAAK,yBAAyB,CAAC,EAAE,EAC5D,CAAa,EAEL,KAAK,MAAMyV,GAAoB,CAAE,IAAKzV,CAAG,CAAE,CACnD,EACI2W,EAAM,UAAU,WAAa,SAAU3W,EAAK,CACxC,IAAIoI,EAAQ,KACZ,KAAK,qBAAqBpI,CAAG,EAC7B,IAAIoX,EAAgB,CAACvO,EAAc,GAAG,YAAc7R,EAAS,MAAM,iBACnE,GAAIogB,EAAe,CACf,IAAIK,EAAmB,GACnBE,EAAqB,CAAA,EACzB,KAAK,yBAAyB,QAAQ,SAAUlP,EAAK,CACjD,IAAIhF,GAAQyP,EAAc,iBAAiBzK,EAAI,EAAE,GAAKL,EAAM,gBAAgBK,CAAG,EAC3EiP,GAAWjU,IAASA,GAAM,YAAW,EACpCiU,KAGDC,EAAmBlU,GAAM,GAAG,IAGhCkU,EAAmBlU,GAAM,GAAG,EAAI,GAChCA,GAAM,eAAesR,EAAW,CAAE,IAAK/U,EAAK,UAAWyI,EAAI,GAAI,EAC/DgP,EAAmB,GACfhU,GAAM,eAAiBA,GAAM,eAAc,GAAMzD,EAAI,YACrDA,EAAI,eAAc,GAEtC,CAAa,EACIyX,GACD,KAAK,MAAM1C,EAAW,CAClB,IAAK/U,EACL,OAAQ,KACR,cAAe,KACf,UAAW,KAAK,yBAAyB,CAAC,EAAE,EAChE,CAAiB,EAEL,KAAK,MAAM6V,GAAmB,CAAE,IAAK7V,CAAG,CAAE,CACtD,CACY6I,EAAc,GAAG,YAAcA,EAAc,GAAG,KAAK,eAAc,GAAM7I,EAAI,YAC7EA,EAAI,eAAc,CAE9B,EACI2W,EAAM,UAAU,UAAY,SAAU3W,EAAK,CACvC,IAAIoI,EAAQ,KACZ,KAAK,qBAAqBpI,CAAG,EAC7B,IAAIuX,EAAgB,KAAK,cAAeC,EAAe,GACnDxgB,EAAS,MAAM,kBACfwgB,EAAe,GACf,aAAa,KAAK,UAAU,GAEtB3O,EAAc,GAAG,cACvB7R,EAAS,MAAM,iBAAmB,GAClC,aAAa,KAAK,UAAU,GAEhC,KAAK,WAAa,WAAW,UAAY,CACrCA,EAAS,MAAM,iBAAmB,EAC9C,EAAWA,EAAS,MAAM,cAAc,EAChC,IAAIygB,EAAmB,GACnBE,EAAqB,CAAA,EACrBC,GAAe,GACfC,GAAkB,GACtB,KAAK,yBAAyB,QAAQ,SAAUpP,GAAK,CACjD,IAAIhF,GAAQyP,EAAc,iBAAiBzK,GAAI,EAAE,GAC7CL,EAAM,gBAAgBK,EAAG,EACzBhF,IACAA,GAAM,eAAegF,GAAI,EAAE,EAE/B,IAAIiP,GAAWjU,IAASA,GAAM,YAAW,EACpCiU,KAGDC,EAAmBlU,GAAM,GAAG,IAGhCkU,EAAmBlU,GAAM,GAAG,EAAI,GAChC2E,EAAM,cAAgB3E,GACtBA,GAAM,eAAemR,EAAU,CAAE,IAAK5U,EAAK,UAAWyI,GAAI,GAAI,EAC9DgP,EAAmB,GACfzgB,EAAS,MAAM,gBAAkByM,KAAU2E,EAAM,gBACjDwP,GAAe,GACfnU,GAAM,eAAeoR,EAAK,CAAE,IAAK7U,EAAK,UAAWyI,GAAI,GAAI,EACrD+O,GAAgBD,GAAiBA,IAAkB9T,KACnDoU,GAAkB,GAClBpU,GAAM,eAAeqR,EAAS,CAAE,IAAK9U,EAAK,UAAWyI,GAAI,GAAI,IAGjEhF,GAAM,eAAiBA,GAAM,eAAc,GAAMzD,EAAI,YACrDA,EAAI,eAAc,GAElC,CAAS,EACIyX,GACD,KAAK,MAAM7C,EAAU,CACjB,IAAK5U,EACL,OAAQ,KACR,cAAe,KACf,UAAW,KAAK,yBAAyB,CAAC,EAAE,EAC5D,CAAa,EAEDhJ,EAAS,MAAM,gBAAkB,CAAC4gB,IAClC,KAAK,MAAM/C,EAAK,CACZ,IAAK7U,EACL,OAAQ,KACR,cAAe,KACf,UAAW,KAAK,yBAAyB,CAAC,EAAE,EAC5D,CAAa,EAEDwX,GAAgB,CAACK,IACjB,KAAK,MAAM/C,EAAS,CAChB,IAAK9U,EACL,OAAQ,KACR,cAAe,KACf,UAAW,KAAK,yBAAyB,CAAC,EAAE,EAC5D,CAAa,EAEL,KAAK,MAAM0V,GAAkB,CAAE,IAAK1V,CAAG,CAAE,EACrChJ,EAAS,MAAM,iBACf,KAAK,MAAM4e,GAAa,CAAE,IAAK5V,CAAG,CAAE,EAChCwX,GACA,KAAK,MAAM7B,GAAiB,CAAE,IAAK3V,CAAG,CAAE,GAGhDhJ,EAAS,MAAM,eAAiB,EACxC,EACI2f,EAAM,UAAU,OAAS,SAAU3W,EAAK,CACpC,KAAK,qBAAqBA,CAAG,EAC7B,IAAIyD,EAAQ,KAAK,gBAAgB,KAAK,mBAAkB,CAAE,EACtDA,GAASA,EAAM,cACfA,EAAM,eAAeuR,EAAO,CAAE,IAAKhV,CAAG,CAAE,EAGxC,KAAK,MAAMgV,EAAO,CACd,IAAKhV,EACL,OAAQ,KACR,cAAe,IAC/B,CAAa,EAEL,KAAK,MAAM8V,GAAe,CAAE,IAAK9V,CAAG,CAAE,CAC9C,EACI2W,EAAM,UAAU,aAAe,SAAU3W,EAAK,CAC1C,GAAKhJ,EAAS,MAAM,sBAGpB,MAAK,qBAAqBgJ,CAAG,EAC7B,IAAIyD,EAAQyP,EAAc,iBAAiBlT,EAAI,SAAS,GACpD,KAAK,gBAAgB,KAAK,oBAAoB,EAC9CyD,GACAA,EAAM,eAAe2Q,EAAalB,EAAc,YAAYlT,CAAG,CAAC,EAE5E,EACI2W,EAAM,UAAU,aAAe,SAAU3W,EAAK,CAC1C,GAAKhJ,EAAS,MAAM,sBAGpB,MAAK,qBAAqBgJ,CAAG,EAC7B,IAAIyD,EAAQyP,EAAc,iBAAiBlT,EAAI,SAAS,GACpD,KAAK,gBAAgB,KAAK,oBAAoB,EAC9CyD,GACAA,EAAM,eAAe0Q,EAAajB,EAAc,YAAYlT,CAAG,CAAC,EAE5E,EACI2W,EAAM,UAAU,WAAa,SAAU3W,EAAK,CACxC,GAAKhJ,EAAS,MAAM,sBAGpB,MAAK,qBAAqBgJ,CAAG,EAC7B,IAAIyD,EAAQyP,EAAc,iBAAiBlT,EAAI,SAAS,GACpD,KAAK,gBAAgB,KAAK,oBAAoB,EAC9CyD,GACAA,EAAM,eAAe4Q,EAAWnB,EAAc,YAAYlT,CAAG,CAAC,EAElEkT,EAAc,eAAelT,EAAI,SAAS,EAClD,EACI2W,EAAM,UAAU,eAAiB,SAAU3W,EAAK,CAC5C,GAAKhJ,EAAS,MAAM,sBAGpB,MAAK,qBAAqBgJ,CAAG,EAC7B,IAAIyD,EAAQyP,EAAc,iBAAiBlT,EAAI,SAAS,GACpD,KAAK,gBAAgB,KAAK,oBAAoB,EAC9CyD,GACAA,EAAM,eAAe4Q,EAAWnB,EAAc,YAAYlT,CAAG,CAAC,EAElEkT,EAAc,eAAelT,EAAI,SAAS,EAClD,EACI2W,EAAM,UAAU,oBAAsB,SAAU3W,EAAK,CACjDkT,EAAc,eAAelT,EAAI,SAAS,CAClD,EACI2W,EAAM,UAAU,qBAAuB,SAAU3W,EAAK,CAClD,IAAIoI,EAAQ,KACR0P,EAAkB,KAAK,oBAAmB,EAAI9f,EAAI,KAAMC,EAAI,KAChE+H,EAAMA,GAAY,OAAO,MACrBA,EAAI,UAAY,QAChB,KAAK,kBAAoB,CAAA,EACzB,KAAK,yBAA2B,CAAA,EAChCE,EAAO,WAAW,UAAU,KAAK,KAAKF,EAAI,QAAS,SAAU+X,EAAO,CAChE3P,EAAM,kBAAkB,KAAK,CACzB,GAAI2P,EAAM,WACV,GAAIA,EAAM,QAAUD,EAAgB,MAAQA,EAAgB,OAC5D,GAAIC,EAAM,QAAUD,EAAgB,KAAOA,EAAgB,MAC/E,CAAiB,CACjB,CAAa,EACD5X,EAAO,WAAW,UAAU,KAAK,KAAKF,EAAI,gBAAkBA,EAAI,QAAS,SAAU+X,EAAO,CACtF3P,EAAM,yBAAyB,KAAK,CAChC,GAAI2P,EAAM,WACV,GAAIA,EAAM,QAAUD,EAAgB,MAAQA,EAAgB,OAC5D,GAAIC,EAAM,QAAUD,EAAgB,KAAOA,EAAgB,MAC/E,CAAiB,CACjB,CAAa,IAGD9f,GAAKgI,EAAI,QAAU8X,EAAgB,MAAQA,EAAgB,OAC3D7f,GAAK+H,EAAI,QAAU8X,EAAgB,KAAOA,EAAgB,OAC1D,KAAK,WAAa,CACd,EAAG9f,EACH,EAAGC,CACnB,EACY,KAAK,kBAAoB,CAAC,CAAE,EAAGD,EAAG,EAAGC,EAAG,GAAIiI,EAAO,KAAK,mBAAmBF,CAAG,CAAC,CAAE,EACjF,KAAK,yBAA2B,CAC5B,CAAE,EAAGhI,EAAG,EAAGC,EAAG,GAAIiI,EAAO,KAAK,mBAAmBF,CAAG,CAAC,CACrE,EAEA,EACI2W,EAAM,UAAU,oBAAsB,SAAU3W,EAAK,CACjDE,EAAO,KAAK,KAAK,4FAA4F,EAC7G,KAAK,qBAAqBF,CAAG,CACrC,EACI2W,EAAM,UAAU,oBAAsB,UAAY,CAC9C,GAAI,CAAC,KAAK,SAAW,CAAC,KAAK,QAAQ,sBAC/B,MAAO,CACH,IAAK,EACL,KAAM,EACN,OAAQ,EACR,OAAQ,CACxB,EAEQ,IAAI9L,EAAO,KAAK,QAAQ,sBAAqB,EAC7C,MAAO,CACH,IAAKA,EAAK,IACV,KAAMA,EAAK,KACX,OAAQA,EAAK,MAAQ,KAAK,QAAQ,aAAe,EACjD,OAAQA,EAAK,OAAS,KAAK,QAAQ,cAAgB,CAC/D,CACA,EACI8L,EAAM,UAAU,UAAY,UAAY,CAUpC,GATA,KAAK,aAAe,IAAIzP,EAAS,YAAY,CACzC,MAAO,KAAK,MAAK,EACjB,OAAQ,KAAK,OAAM,CAC/B,CAAS,EACD,KAAK,gBAAkB,IAAIA,EAAS,UAAU,CAC1C,WAAY,EACZ,MAAO,KAAK,MAAK,EACjB,OAAQ,KAAK,OAAM,CAC/B,CAAS,EACG,EAAClQ,EAAS,MAAM,UAGpB,KAAIka,EAAY,KAAK,UAAS,EAC9B,GAAI,CAACA,EACD,KAAM,mDAEVA,EAAU,UAAY9W,GACtB,KAAK,QAAU,SAAS,cAAc,KAAK,EAC3C,KAAK,QAAQ,MAAM,SAAW2b,GAC9B,KAAK,QAAQ,MAAM,WAAa,OAChC,KAAK,QAAQ,UAAYC,GACzB,KAAK,QAAQ,aAAa,OAAQ,cAAc,EAChD9E,EAAU,YAAY,KAAK,OAAO,EAClC,KAAK,WAAU,EACvB,EACIyF,EAAM,UAAU,MAAQ,UAAY,CAChC,OAAAzW,EAAO,KAAK,KAAK,gGAAgG,EAC1G,IACf,EACIyW,EAAM,UAAU,WAAa,UAAY,CACrC,OAAO,IACf,EACIA,EAAM,UAAU,UAAY,UAAY,CACpC,YAAK,SAAS,KAAK,SAAUvJ,EAAO,CAChCA,EAAM,UAAS,CAC3B,CAAS,EACM,IACf,EACWuJ,CACX,EAAErF,EAAY,SAAS,EACvBxb,EAAA,MAAgB6gB,GAChBA,GAAM,UAAU,SAAWzM,EAC3BwJ,EAAS,cAAciD,EAAK,EAC5BvP,EAAU,QAAQ,gBAAgBuP,GAAO,WAAW,wBC/vBhDnU,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAeqV,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAI9X,GAASjJ,EACTqa,GAAcnR,GACdoR,GAASpK,GACTC,GAAYC,EACZH,GAAWI,GACX2Q,GAAa,SAAU1S,EAAQ,CAC/B/C,GAAUyV,EAAW1S,CAAM,EAC3B,SAAS0S,EAAUpQ,EAAQ,CACvB,IAAIO,EAAQ7C,EAAO,KAAK,KAAMsC,CAAM,GAAK,KACzC,OAAAO,EAAM,OAAS,IAAIlB,GAAS,YAC5BkB,EAAM,gBAAkB,GACxBA,EAAM,GAAG,gBAAiBA,EAAM,gBAAgB,EAChDA,EAAM,iBAAgB,EACtBA,EAAM,GAAG,8BAA+BA,EAAM,iBAAiB,EAC/DA,EAAM,kBAAiB,EAChBA,CACf,CACI,OAAA6P,EAAU,UAAU,gBAAkB,UAAY,CAC9C,IAAI5f,EAAI,KAAK,OAAO,QACpB,OAAOA,EAAE,gBAAe,CAChC,EACI4f,EAAU,UAAU,UAAY,UAAY,CACxC,OAAO,KAAK,MACpB,EACIA,EAAU,UAAU,aAAe,UAAY,CAC3C,OAAO,KAAK,SACpB,EACIA,EAAU,UAAU,WAAa,UAAY,CACzC,OAAO,KAAK,UAAS,EAAG,WAAU,CAC1C,EACIA,EAAU,UAAU,MAAQ,SAAUnU,EAAQ,CAC1C,YAAK,WAAU,EAAG,MAAMA,CAAM,EACvB,IACf,EACImU,EAAU,UAAU,UAAY,SAAU3K,EAAO,CAC7C/H,EAAO,UAAU,UAAU,KAAK,KAAM+H,CAAK,EAC3C,IAAI9E,EAAQ,KAAK,SAAQ,EACzB,OAAIA,IACAA,EAAM,QAAQ,YAAY,KAAK,UAAS,EAAG,OAAO,EAC9C8E,EAAQ9E,EAAM,SAAS,OAAS,EAChCA,EAAM,QAAQ,aAAa,KAAK,UAAS,EAAG,QAASA,EAAM,SAAS8E,EAAQ,CAAC,EAAE,UAAS,EAAG,OAAO,EAGlG9E,EAAM,QAAQ,YAAY,KAAK,UAAS,EAAG,OAAO,GAGnD,IACf,EACIyP,EAAU,UAAU,UAAY,UAAY,CACxC1G,GAAO,KAAK,UAAU,UAAU,KAAK,IAAI,EACzC,IAAI/I,EAAQ,KAAK,SAAQ,EACzB,OAAIA,IACAA,EAAM,QAAQ,YAAY,KAAK,UAAS,EAAG,OAAO,EAClDA,EAAM,QAAQ,YAAY,KAAK,UAAS,EAAG,OAAO,GAE/C,EACf,EACIyP,EAAU,UAAU,OAAS,UAAY,CACrC,IAAIC,EAAQ3G,GAAO,KAAK,UAAU,OAAO,KAAK,IAAI,EAClD,GAAI,CAAC2G,EACD,MAAO,GAEX,IAAI1P,EAAQ,KAAK,SAAQ,EACzB,OAAKA,GAGLA,EAAM,QAAQ,YAAY,KAAK,UAAS,EAAG,OAAO,EAC9C,KAAK,MAAQA,EAAM,SAAS,OAAS,EACrCA,EAAM,QAAQ,aAAa,KAAK,UAAS,EAAG,QAASA,EAAM,SAAS,KAAK,MAAQ,CAAC,EAAE,UAAS,EAAG,OAAO,EAGvGA,EAAM,QAAQ,YAAY,KAAK,UAAS,EAAG,OAAO,EAE/C,IATI,EAUnB,EACIyP,EAAU,UAAU,SAAW,UAAY,CACvC,GAAI1G,GAAO,KAAK,UAAU,SAAS,KAAK,IAAI,EAAG,CAC3C,IAAI/I,EAAQ,KAAK,SAAQ,EACzB,GAAIA,EAAO,CACP,IAAIgF,EAAWhF,EAAM,SACrBA,EAAM,QAAQ,YAAY,KAAK,UAAS,EAAG,OAAO,EAClDA,EAAM,QAAQ,aAAa,KAAK,UAAS,EAAG,QAASgF,EAAS,KAAK,MAAQ,CAAC,EAAE,UAAS,EAAG,OAAO,CACjH,CACY,MAAO,EACnB,CACQ,MAAO,EACf,EACIyK,EAAU,UAAU,aAAe,UAAY,CAC3C,GAAI1G,GAAO,KAAK,UAAU,aAAa,KAAK,IAAI,EAAG,CAC/C,IAAI/I,EAAQ,KAAK,SAAQ,EACzB,GAAIA,EAAO,CACP,IAAIgF,EAAWhF,EAAM,SACrBA,EAAM,QAAQ,YAAY,KAAK,UAAS,EAAG,OAAO,EAClDA,EAAM,QAAQ,aAAa,KAAK,UAAS,EAAG,QAASgF,EAAS,CAAC,EAAE,UAAS,EAAG,OAAO,CACpG,CACY,MAAO,EACnB,CACQ,MAAO,EACf,EACIyK,EAAU,UAAU,SAAW,UAAY,CACvC,OAAO,IACf,EACIA,EAAU,UAAU,gBAAkB,UAAY,CAC9C,MAAO,EACf,EACIA,EAAU,UAAU,OAAS,UAAY,CACrC,IAAIE,EAAU,KAAK,UAAS,EAAG,QAC/B5G,OAAAA,GAAO,KAAK,UAAU,OAAO,KAAK,IAAI,EAClC4G,GAAWA,EAAQ,YAAcjY,GAAO,KAAK,cAAciY,CAAO,GAClEA,EAAQ,WAAW,YAAYA,CAAO,EAEnC,IACf,EACIF,EAAU,UAAU,SAAW,UAAY,CACvC,OAAO,KAAK,MACpB,EACIA,EAAU,UAAU,QAAU,SAAU/b,EAAI,CACxC,IAAI0I,EAAQ1I,EAAG,MAAO2I,EAAS3I,EAAG,OAClC,YAAK,OAAO,QAAQ0I,EAAOC,CAAM,EACjC,KAAK,kBAAiB,EACf,IACf,EACIoT,EAAU,UAAU,eAAiB,SAAUpQ,EAAQ,CACnD,OAAAA,EAASA,GAAU,CAAA,EACnBA,EAAO,MAAQA,EAAO,OAAS,KAAK,SAAQ,EAC5CA,EAAO,OAASA,EAAO,QAAU,KAAK,UAAS,EAC/CA,EAAO,EAAIA,EAAO,IAAM,OAAYA,EAAO,EAAI,KAAK,EAAC,EACrDA,EAAO,EAAIA,EAAO,IAAM,OAAYA,EAAO,EAAI,KAAK,EAAC,EAC9C0J,GAAO,KAAK,UAAU,eAAe,KAAK,KAAM1J,CAAM,CACrE,EACIoQ,EAAU,UAAU,iBAAmB,UAAY,CAC/C,IAAI9K,EAAU,KAAK,QAAO,EACtBA,EACA,KAAK,OAAO,QAAQ,MAAM,QAAU,QAGpC,KAAK,OAAO,QAAQ,MAAM,QAAU,MAEhD,EACI8K,EAAU,UAAU,kBAAoB,UAAY,CAChD,KAAK,WAAU,EAAG,SAAS,sBAAwB,KAAK,sBAAqB,CACrF,EACIA,EAAU,UAAU,SAAW,UAAY,CACvC,GAAI,KAAK,OACL,OAAO,KAAK,OAAO,MAAK,CAEpC,EACIA,EAAU,UAAU,SAAW,UAAY,CACvC/X,GAAO,KAAK,KAAK,2EAA2E,CACpG,EACI+X,EAAU,UAAU,UAAY,UAAY,CACxC,GAAI,KAAK,OACL,OAAO,KAAK,OAAO,OAAM,CAErC,EACIA,EAAU,UAAU,UAAY,UAAY,CACxC/X,GAAO,KAAK,KAAK,6EAA6E,CACtG,EACI+X,EAAU,UAAU,gBAAkB,SAAUxP,EAAK3N,EAAU,CAC3D,OAAO,IACf,EACImd,EAAU,UAAU,UAAY,UAAY,CACxC,IAAI7P,EAAQ,KACZ,OAAK,KAAK,kBACN,KAAK,gBAAkB,GACvBlI,GAAO,KAAK,iBAAiB,UAAY,CACrCkI,EAAM,KAAI,EACVA,EAAM,gBAAkB,EACxC,CAAa,GAEE,IACf,EACI6P,EAAU,UAAU,gBAAkB,SAAUxU,EAAOgE,EAAS2D,EAAK,CACjE,IAAItT,EAAI2L,EAAM,qBAAqB2H,CAAG,EAAE,UAAS,EACjD3D,EAAQ,UAAU3P,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,CAC5D,EACWmgB,CACX,EAAE3G,GAAY,SAAS,EACvB0G,GAAA,UAAoBC,GACpBA,GAAU,UAAU,SAAW,YAC/B7Q,GAAU,QAAQ,gBAAgB6Q,GAAW,wBAAyB,EAAI,EAC1E7Q,GAAU,QAAQ,gBAAgB6Q,GAAW,kBAAmB,EAAI,EACpE/X,GAAO,WAAW,WAAW+X,EAAS,yBCpMtC,IAAIzV,EAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAc7M,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5D,IAAIoK,EAASjJ,EACTmQ,EAAYjH,EACZoR,EAASpK,GACThG,EAAekG,EACfrQ,EAAWsQ,EACX4L,EAAgBpK,GAChBsP,EAAa,YACbC,EAAc,aACdC,EAAe,eACfC,EAAiB,iBACjBC,EAAiB,iBACjBC,EACJ,SAASC,GAAkB,CACvB,OAAID,IAGJA,EAAevY,EAAO,KAAK,oBAAmB,EAAG,WAAW,IAAI,EACzDuY,EACX,CACA3iB,EAAA,OAAiB,CAAA,EACjB,SAAS6iB,EAAUlR,EAAS,CACxBA,EAAQ,KAAI,CAChB,CACA,SAASmR,EAAYnR,EAAS,CAC1BA,EAAQ,OAAM,CAClB,CACA,SAASoR,EAAapR,EAAS,CAC3BA,EAAQ,KAAI,CAChB,CACA,SAASqR,EAAerR,EAAS,CAC7BA,EAAQ,OAAM,CAClB,CACA,SAASsR,GAAuB,CAC5B,KAAK,YAAYX,CAAU,CAC/B,CACA,SAASY,GAA2B,CAChC,KAAK,YAAYX,CAAW,CAChC,CACA,SAASY,GAAyB,CAC9B,KAAK,YAAYX,CAAY,CACjC,CACA,SAASY,GAA4B,CACjC,KAAK,YAAYX,CAAc,CACnC,CACA,SAASY,GAA4B,CACjC,KAAK,YAAYX,CAAc,CACnC,CACA,IAAIY,EAAS,SAAU7T,EAAQ,CAC3B/C,EAAU4W,EAAO7T,CAAM,EACvB,SAAS6T,EAAMvR,EAAQ,CAGnB,QAFIO,EAAQ7C,EAAO,KAAK,KAAMsC,CAAM,GAAK,KACrCrS,EAEAA,EAAM0K,EAAO,KAAK,eAAc,EAC5B,EAAA1K,GAAO,EAAEA,KAAOM,EAAQ,UAA5B,CAIJ,OAAAsS,EAAM,SAAW5S,EACjBM,EAAQ,OAAON,CAAG,EAAI4S,EACtBA,EAAM,GAAG,8HAA+H2Q,CAAoB,EAC5J3Q,EAAM,GAAG,8EAA+E4Q,CAAwB,EAChH5Q,EAAM,GAAG,kJAAmJ6Q,CAAsB,EAClL7Q,EAAM,GAAG,wOAAyO8Q,CAAyB,EAC3Q9Q,EAAM,GAAG,0TAA2T+Q,CAAyB,EACtV/Q,CACf,CACI,OAAAgR,EAAM,UAAU,WAAa,UAAY,CACrC,OAAO,KAAK,SAAQ,EAAG,WAAU,CACzC,EACIA,EAAM,UAAU,UAAY,UAAY,CACpC,OAAO,KAAK,SAAQ,EAAG,UAAS,CACxC,EACIA,EAAM,UAAU,aAAe,UAAY,CACvC,OAAO,KAAK,MAAM,WAAa,KAAK,UAC5C,EACIA,EAAM,UAAU,WAAa,UAAY,CACrC,OAAO,KAAK,MAAM,SAAW,KAAK,QAC1C,EACIA,EAAM,UAAU,UAAY,UAAY,CACpC,OAAO,KAAK,UAAUhB,EAAY,KAAK,UAAU,CACzD,EACIgB,EAAM,UAAU,WAAa,UAAY,CACrC,OAAQ,KAAK,cAAa,GACtB,KAAK,cAAa,IAAO,GACzB,CAAC,EAAE,KAAK,YAAW,GACf,KAAK,WAAU,GACf,KAAK,cAAa,GAClB,KAAK,cAAa,EAClC,EACIA,EAAM,UAAU,gBAAkB,UAAY,CAC1C,OAAO,KAAK,UAAUd,EAAc,KAAK,gBAAgB,CACjE,EACIc,EAAM,UAAU,iBAAmB,UAAY,CAC3C,GAAI,KAAK,mBAAoB,CACzB,IAAI7C,EAAMmC,EAAe,EACrBW,EAAU9C,EAAI,cAAc,KAAK,iBAAgB,EAAI,KAAK,kBAAiB,GAAM,QAAQ,EAC7F,OAAO8C,CACnB,CACA,EACID,EAAM,UAAU,mBAAqB,UAAY,CAC7C,OAAO,KAAK,UAAUb,EAAgB,KAAK,mBAAmB,CACtE,EACIa,EAAM,UAAU,oBAAsB,UAAY,CAC9C,IAAI9S,EAAa,KAAK,6BAA4B,EAClD,GAAIA,EAAY,CAKZ,QAJIiQ,EAAMmC,EAAe,EACrBlZ,EAAQ,KAAK,6BAA4B,EACzCC,EAAM,KAAK,2BAA0B,EACrCuG,EAAMuQ,EAAI,qBAAqB/W,EAAM,EAAGA,EAAM,EAAGC,EAAI,EAAGA,EAAI,CAAC,EACxDnI,EAAI,EAAGA,EAAIgP,EAAW,OAAQhP,GAAK,EACxC0O,EAAI,aAAaM,EAAWhP,CAAC,EAAGgP,EAAWhP,EAAI,CAAC,CAAC,EAErD,OAAO0O,CACnB,CACA,EACIoT,EAAM,UAAU,mBAAqB,UAAY,CAC7C,OAAO,KAAK,UAAUZ,EAAgB,KAAK,mBAAmB,CACtE,EACIY,EAAM,UAAU,oBAAsB,UAAY,CAC9C,IAAI9S,EAAa,KAAK,6BAA4B,EAClD,GAAIA,EAAY,CAKZ,QAJIiQ,EAAMmC,EAAe,EACrBlZ,EAAQ,KAAK,6BAA4B,EACzCC,EAAM,KAAK,2BAA0B,EACrCuG,EAAMuQ,EAAI,qBAAqB/W,EAAM,EAAGA,EAAM,EAAG,KAAK,8BAA6B,EAAIC,EAAI,EAAGA,EAAI,EAAG,KAAK,6BAA6B,EAClInI,EAAI,EAAGA,EAAIgP,EAAW,OAAQhP,GAAK,EACxC0O,EAAI,aAAaM,EAAWhP,CAAC,EAAGgP,EAAWhP,EAAI,CAAC,CAAC,EAErD,OAAO0O,CACnB,CACA,EACIoT,EAAM,UAAU,cAAgB,UAAY,CACxC,OAAO,KAAK,UAAUf,EAAa,KAAK,cAAc,CAC9D,EACIe,EAAM,UAAU,eAAiB,UAAY,CACzC,GAAI,KAAK,YAAa,CAClB,IAAIE,EAAOpZ,EAAO,KAAK,YAAY,KAAK,aAAa,EACrD,MAAQ,QACJoZ,EAAK,EACL,IACAA,EAAK,EACL,IACAA,EAAK,EACL,IACAA,EAAK,GAAK,KAAK,cAAa,GAAM,GAClC,GAChB,CACA,EACIF,EAAM,UAAU,QAAU,UAAY,CAClC,OAAQ,KAAK,YAAW,GACpB,CAAC,EAAE,KAAK,KAAI,GACR,KAAK,iBAAgB,GACrB,KAAK,6BAA4B,GACjC,KAAK,6BAA4B,EACjD,EACIA,EAAM,UAAU,UAAY,UAAY,CACpC,OAAQ,KAAK,cAAa,GACtB,KAAK,YAAW,GAChB,CAAC,EAAE,KAAK,OAAM,GAAM,KAAK,+BAA8B,EACnE,EACIA,EAAM,UAAU,aAAe,UAAY,CACvC,IAAIxU,EAAQ,KAAK,eAAc,EAC/B,OAAIA,IAAU,OACH,KAAK,UAAS,EAElB,KAAK,iBAAmB,CAAC,CAACA,CACzC,EACIwU,EAAM,UAAU,WAAa,SAAUrhB,EAAO,CAC1C,IAAIyQ,EAAQ,KAAK,SAAQ,EAAI+Q,EAAkB/Q,EAAM,gBAAiBvK,EACtE,OAAAsb,EAAgB,WAAU,EAAG,MAAK,EAClC,KAAK,QAAQA,CAAe,EAC5Btb,EAAIsb,EAAgB,QAAQ,aAAa,KAAK,MAAMxhB,EAAM,CAAC,EAAG,KAAK,MAAMA,EAAM,CAAC,EAAG,EAAG,CAAC,EAAE,KAClFkG,EAAE,CAAC,EAAI,CACtB,EACImb,EAAM,UAAU,QAAU,UAAY,CAClC,OAAA7H,EAAO,KAAK,UAAU,QAAQ,KAAK,IAAI,EACvC,OAAOzb,EAAQ,OAAO,KAAK,QAAQ,EACnC,OAAO,KAAK,SACL,IACf,EACIsjB,EAAM,UAAU,iBAAmB,SAAUnH,EAAS,CAClD,MAAO,CAAC,GAAG,CAACA,GAAW,KAAK,UAAS,IACjC,KAAK,mBAAkB,GACvB,KAAK,mBAAkB,IAAO,GAC9B,KAAK,QAAO,GACZ,KAAK,UAAS,GACd,KAAK,SAAQ,EACzB,EACImH,EAAM,UAAU,oBAAsB,SAAUve,EAAK,CACjDqF,EAAO,KAAK,KAAK,6EAA6E,EAC1FrF,EACA,KAAK,eAAe,MAAM,EAG1B,KAAK,eAAe,CAAC,CAEjC,EACIue,EAAM,UAAU,oBAAsB,UAAY,CAC9C,OAAI,KAAK,eAAc,IAAO,CAMtC,EACIA,EAAM,UAAU,YAAc,UAAY,CACtC,IAAIzJ,EAAO,KAAK,KAAI,EACpB,MAAO,CACH,EAAG,KAAK,UAAY,CAACA,EAAK,MAAQ,EAAI,EACtC,EAAG,KAAK,UAAY,CAACA,EAAK,OAAS,EAAI,EACvC,MAAOA,EAAK,MACZ,OAAQA,EAAK,MACzB,CACA,EACIyJ,EAAM,UAAU,cAAgB,SAAU/K,EAAO,CAC7CA,EAAQA,GAAS,CAAA,EACjB,IAAIyE,EAAgBzE,EAAM,cACtBnB,EAAamB,EAAM,WACnBmL,EAAW,KAAK,YAAW,EAC3BC,EAAc,CAACpL,EAAM,YAAc,KAAK,UAAS,EACjDpH,EAAewS,GAAe,KAAK,YAAW,GAAO,EACrDC,EAAqBF,EAAS,MAAQvS,EACtC0S,EAAsBH,EAAS,OAASvS,EACxC2S,EAAc,CAACvL,EAAM,YAAc,KAAK,UAAS,EACjDwL,EAAgBD,EAAc,KAAK,cAAa,EAAK,EACrDE,EAAgBF,EAAc,KAAK,cAAa,EAAK,EACrDG,EAAWL,EAAqB,KAAK,IAAIG,CAAa,EACtDG,EAAYL,EAAsB,KAAK,IAAIG,CAAa,EACxDG,EAAcL,GAAe,KAAK,WAAU,GAAO,EACnDhV,GAAQmV,EAAWE,EAAa,EAChCpV,GAASmV,EAAYC,EAAa,EAClCC,GAAiB,EACjB,KAAK,MAAMjT,EAAc,CAAC,IAAMA,EAAc,IAC9CiT,GAAiB,GAErB,IAAIrP,GAAO,CACP,MAAOjG,GAAQsV,GACf,OAAQrV,GAASqV,GACjB,EAAG,CAAC,KAAK,MAAMjT,EAAc,EAAIgT,CAAU,EACvC,KAAK,IAAIJ,EAAe,CAAC,EACzBL,EAAS,EACb,EAAG,CAAC,KAAK,MAAMvS,EAAc,EAAIgT,CAAU,EACvC,KAAK,IAAIH,EAAe,CAAC,EACzBN,EAAS,CACzB,EACQ,OAAK1G,EAGEjI,GAFI,KAAK,iBAAiBA,GAAMqC,CAAU,CAGzD,EACIkM,EAAM,UAAU,UAAY,SAAUpH,EAAK5G,EAAK6G,EAASE,EAAY,CACjE,IAAI/E,EAAQ,KAAK,SAAQ,EAAIhS,EAAS4W,GAAO5E,EAAM,UAAS,EAAI3F,EAAUrM,EAAO,WAAU,EAAI4Q,EAAe,KAAK,gBAAe,EAAImO,EAAW,KAAK,UAAS,EAAIC,EAAY,KAAK,YAAaC,EAAY,KAAK,UAAS,EAAI7R,EAAO8R,EAAcC,EACpP,GAAI,CAAC,KAAK,UAAS,GAAM,CAACtI,EACtB,OAAO,KAEX,GAAIjG,EACA,OAAAvE,EAAQ,KAAI,EACZ2F,EAAM,gBAAgB,KAAM3F,EAAS2D,CAAG,EACxC,KAAK,uBAAuB3D,CAAO,EACnCA,EAAQ,QAAO,EACR,KAEX,GAAI,CAAC0S,EACD,OAAO,KAGX,GADA1S,EAAQ,KAAI,EACR,KAAK,iBAAiBwK,CAAO,GAAK,CAACE,EAAY,CAO/C,GANA3J,EAAQ,KAAK,SAAQ,EACrB8R,EAAe9R,EAAM,aACrB+R,EAAgBD,EAAa,WAAU,EACvCC,EAAc,MAAK,EACnBA,EAAc,KAAI,EAClBA,EAAc,eAAe,IAAI,EAC7B,CAACtI,EACD,GAAI7E,EACAA,EAAM,gBAAgB,KAAMmN,EAAenP,CAAG,MAE7C,CACD,IAAItT,GAAI,KAAK,qBAAqBsT,CAAG,EAAE,UAAS,EAChD3D,EAAQ,UAAU3P,GAAE,CAAC,EAAGA,GAAE,CAAC,EAAGA,GAAE,CAAC,EAAGA,GAAE,CAAC,EAAGA,GAAE,CAAC,EAAGA,GAAE,CAAC,CAAC,CACxE,CAEYqiB,EAAS,KAAK,KAAMI,EAAe,IAAI,EACvCA,EAAc,QAAO,EACrB,IAAI3T,GAAQ0T,EAAa,WACrBF,GAAa,CAAChf,EAAO,WACrBqM,EAAQ,KAAI,EACZA,EAAQ,aAAa,IAAI,EACzBA,EAAQ,cAAc,IAAI,EAC1BA,EAAQ,+BAA+B,IAAI,EAC3CA,EAAQ,UAAU6S,EAAa,QAAS,EAAG,EAAGA,EAAa,MAAQ1T,GAAO0T,EAAa,OAAS1T,EAAK,EACrGa,EAAQ,QAAO,IAGfA,EAAQ,cAAc,IAAI,EAC1BA,EAAQ,+BAA+B,IAAI,EAC3CA,EAAQ,UAAU6S,EAAa,QAAS,EAAG,EAAGA,EAAa,MAAQ1T,GAAO0T,EAAa,OAAS1T,EAAK,EAErH,KACa,CAED,GADAa,EAAQ,eAAe,IAAI,EACvB,CAACwK,EACD,GAAI7E,EACAA,EAAM,gBAAgB,KAAM3F,EAAS2D,CAAG,MAEvC,CACD,IAAIoP,GAAI,KAAK,qBAAqBpP,CAAG,EAAE,UAAS,EAChD3D,EAAQ,UAAU+S,GAAE,CAAC,EAAGA,GAAE,CAAC,EAAGA,GAAE,CAAC,EAAGA,GAAE,CAAC,EAAGA,GAAE,CAAC,EAAGA,GAAE,CAAC,CAAC,CACxE,CAEgBJ,GAAaC,GAAa,CAACjf,EAAO,WAClCqM,EAAQ,KAAI,EACPwK,IACDxK,EAAQ,cAAc,IAAI,EAC1BA,EAAQ,+BAA+B,IAAI,GAE/CA,EAAQ,aAAa,IAAI,EACzB0S,EAAS,KAAK,KAAM1S,EAAS,IAAI,EACjCA,EAAQ,QAAO,EACX,KAAK,QAAO,GAAM,KAAK,uBAAsB,GAC7C0S,EAAS,KAAK,KAAM1S,EAAS,IAAI,GAGhC2S,GAAa,CAAChf,EAAO,WAC1BqM,EAAQ,KAAI,EACPwK,IACDxK,EAAQ,cAAc,IAAI,EAC1BA,EAAQ,+BAA+B,IAAI,GAE/CA,EAAQ,aAAa,IAAI,EACzB0S,EAAS,KAAK,KAAM1S,EAAS,IAAI,EACjCA,EAAQ,QAAO,IAGVwK,IACDxK,EAAQ,cAAc,IAAI,EAC1BA,EAAQ,+BAA+B,IAAI,GAE/C0S,EAAS,KAAK,KAAM1S,EAAS,IAAI,EAEjD,CACQ,OAAAA,EAAQ,QAAO,EACR,IACf,EACI2R,EAAM,UAAU,QAAU,SAAUpH,EAAK5G,EAAK6G,EAAS,CACnD,IAAI7E,EAAQ,KAAK,SAAQ,EAAIhS,EAAS4W,GAAO5E,EAAM,UAAW3F,EAAUrM,GAAUA,EAAO,WAAU,EAAI+e,EAAW,KAAK,QAAO,GAAM,KAAK,UAAS,EAAInO,EAAe,KAAK,gBAAe,EAAIf,EAAkBe,GAAgBA,EAAa,IAK5O,GAJK,KAAK,WACN,QAAQ,IAAI,IAAI,EAChB9L,EAAO,KAAK,KAAK,sMAAsM,GAEvN,CAAC,KAAK,cAAa,GAAM,CAAC+R,EAC1B,OAAO,KAEX,GAAIhH,EACA,OAAAxD,EAAQ,KAAI,EACZ2F,EAAM,gBAAgB,KAAM3F,EAAS2D,CAAG,EACxC,KAAK,qBAAqB3D,CAAO,EACjCA,EAAQ,QAAO,EACR,KAEX,GAAI,CAAC0S,EACD,OAAO,KAIX,GAFA1S,EAAQ,KAAI,EACZA,EAAQ,eAAe,IAAI,EACvB,CAACwK,EACD,GAAI7E,EACAA,EAAM,gBAAgB,KAAM3F,EAAS2D,CAAG,MAEvC,CACD,IAAIoP,EAAI,KAAK,qBAAqBpP,CAAG,EAAE,UAAS,EAChD3D,EAAQ,UAAU+S,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,CACpE,CAEQ,OAAAL,EAAS,KAAK,KAAM1S,EAAS,IAAI,EACjCA,EAAQ,QAAO,EACR,IACf,EACI2R,EAAM,UAAU,iBAAmB,SAAUqB,EAAgB,CACrDA,IAAmB,SAAUA,EAAiB,GAClD,IAAIzO,EAAe,KAAK,gBAAe,EAAIC,EAAc,KAAK,sBAAqB,EAAIH,EAAYE,EAAa,IAAKb,EAAaW,EAAU,aAAc4O,EAAW5O,EAAU,WAAY6O,EAAY7O,EAAU,YAAa8O,EAAcC,EAASxjB,EAAKyjB,EAAatjB,EAAGujB,EAC1Q5P,EAAW,MAAK,EAChBA,EAAW,UAAUc,EAAY,QAAS,EAAG,EAAGyO,EAAUC,CAAS,EACnE,GAAI,CAKA,IAJAC,EAAezP,EAAW,aAAa,EAAG,EAAGuP,EAAUC,CAAS,EAChEE,EAAUD,EAAa,KACvBvjB,EAAMwjB,EAAQ,OACdC,EAAc5a,EAAO,KAAK,UAAU,KAAK,QAAQ,EAC5C1I,EAAI,EAAGA,EAAIH,EAAKG,GAAK,EACtBujB,EAAQF,EAAQrjB,EAAI,CAAC,EACjBujB,EAAQN,GACRI,EAAQrjB,CAAC,EAAIsjB,EAAY,EACzBD,EAAQrjB,EAAI,CAAC,EAAIsjB,EAAY,EAC7BD,EAAQrjB,EAAI,CAAC,EAAIsjB,EAAY,EAC7BD,EAAQrjB,EAAI,CAAC,EAAI,KAGjBqjB,EAAQrjB,EAAI,CAAC,EAAI,EAGzB2T,EAAW,aAAayP,EAAc,EAAG,CAAC,CACtD,OACe9lB,EAAG,CACNoL,EAAO,KAAK,MAAM,sDAAwDpL,EAAE,OAAO,CAC/F,CACQ,OAAO,IACf,EACIskB,EAAM,UAAU,kBAAoB,SAAU5I,EAAW,CACrD,OAAO0C,EAAc,kBAAkB1C,EAAW,IAAI,CAC9D,EACI4I,EAAM,UAAU,kBAAoB,SAAU5I,EAAW,CACrD0C,EAAc,kBAAkB1C,EAAW,IAAI,CACvD,EACI4I,EAAM,UAAU,eAAiB,SAAU5I,EAAW,CAClD0C,EAAc,eAAe1C,EAAW,IAAI,CACpD,EACW4I,CACX,EAAE7H,EAAO,IAAI,EACbzb,EAAA,MAAgBsjB,EAChBA,EAAM,UAAU,UAAYT,EAC5BS,EAAM,UAAU,YAAcR,EAC9BQ,EAAM,UAAU,aAAeP,EAC/BO,EAAM,UAAU,eAAiBN,EACjCM,EAAM,UAAU,UAAY,GAC5BA,EAAM,UAAU,SAAW,QAC3BpiB,EAAS,cAAcoiB,CAAK,EAC5BhS,EAAU,QAAQ,gBAAgBgS,EAAO,SAAU,OAAWjY,EAAa,oBAAoB,EAC/FiG,EAAU,QAAQ,gBAAgBgS,EAAO,cAAe,EAAGjY,EAAa,oBAAoB,EAC5FiG,EAAU,QAAQ,gBAAgBgS,EAAO,iBAAkB,OAAQjY,EAAa,0BAA0B,EAC1GiG,EAAU,QAAQ,gBAAgBgS,EAAO,mBAAoB,GAAMjY,EAAa,qBAAqB,EACrGiG,EAAU,QAAQ,gBAAgBgS,EAAO,qBAAsB,GAAMjY,EAAa,qBAAqB,EACvGiG,EAAU,QAAQ,gBAAgBgS,EAAO,yBAA0B,GAAMjY,EAAa,qBAAqB,EAC3GiG,EAAU,QAAQ,gBAAgBgS,EAAO,UAAU,EACnDhS,EAAU,QAAQ,gBAAgBgS,EAAO,SAAS,EAClDhS,EAAU,QAAQ,gBAAgBgS,EAAO,WAAW,EACpDhS,EAAU,QAAQ,gBAAgBgS,EAAO,SAAS,EAClDhS,EAAU,QAAQ,gBAAgBgS,EAAO,MAAM,EAC/ChS,EAAU,QAAQ,gBAAgBgS,EAAO,aAAc,EAAGjY,EAAa,oBAAoB,EAC3FiG,EAAU,QAAQ,gBAAgBgS,EAAO,cAAe,OAAWjY,EAAa,oBAAoB,EACpGiG,EAAU,QAAQ,gBAAgBgS,EAAO,aAAc,EAAGjY,EAAa,oBAAoB,EAC3FiG,EAAU,QAAQ,gBAAgBgS,EAAO,gBAAiB,EAAGjY,EAAa,oBAAoB,EAC9FiG,EAAU,QAAQ,0BAA0BgS,EAAO,eAAgB,CAAC,IAAK,GAAG,CAAC,EAC7EhS,EAAU,QAAQ,gBAAgBgS,EAAO,gBAAiB,EAAGjY,EAAa,oBAAoB,EAC9FiG,EAAU,QAAQ,gBAAgBgS,EAAO,gBAAiB,EAAGjY,EAAa,oBAAoB,EAC9FiG,EAAU,QAAQ,gBAAgBgS,EAAO,kBAAkB,EAC3DhS,EAAU,QAAQ,gBAAgBgS,EAAO,OAAQ,OAAWjY,EAAa,oBAAoB,EAC7FiG,EAAU,QAAQ,gBAAgBgS,EAAO,eAAgB,EAAGjY,EAAa,oBAAoB,EAC7FiG,EAAU,QAAQ,gBAAgBgS,EAAO,eAAgB,EAAGjY,EAAa,oBAAoB,EAC7FiG,EAAU,QAAQ,gBAAgBgS,EAAO,8BAA8B,EACvEhS,EAAU,QAAQ,gBAAgBgS,EAAO,gCAAgC,EACzEhS,EAAU,QAAQ,gBAAgBgS,EAAO,gCAAiC,CAAC,EAC3EhS,EAAU,QAAQ,gBAAgBgS,EAAO,8BAA+B,CAAC,EACzEhS,EAAU,QAAQ,gBAAgBgS,EAAO,8BAA8B,EACvEhS,EAAU,QAAQ,gBAAgBgS,EAAO,oBAAqB,QAAQ,EACtEhS,EAAU,QAAQ,gBAAgBgS,EAAO,cAAe,EAAI,EAC5DhS,EAAU,QAAQ,gBAAgBgS,EAAO,gBAAiB,EAAI,EAC9DhS,EAAU,QAAQ,gBAAgBgS,EAAO,gBAAiB,EAAI,EAC9DhS,EAAU,QAAQ,gBAAgBgS,EAAO,cAAe,EAAI,EAC5DhS,EAAU,QAAQ,gBAAgBgS,EAAO,qBAAsB,EAAI,EACnEhS,EAAU,QAAQ,gBAAgBgS,EAAO,eAAgB,OAAO,EAChEhS,EAAU,QAAQ,0BAA0BgS,EAAO,oBAAqB,CAAC,IAAK,GAAG,CAAC,EAClFhS,EAAU,QAAQ,gBAAgBgS,EAAO,qBAAsB,EAAGjY,EAAa,oBAAoB,EACnGiG,EAAU,QAAQ,gBAAgBgS,EAAO,qBAAsB,EAAGjY,EAAa,oBAAoB,EACnGiG,EAAU,QAAQ,0BAA0BgS,EAAO,mBAAoB,CAAC,IAAK,GAAG,CAAC,EACjFhS,EAAU,QAAQ,gBAAgBgS,EAAO,oBAAqB,EAAGjY,EAAa,oBAAoB,EAClGiG,EAAU,QAAQ,gBAAgBgS,EAAO,oBAAqB,EAAGjY,EAAa,oBAAoB,EAClGiG,EAAU,QAAQ,0BAA0BgS,EAAO,+BAAgC,CAC/E,IACA,GACJ,CAAC,EACDhS,EAAU,QAAQ,0BAA0BgS,EAAO,iCAAkC,CACjF,IACA,GACJ,CAAC,EACDhS,EAAU,QAAQ,gBAAgBgS,EAAO,gCAAiC,CAAC,EAC3EhS,EAAU,QAAQ,gBAAgBgS,EAAO,kCAAmC,CAAC,EAC7EhS,EAAU,QAAQ,gBAAgBgS,EAAO,gCAAiC,CAAC,EAC3EhS,EAAU,QAAQ,gBAAgBgS,EAAO,kCAAmC,CAAC,EAC7EhS,EAAU,QAAQ,0BAA0BgS,EAAO,6BAA8B,CAC7E,IACA,GACJ,CAAC,EACDhS,EAAU,QAAQ,0BAA0BgS,EAAO,+BAAgC,CAC/E,IACA,GACJ,CAAC,EACDhS,EAAU,QAAQ,gBAAgBgS,EAAO,8BAA+B,CAAC,EACzEhS,EAAU,QAAQ,gBAAgBgS,EAAO,gCAAiC,CAAC,EAC3EhS,EAAU,QAAQ,gBAAgBgS,EAAO,8BAA+B,CAAC,EACzEhS,EAAU,QAAQ,gBAAgBgS,EAAO,gCAAiC,CAAC,EAC3EhS,EAAU,QAAQ,0BAA0BgS,EAAO,+BAAgC,CAC/E,IACA,GACJ,CAAC,EACDhS,EAAU,QAAQ,gBAAgBgS,EAAO,gCAAiC,CAAC,EAC3EhS,EAAU,QAAQ,gBAAgBgS,EAAO,gCAAiC,CAAC,EAC3EhS,EAAU,QAAQ,0BAA0BgS,EAAO,6BAA8B,CAC7E,IACA,GACJ,CAAC,EACDhS,EAAU,QAAQ,gBAAgBgS,EAAO,8BAA+B,CAAC,EACzEhS,EAAU,QAAQ,gBAAgBgS,EAAO,8BAA+B,CAAC,EACzEhS,EAAU,QAAQ,gBAAgBgS,EAAO,sBAAuB,CAAC,EACjEhS,EAAU,QAAQ,WAAWgS,EAAO,CAChC,UAAW,OACX,aAAc,UACd,aAAc,UACd,SAAU,YACV,YAAa,eACb,YAAa,eACb,YAAa,UACb,eAAgB,aAChB,eAAgB,YACpB,CAAC,EACDlZ,EAAO,WAAW,WAAWkZ,CAAK,QCjhBlC,IAAI5W,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAeqY,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAI9a,GAASjJ,EACTqa,GAAcnR,GACdiH,GAAYD,EACZ6Q,GAAc3Q,GACdH,GAAWI,GACX2T,GAAUnS,GACV3H,GAAewS,EACf3c,GAAWkkB,EACX/gB,GAAO,IAAKghB,GAAc,aAAcC,GAAO,OAAQC,GAAuB,CAC9E,CAAE,EAAG,EAAG,EAAG,CAAC,EACZ,CAAE,EAAG,GAAI,EAAG,EAAE,EACd,CAAE,EAAG,EAAG,EAAG,EAAE,EACb,CAAE,EAAG,EAAG,EAAG,CAAC,EACZ,CAAE,EAAG,GAAI,EAAG,CAAC,CACjB,EAAGC,GAA2BD,GAAqB,OAC/CE,GAAS,SAAUhW,EAAQ,CAC3B/C,GAAU+Y,EAAOhW,CAAM,EACvB,SAASgW,GAAQ,CACb,IAAInT,EAAQ7C,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAA6C,EAAM,UAAY,IAAIlB,GAAS,UAAU,CACrC,WAAY,CACxB,CAAS,EACMkB,CACf,CACI,OAAAmT,EAAM,UAAU,QAAU,SAAUrf,EAAI,CACpC,IAAI0I,EAAQ1I,EAAG,MAAO2I,EAAS3I,EAAG,OAClC,OAAAqJ,EAAO,UAAU,QAAQ,KAAK,KAAM,CAAE,MAAOX,EAAO,OAAQC,EAAQ,EACpE,KAAK,UAAU,QAAQD,EAAOC,CAAM,EAC7B,IACf,EACI0W,EAAM,UAAU,aAAe,SAAUze,EAAO,CAC5C,IAAI6P,EAAO7P,EAAM,QAAO,EACpB6P,IAAS,SAAWA,IAAS,SAC7BzM,GAAO,KAAK,MAAM,gDAAgD,CAE9E,EACIqb,EAAM,UAAU,gBAAkB,SAAU9S,EAAK3N,EAAU,CACvD,IAAIF,EAAKpD,EAAGgkB,EAAoB/X,EAChC,GAAI,CAAC,KAAK,gBAAe,GAAM,CAAC,KAAK,UAAS,EAC1C,OAAO,KAIX,QAFIgY,EAAuB,EACvBC,EAAiB,KACR,CACT,IAAKlkB,EAAI,EAAGA,EAAI8jB,GAA0B9jB,IAAK,CAO3C,GANAgkB,EAAqBH,GAAqB7jB,CAAC,EAC3CoD,EAAM,KAAK,iBAAiB,CACxB,EAAG6N,EAAI,EAAI+S,EAAmB,EAAIC,EAClC,EAAGhT,EAAI,EAAI+S,EAAmB,EAAIC,CACtD,CAAiB,EACDhY,EAAQ7I,EAAI,MACR6I,GAAS3I,EACT,OAAO2I,EAAM,aAAa3I,EAAU,EAAI,EAEvC,GAAI2I,EACL,OAAOA,EAGX,GADAiY,EAAiB,CAAC,CAAC9gB,EAAI,YACnB,CAACA,EAAI,YACL,KAEpB,CACY,GAAI8gB,EACAD,GAAwB,MAGxB,QAAO,IAEvB,CACA,EACIF,EAAM,UAAU,iBAAmB,SAAU9S,EAAK,CAC9C,IAAI7B,EAAQ,KAAK,UAAU,WACvB3I,EAAI,KAAK,UAAU,QAAQ,aAAa,KAAK,MAAMwK,EAAI,EAAI7B,CAAK,EAAG,KAAK,MAAM6B,EAAI,EAAI7B,CAAK,EAAG,EAAG,CAAC,EAAE,KAAM+U,EAAK1d,EAAE,CAAC,EAAG2d,EAAUnY,EACnI,OAAIkY,IAAO,KACPC,EAAW1b,GAAO,KAAK,UAAUjC,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,EACjDwF,EAAQwX,GAAQ,OAAO9gB,GAAOyhB,CAAQ,EAClCnY,EACO,CACH,MAAOA,CAC3B,EAEmB,CACH,YAAa,EAC7B,GAEiBkY,EAAK,EACH,CACH,YAAa,EAC7B,EAEe,CAAA,CACf,EACIJ,EAAM,UAAU,UAAY,SAAUvJ,EAAK5G,EAAK,CAC5C,IAAIgC,EAAQ,KAAK,WAAYhS,EAAS4W,GAAQ5E,GAASA,EAAM,YAC7D,YAAK,MAAM+N,GAAa,CACpB,KAAM,IAClB,CAAS,EACG,KAAK,mBACL/f,EAAO,WAAU,EAAG,MAAK,EAE7BkW,GAAY,UAAU,UAAU,UAAU,KAAK,KAAMlW,EAAQgQ,CAAG,EAChE,KAAK,MAAMgQ,GAAM,CACb,KAAM,IAClB,CAAS,EACM,IACf,EACIG,EAAM,UAAU,QAAU,SAAUvJ,EAAK5G,EAAK,CAC1C,IAAIgC,EAAQ,KAAK,SAAQ,EAAIhS,EAAS4W,GAAQ5E,GAASA,EAAM,UAC7D,OAAIA,GAASA,EAAM,mBACfA,EACK,aAAY,EACZ,WAAU,EACV,MAAK,EAEdkE,GAAY,UAAU,UAAU,QAAQ,KAAK,KAAMlW,EAAQgQ,CAAG,EACvD,IACf,EACImQ,EAAM,UAAU,MAAQ,SAAUzX,EAAQ,CACtCkU,OAAAA,GAAY,UAAU,UAAU,MAAM,KAAK,KAAMlU,CAAM,EACvD,KAAK,aAAY,EACZ,WAAU,EACV,MAAMA,CAAM,EACV,IACf,EACIyX,EAAM,UAAU,eAAiB,UAAY,CACzC,YAAK,gBAAgB,EAAI,EAClB,IACf,EACIA,EAAM,UAAU,gBAAkB,UAAY,CAC1C,YAAK,gBAAgB,EAAK,EACnB,IACf,EACIA,EAAM,UAAU,gBAAkB,UAAY,CAC1C,GAAK,KAAK,OAGV,KAAIxe,EAAS,KAAK,OACd8e,EAAQ,CAAC,CAAC,KAAK,UAAU,QAAQ,WACjCA,EACA9e,EAAO,QAAQ,YAAY,KAAK,UAAU,OAAO,EAGjDA,EAAO,QAAQ,YAAY,KAAK,UAAU,OAAO,EAE7D,EACWwe,CACX,EAAEvD,GAAY,SAAS,EACvBgD,GAAA,MAAgBO,GAChBA,GAAM,UAAU,SAAW,QAC3BvkB,GAAS,cAAcukB,EAAK,EAC5BnU,GAAU,QAAQ,gBAAgBmU,GAAO,kBAAmB,GAAMpa,GAAa,qBAAqB,EACpGjB,GAAO,WAAW,WAAWqb,EAAK,YCrK9B/Y,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAemZ,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAI5b,GAASjJ,EACTqa,GAAcnR,GACd6X,GAAc7Q,GACdnQ,GAAWqQ,EACX0U,GAAa,SAAUxW,EAAQ,CAC/B/C,GAAUuZ,EAAWxW,CAAM,EAC3B,SAASwW,GAAY,CACjB,OAAOxW,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAAwW,EAAU,UAAU,aAAe,SAAUjf,EAAO,CAChD,IAAI6P,EAAO7P,EAAM,QAAO,EACpB6P,IAAS,SACTzM,GAAO,KAAK,MAAM,0CAA0C,CAExE,EACI6b,EAAU,UAAU,gBAAkB,UAAY,CAC9C,MAAO,EACf,EACIA,EAAU,UAAU,UAAY,SAAU/J,EAAK,CAC3C,IAAI5E,EAAQ,KAAK,WAAYhS,EAAS4W,GAAQ5E,GAASA,EAAM,YAC7D,OAAI,KAAK,mBACLhS,EAAO,WAAU,EAAG,MAAK,EAE7BkW,GAAY,UAAU,UAAU,UAAU,KAAK,KAAMlW,CAAM,EACpD,IACf,EACI2gB,EAAU,UAAU,KAAO,UAAY,CACnC,YAAK,UAAS,EACP,IACf,EACWA,CACX,EAAE/D,GAAY,SAAS,EACvB8D,GAAA,UAAoBC,GACpBA,GAAU,UAAU,SAAW,YAC/B/kB,GAAS,cAAc+kB,EAAS,EAChC7b,GAAO,WAAW,WAAW6b,EAAS,YCjDlCvZ,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAeqZ,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAI9b,GAASjJ,EACTqa,GAAcnR,GACdnJ,GAAWmQ,EACX8U,GAAS,SAAU1W,EAAQ,CAC3B/C,GAAUyZ,EAAO1W,CAAM,EACvB,SAAS0W,GAAQ,CACb,OAAO1W,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAA0W,EAAM,UAAU,aAAe,SAAUnf,EAAO,CAC5C,IAAI6P,EAAO7P,EAAM,QAAO,EACpB6P,IAAS,SAAWA,IAAS,SAC7BzM,GAAO,KAAK,MAAM,+CAA+C,CAE7E,EACW+b,CACX,EAAE3K,GAAY,SAAS,EACvB0K,GAAA,MAAgBC,GAChBA,GAAM,UAAU,SAAW,QAC3BjlB,GAAS,cAAcilB,EAAK,EAC5B/b,GAAO,WAAW,WAAW+b,EAAK,YCjClC,OAAO,eAAeC,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIllB,GAAWC,EACXklB,GAAO,UAAY,CACnB,OAAInlB,GAAS,KAAK,aAAeA,GAAS,KAAK,YAAY,IAChD,UAAY,CACf,OAAOA,GAAS,KAAK,YAAY,IAAG,CAChD,EAEW,UAAY,CACf,OAAO,IAAI,KAAI,EAAG,QAAO,CACjC,CACA,EAAC,EACGolB,GAAa,UAAY,CACzB,SAASA,EAAUxkB,EAAMmf,EAAQ,CAC7B,KAAK,GAAKqF,EAAU,gBACpB,KAAK,MAAQ,CACT,KAAM,EACN,SAAU,EACV,SAAUD,GAAG,EACb,UAAW,CACvB,EACQ,KAAK,KAAOvkB,EACZ,KAAK,UAAUmf,CAAM,CAC7B,CACI,OAAAqF,EAAU,UAAU,UAAY,SAAUrF,EAAQ,CAC9C,IAAIsF,EAAO,CAAA,EACX,OAAKtF,EAGIA,EAAO,OAAS,EACrBsF,EAAOtF,EAGPsF,EAAO,CAACtF,CAAM,EANdsF,EAAO,CAAA,EAQX,KAAK,OAASA,EACP,IACf,EACID,EAAU,UAAU,UAAY,UAAY,CACxC,OAAO,KAAK,MACpB,EACIA,EAAU,UAAU,SAAW,SAAUhP,EAAO,CAC5C,IAAI2J,EAAS,KAAK,OAAQ1f,EAAM0f,EAAO,OAAQzf,EAC/C,IAAKA,EAAI,EAAGA,EAAID,EAAKC,IACjB,GAAIyf,EAAOzf,CAAC,EAAE,MAAQ8V,EAAM,IACxB,MAAO,GAGf,YAAK,OAAO,KAAKA,CAAK,EACf,EACf,EACIgP,EAAU,UAAU,UAAY,UAAY,CACxC,IAAI7iB,EAAI6iB,EAAWE,EAAa/iB,EAAE,WAAYlC,EAAMilB,EAAW,OAAQhlB,EACvE,IAAKA,EAAI,EAAGA,EAAID,EAAKC,IACjB,GAAIglB,EAAWhlB,CAAC,EAAE,KAAO,KAAK,GAC1B,MAAO,GAGf,MAAO,EACf,EACI8kB,EAAU,UAAU,MAAQ,UAAY,CACpC,YAAK,KAAI,EACT,KAAK,MAAM,SAAW,EACtB,KAAK,MAAM,SAAWD,GAAG,EACzBC,EAAU,cAAc,IAAI,EACrB,IACf,EACIA,EAAU,UAAU,KAAO,UAAY,CACnC,OAAAA,EAAU,iBAAiB,IAAI,EACxB,IACf,EACIA,EAAU,UAAU,mBAAqB,SAAUG,EAAM,CACrD,KAAK,MAAM,SAAWA,EAAO,KAAK,MAAM,SACxC,KAAK,MAAM,SAAWA,EACtB,KAAK,MAAM,MAAQ,KAAK,MAAM,SAC9B,KAAK,MAAM,UAAY,IAAO,KAAK,MAAM,QACjD,EACIH,EAAU,cAAgB,SAAUI,EAAM,CACtC,KAAK,WAAW,KAAKA,CAAI,EACzB,KAAK,iBAAgB,CAC7B,EACIJ,EAAU,iBAAmB,SAAUI,EAAM,CACzC,IAAIxT,EAAKwT,EAAK,GAAIF,EAAa,KAAK,WAAYjlB,EAAMilB,EAAW,OAAQ,EACzE,IAAK,EAAI,EAAG,EAAIjlB,EAAK,IACjB,GAAIilB,EAAW,CAAC,EAAE,KAAOtT,EAAI,CACzB,KAAK,WAAW,OAAO,EAAG,CAAC,EAC3B,KAChB,CAEA,EACIoT,EAAU,WAAa,UAAY,CAC/B,IAAIK,EAAY,CAAA,EAAIH,EAAa,KAAK,WAAYE,EAAMzF,EAAQnf,EAAMN,EAAGE,EAAGklB,EAAWtP,EAAO5X,EAAKmnB,EACnG,IAAKrlB,EAAI,EAAGA,EAAIglB,EAAW,OAAQhlB,IAY/B,GAXAklB,EAAOF,EAAWhlB,CAAC,EACnByf,EAASyF,EAAK,OACd5kB,EAAO4kB,EAAK,KACZA,EAAK,mBAAmBL,IAAK,EAC7BO,EAAY3F,EAAO,OACfnf,EACA+kB,EAAa/kB,EAAK,KAAK4kB,EAAMA,EAAK,KAAK,IAAM,GAG7CG,EAAa,GAEb,EAACA,EAGL,IAAKnlB,EAAI,EAAGA,EAAIklB,EAAWllB,IACvB4V,EAAQ2J,EAAOvf,CAAC,EACZ4V,EAAM,MAAQ,SACdqP,EAAUrP,EAAM,GAAG,EAAIA,GAInC,IAAK5X,KAAOinB,EACHA,EAAU,eAAejnB,CAAG,GAGjCinB,EAAUjnB,CAAG,EAAE,KAAI,CAE/B,EACI4mB,EAAU,eAAiB,UAAY,CACnC,IAAIQ,EAAOR,EACPQ,EAAK,WAAW,QAChBA,EAAK,WAAU,EACf,sBAAsBA,EAAK,cAAc,GAGzCA,EAAK,YAAc,EAE/B,EACIR,EAAU,iBAAmB,UAAY,CAChC,KAAK,cACN,KAAK,YAAc,GACnB,sBAAsB,KAAK,cAAc,EAErD,EACIA,EAAU,WAAa,CAAA,EACvBA,EAAU,cAAgB,EAC1BA,EAAU,YAAc,GACjBA,CACX,IACAF,GAAA,UAAoBE,0BC9IpB,OAAO,eAActmB,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5D,IAAIoK,EAASjJ,EACTilB,EAAc/b,GACdoR,EAASpK,GACTnQ,EAAWqQ,EACXwV,EAAY,CACZ,KAAM,EACN,SAAU,EACV,OAAQ,EACR,SAAU,EACV,KAAM,GACPC,EAAS,EAAGC,EAAU,EAAGC,EAAY,EAAGxS,EAAY,EAAGyS,EAAa,CAAC,OAAQ,SAAU,aAAa,EACnGC,EAAe,UAAY,CAC3B,SAASA,EAAY/X,EAAMgY,EAAUvlB,EAAMwlB,EAAOC,EAAQC,EAAUC,EAAM,CACtE,KAAK,KAAOpY,EACZ,KAAK,SAAWgY,EAChB,KAAK,MAAQC,EACb,KAAK,KAAOA,EACZ,KAAK,SAAWE,EAChB,KAAK,QAAU,EACf,KAAK,QAAU,EACf,KAAK,KAAOC,EACZ,KAAK,MAAQ,EACb,KAAK,UAAY,EACjB,KAAK,WAAa,EAClB,KAAK,QAAU,EACf,KAAK,KAAO3lB,EACZ,KAAK,QAAUylB,EAAS,KAAK,MAC7B,KAAK,MAAK,CAClB,CACI,OAAAH,EAAY,UAAU,KAAO,SAAUlhB,EAAK,CACxC,IAAIuQ,EAAU,KAAKvQ,CAAG,EAClBuQ,GACAA,EAAO,CAEnB,EACI2Q,EAAY,UAAU,QAAU,SAAU1f,EAAG,CACrCA,EAAI,KAAK,SACL,KAAK,MACL,KAAK,MAAQ,KAAK,SAClB,KAAK,QAAO,GAGZ,KAAK,OAAM,EAGVA,EAAI,EACL,KAAK,MACL,KAAK,MAAQ,EACb,KAAK,KAAI,GAGT,KAAK,MAAK,GAId,KAAK,MAAQA,EACb,KAAK,OAAM,EAEvB,EACI0f,EAAY,UAAU,QAAU,UAAY,CACxC,OAAO,KAAK,KACpB,EACIA,EAAY,UAAU,YAAc,SAAUjf,EAAG,CAC7C,KAAK,QAAU,KAAK,KACpB,KAAK,SAASA,CAAC,EACf,KAAK,KAAOA,CACpB,EACIif,EAAY,UAAU,YAAc,SAAU1f,EAAG,CAC7C,OAAIA,IAAM,SACNA,EAAI,KAAK,OAEN,KAAK,KAAKA,EAAG,KAAK,MAAO,KAAK,QAAS,KAAK,QAAQ,CACnE,EACI0f,EAAY,UAAU,KAAO,UAAY,CACrC,KAAK,MAAQH,EACb,KAAK,WAAa,KAAK,SAAQ,EAAK,KAAK,MACzC,KAAK,aAAY,EACjB,KAAK,KAAK,QAAQ,CAC1B,EACIG,EAAY,UAAU,QAAU,UAAY,CACxC,KAAK,MAAQF,EACb,KAAK,MAAQ,KAAK,SAAW,KAAK,MAClC,KAAK,WAAa,KAAK,SAAQ,EAAK,KAAK,MACzC,KAAK,aAAY,EACjB,KAAK,KAAK,WAAW,CAC7B,EACIE,EAAY,UAAU,KAAO,SAAU1f,EAAG,CACtC,KAAK,MAAK,EACV,KAAK,MAAQA,EACb,KAAK,OAAM,EACX,KAAK,KAAK,QAAQ,CAC1B,EACI0f,EAAY,UAAU,MAAQ,UAAY,CACtC,KAAK,MAAK,EACV,KAAK,MAAQ,EACb,KAAK,OAAM,EACX,KAAK,KAAK,SAAS,CAC3B,EACIA,EAAY,UAAU,OAAS,UAAY,CACvC,KAAK,MAAK,EACV,KAAK,MAAQ,KAAK,SAClB,KAAK,OAAM,EACX,KAAK,KAAK,UAAU,CAC5B,EACIA,EAAY,UAAU,OAAS,UAAY,CACvC,KAAK,YAAY,KAAK,YAAY,KAAK,KAAK,CAAC,CACrD,EACIA,EAAY,UAAU,aAAe,UAAY,CAC7C,IAAI1f,EAAI,KAAK,SAAQ,EAAK,KAAK,WAC3B,KAAK,QAAUuf,EACf,KAAK,QAAQvf,CAAC,EAET,KAAK,QAAUwf,GACpB,KAAK,QAAQ,KAAK,SAAWxf,CAAC,CAE1C,EACI0f,EAAY,UAAU,MAAQ,UAAY,CACtC,KAAK,MAAQJ,EACb,KAAK,KAAK,SAAS,CAC3B,EACII,EAAY,UAAU,SAAW,UAAY,CACzC,OAAO,IAAI,KAAI,EAAG,QAAO,CACjC,EACWA,CACX,IACIM,EAAS,UAAY,CACrB,SAASA,EAAM3V,EAAQ,CACnB,IAAI9C,EAAO,KAAMK,EAAOyC,EAAO,KAAM4V,EAASrY,EAAK,IAAKkY,EAAUI,EAAS7V,EAAO,QAAU/R,EAAQ,QAAQ,OAAQynB,EAAO,CAAC,CAAC1V,EAAO,KAAMrS,EACtI,OAAOqS,EAAO,SAAa,IAC3ByV,EAAW,GAENzV,EAAO,WAAa,EACzByV,EAAW,KAGXA,EAAWzV,EAAO,SAEtB,KAAK,KAAOzC,EACZ,KAAK,IAAMoF,IACX,IAAIuM,EAAS3R,EAAK,SAAQ,IACrBA,aAAgBpO,EAAS,MAAM,MAAWoO,EAAK,UAAS,EAAK,MAC7D2R,GACD7W,EAAO,KAAK,MAAM,yFAAyF,EAE/G,KAAK,KAAO,IAAIgc,EAAY,UAAU,UAAY,CAC9CnX,EAAK,MAAM,aAAY,CACnC,EAAWgS,CAAM,EACT,KAAK,MAAQ,IAAImG,EAAY1nB,EAAK,SAAUgC,EAAG,CAC3CuN,EAAK,WAAWvN,CAAC,CAC7B,EAAWkmB,EAAQ,EAAG,EAAGJ,EAAW,IAAMC,CAAI,EACtC,KAAK,cAAa,EACbC,EAAM,MAAMC,CAAM,IACnBD,EAAM,MAAMC,CAAM,EAAI,CAAA,GAErBD,EAAM,MAAMC,CAAM,EAAE,KAAK,GAAG,IAC7BD,EAAM,MAAMC,CAAM,EAAE,KAAK,GAAG,EAAI,CAAA,GAE/BD,EAAM,OAAOC,CAAM,IACpBD,EAAM,OAAOC,CAAM,EAAI,CAAA,GAE3B,IAAKjoB,KAAOqS,EACJgV,EAAUrnB,CAAG,IAAM,QACnB,KAAK,SAASA,EAAKqS,EAAOrS,CAAG,CAAC,EAGtC,KAAK,MAAK,EACV,KAAK,SAAWqS,EAAO,SACvB,KAAK,QAAUA,EAAO,OAC9B,CACI,OAAA2V,EAAM,UAAU,SAAW,SAAUhoB,EAAKiK,EAAK,CAC3C,IAAI2F,EAAO,KAAK,KAAMqY,EAASrY,EAAK,IAAK5F,EAAOme,EAAMC,EAAStmB,EAAGD,EAAKwmB,EAASC,EAAWC,EAM3F,GALAH,EAAUJ,EAAM,OAAOC,CAAM,EAAEjoB,CAAG,EAC9BooB,GACA,OAAOJ,EAAM,MAAMC,CAAM,EAAEG,CAAO,EAAEpoB,CAAG,EAE3CgK,EAAQ4F,EAAK,QAAQ5P,CAAG,EACpB0K,EAAO,KAAK,SAAST,CAAG,EAaxB,GAZAke,EAAO,CAAA,EACPtmB,EAAM,KAAK,IAAIoI,EAAI,OAAQD,EAAM,MAAM,EACnChK,IAAQ,UAAYiK,EAAI,SAAWD,EAAM,SACrCC,EAAI,OAASD,EAAM,QACnBse,EAAYte,EACZA,EAAQU,EAAO,KAAK,sBAAsBV,EAAOC,EAAK2F,EAAK,QAAQ,IAGnEyY,EAAUpe,EACVA,EAAMS,EAAO,KAAK,sBAAsBT,EAAKD,EAAO4F,EAAK,QAAQ,IAGrE5P,EAAI,QAAQ,MAAM,IAAM,EACxB,IAAK8B,EAAI,EAAGA,EAAID,EAAKC,IACjB,GAAIA,EAAI,IAAM,EACVqmB,EAAK,KAAKle,EAAInI,CAAC,EAAIkI,EAAMlI,CAAC,CAAC,MAE1B,CACD,IAAI0mB,EAAY9d,EAAO,KAAK,YAAYV,EAAMlI,CAAC,CAAC,EAChDymB,EAAU7d,EAAO,KAAK,YAAYT,EAAInI,CAAC,CAAC,EACxCkI,EAAMlI,CAAC,EAAI0mB,EACXL,EAAK,KAAK,CACN,EAAGI,EAAQ,EAAIC,EAAU,EACzB,EAAGD,EAAQ,EAAIC,EAAU,EACzB,EAAGD,EAAQ,EAAIC,EAAU,EACzB,EAAGD,EAAQ,EAAIC,EAAU,CACrD,CAAyB,CACzB,KAIgB,KAAK1mB,EAAI,EAAGA,EAAID,EAAKC,IACjBqmB,EAAK,KAAKle,EAAInI,CAAC,EAAIkI,EAAMlI,CAAC,CAAC,OAI9B2lB,EAAW,QAAQznB,CAAG,IAAM,IACjCgK,EAAQU,EAAO,KAAK,YAAYV,CAAK,EACrCue,EAAU7d,EAAO,KAAK,YAAYT,CAAG,EACrCke,EAAO,CACH,EAAGI,EAAQ,EAAIve,EAAM,EACrB,EAAGue,EAAQ,EAAIve,EAAM,EACrB,EAAGue,EAAQ,EAAIve,EAAM,EACrB,EAAGue,EAAQ,EAAIve,EAAM,CACrC,GAGYme,EAAOle,EAAMD,EAEjBge,EAAM,MAAMC,CAAM,EAAE,KAAK,GAAG,EAAEjoB,CAAG,EAAI,CACjC,MAAOgK,EACP,KAAMme,EACN,IAAKle,EACL,QAASoe,EACT,UAAWC,CACvB,EACQN,EAAM,OAAOC,CAAM,EAAEjoB,CAAG,EAAI,KAAK,GACzC,EACIgoB,EAAM,UAAU,WAAa,SAAUhmB,EAAG,CACtC,IAAI4N,EAAO,KAAK,KAAMiJ,EAAQmP,EAAM,MAAMpY,EAAK,GAAG,EAAE,KAAK,GAAG,EAAG5P,EAAKgL,EAAMhB,EAAOme,EAAM7N,EAAQxY,EAAGD,EAAKoI,EACvG,IAAKjK,KAAO6Y,EAAO,CAKf,GAJA7N,EAAO6N,EAAM7Y,CAAG,EAChBgK,EAAQgB,EAAK,MACbmd,EAAOnd,EAAK,KACZf,EAAMe,EAAK,IACPN,EAAO,KAAK,SAASV,CAAK,EAG1B,GAFAsQ,EAAS,CAAA,EACTzY,EAAM,KAAK,IAAImI,EAAM,OAAQC,EAAI,MAAM,EACnCjK,EAAI,QAAQ,MAAM,IAAM,EACxB,IAAK8B,EAAI,EAAGA,EAAID,EAAKC,IACbA,EAAI,IAAM,EACVwY,EAAO,MAAMtQ,EAAMlI,CAAC,GAAK,GAAKqmB,EAAKrmB,CAAC,EAAIE,CAAC,EAGzCsY,EAAO,KAAK,QACR,KAAK,MAAMtQ,EAAMlI,CAAC,EAAE,EAAIqmB,EAAKrmB,CAAC,EAAE,EAAIE,CAAC,EACrC,IACA,KAAK,MAAMgI,EAAMlI,CAAC,EAAE,EAAIqmB,EAAKrmB,CAAC,EAAE,EAAIE,CAAC,EACrC,IACA,KAAK,MAAMgI,EAAMlI,CAAC,EAAE,EAAIqmB,EAAKrmB,CAAC,EAAE,EAAIE,CAAC,EACrC,KACCgI,EAAMlI,CAAC,EAAE,EAAIqmB,EAAKrmB,CAAC,EAAE,EAAIE,GAC1B,GAAG,MAKf,KAAKF,EAAI,EAAGA,EAAID,EAAKC,IACjBwY,EAAO,MAAMtQ,EAAMlI,CAAC,GAAK,GAAKqmB,EAAKrmB,CAAC,EAAIE,CAAC,OAI5CylB,EAAW,QAAQznB,CAAG,IAAM,GACjCsa,EACI,QACI,KAAK,MAAMtQ,EAAM,EAAIme,EAAK,EAAInmB,CAAC,EAC/B,IACA,KAAK,MAAMgI,EAAM,EAAIme,EAAK,EAAInmB,CAAC,EAC/B,IACA,KAAK,MAAMgI,EAAM,EAAIme,EAAK,EAAInmB,CAAC,EAC/B,KACCgI,EAAM,EAAIme,EAAK,EAAInmB,GACpB,IAGRsY,EAAStQ,EAAQme,EAAOnmB,EAE5B4N,EAAK,QAAQ5P,EAAKsa,CAAM,CACpC,CACA,EACI0N,EAAM,UAAU,cAAgB,UAAY,CACxC,IAAIpV,EAAQ,KACZ,KAAK,MAAM,OAAS,UAAY,CAC5BA,EAAM,KAAK,MAAK,CAC5B,EACQ,KAAK,MAAM,UAAY,UAAY,CAC/BA,EAAM,KAAK,MAAK,CAC5B,EACQ,KAAK,MAAM,QAAU,UAAY,CAC7BA,EAAM,KAAK,KAAI,CAC3B,EACQ,KAAK,MAAM,SAAW,UAAY,CAC9B,IAAIhD,EAAOgD,EAAM,KACbiG,EAAQmP,EAAM,MAAMpY,EAAK,GAAG,EAAEgD,EAAM,GAAG,EACvCiG,EAAM,QAAUA,EAAM,OAAO,SAC7BjJ,EAAK,QAAQ,SAAUiJ,EAAM,OAAO,OAAO,EAE3CjG,EAAM,UACNA,EAAM,SAAS,KAAKA,CAAK,CAEzC,EACQ,KAAK,MAAM,QAAU,UAAY,CAC7B,IAAIhD,EAAOgD,EAAM,KACbiG,EAAQmP,EAAM,MAAMpY,EAAK,GAAG,EAAEgD,EAAM,GAAG,EACvCiG,EAAM,QAAUA,EAAM,OAAO,WAC7BjJ,EAAK,OAAOiJ,EAAM,OAAO,SAAS,EAElCjG,EAAM,SACNA,EAAM,QAAO,CAE7B,CACA,EACIoV,EAAM,UAAU,KAAO,UAAY,CAC/B,YAAK,MAAM,KAAI,EACR,IACf,EACIA,EAAM,UAAU,QAAU,UAAY,CAClC,YAAK,MAAM,QAAO,EACX,IACf,EACIA,EAAM,UAAU,MAAQ,UAAY,CAChC,YAAK,MAAM,MAAK,EACT,IACf,EACIA,EAAM,UAAU,KAAO,SAAUhgB,EAAG,CAChC,YAAK,MAAM,KAAKA,EAAI,GAAI,EACjB,IACf,EACIggB,EAAM,UAAU,MAAQ,UAAY,CAChC,YAAK,MAAM,MAAK,EACT,IACf,EACIA,EAAM,UAAU,OAAS,UAAY,CACjC,YAAK,MAAM,OAAM,EACV,IACf,EACIA,EAAM,UAAU,QAAU,UAAY,CAClC,IAAIC,EAAS,KAAK,KAAK,IAAKQ,EAAS,KAAK,IAAK5P,EAAQmP,EAAM,OAAOC,CAAM,EAAGjoB,EAC7E,KAAK,MAAK,EACV,IAAKA,KAAO6Y,EACR,OAAOmP,EAAM,OAAOC,CAAM,EAAEjoB,CAAG,EAEnC,OAAOgoB,EAAM,MAAMC,CAAM,EAAEQ,CAAM,CACzC,EACIT,EAAM,MAAQ,CAAA,EACdA,EAAM,OAAS,CAAA,EACRA,CACX,IACA1nB,EAAA,MAAgB0nB,EAChBjM,EAAO,KAAK,UAAU,GAAK,SAAU2M,EAAQ,CACzC,IAAIC,EAAWD,EAAO,SACtBA,EAAO,KAAO,KACdA,EAAO,SAAW,UAAY,CAC1B,KAAK,QAAO,EACRC,GACAA,EAAQ,CAEpB,EACI,IAAIC,EAAQ,IAAIZ,EAAMU,CAAM,EAC5BE,EAAM,KAAI,CACd,EACAtoB,EAAA,QAAkB,CACd,WAAY,SAAU0H,EAAGhE,EAAGnB,EAAGS,EAAG,CAC9B,IAAIR,EAAI,QACR,OAAOD,GAAKmF,GAAK1E,GAAK0E,IAAMlF,EAAI,GAAKkF,EAAIlF,GAAKkB,CACtD,EACI,YAAa,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAG,CAC/B,IAAIR,EAAI,QACR,OAAOD,IAAMmF,EAAIA,EAAI1E,EAAI,GAAK0E,IAAMlF,EAAI,GAAKkF,EAAIlF,GAAK,GAAKkB,CACnE,EACI,cAAe,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAG,CACjC,IAAIR,EAAI,QACR,OAAKkF,GAAK1E,EAAI,GAAK,EACPT,EAAI,GAAMmF,EAAIA,KAAOlF,GAAK,OAAS,GAAKkF,EAAIlF,IAAMkB,EAEtDnB,EAAI,IAAOmF,GAAK,GAAKA,KAAOlF,GAAK,OAAS,GAAKkF,EAAIlF,GAAK,GAAKkB,CAC7E,EACI,cAAe,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAGS,EAAG0E,EAAG,CACvC,IAAI3F,EAAI,EACR,OAAIkF,IAAM,EACChE,GAENgE,GAAK1E,KAAO,EACNU,EAAInB,GAEV4F,IACDA,EAAInF,EAAI,IAER,CAACS,GAAKA,EAAI,KAAK,IAAIlB,CAAC,GACpBkB,EAAIlB,EACJC,EAAI2F,EAAI,GAGR3F,EAAK2F,GAAK,EAAI,KAAK,IAAO,KAAK,KAAK5F,EAAIkB,CAAC,EAErC,EAAEA,EACN,KAAK,IAAI,EAAG,IAAMiE,GAAK,EAAE,EACzB,KAAK,KAAMA,EAAI1E,EAAIR,IAAM,EAAI,KAAK,IAAO2F,CAAC,GAAKzE,EAC3D,EACI,eAAgB,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAGS,EAAG0E,EAAG,CACxC,IAAI3F,EAAI,EACR,OAAIkF,IAAM,EACChE,GAENgE,GAAK1E,KAAO,EACNU,EAAInB,GAEV4F,IACDA,EAAInF,EAAI,IAER,CAACS,GAAKA,EAAI,KAAK,IAAIlB,CAAC,GACpBkB,EAAIlB,EACJC,EAAI2F,EAAI,GAGR3F,EAAK2F,GAAK,EAAI,KAAK,IAAO,KAAK,KAAK5F,EAAIkB,CAAC,EAErCA,EAAI,KAAK,IAAI,EAAG,IAAMiE,CAAC,EAAI,KAAK,KAAMA,EAAI1E,EAAIR,IAAM,EAAI,KAAK,IAAO2F,CAAC,EACzE5F,EACAmB,EACZ,EACI,iBAAkB,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAGS,EAAG0E,EAAG,CAC1C,IAAI3F,EAAI,EACR,OAAIkF,IAAM,EACChE,GAENgE,GAAK1E,EAAI,KAAO,EACVU,EAAInB,GAEV4F,IACDA,EAAInF,GAAK,GAAM,MAEf,CAACS,GAAKA,EAAI,KAAK,IAAIlB,CAAC,GACpBkB,EAAIlB,EACJC,EAAI2F,EAAI,GAGR3F,EAAK2F,GAAK,EAAI,KAAK,IAAO,KAAK,KAAK5F,EAAIkB,CAAC,EAEzCiE,EAAI,EACI,KACHjE,EACG,KAAK,IAAI,EAAG,IAAMiE,GAAK,EAAE,EACzB,KAAK,KAAMA,EAAI1E,EAAIR,IAAM,EAAI,KAAK,IAAO2F,CAAC,GAC9CzE,EAEAD,EACJ,KAAK,IAAI,EAAG,KAAOiE,GAAK,EAAE,EAC1B,KAAK,KAAMA,EAAI1E,EAAIR,IAAM,EAAI,KAAK,IAAO2F,CAAC,EAC1C,GACA5F,EACAmB,EACZ,EACI,cAAe,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAG,CACjC,OAAK0E,GAAK1E,GAAK,EAAI,KACRT,GAAK,OAASmF,EAAIA,GAAKhE,EAEzBgE,EAAI,EAAI,KACNnF,GAAK,QAAUmF,GAAK,IAAM,MAAQA,EAAI,KAAQhE,EAEhDgE,EAAI,IAAM,KACRnF,GAAK,QAAUmF,GAAK,KAAO,MAAQA,EAAI,OAAUhE,EAGjDnB,GAAK,QAAUmF,GAAK,MAAQ,MAAQA,EAAI,SAAYhE,CAEvE,EACI,aAAc,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAG,CAChC,OAAOT,EAAIvC,EAAQ,QAAQ,cAAcgD,EAAI0E,EAAG,EAAGnF,EAAGS,CAAC,EAAIU,CACnE,EACI,gBAAiB,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAG,CACnC,OAAI0E,EAAI1E,EAAI,EACDhD,EAAQ,QAAQ,aAAa0H,EAAI,EAAG,EAAGnF,EAAGS,CAAC,EAAI,GAAMU,EAGrD1D,EAAQ,QAAQ,cAAc0H,EAAI,EAAI1E,EAAG,EAAGT,EAAGS,CAAC,EAAI,GAAMT,EAAI,GAAMmB,CAEvF,EACI,OAAQ,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAG,CAC1B,OAAOT,GAAKmF,GAAK1E,GAAK0E,EAAIhE,CAClC,EACI,QAAS,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAG,CAC3B,MAAO,CAACT,GAAKmF,GAAK1E,IAAM0E,EAAI,GAAKhE,CACzC,EACI,UAAW,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAG,CAC7B,OAAK0E,GAAK1E,EAAI,GAAK,EACPT,EAAI,EAAKmF,EAAIA,EAAIhE,EAErB,CAACnB,EAAI,GAAM,EAAEmF,GAAKA,EAAI,GAAK,GAAKhE,CAChD,EACI,aAAc,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAG,CAChC,OAAOT,GAAKmF,GAAK1E,GAAK0E,EAAIA,EAAIA,EAAIA,EAAIhE,CAC9C,EACI,cAAe,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAG,CACjC,OAAOT,IAAMmF,EAAIA,EAAI1E,EAAI,GAAK0E,EAAIA,EAAIA,EAAIA,EAAI,GAAKhE,CAC3D,EACI,gBAAiB,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAG,CACnC,OAAK0E,GAAK1E,EAAI,GAAK,EACPT,EAAI,EAAKmF,EAAIA,EAAIA,EAAIA,EAAIA,EAAIhE,EAEjCnB,EAAI,IAAOmF,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,GAAKhE,CAC1D,EACI,OAAQ,SAAUgE,EAAGhE,EAAGnB,EAAGS,EAAG,CAC1B,OAAQT,EAAImF,EAAK1E,EAAIU,CAC7B,SChgBA,OAAO,eAAe6kB,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIrnB,GAAWC,EACXiJ,GAASC,EACToR,GAASpK,GACTmK,GAAcjK,GACdiX,GAAUhX,GACV0T,GAAUlS,GACVgT,GAAcnI,GACdqI,GAAUd,GACVrS,GAAgB0V,GAChBtD,GAAUuD,GACVtC,GAAcuC,GACdC,GAAUC,GACV/b,GAAYgc,GACZ1X,GAAW2X,GACfR,GAAA,MAAgBne,GAAO,KAAK,QAAQlJ,GAAS,MAAO,CAChD,WAAYkJ,GAAO,WACnB,KAAMA,GAAO,KACb,UAAWA,GAAO,UAClB,KAAMqR,GAAO,KACb,IAAKA,GAAO,IACZ,MAAOA,GAAO,MACd,UAAWD,GAAY,UACvB,MAAOgN,GAAQ,MACf,OAAQA,GAAQ,OAChB,MAAOtD,GAAQ,MACf,UAAWc,GAAY,UACvB,MAAOE,GAAQ,MACf,GAAInT,GAAc,GAClB,MAAOoS,GAAQ,MACf,OAAQA,GAAQ,OAChB,UAAWiB,GAAY,UACvB,MAAOwC,GAAQ,MACf,QAASA,GAAQ,QACjB,QAAS9b,GAAU,QACnB,OAAQsE,GAAS,MACrB,CAAC,YCpCG1E,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAemc,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAI5e,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACVnQ,GAAWqQ,EACXlG,GAAemG,EACfoM,GAAWrM,EACX0X,GAAO,SAAUxZ,EAAQ,CACzB/C,GAAUuc,EAAKxZ,CAAM,EACrB,SAASwZ,GAAM,CACX,OAAOxZ,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAAwZ,EAAI,UAAU,WAAa,SAAUtX,EAAS,CAC1C,IAAI5Q,EAAQG,GAAS,MAAM,SAAS,KAAK,MAAK,CAAE,EAAGgoB,EAAY,KAAK,UAAS,EAC7EvX,EAAQ,UAAS,EACjBA,EAAQ,IAAI,EAAG,EAAG,KAAK,cAAe,EAAG5Q,EAAOmoB,CAAS,EACzDvX,EAAQ,IAAI,EAAG,EAAG,KAAK,YAAW,EAAI5Q,EAAO,EAAG,CAACmoB,CAAS,EAC1DvX,EAAQ,UAAS,EACjBA,EAAQ,gBAAgB,IAAI,CACpC,EACIsX,EAAI,UAAU,SAAW,UAAY,CACjC,OAAO,KAAK,YAAW,EAAK,CACpC,EACIA,EAAI,UAAU,UAAY,UAAY,CAClC,OAAO,KAAK,YAAW,EAAK,CACpC,EACIA,EAAI,UAAU,SAAW,SAAUna,EAAO,CACtC,KAAK,YAAYA,EAAQ,CAAC,CAClC,EACIma,EAAI,UAAU,UAAY,SAAUla,EAAQ,CACxC,KAAK,YAAYA,EAAS,CAAC,CACnC,EACWka,CACX,EAAE9D,GAAQ,KAAK,EACf6D,GAAA,IAAcC,GACdA,GAAI,UAAU,UAAY,GAC1BA,GAAI,UAAU,UAAY,MAC1BA,GAAI,UAAU,oBAAsB,CAAC,cAAe,aAAa,EACjErL,GAAS,cAAcqL,EAAG,EAC1B3X,GAAU,QAAQ,gBAAgB2X,GAAK,cAAe,EAAG5d,GAAa,oBAAoB,EAC1FiG,GAAU,QAAQ,gBAAgB2X,GAAK,cAAe,EAAG5d,GAAa,oBAAoB,EAC1FiG,GAAU,QAAQ,gBAAgB2X,GAAK,QAAS,EAAG5d,GAAa,oBAAoB,EACpFiG,GAAU,QAAQ,gBAAgB2X,GAAK,YAAa,GAAO5d,GAAa,qBAAqB,EAC7FjB,GAAO,WAAW,WAAW6e,EAAG,kBCxD5Bvc,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACGsc,GAAkBxc,GAAQA,EAAK,gBAAmB,UAAY,CAC9D,QAASnK,EAAI,EAAGd,EAAI,EAAG0nB,EAAK,UAAU,OAAQ1nB,EAAI0nB,EAAI1nB,IAAKc,GAAK,UAAUd,CAAC,EAAE,OAC7E,QAASoC,EAAI,MAAMtB,CAAC,EAAG6mB,EAAI,EAAG3nB,EAAI,EAAGA,EAAI0nB,EAAI1nB,IACzC,QAAS+B,EAAI,UAAU/B,CAAC,EAAG4nB,EAAI,EAAGC,EAAK9lB,EAAE,OAAQ6lB,EAAIC,EAAID,IAAKD,IAC1DvlB,EAAEulB,CAAC,EAAI5lB,EAAE6lB,CAAC,EAClB,OAAOxlB,CACX,EACA,OAAO,eAAe0lB,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIpf,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACVhG,GAAekG,EACfrQ,GAAWsQ,EACXiY,GAAQ,SAAUha,EAAQ,CAC1B/C,GAAU+c,EAAMha,CAAM,EACtB,SAASga,EAAK1X,EAAQ,CAClB,IAAIO,EAAQ7C,EAAO,KAAK,KAAMsC,CAAM,GAAK,KACzC,OAAAO,EAAM,GAAG,+EAAgF,UAAY,CACjG,KAAK,YAAY,eAAe,CAC5C,CAAS,EACMA,CACf,CACI,OAAAmX,EAAK,UAAU,WAAa,SAAU9X,EAAS,CAC3C,IAAI4D,EAAS,KAAK,OAAM,EAAI6L,EAAS7L,EAAO,OAAQnN,EAAU,KAAK,QAAO,EAAIshB,EAAS,KAAK,OAAM,EAAIC,EAAS,KAAK,OAAM,EAAIC,EAAIroB,EAAKC,EACvI,GAAK4f,EAKL,IAFAzP,EAAQ,UAAS,EACjBA,EAAQ,OAAO4D,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EAC/BnN,IAAY,GAAKgZ,EAAS,EAAG,CAO7B,IANAwI,EAAK,KAAK,iBAAgB,EAC1BroB,EAAMqoB,EAAG,OACTpoB,EAAIkoB,EAAS,EAAI,EACZA,GACD/X,EAAQ,iBAAiBiY,EAAG,CAAC,EAAGA,EAAG,CAAC,EAAGA,EAAG,CAAC,EAAGA,EAAG,CAAC,CAAC,EAEhDpoB,EAAID,EAAM,GACboQ,EAAQ,cAAciY,EAAGpoB,GAAG,EAAGooB,EAAGpoB,GAAG,EAAGooB,EAAGpoB,GAAG,EAAGooB,EAAGpoB,GAAG,EAAGooB,EAAGpoB,GAAG,EAAGooB,EAAGpoB,GAAG,CAAC,EAEzEkoB,GACD/X,EAAQ,iBAAiBiY,EAAGroB,EAAM,CAAC,EAAGqoB,EAAGroB,EAAM,CAAC,EAAGgU,EAAO6L,EAAS,CAAC,EAAG7L,EAAO6L,EAAS,CAAC,CAAC,CAEzG,SACiBuI,EAEL,IADAnoB,EAAI,EACGA,EAAI4f,GACPzP,EAAQ,cAAc4D,EAAO/T,GAAG,EAAG+T,EAAO/T,GAAG,EAAG+T,EAAO/T,GAAG,EAAG+T,EAAO/T,GAAG,EAAG+T,EAAO/T,GAAG,EAAG+T,EAAO/T,GAAG,CAAC,MAItG,KAAKA,EAAI,EAAGA,EAAI4f,EAAQ5f,GAAK,EACzBmQ,EAAQ,OAAO4D,EAAO/T,CAAC,EAAG+T,EAAO/T,EAAI,CAAC,CAAC,EAG3CkoB,GACA/X,EAAQ,UAAS,EACjBA,EAAQ,gBAAgB,IAAI,GAG5BA,EAAQ,YAAY,IAAI,EAEpC,EACI8X,EAAK,UAAU,iBAAmB,UAAY,CAC1C,OAAO,KAAK,UAAU,gBAAiB,KAAK,iBAAiB,CACrE,EACIA,EAAK,UAAU,kBAAoB,UAAY,CAC3C,OAAI,KAAK,SACE,KAAK,wBAAuB,EAG5Brf,GAAO,KAAK,cAAc,KAAK,SAAU,KAAK,SAAS,CAE1E,EACIqf,EAAK,UAAU,wBAA0B,UAAY,CACjD,IAAIthB,EAAI,KAAK,OAAM,EAAI5G,EAAM4G,EAAE,OAAQC,EAAU,KAAK,QAAO,EAAIyhB,EAAqBzf,GAAO,KAAK,kBAAkBjC,EAAE5G,EAAM,CAAC,EAAG4G,EAAE5G,EAAM,CAAC,EAAG4G,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGC,CAAO,EAAG0hB,EAAoB1f,GAAO,KAAK,kBAAkBjC,EAAE5G,EAAM,CAAC,EAAG4G,EAAE5G,EAAM,CAAC,EAAG4G,EAAE5G,EAAM,CAAC,EAAG4G,EAAE5G,EAAM,CAAC,EAAG4G,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGC,CAAO,EAAG2hB,EAAS3f,GAAO,KAAK,cAAcjC,EAAGC,CAAO,EAAGwhB,EAAK,CAACC,EAAmB,CAAC,EAAGA,EAAmB,CAAC,CAAC,EACnY,OAAOE,CAAM,EACb,OAAO,CACRD,EAAkB,CAAC,EACnBA,EAAkB,CAAC,EACnB3hB,EAAE5G,EAAM,CAAC,EACT4G,EAAE5G,EAAM,CAAC,EACTuoB,EAAkB,CAAC,EACnBA,EAAkB,CAAC,EACnBD,EAAmB,CAAC,EACpBA,EAAmB,CAAC,EACpB1hB,EAAE,CAAC,EACHA,EAAE,CAAC,CACf,CAAS,EACD,OAAOyhB,CACf,EACIH,EAAK,UAAU,SAAW,UAAY,CAClC,OAAO,KAAK,YAAW,EAAG,KAClC,EACIA,EAAK,UAAU,UAAY,UAAY,CACnC,OAAO,KAAK,YAAW,EAAG,MAClC,EACIA,EAAK,UAAU,YAAc,UAAY,CACrC,IAAIlU,EAAS,KAAK,OAAM,EACxB,GAAIA,EAAO,OAAS,EAChB,MAAO,CACH,EAAGA,EAAO,CAAC,GAAK,EAChB,EAAGA,EAAO,CAAC,GAAK,EAChB,MAAO,EACP,OAAQ,CACxB,EAEY,KAAK,QAAO,IAAO,EACnBA,EAAS4T,GAAe,CACpB5T,EAAO,CAAC,EACRA,EAAO,CAAC,CACxB,EAAe,KAAK,oBAAqB,CACzBA,EAAOA,EAAO,OAAS,CAAC,EACxBA,EAAOA,EAAO,OAAS,CAAC,CACxC,CAAa,EAGDA,EAAS,KAAK,OAAM,EAOxB,QALIC,EAAOD,EAAO,CAAC,EACfG,EAAOH,EAAO,CAAC,EACfE,EAAOF,EAAO,CAAC,EACfI,EAAOJ,EAAO,CAAC,EACfrT,EAAGC,EACET,EAAI,EAAGA,EAAI6T,EAAO,OAAS,EAAG7T,IACnCQ,EAAIqT,EAAO7T,EAAI,CAAC,EAChBS,EAAIoT,EAAO7T,EAAI,EAAI,CAAC,EACpB8T,EAAO,KAAK,IAAIA,EAAMtT,CAAC,EACvBwT,EAAO,KAAK,IAAIA,EAAMxT,CAAC,EACvBuT,EAAO,KAAK,IAAIA,EAAMtT,CAAC,EACvBwT,EAAO,KAAK,IAAIA,EAAMxT,CAAC,EAE3B,MAAO,CACH,EAAGqT,EACH,EAAGC,EACH,MAAOC,EAAOF,EACd,OAAQG,EAAOF,CAC3B,CACA,EACWgU,CACX,EAAEtE,GAAQ,KAAK,EACfqE,GAAA,KAAeC,GACfA,GAAK,UAAU,UAAY,OAC3BA,GAAK,UAAU,oBAAsB,CAAC,SAAU,SAAU,SAAS,EACnEvoB,GAAS,cAAcuoB,EAAI,EAC3BnY,GAAU,QAAQ,gBAAgBmY,GAAM,SAAU,EAAK,EACvDnY,GAAU,QAAQ,gBAAgBmY,GAAM,SAAU,EAAK,EACvDnY,GAAU,QAAQ,gBAAgBmY,GAAM,UAAW,EAAGpe,GAAa,oBAAoB,EACvFiG,GAAU,QAAQ,gBAAgBmY,GAAM,SAAU,GAAIpe,GAAa,yBAAyB,EAC5FjB,GAAO,WAAW,WAAWqf,EAAI,ECjKjC,IAAI/c,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAemd,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAI5f,GAASjJ,EACTmQ,GAAYjH,EACZmf,GAASnY,GACThG,GAAekG,EACfrQ,GAAWsQ,EACXyY,GAAS,SAAUxa,EAAQ,CAC3B/C,GAAUud,EAAOxa,CAAM,EACvB,SAASwa,GAAQ,CACb,OAAOxa,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAAwa,EAAM,UAAU,WAAa,SAAUxJ,EAAK,CACxChR,EAAO,UAAU,WAAW,KAAK,KAAMgR,CAAG,EAC1C,IAAIyJ,EAAM,KAAK,GAAK,EAChB3U,EAAS,KAAK,OAAM,EACpBqU,EAAKrU,EACL4U,EAAc,KAAK,QAAO,IAAO,GAAK5U,EAAO,OAAS,EACtD4U,IACAP,EAAK,KAAK,iBAAgB,GAE9B,IAAIpoB,EAAI+T,EAAO,OACXzS,EAAIC,EACJonB,GACArnB,EAAKyS,EAAO/T,EAAI,CAAC,GAAKooB,EAAGA,EAAG,OAAS,CAAC,EAAIA,EAAGA,EAAG,OAAS,CAAC,GAAK,EAC/D7mB,EAAKwS,EAAO/T,EAAI,CAAC,GAAKooB,EAAGA,EAAG,OAAS,CAAC,EAAIA,EAAGA,EAAG,OAAS,CAAC,GAAK,IAG/D9mB,EAAKyS,EAAO/T,EAAI,CAAC,EAAI+T,EAAO/T,EAAI,CAAC,EACjCuB,EAAKwS,EAAO/T,EAAI,CAAC,EAAI+T,EAAO/T,EAAI,CAAC,GAErC,IAAIuF,GAAW,KAAK,MAAMhE,EAAID,CAAE,EAAIonB,GAAOA,EACvC9I,EAAS,KAAK,cAAa,EAC3BtS,EAAQ,KAAK,aAAY,EAC7B2R,EAAI,KAAI,EACRA,EAAI,UAAS,EACbA,EAAI,UAAUlL,EAAO/T,EAAI,CAAC,EAAG+T,EAAO/T,EAAI,CAAC,CAAC,EAC1Cif,EAAI,OAAO1Z,CAAO,EAClB0Z,EAAI,OAAO,EAAG,CAAC,EACfA,EAAI,OAAO,CAACW,EAAQtS,EAAQ,CAAC,EAC7B2R,EAAI,OAAO,CAACW,EAAQ,CAACtS,EAAQ,CAAC,EAC9B2R,EAAI,UAAS,EACbA,EAAI,QAAO,EACP,KAAK,uBACLA,EAAI,KAAI,EACRA,EAAI,UAAUlL,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EAC9B4U,GACArnB,GAAM8mB,EAAG,CAAC,EAAIA,EAAG,CAAC,GAAK,EAAIrU,EAAO,CAAC,EACnCxS,GAAM6mB,EAAG,CAAC,EAAIA,EAAG,CAAC,GAAK,EAAIrU,EAAO,CAAC,IAGnCzS,EAAKyS,EAAO,CAAC,EAAIA,EAAO,CAAC,EACzBxS,EAAKwS,EAAO,CAAC,EAAIA,EAAO,CAAC,GAE7BkL,EAAI,QAAQ,KAAK,MAAM,CAAC1d,EAAI,CAACD,CAAE,EAAIonB,GAAOA,CAAG,EAC7CzJ,EAAI,OAAO,EAAG,CAAC,EACfA,EAAI,OAAO,CAACW,EAAQtS,EAAQ,CAAC,EAC7B2R,EAAI,OAAO,CAACW,EAAQ,CAACtS,EAAQ,CAAC,EAC9B2R,EAAI,UAAS,EACbA,EAAI,QAAO,GAEf,IAAI2J,EAAgB,KAAK,YAAW,EAChCA,IACA,KAAK,MAAM,YAAc,GACzB3J,EAAI,YAAY,EAAE,GAEtBA,EAAI,gBAAgB,IAAI,EACpB2J,IACA,KAAK,MAAM,YAAc,GAErC,EACIH,EAAM,UAAU,YAAc,UAAY,CACtC,IAAII,EAAW5a,EAAO,UAAU,YAAY,KAAK,IAAI,EACjDmB,EAAS,KAAK,aAAY,EAAK,EACnC,MAAO,CACH,EAAGyZ,EAAS,EAAIzZ,EAChB,EAAGyZ,EAAS,EAAIzZ,EAChB,MAAOyZ,EAAS,MAAQzZ,EAAS,EACjC,OAAQyZ,EAAS,OAASzZ,EAAS,CAC/C,CACA,EACWqZ,CACX,EAAET,GAAO,IAAI,EACbQ,GAAA,MAAgBC,GAChBA,GAAM,UAAU,UAAY,QAC5B/oB,GAAS,cAAc+oB,EAAK,EAC5B3Y,GAAU,QAAQ,gBAAgB2Y,GAAO,gBAAiB,GAAI5e,GAAa,oBAAoB,EAC/FiG,GAAU,QAAQ,gBAAgB2Y,GAAO,eAAgB,GAAI5e,GAAa,oBAAoB,EAC9FiG,GAAU,QAAQ,gBAAgB2Y,GAAO,qBAAsB,EAAK,EACpE7f,GAAO,WAAW,WAAW6f,EAAK,YCrG9Bvd,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAeyd,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIlgB,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACVhG,GAAekG,EACfrQ,GAAWsQ,EACX+Y,GAAU,SAAU9a,EAAQ,CAC5B/C,GAAU6d,EAAQ9a,CAAM,EACxB,SAAS8a,GAAS,CACd,OAAO9a,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAA8a,EAAO,UAAU,WAAa,SAAU5Y,EAAS,CAC7CA,EAAQ,UAAS,EACjBA,EAAQ,IAAI,EAAG,EAAG,KAAK,SAAU,EAAG,KAAK,GAAK,EAAG,EAAK,EACtDA,EAAQ,UAAS,EACjBA,EAAQ,gBAAgB,IAAI,CACpC,EACI4Y,EAAO,UAAU,SAAW,UAAY,CACpC,OAAO,KAAK,OAAM,EAAK,CAC/B,EACIA,EAAO,UAAU,UAAY,UAAY,CACrC,OAAO,KAAK,OAAM,EAAK,CAC/B,EACIA,EAAO,UAAU,SAAW,SAAUzb,EAAO,CACrC,KAAK,WAAaA,EAAQ,GAC1B,KAAK,OAAOA,EAAQ,CAAC,CAEjC,EACIyb,EAAO,UAAU,UAAY,SAAUxb,EAAQ,CACvC,KAAK,WAAaA,EAAS,GAC3B,KAAK,OAAOA,EAAS,CAAC,CAElC,EACWwb,CACX,EAAEpF,GAAQ,KAAK,EACfmF,GAAA,OAAiBC,GACjBA,GAAO,UAAU,UAAY,GAC7BA,GAAO,UAAU,UAAY,SAC7BA,GAAO,UAAU,oBAAsB,CAAC,QAAQ,EAChDrpB,GAAS,cAAcqpB,EAAM,EAC7BjZ,GAAU,QAAQ,gBAAgBiZ,GAAQ,SAAU,EAAGlf,GAAa,oBAAoB,EACxFjB,GAAO,WAAW,WAAWmgB,EAAM,YCtD/B7d,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAe2d,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIpgB,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACVhG,GAAekG,EACfrQ,GAAWsQ,EACXiZ,GAAW,SAAUhb,EAAQ,CAC7B/C,GAAU+d,EAAShb,CAAM,EACzB,SAASgb,GAAU,CACf,OAAOhb,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAAgb,EAAQ,UAAU,WAAa,SAAU9Y,EAAS,CAC9C,IAAI+Y,EAAK,KAAK,QAAO,EAAIC,EAAK,KAAK,QAAO,EAC1ChZ,EAAQ,UAAS,EACjBA,EAAQ,KAAI,EACR+Y,IAAOC,GACPhZ,EAAQ,MAAM,EAAGgZ,EAAKD,CAAE,EAE5B/Y,EAAQ,IAAI,EAAG,EAAG+Y,EAAI,EAAG,KAAK,GAAK,EAAG,EAAK,EAC3C/Y,EAAQ,QAAO,EACfA,EAAQ,UAAS,EACjBA,EAAQ,gBAAgB,IAAI,CACpC,EACI8Y,EAAQ,UAAU,SAAW,UAAY,CACrC,OAAO,KAAK,QAAO,EAAK,CAChC,EACIA,EAAQ,UAAU,UAAY,UAAY,CACtC,OAAO,KAAK,QAAO,EAAK,CAChC,EACIA,EAAQ,UAAU,SAAW,SAAU3b,EAAO,CAC1C,KAAK,QAAQA,EAAQ,CAAC,CAC9B,EACI2b,EAAQ,UAAU,UAAY,SAAU1b,EAAQ,CAC5C,KAAK,QAAQA,EAAS,CAAC,CAC/B,EACW0b,CACX,EAAEtF,GAAQ,KAAK,EACfqF,GAAA,QAAkBC,GAClBA,GAAQ,UAAU,UAAY,UAC9BA,GAAQ,UAAU,UAAY,GAC9BA,GAAQ,UAAU,oBAAsB,CAAC,UAAW,SAAS,EAC7DvpB,GAAS,cAAcupB,EAAO,EAC9BnZ,GAAU,QAAQ,0BAA0BmZ,GAAS,SAAU,CAAC,IAAK,GAAG,CAAC,EACzEnZ,GAAU,QAAQ,gBAAgBmZ,GAAS,UAAW,EAAGpf,GAAa,oBAAoB,EAC1FiG,GAAU,QAAQ,gBAAgBmZ,GAAS,UAAW,EAAGpf,GAAa,oBAAoB,EAC1FjB,GAAO,WAAW,WAAWqgB,EAAO,YC1DhC/d,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAe+d,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIxgB,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACVhG,GAAekG,EACfrQ,GAAWsQ,EACXqZ,GAAS,SAAUpb,EAAQ,CAC3B/C,GAAUme,EAAOpb,CAAM,EACvB,SAASob,GAAQ,CACb,OAAOpb,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAAob,EAAM,UAAU,iBAAmB,UAAY,CAC3C,MAAO,CAAC,GAAG,KAAK,UAAS,GAAM,KAAK,mBAAkB,IAAO,IACzD,KAAK,UAAS,GACd,KAAK,SAAQ,EACzB,EACIA,EAAM,UAAU,WAAa,SAAUlZ,EAAS,CAC5C,IAAI7C,EAAQ,KAAK,MAAK,EAAIC,EAAS,KAAK,SAAU+b,EAAQ,KAAK,MAAK,EAAIC,EAAWC,EAAY5C,EAC3F0C,IACAC,EAAY,KAAK,UAAS,EAC1BC,EAAa,KAAK,WAAU,EACxBD,GAAaC,EACb5C,EAAS,CACL0C,EACA,KAAK,MAAK,EACV,KAAK,MAAK,EACVC,EACAC,EACA,EACA,EACAlc,EACAC,CACpB,EAGgBqZ,EAAS,CAAC0C,EAAO,EAAG,EAAGhc,EAAOC,CAAM,IAGxC,KAAK,QAAO,GAAM,KAAK,UAAS,KAChC4C,EAAQ,UAAS,EACjBA,EAAQ,KAAK,EAAG,EAAG7C,EAAOC,CAAM,EAChC4C,EAAQ,UAAS,EACjBA,EAAQ,gBAAgB,IAAI,GAE5BmZ,GACAnZ,EAAQ,UAAU,MAAMA,EAASyW,CAAM,CAEnD,EACIyC,EAAM,UAAU,SAAW,SAAUlZ,EAAS,CAC1C,IAAI7C,EAAQ,KAAK,MAAK,EAAIC,EAAS,KAAK,OAAM,EAC9C4C,EAAQ,UAAS,EACjBA,EAAQ,KAAK,EAAG,EAAG7C,EAAOC,CAAM,EAChC4C,EAAQ,UAAS,EACjBA,EAAQ,gBAAgB,IAAI,CACpC,EACIkZ,EAAM,UAAU,SAAW,UAAY,CACnC,IAAIzkB,EACA0kB,EAAQ,KAAK,MAAK,EACtB,OAAQ1kB,EAAK,KAAK,MAAM,SAAW,MAAQA,IAAO,OAASA,EAAM0kB,EAAQA,EAAM,MAAQ,CAC/F,EACID,EAAM,UAAU,UAAY,UAAY,CACpC,IAAIzkB,EACA0kB,EAAQ,KAAK,MAAK,EACtB,OAAQ1kB,EAAK,KAAK,MAAM,UAAY,MAAQA,IAAO,OAASA,EAAM0kB,EAAQA,EAAM,OAAS,CACjG,EACID,EAAM,QAAU,SAAUplB,EAAKN,EAAU,CACrC,IAAIyU,EAAMxP,GAAO,KAAK,mBAAkB,EACxCwP,EAAI,OAAS,UAAY,CACrB,IAAIkR,EAAQ,IAAID,EAAM,CAClB,MAAOjR,CACvB,CAAa,EACDzU,EAAS2lB,CAAK,CAC1B,EACQlR,EAAI,YAAc,YAClBA,EAAI,IAAMnU,CAClB,EACWolB,CACX,EAAE1F,GAAQ,KAAK,EACfyF,GAAA,MAAgBC,GAChBA,GAAM,UAAU,UAAY,QAC5B3pB,GAAS,cAAc2pB,EAAK,EAC5BvZ,GAAU,QAAQ,gBAAgBuZ,GAAO,OAAO,EAChDvZ,GAAU,QAAQ,0BAA0BuZ,GAAO,OAAQ,CAAC,IAAK,IAAK,QAAS,QAAQ,CAAC,EACxFvZ,GAAU,QAAQ,gBAAgBuZ,GAAO,QAAS,EAAGxf,GAAa,oBAAoB,EACtFiG,GAAU,QAAQ,gBAAgBuZ,GAAO,QAAS,EAAGxf,GAAa,oBAAoB,EACtFiG,GAAU,QAAQ,gBAAgBuZ,GAAO,YAAa,EAAGxf,GAAa,oBAAoB,EAC1FiG,GAAU,QAAQ,gBAAgBuZ,GAAO,aAAc,EAAGxf,GAAa,oBAAoB,EAC3FjB,GAAO,WAAW,WAAWygB,EAAK,YCpG9Bne,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAeoe,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAI7gB,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACV6U,GAAU3U,GACVlG,GAAemG,EACftQ,GAAW8R,EACXkY,GAAmB,CACnB,aACA,WACA,YACA,UACA,aACA,OACA,OACJ,EAAGC,GAAe,eAAgBC,GAAO,OAAQC,GAAK,KAAMC,GAAQ,QAASC,GAAO,OAAQC,GAAO,OAAQC,GAAoBP,GAAiB,OAC5IQ,GAAS,SAAUjc,EAAQ,CAC3B/C,GAAUgf,EAAOjc,CAAM,EACvB,SAASic,EAAM3Z,EAAQ,CACnB,IAAIO,EAAQ7C,EAAO,KAAK,KAAMsC,CAAM,GAAK,KACzC,OAAAO,EAAM,GAAG,YAAa,SAAUpI,EAAK,CACjC,KAAK,cAAcA,EAAI,KAAK,EAC5B,KAAK,MAAK,CACtB,CAAS,EACMoI,CACf,CACI,OAAAoZ,EAAM,UAAU,QAAU,UAAY,CAClC,OAAO,KAAK,KAAK,MAAM,EAAE,CAAC,CAClC,EACIA,EAAM,UAAU,OAAS,UAAY,CACjC,OAAO,KAAK,KAAK,KAAK,EAAE,CAAC,CACjC,EACIA,EAAM,UAAU,cAAgB,SAAU1c,EAAM,CAC5C,IAAIC,EAAO,KAAMzN,EACbM,EAAO,UAAY,CACnBmN,EAAK,MAAK,CACtB,EACQ,IAAKzN,EAAI,EAAGA,EAAIiqB,GAAmBjqB,IAC/BwN,EAAK,GAAGkc,GAAiB1pB,CAAC,EAAI2pB,GAAcrpB,CAAI,CAE5D,EACI4pB,EAAM,UAAU,SAAW,UAAY,CACnC,OAAO,KAAK,QAAO,EAAG,MAAK,CACnC,EACIA,EAAM,UAAU,UAAY,UAAY,CACpC,OAAO,KAAK,QAAO,EAAG,OAAM,CACpC,EACIA,EAAM,UAAU,MAAQ,UAAY,CAChC,IAAI1c,EAAO,KAAK,QAAO,EAAI2c,EAAM,KAAK,OAAM,EAAI7c,EAAOC,EAAQ6c,EAAkBC,EAAc3pB,EAAGC,EAAG2pB,EACrG,GAAI9c,GAAQ2c,EAAK,CAQb,OAPA7c,EAAQE,EAAK,MAAK,EAClBD,EAASC,EAAK,OAAM,EACpB4c,EAAmBD,EAAI,iBAAgB,EACvCE,EAAeF,EAAI,aAAY,EAC/BG,EAAgBH,EAAI,cAAa,EACjCzpB,EAAI,EACJC,EAAI,EACIypB,EAAgB,CACpB,KAAKP,GACDnpB,EAAI4M,EAAQ,EACZ3M,EAAI,GAAK2pB,EACT,MACJ,KAAKR,GACDppB,EAAI4M,EAAQ+c,EACZ1pB,EAAI4M,EAAS,EACb,MACJ,KAAKwc,GACDrpB,EAAI4M,EAAQ,EACZ3M,EAAI4M,EAAS+c,EACb,MACJ,KAAKN,GACDtpB,EAAI,GAAK2pB,EACT1pB,EAAI4M,EAAS,EACb,KACpB,CACY4c,EAAI,SAAS,CACT,EAAG,GAAKzpB,EACR,EAAG,GAAKC,EACR,MAAO2M,EACP,OAAQC,CACxB,CAAa,EACDC,EAAK,SAAS,CACV,EAAG,GAAK9M,EACR,EAAG,GAAKC,CACxB,CAAa,CACb,CACA,EACWupB,CACX,EAAExF,GAAQ,KAAK,EACf+E,GAAA,MAAgBS,GAChBA,GAAM,UAAU,UAAY,QAC5BxqB,GAAS,cAAcwqB,EAAK,EAC5BthB,GAAO,WAAW,WAAWshB,EAAK,EAClC,IAAIK,GAAO,SAAUtc,EAAQ,CACzB/C,GAAUqf,EAAKtc,CAAM,EACrB,SAASsc,GAAM,CACX,OAAOtc,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAAsc,EAAI,UAAU,WAAa,SAAUpa,EAAS,CAC1C,IAAI7C,EAAQ,KAAK,MAAK,EAAIC,EAAS,KAAK,OAAM,EAAI6c,EAAmB,KAAK,iBAAgB,EAAIC,EAAe,KAAK,eAAgBC,EAAgB,KAAK,gBAAiBE,EAAe,KAAK,IAAI,KAAK,aAAY,EAAIld,EAAQ,EAAGC,EAAS,CAAC,EAC1O4C,EAAQ,UAAS,EACZqa,EAIDra,EAAQ,OAAOqa,EAAc,CAAC,EAH9Bra,EAAQ,OAAO,EAAG,CAAC,EAKnBia,IAAqBP,KACrB1Z,EAAQ,QAAQ7C,EAAQ+c,GAAgB,EAAG,CAAC,EAC5Cla,EAAQ,OAAO7C,EAAQ,EAAG,GAAKgd,CAAa,EAC5Cna,EAAQ,QAAQ7C,EAAQ+c,GAAgB,EAAG,CAAC,GAE3CG,GAIDra,EAAQ,OAAO7C,EAAQkd,EAAc,CAAC,EACtCra,EAAQ,IAAI7C,EAAQkd,EAAcA,EAAcA,EAAe,KAAK,GAAK,EAAK,EAAG,EAAG,EAAK,GAJzFra,EAAQ,OAAO7C,EAAO,CAAC,EAMvB8c,IAAqBN,KACrB3Z,EAAQ,OAAO7C,GAAQC,EAAS+c,GAAiB,CAAC,EAClDna,EAAQ,OAAO7C,EAAQ+c,EAAc9c,EAAS,CAAC,EAC/C4C,EAAQ,OAAO7C,GAAQC,EAAS+c,GAAiB,CAAC,GAEjDE,GAIDra,EAAQ,OAAO7C,EAAOC,EAASid,CAAY,EAC3Cra,EAAQ,IAAI7C,EAAQkd,EAAcjd,EAASid,EAAcA,EAAc,EAAG,KAAK,GAAK,EAAG,EAAK,GAJ5Fra,EAAQ,OAAO7C,EAAOC,CAAM,EAM5B6c,IAAqBL,KACrB5Z,EAAQ,QAAQ7C,EAAQ+c,GAAgB,EAAG9c,CAAM,EACjD4C,EAAQ,OAAO7C,EAAQ,EAAGC,EAAS+c,CAAa,EAChDna,EAAQ,QAAQ7C,EAAQ+c,GAAgB,EAAG9c,CAAM,GAEhDid,GAIDra,EAAQ,OAAOqa,EAAcjd,CAAM,EACnC4C,EAAQ,IAAIqa,EAAcjd,EAASid,EAAcA,EAAc,KAAK,GAAK,EAAG,KAAK,GAAI,EAAK,GAJ1Fra,EAAQ,OAAO,EAAG5C,CAAM,EAMxB6c,IAAqBJ,KACrB7Z,EAAQ,OAAO,GAAI5C,EAAS+c,GAAiB,CAAC,EAC9Cna,EAAQ,OAAO,GAAKka,EAAc9c,EAAS,CAAC,EAC5C4C,EAAQ,OAAO,GAAI5C,EAAS+c,GAAiB,CAAC,GAE9CE,IACAra,EAAQ,OAAO,EAAGqa,CAAY,EAC9Bra,EAAQ,IAAIqa,EAAcA,EAAcA,EAAc,KAAK,GAAK,KAAK,GAAK,EAAK,EAAG,EAAK,GAE3Fra,EAAQ,UAAS,EACjBA,EAAQ,gBAAgB,IAAI,CACpC,EACIoa,EAAI,UAAU,YAAc,UAAY,CACpC,IAAI7pB,EAAI,EAAGC,EAAI,EAAG0pB,EAAe,KAAK,aAAY,EAAIC,EAAgB,KAAK,cAAa,EAAIG,EAAY,KAAK,iBAAgB,EAAInd,EAAQ,KAAK,QAASC,EAAS,KAAK,OAAM,EAC3K,OAAIkd,IAAcZ,IACdlpB,GAAK2pB,EACL/c,GAAU+c,GAELG,IAAcV,GACnBxc,GAAU+c,EAELG,IAAcT,IACnBtpB,GAAK2pB,EAAe,IACpB/c,GAAS+c,GAEJI,IAAcX,KACnBxc,GAAS+c,EAAe,KAErB,CACH,EAAG3pB,EACH,EAAGC,EACH,MAAO2M,EACP,OAAQC,CACpB,CACA,EACWgd,CACX,EAAE5G,GAAQ,KAAK,EACf8F,GAAA,IAAcc,GACdA,GAAI,UAAU,UAAY,MAC1B7qB,GAAS,cAAc6qB,EAAG,EAC1Bza,GAAU,QAAQ,gBAAgBya,GAAK,mBAAoBX,EAAI,EAC/D9Z,GAAU,QAAQ,gBAAgBya,GAAK,eAAgB,EAAG1gB,GAAa,oBAAoB,EAC3FiG,GAAU,QAAQ,gBAAgBya,GAAK,gBAAiB,EAAG1gB,GAAa,oBAAoB,EAC5FiG,GAAU,QAAQ,gBAAgBya,GAAK,eAAgB,EAAG1gB,GAAa,oBAAoB,EAC3FjB,GAAO,WAAW,WAAW2hB,EAAG,YCxM5Brf,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAeqf,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAI9hB,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACVnQ,GAAWqQ,EACX4a,GAAQ,SAAU1c,EAAQ,CAC1B/C,GAAUyf,EAAM1c,CAAM,EACtB,SAAS0c,EAAKpa,EAAQ,CAClB,IAAIO,EAAQ7C,EAAO,KAAK,KAAMsC,CAAM,GAAK,KACzCO,EAAM,UAAY,CAAA,EAClBA,EAAM,WAAa,EACnBA,EAAM,UAAY6Z,EAAK,cAAc7Z,EAAM,KAAI,CAAE,EACjDA,EAAM,WAAa,EACnB,QAAS,EAAI,EAAG,EAAIA,EAAM,UAAU,OAAQ,EAAE,EAC1CA,EAAM,YAAcA,EAAM,UAAU,CAAC,EAAE,WAE3C,OAAAA,EAAM,GAAG,mBAAoB,UAAY,CACrC,KAAK,UAAY6Z,EAAK,cAAc,KAAK,KAAI,CAAE,EAC/C,KAAK,WAAa,EAClB,QAASzqB,EAAI,EAAGA,EAAI,KAAK,UAAU,OAAQ,EAAEA,EACzC,KAAK,YAAc,KAAK,UAAUA,CAAC,EAAE,UAErD,CAAS,EACM4Q,CACf,CACI,OAAA6Z,EAAK,UAAU,WAAa,SAAUxa,EAAS,CAC3C,IAAIya,EAAK,KAAK,UACdza,EAAQ,UAAS,EAEjB,QADI3I,EAAW,GACN,EAAI,EAAG,EAAIojB,EAAG,OAAQ,IAAK,CAChC,IAAI7pB,EAAI6pB,EAAG,CAAC,EAAE,QACVjkB,EAAIikB,EAAG,CAAC,EAAE,OACd,OAAQ7pB,EAAC,CACL,IAAK,IACDoP,EAAQ,OAAOxJ,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,EACzB,MACJ,IAAK,IACDwJ,EAAQ,OAAOxJ,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,EACzB,MACJ,IAAK,IACDwJ,EAAQ,cAAcxJ,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,EACxD,MACJ,IAAK,IACDwJ,EAAQ,iBAAiBxJ,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,EAC/C,MACJ,IAAK,IACD,IAAIkkB,EAAKlkB,EAAE,CAAC,EAAGmkB,EAAKnkB,EAAE,CAAC,EAAGuiB,EAAKviB,EAAE,CAAC,EAAGwiB,EAAKxiB,EAAE,CAAC,EAAGiQ,EAAQjQ,EAAE,CAAC,EAAGokB,EAASpkB,EAAE,CAAC,EAAGqkB,EAAMrkB,EAAE,CAAC,EAAGskB,EAAKtkB,EAAE,CAAC,EAC7FrE,EAAI4mB,EAAKC,EAAKD,EAAKC,EACnB5Z,EAAS2Z,EAAKC,EAAK,EAAID,EAAKC,EAC5B3Z,EAAS0Z,EAAKC,EAAKA,EAAKD,EAAK,EACjC/Y,EAAQ,UAAU0a,EAAIC,CAAE,EACxB3a,EAAQ,OAAO6a,CAAG,EAClB7a,EAAQ,MAAMZ,EAAQC,CAAM,EAC5BW,EAAQ,IAAI,EAAG,EAAG7N,EAAGsU,EAAOA,EAAQmU,EAAQ,EAAIE,CAAE,EAClD9a,EAAQ,MAAM,EAAIZ,EAAQ,EAAIC,CAAM,EACpCW,EAAQ,OAAO,CAAC6a,CAAG,EACnB7a,EAAQ,UAAU,CAAC0a,EAAI,CAACC,CAAE,EAC1B,MACJ,IAAK,IACDtjB,EAAW,GACX2I,EAAQ,UAAS,EACjB,KACpB,CACA,CACY,CAAC3I,GAAY,CAAC,KAAK,QAAO,EAC1B2I,EAAQ,YAAY,IAAI,EAGxBA,EAAQ,gBAAgB,IAAI,CAExC,EACIwa,EAAK,UAAU,YAAc,UAAY,CACrC,IAAI5W,EAAS,CAAA,EACb,KAAK,UAAU,QAAQ,SAAU4F,EAAM,CACnC,GAAIA,EAAK,UAAY,IAAK,CACtB,IAAIzR,EAAQyR,EAAK,OAAO,CAAC,EACrBoR,EAASpR,EAAK,OAAO,CAAC,EACtBxR,EAAMwR,EAAK,OAAO,CAAC,EAAIoR,EACvBG,EAAM,KAAK,GAAK,IAIpB,GAHI,KAAK,IAAIhjB,EAAQC,CAAG,EAAI+iB,IACxBA,EAAM,KAAK,IAAIhjB,EAAQC,CAAG,GAE1B4iB,EAAS,EACT,QAAS7kB,EAAIgC,EAAQgjB,EAAKhlB,EAAIiC,EAAKjC,GAAKglB,EAAK,CACzC,IAAIzqB,EAAQkqB,EAAK,wBAAwBhR,EAAK,OAAO,CAAC,EAAGA,EAAK,OAAO,CAAC,EAAGA,EAAK,OAAO,CAAC,EAAGA,EAAK,OAAO,CAAC,EAAGzT,EAAG,CAAC,EAC7G6N,EAAO,KAAKtT,EAAM,EAAGA,EAAM,CAAC,CACpD,KAGoB,SAASyF,EAAIgC,EAAQgjB,EAAKhlB,EAAIiC,EAAKjC,GAAKglB,EAAK,CACzC,IAAIzqB,EAAQkqB,EAAK,wBAAwBhR,EAAK,OAAO,CAAC,EAAGA,EAAK,OAAO,CAAC,EAAGA,EAAK,OAAO,CAAC,EAAGA,EAAK,OAAO,CAAC,EAAGzT,EAAG,CAAC,EAC7G6N,EAAO,KAAKtT,EAAM,EAAGA,EAAM,CAAC,CACpD,CAEA,SACqBkZ,EAAK,UAAY,IACtB,QAASzT,EAAI,EAAKA,GAAK,EAAGA,GAAK,IAAM,CACjC,IAAIzF,EAAQkqB,EAAK,sBAAsBzkB,EAAGyT,EAAK,MAAM,EAAGA,EAAK,MAAM,EAAGA,EAAK,OAAO,CAAC,EAAGA,EAAK,OAAO,CAAC,EAAGA,EAAK,OAAO,CAAC,EAAGA,EAAK,OAAO,CAAC,EAAGA,EAAK,OAAO,CAAC,EAAGA,EAAK,OAAO,CAAC,CAAC,EACpK5F,EAAO,KAAKtT,EAAM,EAAGA,EAAM,CAAC,CAChD,MAGgBsT,EAASA,EAAO,OAAO4F,EAAK,MAAM,CAElD,CAAS,EAMD,QALI3F,EAAOD,EAAO,CAAC,EACfG,EAAOH,EAAO,CAAC,EACfE,EAAOF,EAAO,CAAC,EACfI,EAAOJ,EAAO,CAAC,EACfrT,EAAGC,EACET,EAAI,EAAGA,EAAI6T,EAAO,OAAS,EAAG7T,IACnCQ,EAAIqT,EAAO7T,EAAI,CAAC,EAChBS,EAAIoT,EAAO7T,EAAI,EAAI,CAAC,EACf,MAAMQ,CAAC,IACRsT,EAAO,KAAK,IAAIA,EAAMtT,CAAC,EACvBwT,EAAO,KAAK,IAAIA,EAAMxT,CAAC,GAEtB,MAAMC,CAAC,IACRsT,EAAO,KAAK,IAAIA,EAAMtT,CAAC,EACvBwT,EAAO,KAAK,IAAIA,EAAMxT,CAAC,GAG/B,MAAO,CACH,EAAG,KAAK,MAAMqT,CAAI,EAClB,EAAG,KAAK,MAAMC,CAAI,EAClB,MAAO,KAAK,MAAMC,EAAOF,CAAI,EAC7B,OAAQ,KAAK,MAAMG,EAAOF,CAAI,CAC1C,CACA,EACI0W,EAAK,UAAU,UAAY,UAAY,CACnC,OAAO,KAAK,UACpB,EACIA,EAAK,UAAU,iBAAmB,SAAU/K,EAAQ,CAChD,IAAInf,EAAO,EAAI,EAAG0qB,EAAK,KAAK,UAAU,OACtC,GAAI,CAACA,EACD,OAAO,KAEX,KAAO,EAAIA,GAAMvL,EAAS,KAAK,UAAU,CAAC,EAAE,YACxCA,GAAU,KAAK,UAAU,CAAC,EAAE,WAC5B,EAAE,EAEN,GAAI,IAAMuL,EACN,OAAA1qB,EAAQ,KAAK,UAAU,EAAI,CAAC,EAAE,OAAO,MAAM,EAAE,EACtC,CACH,EAAGA,EAAM,CAAC,EACV,EAAGA,EAAM,CAAC,CAC1B,EAEQ,GAAImf,EAAS,IACT,OAAAnf,EAAQ,KAAK,UAAU,CAAC,EAAE,OAAO,MAAM,EAAG,CAAC,EACpC,CACH,EAAGA,EAAM,CAAC,EACV,EAAGA,EAAM,CAAC,CAC1B,EAEQ,IAAIqG,EAAK,KAAK,UAAU,CAAC,EACrBH,EAAIG,EAAG,OACX,OAAQA,EAAG,QAAO,CACd,IAAK,IACD,OAAO6jB,EAAK,eAAe/K,EAAQ9Y,EAAG,MAAM,EAAGA,EAAG,MAAM,EAAGH,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,EACzE,IAAK,IACD,OAAOgkB,EAAK,sBAAsB/K,EAAS9Y,EAAG,WAAYA,EAAG,MAAM,EAAGA,EAAG,MAAM,EAAGH,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,EACxH,IAAK,IACD,OAAOgkB,EAAK,0BAA0B/K,EAAS9Y,EAAG,WAAYA,EAAG,MAAM,EAAGA,EAAG,MAAM,EAAGH,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,EAChH,IAAK,IACD,IAAIkkB,EAAKlkB,EAAE,CAAC,EAAGmkB,EAAKnkB,EAAE,CAAC,EAAGuiB,EAAKviB,EAAE,CAAC,EAAGwiB,EAAKxiB,EAAE,CAAC,EAAGiQ,EAAQjQ,EAAE,CAAC,EAAGokB,EAASpkB,EAAE,CAAC,EAAGqkB,EAAMrkB,EAAE,CAAC,EACtF,OAAAiQ,GAAUmU,EAASnL,EAAU9Y,EAAG,WACzB6jB,EAAK,wBAAwBE,EAAIC,EAAI5B,EAAIC,EAAIvS,EAAOoU,CAAG,CAC9E,CACQ,OAAO,IACf,EACIL,EAAK,cAAgB,SAAU7kB,EAAIC,EAAIC,EAAIC,EAAI,CAC3C,OAAO,KAAK,MAAMD,EAAKF,IAAOE,EAAKF,IAAOG,EAAKF,IAAOE,EAAKF,EAAG,CACtE,EACI4kB,EAAK,eAAiB,SAAUxjB,EAAMikB,EAAKC,EAAKC,EAAKC,EAAKC,EAAOC,EAAO,CAChED,IAAU,SACVA,EAAQJ,GAERK,IAAU,SACVA,EAAQJ,GAEZ,IAAI7qB,GAAK+qB,EAAMF,IAAQC,EAAMF,EAAM,MAC/BM,EAAM,KAAK,KAAMvkB,EAAOA,GAAS,EAAI3G,EAAIA,EAAE,EAC3C8qB,EAAMF,IACNM,GAAO,IAEX,IAAIC,EAAOnrB,EAAIkrB,EACXpkB,EACJ,GAAIgkB,IAAQF,EACR9jB,EAAK,CACD,EAAGkkB,EACH,EAAGC,EAAQE,CAC3B,WAEkBF,EAAQJ,IAAQG,EAAQJ,EAAM,QAAgB5qB,EACpD8G,EAAK,CACD,EAAGkkB,EAAQE,EACX,EAAGD,EAAQE,CAC3B,MAEa,CACD,IAAIC,EAAIC,EACJ9rB,EAAM,KAAK,cAAcqrB,EAAKC,EAAKC,EAAKC,CAAG,EAC/C,GAAIxrB,EAAM,KACN,OAEJ,IAAIsH,GAAKmkB,EAAQJ,IAAQE,EAAMF,IAAQK,EAAQJ,IAAQE,EAAMF,GAC7DhkB,EAAIA,GAAKtH,EAAMA,GACf6rB,EAAKR,EAAM/jB,GAAKikB,EAAMF,GACtBS,EAAKR,EAAMhkB,GAAKkkB,EAAMF,GACtB,IAAIS,EAAQ,KAAK,cAAcN,EAAOC,EAAOG,EAAIC,CAAE,EAC/CE,EAAO,KAAK,KAAK5kB,EAAOA,EAAO2kB,EAAQA,CAAK,EAChDJ,EAAM,KAAK,KAAMK,EAAOA,GAAS,EAAIvrB,EAAIA,EAAE,EACvC8qB,EAAMF,IACNM,GAAO,IAEXC,EAAOnrB,EAAIkrB,EACXpkB,EAAK,CACD,EAAGskB,EAAKF,EACR,EAAGG,EAAKF,CACxB,CACA,CACQ,OAAOrkB,CACf,EACIqjB,EAAK,sBAAwB,SAAUqB,EAAKZ,EAAKC,EAAKC,EAAKC,EAAKU,EAAKC,EAAKC,EAAKC,EAAK,CAChF,SAASC,EAAInmB,EAAG,CACZ,OAAOA,EAAIA,EAAIA,CAC3B,CACQ,SAASomB,EAAIpmB,EAAG,CACZ,MAAO,GAAIA,EAAIA,GAAK,EAAIA,EACpC,CACQ,SAASqmB,EAAIrmB,EAAG,CACZ,MAAO,GAAIA,GAAK,EAAIA,IAAM,EAAIA,EAC1C,CACQ,SAASsmB,EAAItmB,EAAG,CACZ,OAAQ,EAAIA,IAAM,EAAIA,IAAM,EAAIA,EAC5C,CACQ,IAAIxF,EAAIyrB,EAAME,EAAIL,CAAG,EAAIC,EAAMK,EAAIN,CAAG,EAAIV,EAAMiB,EAAIP,CAAG,EAAIZ,EAAMoB,EAAIR,CAAG,EACpErrB,EAAIyrB,EAAMC,EAAIL,CAAG,EAAIE,EAAMI,EAAIN,CAAG,EAAIT,EAAMgB,EAAIP,CAAG,EAAIX,EAAMmB,EAAIR,CAAG,EACxE,MAAO,CACH,EAAGtrB,EACH,EAAGC,CACf,CACA,EACIgqB,EAAK,0BAA4B,SAAUqB,EAAKZ,EAAKC,EAAKC,EAAKC,EAAKU,EAAKC,EAAK,CAC1E,SAASO,EAAIvmB,EAAG,CACZ,OAAOA,EAAIA,CACvB,CACQ,SAASwmB,EAAIxmB,EAAG,CACZ,MAAO,GAAIA,GAAK,EAAIA,EAChC,CACQ,SAASymB,EAAIzmB,EAAG,CACZ,OAAQ,EAAIA,IAAM,EAAIA,EAClC,CACQ,IAAIxF,EAAIurB,EAAMQ,EAAIT,CAAG,EAAIV,EAAMoB,EAAIV,CAAG,EAAIZ,EAAMuB,EAAIX,CAAG,EACnDrrB,EAAIurB,EAAMO,EAAIT,CAAG,EAAIT,EAAMmB,EAAIV,CAAG,EAAIX,EAAMsB,EAAIX,CAAG,EACvD,MAAO,CACH,EAAGtrB,EACH,EAAGC,CACf,CACA,EACIgqB,EAAK,wBAA0B,SAAUE,EAAIC,EAAI5B,EAAIC,EAAIvS,EAAOoU,EAAK,CACjE,IAAI4B,EAAS,KAAK,IAAI5B,CAAG,EAAG6B,EAAS,KAAK,IAAI7B,CAAG,EAC7C1jB,EAAK,CACL,EAAG4hB,EAAK,KAAK,IAAItS,CAAK,EACtB,EAAGuS,EAAK,KAAK,IAAIvS,CAAK,CAClC,EACQ,MAAO,CACH,EAAGiU,GAAMvjB,EAAG,EAAIslB,EAAStlB,EAAG,EAAIulB,GAChC,EAAG/B,GAAMxjB,EAAG,EAAIulB,EAASvlB,EAAG,EAAIslB,EAC5C,CACA,EACIjC,EAAK,cAAgB,SAAUhR,EAAM,CACjC,GAAI,CAACA,EACD,MAAO,CAAA,EAEX,IAAImT,EAAKnT,EACLoT,EAAK,CACL,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACZ,EACQD,EAAKA,EAAG,QAAQ,IAAI,OAAO,IAAK,GAAG,EAAG,GAAG,EACzC,QAAS,EAAI,EAAG,EAAIC,EAAG,OAAQ,IAC3BD,EAAKA,EAAG,QAAQ,IAAI,OAAOC,EAAG,CAAC,EAAG,GAAG,EAAG,IAAMA,EAAG,CAAC,CAAC,EAEvD,IAAIltB,EAAMitB,EAAG,MAAM,GAAG,EAClBlC,EAAK,CAAA,EACLoC,EAAS,CAAA,EACTC,EAAM,EACNC,EAAM,EACNC,EAAK,sDACLjuB,EACJ,IAAK,EAAI,EAAG,EAAIW,EAAI,OAAQ,IAAK,CAC7B,IAAI6E,EAAM7E,EAAI,CAAC,EACXkB,EAAI2D,EAAI,OAAO,CAAC,EAGpB,IAFAA,EAAMA,EAAI,MAAM,CAAC,EACjBsoB,EAAO,OAAS,EACR9tB,EAAQiuB,EAAG,KAAKzoB,CAAG,GACvBsoB,EAAO,KAAK9tB,EAAM,CAAC,CAAC,EAGxB,QADIyH,EAAI,CAAA,EACCmhB,EAAI,EAAGsF,EAAOJ,EAAO,OAAQlF,EAAIsF,EAAMtF,IAAK,CACjD,IAAIuF,EAAS,WAAWL,EAAOlF,CAAC,CAAC,EAC5B,MAAMuF,CAAM,EAIb1mB,EAAE,KAAK,CAAC,EAHRA,EAAE,KAAK0mB,CAAM,CAKjC,CACY,KAAO1mB,EAAE,OAAS,GACV,OAAMA,EAAE,CAAC,CAAC,GADG,CAIjB,IAAI2mB,EAAM,KACNvZ,EAAS,CAAA,EACTwZ,EAASN,EAAKO,EAASN,EACvBO,EAASC,EAAQC,EACjBzE,EAAIC,EAAI6B,EAAK3kB,EAAI4kB,EAAInlB,EAAIC,EAC7B,OAAQhF,EAAC,CACL,IAAK,IACDksB,GAAOtmB,EAAE,MAAK,EACdumB,GAAOvmB,EAAE,MAAK,EACd2mB,EAAM,IACNvZ,EAAO,KAAKkZ,EAAKC,CAAG,EACpB,MACJ,IAAK,IACDD,EAAMtmB,EAAE,MAAK,EACbumB,EAAMvmB,EAAE,MAAK,EACboN,EAAO,KAAKkZ,EAAKC,CAAG,EACpB,MACJ,IAAK,IACD,IAAI5rB,EAAKqF,EAAE,MAAK,EACZpF,EAAKoF,EAAE,MAAK,EAIhB,GAHAsmB,GAAO3rB,EACP4rB,GAAO3rB,EACP+rB,EAAM,IACF1C,EAAG,OAAS,GAAKA,EAAGA,EAAG,OAAS,CAAC,EAAE,UAAY,KAC/C,QAASgD,EAAMhD,EAAG,OAAS,EAAGgD,GAAO,EAAGA,IACpC,GAAIhD,EAAGgD,CAAG,EAAE,UAAY,IAAK,CACzBX,EAAMrC,EAAGgD,CAAG,EAAE,OAAO,CAAC,EAAItsB,EAC1B4rB,EAAMtC,EAAGgD,CAAG,EAAE,OAAO,CAAC,EAAIrsB,EAC1B,KACpC,EAGwBwS,EAAO,KAAKkZ,EAAKC,CAAG,EACpBnsB,EAAI,IACJ,MACJ,IAAK,IACDksB,EAAMtmB,EAAE,MAAK,EACbumB,EAAMvmB,EAAE,MAAK,EACb2mB,EAAM,IACNvZ,EAAO,KAAKkZ,EAAKC,CAAG,EACpBnsB,EAAI,IACJ,MACJ,IAAK,IACDksB,GAAOtmB,EAAE,MAAK,EACd2mB,EAAM,IACNvZ,EAAO,KAAKkZ,EAAKC,CAAG,EACpB,MACJ,IAAK,IACDD,EAAMtmB,EAAE,MAAK,EACb2mB,EAAM,IACNvZ,EAAO,KAAKkZ,EAAKC,CAAG,EACpB,MACJ,IAAK,IACDA,GAAOvmB,EAAE,MAAK,EACd2mB,EAAM,IACNvZ,EAAO,KAAKkZ,EAAKC,CAAG,EACpB,MACJ,IAAK,IACDA,EAAMvmB,EAAE,MAAK,EACb2mB,EAAM,IACNvZ,EAAO,KAAKkZ,EAAKC,CAAG,EACpB,MACJ,IAAK,IACDnZ,EAAO,KAAKpN,EAAE,MAAK,EAAIA,EAAE,MAAK,EAAIA,EAAE,MAAK,EAAIA,EAAE,MAAK,CAAE,EACtDsmB,EAAMtmB,EAAE,MAAK,EACbumB,EAAMvmB,EAAE,MAAK,EACboN,EAAO,KAAKkZ,EAAKC,CAAG,EACpB,MACJ,IAAK,IACDnZ,EAAO,KAAKkZ,EAAMtmB,EAAE,MAAK,EAAIumB,EAAMvmB,EAAE,MAAK,EAAIsmB,EAAMtmB,EAAE,MAAK,EAAIumB,EAAMvmB,EAAE,OAAO,EAC9EsmB,GAAOtmB,EAAE,MAAK,EACdumB,GAAOvmB,EAAE,MAAK,EACd2mB,EAAM,IACNvZ,EAAO,KAAKkZ,EAAKC,CAAG,EACpB,MACJ,IAAK,IACDQ,EAAST,EACTU,EAAST,EACTO,EAAU7C,EAAGA,EAAG,OAAS,CAAC,EACtB6C,EAAQ,UAAY,MACpBC,EAAST,GAAOA,EAAMQ,EAAQ,OAAO,CAAC,GACtCE,EAAST,GAAOA,EAAMO,EAAQ,OAAO,CAAC,IAE1C1Z,EAAO,KAAK2Z,EAAQC,EAAQhnB,EAAE,MAAK,EAAIA,EAAE,OAAO,EAChDsmB,EAAMtmB,EAAE,MAAK,EACbumB,EAAMvmB,EAAE,MAAK,EACb2mB,EAAM,IACNvZ,EAAO,KAAKkZ,EAAKC,CAAG,EACpB,MACJ,IAAK,IACDQ,EAAST,EACTU,EAAST,EACTO,EAAU7C,EAAGA,EAAG,OAAS,CAAC,EACtB6C,EAAQ,UAAY,MACpBC,EAAST,GAAOA,EAAMQ,EAAQ,OAAO,CAAC,GACtCE,EAAST,GAAOA,EAAMO,EAAQ,OAAO,CAAC,IAE1C1Z,EAAO,KAAK2Z,EAAQC,EAAQV,EAAMtmB,EAAE,QAASumB,EAAMvmB,EAAE,MAAK,CAAE,EAC5DsmB,GAAOtmB,EAAE,MAAK,EACdumB,GAAOvmB,EAAE,MAAK,EACd2mB,EAAM,IACNvZ,EAAO,KAAKkZ,EAAKC,CAAG,EACpB,MACJ,IAAK,IACDnZ,EAAO,KAAKpN,EAAE,MAAK,EAAIA,EAAE,OAAO,EAChCsmB,EAAMtmB,EAAE,MAAK,EACbumB,EAAMvmB,EAAE,MAAK,EACboN,EAAO,KAAKkZ,EAAKC,CAAG,EACpB,MACJ,IAAK,IACDnZ,EAAO,KAAKkZ,EAAMtmB,EAAE,MAAK,EAAIumB,EAAMvmB,EAAE,OAAO,EAC5CsmB,GAAOtmB,EAAE,MAAK,EACdumB,GAAOvmB,EAAE,MAAK,EACd2mB,EAAM,IACNvZ,EAAO,KAAKkZ,EAAKC,CAAG,EACpB,MACJ,IAAK,IACDQ,EAAST,EACTU,EAAST,EACTO,EAAU7C,EAAGA,EAAG,OAAS,CAAC,EACtB6C,EAAQ,UAAY,MACpBC,EAAST,GAAOA,EAAMQ,EAAQ,OAAO,CAAC,GACtCE,EAAST,GAAOA,EAAMO,EAAQ,OAAO,CAAC,IAE1CR,EAAMtmB,EAAE,MAAK,EACbumB,EAAMvmB,EAAE,MAAK,EACb2mB,EAAM,IACNvZ,EAAO,KAAK2Z,EAAQC,EAAQV,EAAKC,CAAG,EACpC,MACJ,IAAK,IACDQ,EAAST,EACTU,EAAST,EACTO,EAAU7C,EAAGA,EAAG,OAAS,CAAC,EACtB6C,EAAQ,UAAY,MACpBC,EAAST,GAAOA,EAAMQ,EAAQ,OAAO,CAAC,GACtCE,EAAST,GAAOA,EAAMO,EAAQ,OAAO,CAAC,IAE1CR,GAAOtmB,EAAE,MAAK,EACdumB,GAAOvmB,EAAE,MAAK,EACd2mB,EAAM,IACNvZ,EAAO,KAAK2Z,EAAQC,EAAQV,EAAKC,CAAG,EACpC,MACJ,IAAK,IACDhE,EAAKviB,EAAE,MAAK,EACZwiB,EAAKxiB,EAAE,MAAK,EACZqkB,EAAMrkB,EAAE,MAAK,EACbN,EAAKM,EAAE,MAAK,EACZskB,EAAKtkB,EAAE,MAAK,EACZb,EAAKmnB,EACLlnB,EAAKmnB,EACLD,EAAMtmB,EAAE,MAAK,EACbumB,EAAMvmB,EAAE,MAAK,EACb2mB,EAAM,IACNvZ,EAAS,KAAK,wCAAwCjO,EAAIC,EAAIknB,EAAKC,EAAK7mB,EAAI4kB,EAAI/B,EAAIC,EAAI6B,CAAG,EAC3F,MACJ,IAAK,IACD9B,EAAKviB,EAAE,MAAK,EACZwiB,EAAKxiB,EAAE,MAAK,EACZqkB,EAAMrkB,EAAE,MAAK,EACbN,EAAKM,EAAE,MAAK,EACZskB,EAAKtkB,EAAE,MAAK,EACZb,EAAKmnB,EACLlnB,EAAKmnB,EACLD,GAAOtmB,EAAE,MAAK,EACdumB,GAAOvmB,EAAE,MAAK,EACd2mB,EAAM,IACNvZ,EAAS,KAAK,wCAAwCjO,EAAIC,EAAIknB,EAAKC,EAAK7mB,EAAI4kB,EAAI/B,EAAIC,EAAI6B,CAAG,EAC3F,KACxB,CACgBJ,EAAG,KAAK,CACJ,QAAS0C,GAAOvsB,EAChB,OAAQgT,EACR,MAAO,CACH,EAAGwZ,EACH,EAAGC,CAC3B,EACoB,WAAY,KAAK,WAAWD,EAAQC,EAAQF,GAAOvsB,EAAGgT,CAAM,CAChF,CAAiB,CACjB,EACgBhT,IAAM,KAAOA,IAAM,MACnB6pB,EAAG,KAAK,CACJ,QAAS,IACT,OAAQ,CAAA,EACR,MAAO,OACP,WAAY,CAChC,CAAiB,CAEjB,CACQ,OAAOA,CACf,EACID,EAAK,WAAa,SAAUjqB,EAAGC,EAAG2sB,EAAKvZ,EAAQ,CAC3C,IAAIhU,EAAK2H,EAAIC,EAAIzB,EACb2nB,EAAOlD,EACX,OAAQ2C,EAAG,CACP,IAAK,IACD,OAAOO,EAAK,cAAcntB,EAAGC,EAAGoT,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EACxD,IAAK,IAGD,IAFAhU,EAAM,EACN2H,EAAKmmB,EAAK,sBAAsB,EAAGntB,EAAGC,EAAGoT,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EACpG7N,EAAI,IAAMA,GAAK,EAAGA,GAAK,IACxByB,EAAKkmB,EAAK,sBAAsB3nB,EAAGxF,EAAGC,EAAGoT,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EACzGhU,GAAO8tB,EAAK,cAAcnmB,EAAG,EAAGA,EAAG,EAAGC,EAAG,EAAGA,EAAG,CAAC,EAChDD,EAAKC,EAET,OAAO5H,EACX,IAAK,IAGD,IAFAA,EAAM,EACN2H,EAAKmmB,EAAK,0BAA0B,EAAGntB,EAAGC,EAAGoT,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EAClF7N,EAAI,IAAMA,GAAK,EAAGA,GAAK,IACxByB,EAAKkmB,EAAK,0BAA0B3nB,EAAGxF,EAAGC,EAAGoT,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EACvFhU,GAAO8tB,EAAK,cAAcnmB,EAAG,EAAGA,EAAG,EAAGC,EAAG,EAAGA,EAAG,CAAC,EAChDD,EAAKC,EAET,OAAO5H,EACX,IAAK,IACDA,EAAM,EACN,IAAImI,EAAQ6L,EAAO,CAAC,EAChBgX,EAAShX,EAAO,CAAC,EACjB5L,EAAM4L,EAAO,CAAC,EAAIgX,EAClBG,EAAM,KAAK,GAAK,IAKpB,GAJI,KAAK,IAAIhjB,EAAQC,CAAG,EAAI+iB,IACxBA,EAAM,KAAK,IAAIhjB,EAAQC,CAAG,GAE9BT,EAAKmmB,EAAK,wBAAwB9Z,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAG7L,EAAO,CAAC,EAClF6iB,EAAS,EACT,IAAK7kB,EAAIgC,EAAQgjB,EAAKhlB,EAAIiC,EAAKjC,GAAKglB,EAChCvjB,EAAKkmB,EAAK,wBAAwB9Z,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAG7N,EAAG,CAAC,EAClFnG,GAAO8tB,EAAK,cAAcnmB,EAAG,EAAGA,EAAG,EAAGC,EAAG,EAAGA,EAAG,CAAC,EAChDD,EAAKC,MAIT,KAAKzB,EAAIgC,EAAQgjB,EAAKhlB,EAAIiC,EAAKjC,GAAKglB,EAChCvjB,EAAKkmB,EAAK,wBAAwB9Z,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAG7N,EAAG,CAAC,EAClFnG,GAAO8tB,EAAK,cAAcnmB,EAAG,EAAGA,EAAG,EAAGC,EAAG,EAAGA,EAAG,CAAC,EAChDD,EAAKC,EAGb,OAAAA,EAAKkmB,EAAK,wBAAwB9Z,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAG5L,EAAK,CAAC,EACpFpI,GAAO8tB,EAAK,cAAcnmB,EAAG,EAAGA,EAAG,EAAGC,EAAG,EAAGA,EAAG,CAAC,EACzC5H,CACvB,CACQ,MAAO,EACf,EACI4qB,EAAK,wCAA0C,SAAU7kB,EAAIC,EAAIC,EAAIC,EAAII,EAAI4kB,EAAI/B,EAAIC,EAAI2E,EAAQ,CAC7F,IAAI9C,EAAM8C,GAAU,KAAK,GAAK,KAC1BC,EAAM,KAAK,IAAI/C,CAAG,GAAKllB,EAAKE,GAAO,EAAO,KAAK,IAAIglB,CAAG,GAAKjlB,EAAKE,GAAO,EACvE+nB,EAAM,GAAK,KAAK,IAAIhD,CAAG,GAAKllB,EAAKE,GAAO,EACvC,KAAK,IAAIglB,CAAG,GAAKjlB,EAAKE,GAAO,EAC9BgoB,EAAUF,EAAKA,GAAO7E,EAAKA,GAAO8E,EAAKA,GAAO7E,EAAKA,GACnD8E,EAAS,IACT/E,GAAM,KAAK,KAAK+E,CAAM,EACtB9E,GAAM,KAAK,KAAK8E,CAAM,GAE1B,IAAI9rB,EAAI,KAAK,MAAM+mB,EAAKA,GAAMC,EAAKA,GAAMD,EAAKA,GAAM8E,EAAKA,GAAM7E,EAAKA,GAAM4E,EAAKA,KAC1E7E,EAAKA,GAAM8E,EAAKA,GAAM7E,EAAKA,GAAM4E,EAAKA,GAAI,EAC3C1nB,IAAO4kB,IACP9oB,GAAK,IAEL,MAAMA,CAAC,IACPA,EAAI,GAER,IAAI+rB,EAAO/rB,EAAI+mB,EAAK8E,EAAM7E,EACtBgF,EAAOhsB,EAAI,CAACgnB,EAAK4E,EAAM7E,EACvB2B,GAAM/kB,EAAKE,GAAM,EAAM,KAAK,IAAIglB,CAAG,EAAIkD,EAAM,KAAK,IAAIlD,CAAG,EAAImD,EAC7DrD,GAAM/kB,EAAKE,GAAM,EAAM,KAAK,IAAI+kB,CAAG,EAAIkD,EAAM,KAAK,IAAIlD,CAAG,EAAImD,EAC7DC,EAAO,SAAUC,EAAG,CACpB,OAAO,KAAK,KAAKA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,CAAC,CACtD,EACYC,EAAS,SAAUjnB,EAAGgnB,EAAG,CACzB,OAAQhnB,EAAE,CAAC,EAAIgnB,EAAE,CAAC,EAAIhnB,EAAE,CAAC,EAAIgnB,EAAE,CAAC,IAAMD,EAAK/mB,CAAC,EAAI+mB,EAAKC,CAAC,EAClE,EACYE,EAAS,SAAUlnB,EAAGgnB,EAAG,CACzB,OAAQhnB,EAAE,CAAC,EAAIgnB,EAAE,CAAC,EAAIhnB,EAAE,CAAC,EAAIgnB,EAAE,CAAC,EAAI,GAAK,GAAK,KAAK,KAAKC,EAAOjnB,EAAGgnB,CAAC,CAAC,CAChF,EACYzX,EAAQ2X,EAAO,CAAC,EAAG,CAAC,EAAG,EAAER,EAAKG,GAAOhF,GAAK8E,EAAKG,GAAOhF,CAAE,CAAC,EACzD9hB,EAAI,EAAE0mB,EAAKG,GAAOhF,GAAK8E,EAAKG,GAAOhF,CAAE,EACrCkF,EAAI,EAAE,GAAKN,EAAKG,GAAOhF,GAAK,GAAK8E,EAAKG,GAAOhF,CAAE,EAC/C4B,EAASwD,EAAOlnB,EAAGgnB,CAAC,EACxB,OAAIC,EAAOjnB,EAAGgnB,CAAC,GAAK,KAChBtD,EAAS,KAAK,IAEduD,EAAOjnB,EAAGgnB,CAAC,GAAK,IAChBtD,EAAS,GAETE,IAAO,GAAKF,EAAS,IACrBA,EAASA,EAAS,EAAI,KAAK,IAE3BE,IAAO,GAAKF,EAAS,IACrBA,EAASA,EAAS,EAAI,KAAK,IAExB,CAACF,EAAIC,EAAI5B,EAAIC,EAAIvS,EAAOmU,EAAQC,EAAKC,CAAE,CACtD,EACWN,CACX,EAAEhH,GAAQ,KAAK,EACf+G,GAAA,KAAeC,GACfA,GAAK,UAAU,UAAY,OAC3BA,GAAK,UAAU,oBAAsB,CAAC,MAAM,EAC5CjrB,GAAS,cAAcirB,EAAI,EAC3B7a,GAAU,QAAQ,gBAAgB6a,GAAM,MAAM,EAC9C/hB,GAAO,WAAW,WAAW+hB,EAAI,YCroB7Bzf,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAemjB,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAI5lB,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACVnQ,GAAWqQ,EACX0e,GAAQ,SAAUxgB,EAAQ,CAC1B/C,GAAUujB,EAAMxgB,CAAM,EACtB,SAASwgB,GAAO,CACZ,OAAOxgB,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAAwgB,EAAK,UAAU,WAAa,SAAUte,EAAS,CAC3C,IAAIqa,EAAe,KAAK,aAAY,EAAIld,EAAQ,KAAK,QAASC,EAAS,KAAK,OAAM,EAElF,GADA4C,EAAQ,UAAS,EACb,CAACqa,EACDra,EAAQ,KAAK,EAAG,EAAG7C,EAAOC,CAAM,MAE/B,CACD,IAAImhB,EAAU,EACVC,EAAW,EACXC,EAAa,EACbC,EAAc,EACd,OAAOrE,GAAiB,SACxBkE,EAAUC,EAAWC,EAAaC,EAAc,KAAK,IAAIrE,EAAcld,EAAQ,EAAGC,EAAS,CAAC,GAG5FmhB,EAAU,KAAK,IAAIlE,EAAa,CAAC,EAAGld,EAAQ,EAAGC,EAAS,CAAC,EACzDohB,EAAW,KAAK,IAAInE,EAAa,CAAC,EAAGld,EAAQ,EAAGC,EAAS,CAAC,EAC1DshB,EAAc,KAAK,IAAIrE,EAAa,CAAC,EAAGld,EAAQ,EAAGC,EAAS,CAAC,EAC7DqhB,EAAa,KAAK,IAAIpE,EAAa,CAAC,EAAGld,EAAQ,EAAGC,EAAS,CAAC,GAEhE4C,EAAQ,OAAOue,EAAS,CAAC,EACzBve,EAAQ,OAAO7C,EAAQqhB,EAAU,CAAC,EAClCxe,EAAQ,IAAI7C,EAAQqhB,EAAUA,EAAUA,EAAW,KAAK,GAAK,EAAK,EAAG,EAAG,EAAK,EAC7Exe,EAAQ,OAAO7C,EAAOC,EAASshB,CAAW,EAC1C1e,EAAQ,IAAI7C,EAAQuhB,EAAathB,EAASshB,EAAaA,EAAa,EAAG,KAAK,GAAK,EAAG,EAAK,EACzF1e,EAAQ,OAAOye,EAAYrhB,CAAM,EACjC4C,EAAQ,IAAIye,EAAYrhB,EAASqhB,EAAYA,EAAY,KAAK,GAAK,EAAG,KAAK,GAAI,EAAK,EACpFze,EAAQ,OAAO,EAAGue,CAAO,EACzBve,EAAQ,IAAIue,EAASA,EAASA,EAAS,KAAK,GAAK,KAAK,GAAK,EAAK,EAAG,EAAK,CACpF,CACQve,EAAQ,UAAS,EACjBA,EAAQ,gBAAgB,IAAI,CACpC,EACWse,CACX,EAAE9K,GAAQ,KAAK,EACf6K,GAAA,KAAeC,GACfA,GAAK,UAAU,UAAY,OAC3B/uB,GAAS,cAAc+uB,EAAI,EAC3B3e,GAAU,QAAQ,gBAAgB2e,GAAM,eAAgB,CAAC,EACzD7lB,GAAO,WAAW,WAAW6lB,EAAI,YC9D7BvjB,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAeyjB,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIlmB,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACVhG,GAAekG,EACfrQ,GAAWsQ,EACX+e,GAAkB,SAAU9gB,EAAQ,CACpC/C,GAAU6jB,EAAgB9gB,CAAM,EAChC,SAAS8gB,GAAiB,CACtB,OAAO9gB,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAA8gB,EAAe,UAAU,WAAa,SAAU5e,EAAS,CACrD,IAAI6e,EAAQ,KAAK,QAASC,EAAS,KAAK,OAAM,EAAI,EAAGvuB,EAAGC,EAGxD,IAFAwP,EAAQ,UAAS,EACjBA,EAAQ,OAAO,EAAG,EAAI8e,CAAM,EACvB,EAAI,EAAG,EAAID,EAAO,IACnBtuB,EAAIuuB,EAAS,KAAK,IAAK,EAAI,EAAI,KAAK,GAAMD,CAAK,EAC/CruB,EAAI,GAAKsuB,EAAS,KAAK,IAAK,EAAI,EAAI,KAAK,GAAMD,CAAK,EACpD7e,EAAQ,OAAOzP,EAAGC,CAAC,EAEvBwP,EAAQ,UAAS,EACjBA,EAAQ,gBAAgB,IAAI,CACpC,EACI4e,EAAe,UAAU,SAAW,UAAY,CAC5C,OAAO,KAAK,OAAM,EAAK,CAC/B,EACIA,EAAe,UAAU,UAAY,UAAY,CAC7C,OAAO,KAAK,OAAM,EAAK,CAC/B,EACIA,EAAe,UAAU,SAAW,SAAUzhB,EAAO,CACjD,KAAK,OAAOA,EAAQ,CAAC,CAC7B,EACIyhB,EAAe,UAAU,UAAY,SAAUxhB,EAAQ,CACnD,KAAK,OAAOA,EAAS,CAAC,CAC9B,EACWwhB,CACX,EAAEpL,GAAQ,KAAK,EACfmL,GAAA,eAAyBC,GACzBA,GAAe,UAAU,UAAY,iBACrCA,GAAe,UAAU,UAAY,GACrCA,GAAe,UAAU,oBAAsB,CAAC,QAAQ,EACxDrvB,GAAS,cAAcqvB,EAAc,EACrCjf,GAAU,QAAQ,gBAAgBif,GAAgB,SAAU,EAAGllB,GAAa,oBAAoB,EAChGiG,GAAU,QAAQ,gBAAgBif,GAAgB,QAAS,EAAGllB,GAAa,oBAAoB,EAC/FjB,GAAO,WAAW,WAAWmmB,EAAc,YCzDvC7jB,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAe6jB,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAItmB,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACVhG,GAAekG,EACfrQ,GAAWsQ,EACXmf,GAAO,KAAK,GAAK,EACjBC,GAAQ,SAAUnhB,EAAQ,CAC1B/C,GAAUkkB,EAAMnhB,CAAM,EACtB,SAASmhB,GAAO,CACZ,OAAOnhB,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAAmhB,EAAK,UAAU,WAAa,SAAUjf,EAAS,CAC3CA,EAAQ,UAAS,EACjBA,EAAQ,IAAI,EAAG,EAAG,KAAK,cAAe,EAAGgf,GAAM,EAAK,EACpDhf,EAAQ,OAAO,KAAK,YAAW,EAAI,CAAC,EACpCA,EAAQ,IAAI,EAAG,EAAG,KAAK,cAAegf,GAAM,EAAG,EAAI,EACnDhf,EAAQ,UAAS,EACjBA,EAAQ,gBAAgB,IAAI,CACpC,EACIif,EAAK,UAAU,SAAW,UAAY,CAClC,OAAO,KAAK,YAAW,EAAK,CACpC,EACIA,EAAK,UAAU,UAAY,UAAY,CACnC,OAAO,KAAK,YAAW,EAAK,CACpC,EACIA,EAAK,UAAU,SAAW,SAAU9hB,EAAO,CACvC,KAAK,YAAYA,EAAQ,CAAC,CAClC,EACI8hB,EAAK,UAAU,UAAY,SAAU7hB,EAAQ,CACzC,KAAK,YAAYA,EAAS,CAAC,CACnC,EACW6hB,CACX,EAAEzL,GAAQ,KAAK,EACfuL,GAAA,KAAeE,GACfA,GAAK,UAAU,UAAY,OAC3BA,GAAK,UAAU,UAAY,GAC3BA,GAAK,UAAU,oBAAsB,CAAC,cAAe,aAAa,EAClE1vB,GAAS,cAAc0vB,EAAI,EAC3Btf,GAAU,QAAQ,gBAAgBsf,GAAM,cAAe,EAAGvlB,GAAa,oBAAoB,EAC3FiG,GAAU,QAAQ,gBAAgBsf,GAAM,cAAe,EAAGvlB,GAAa,oBAAoB,EAC3FjB,GAAO,WAAW,WAAWwmB,EAAI,YCtD7BlkB,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAegkB,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIzmB,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACV+U,GAAc7U,GACdlG,GAAemG,EACftQ,GAAW8R,EACX8d,GAAU,SAAUrhB,EAAQ,CAC5B/C,GAAUokB,EAAQrhB,CAAM,EACxB,SAASqhB,EAAO/e,EAAQ,CACpB,IAAIO,EAAQ7C,EAAO,KAAK,KAAMsC,CAAM,GAAK,KACzC,OAAAO,EAAM,SAAW,GACjBA,EAAM,KAAO,IAAI8T,GAAY,UAAU,UAAY,CAC/C,IAAI2K,EAAUze,EAAM,SACpB,OAAAA,EAAM,SAAW,GACVye,CACnB,CAAS,EACDze,EAAM,GAAG,wBAAyB,UAAY,CAC1C,KAAK,WAAW,CAAC,CAC7B,CAAS,EACDA,EAAM,GAAG,yBAA0B,UAAY,CAC3C,KAAK,SAAW,EAC5B,CAAS,EACDA,EAAM,GAAG,wBAAyB,UAAY,CACrC,KAAK,KAAK,cAGf,cAAc,KAAK,QAAQ,EAC3B,KAAK,aAAY,EAC7B,CAAS,EACMA,CACf,CACI,OAAAwe,EAAO,UAAU,WAAa,SAAUnf,EAAS,CAC7C,IAAI+U,EAAO,KAAK,UAAS,EAAIlP,EAAQ,KAAK,WAAU,EAAIwZ,EAAMxZ,EAAQ,EAAGyZ,EAAM,KAAK,WAAU,EAAGvK,CAAI,EAAGwK,EAAU,KAAK,eAAgBhvB,EAAI+uB,EAAID,EAAM,CAAC,EAAG7uB,EAAI8uB,EAAID,EAAM,CAAC,EAAGliB,EAAQmiB,EAAID,EAAM,CAAC,EAAGjiB,EAASkiB,EAAID,EAAM,CAAC,EAAGlG,EAAQ,KAAK,MAAK,EAO1O,IANI,KAAK,QAAO,GAAM,KAAK,UAAS,KAChCnZ,EAAQ,UAAS,EACjBA,EAAQ,KAAK,EAAG,EAAG7C,EAAOC,CAAM,EAChC4C,EAAQ,UAAS,EACjBA,EAAQ,gBAAgB,IAAI,GAE5BmZ,EACA,GAAIoG,EAAS,CACT,IAAItgB,EAASsgB,EAAQxK,CAAI,EAAGyK,EAAM3Z,EAAQ,EAC1C7F,EAAQ,UAAUmZ,EAAO5oB,EAAGC,EAAG2M,EAAOC,EAAQ6B,EAAOugB,EAAM,CAAC,EAAGvgB,EAAOugB,EAAM,CAAC,EAAGriB,EAAOC,CAAM,CAC7G,MAEgB4C,EAAQ,UAAUmZ,EAAO5oB,EAAGC,EAAG2M,EAAOC,EAAQ,EAAG,EAAGD,EAAOC,CAAM,CAGjF,EACI+hB,EAAO,UAAU,SAAW,SAAUnf,EAAS,CAC3C,IAAI+U,EAAO,KAAK,UAAS,EAAIlP,EAAQ,KAAK,WAAU,EAAIwZ,EAAMxZ,EAAQ,EAAGyZ,EAAM,KAAK,WAAU,EAAGvK,CAAI,EAAGwK,EAAU,KAAK,aAAY,EAAIpiB,EAAQmiB,EAAID,EAAM,CAAC,EAAGjiB,EAASkiB,EAAID,EAAM,CAAC,EAEjL,GADArf,EAAQ,UAAS,EACbuf,EAAS,CACT,IAAItgB,EAASsgB,EAAQxK,CAAI,EACrByK,EAAM3Z,EAAQ,EAClB7F,EAAQ,KAAKf,EAAOugB,EAAM,CAAC,EAAGvgB,EAAOugB,EAAM,CAAC,EAAGriB,EAAOC,CAAM,CACxE,MAEY4C,EAAQ,KAAK,EAAG,EAAG7C,EAAOC,CAAM,EAEpC4C,EAAQ,UAAS,EACjBA,EAAQ,UAAU,IAAI,CAC9B,EACImf,EAAO,UAAU,iBAAmB,UAAY,CAC5C,OAAS,KAAK,aAAe,KAAK,uBAAyB,IAAM,KAAK,UAAS,CACvF,EACIA,EAAO,UAAU,aAAe,UAAY,CACxC,IAAI7hB,EAAO,KACX,KAAK,SAAW,YAAY,UAAY,CACpCA,EAAK,aAAY,CAC7B,EAAW,IAAO,KAAK,WAAW,CAClC,EACI6hB,EAAO,UAAU,MAAQ,UAAY,CACjC,GAAI,MAAK,YAGT,KAAIxZ,EAAQ,KAAK,SAAQ,EACzB,KAAK,KAAK,UAAUA,CAAK,EACzB,KAAK,aAAY,EACjB,KAAK,KAAK,MAAK,EACvB,EACIwZ,EAAO,UAAU,KAAO,UAAY,CAChC,KAAK,KAAK,KAAI,EACd,cAAc,KAAK,QAAQ,CACnC,EACIA,EAAO,UAAU,UAAY,UAAY,CACrC,OAAO,KAAK,KAAK,UAAS,CAClC,EACIA,EAAO,UAAU,aAAe,UAAY,CACxC,IAAItZ,EAAQ,KAAK,WAAU,EAAI4Z,EAAY,KAAK,UAAS,EAAI5K,EAAa,KAAK,WAAU,EAAIE,EAAOF,EAAW4K,CAAS,EAAG7vB,EAAMmlB,EAAK,OAAS,EAC3IlP,EAAQjW,EAAM,EACd,KAAK,WAAWiW,EAAQ,CAAC,EAGzB,KAAK,WAAW,CAAC,CAE7B,EACWsZ,CACX,EAAE3L,GAAQ,KAAK,EACf0L,GAAA,OAAiBC,GACjBA,GAAO,UAAU,UAAY,SAC7B5vB,GAAS,cAAc4vB,EAAM,EAC7Bxf,GAAU,QAAQ,gBAAgBwf,GAAQ,WAAW,EACrDxf,GAAU,QAAQ,gBAAgBwf,GAAQ,YAAY,EACtDxf,GAAU,QAAQ,gBAAgBwf,GAAQ,cAAc,EACxDxf,GAAU,QAAQ,gBAAgBwf,GAAQ,OAAO,EACjDxf,GAAU,QAAQ,gBAAgBwf,GAAQ,aAAc,EAAGzlB,GAAa,oBAAoB,EAC5FiG,GAAU,QAAQ,gBAAgBwf,GAAQ,YAAa,GAAIzlB,GAAa,oBAAoB,EAC5FiG,GAAU,QAAQ,WAAWwf,GAAQ,CACjC,MAAO,aACP,SAAU,gBACV,SAAU,eACd,CAAC,EACD1mB,GAAO,WAAW,WAAW0mB,EAAM,YC/H/BpkB,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAewkB,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIjnB,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACVhG,GAAekG,EACfrQ,GAAWsQ,EACX8f,GAAQ,SAAU7hB,EAAQ,CAC1B/C,GAAU4kB,EAAM7hB,CAAM,EACtB,SAAS6hB,GAAO,CACZ,OAAO7hB,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAA6hB,EAAK,UAAU,WAAa,SAAU3f,EAAS,CAC3C,IAAI4f,EAAc,KAAK,YAAW,EAAIC,EAAc,KAAK,cAAeC,EAAY,KAAK,UAAS,EAClG9f,EAAQ,UAAS,EACjBA,EAAQ,OAAO,EAAG,EAAI6f,CAAW,EACjC,QAAShwB,EAAI,EAAGA,EAAIiwB,EAAY,EAAGjwB,IAAK,CACpC,IAAIivB,EAASjvB,EAAI,IAAM,EAAIgwB,EAAcD,EACrCrvB,EAAIuuB,EAAS,KAAK,IAAKjvB,EAAI,KAAK,GAAMiwB,CAAS,EAC/CtvB,EAAI,GAAKsuB,EAAS,KAAK,IAAKjvB,EAAI,KAAK,GAAMiwB,CAAS,EACxD9f,EAAQ,OAAOzP,EAAGC,CAAC,CAC/B,CACQwP,EAAQ,UAAS,EACjBA,EAAQ,gBAAgB,IAAI,CACpC,EACI2f,EAAK,UAAU,SAAW,UAAY,CAClC,OAAO,KAAK,YAAW,EAAK,CACpC,EACIA,EAAK,UAAU,UAAY,UAAY,CACnC,OAAO,KAAK,YAAW,EAAK,CACpC,EACIA,EAAK,UAAU,SAAW,SAAUxiB,EAAO,CACvC,KAAK,YAAYA,EAAQ,CAAC,CAClC,EACIwiB,EAAK,UAAU,UAAY,SAAUviB,EAAQ,CACzC,KAAK,YAAYA,EAAS,CAAC,CACnC,EACWuiB,CACX,EAAEnM,GAAQ,KAAK,EACfkM,GAAA,KAAeC,GACfA,GAAK,UAAU,UAAY,OAC3BA,GAAK,UAAU,UAAY,GAC3BA,GAAK,UAAU,oBAAsB,CAAC,cAAe,aAAa,EAClEpwB,GAAS,cAAcowB,EAAI,EAC3BhgB,GAAU,QAAQ,gBAAgBggB,GAAM,YAAa,EAAGjmB,GAAa,oBAAoB,EACzFiG,GAAU,QAAQ,gBAAgBggB,GAAM,cAAe,EAAGjmB,GAAa,oBAAoB,EAC3FiG,GAAU,QAAQ,gBAAgBggB,GAAM,cAAe,EAAGjmB,GAAa,oBAAoB,EAC3FjB,GAAO,WAAW,WAAWknB,EAAI,YC3D7B5kB,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAe6kB,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAItnB,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACVnQ,GAAWqQ,EACXlG,GAAemG,EACfoM,GAAWrM,EACXogB,GAAO,OAAQC,GAAS,SAAUC,GAAU,UAAW1G,GAAe,eAAgB2G,GAAa,KAAMC,GAAO,IAAKvG,GAAO,OAAQwG,GAAO,OAAQC,GAAa,OAAQC,GAAM,MAAOC,GAAS,SAAUC,GAAS,SAAUC,GAAS,SAAUC,GAAW,MAAOne,GAAQ,IAAKmX,GAAQ,QAASiH,GAAO,OAAQC,GAAO,OAAQpH,GAAO,OAAQqH,GAAW,IAAKvH,GAAmB,CAC9W,aACA,WACA,YACA,cACA,UACA,QACA,gBACA,aACA,OACA,QACA,SACA,OACA,WACA,eACJ,EAAGO,GAAoBP,GAAiB,OACpCvI,GACJ,SAASC,IAAkB,CACvB,OAAID,KAGJA,GAAevY,GAAO,KAAK,oBAAmB,EAAG,WAAW0nB,EAAU,EAC/DnP,GACX,CACA,SAASE,GAAUlR,EAAS,CACxBA,EAAQ,SAAS,KAAK,aAAc,KAAK,cAAe,KAAK,aAAa,CAC9E,CACA,SAASmR,GAAYnR,EAAS,CAC1BA,EAAQ,WAAW,KAAK,aAAc,KAAK,cAAe,KAAK,aAAa,CAChF,CACA,SAAS+gB,GAAiB3gB,EAAQ,CAC9B,OAAAA,EAASA,GAAU,CAAA,EACf,CAACA,EAAO,8BACR,CAACA,EAAO,8BACR,CAACA,EAAO,mBACRA,EAAO,KAAOA,EAAO,MAAQ,SAE1BA,CACX,CAKA,IAAI4gB,GAAQ,SAAUljB,EAAQ,CAC1B/C,GAAUimB,EAAMljB,CAAM,EACtB,SAASkjB,EAAK5gB,EAAQ,CAClB,IAAIO,EAAQ7C,EAAO,KAAK,KAAMijB,GAAiB3gB,CAAM,CAAC,GAAK,KAC3DO,EAAM,cAAgB,EACtBA,EAAM,cAAgB,EACtB,QAAS9Q,EAAI,EAAGA,EAAIiqB,GAAmBjqB,IACnC8Q,EAAM,GAAG4Y,GAAiB1pB,CAAC,EAAI2pB,GAAc7Y,EAAM,YAAY,EAEnE,OAAAA,EAAM,aAAY,EACXA,CACf,CACI,OAAAqgB,EAAK,UAAU,WAAa,SAAUhhB,EAAS,CAC3C,IAAIihB,EAAU,KAAK,QAAO,EAAIC,EAAW,KAAK,SAAQ,EAAIC,EAAe,KAAK,WAAU,EAAKD,EAAUE,EAAU,KAAK,QAASC,EAAaD,EAAQ,OAAQE,EAAgB,KAAK,cAAa,EAAIC,EAAS,EAAGC,EAAQ,KAAK,QAASC,EAAa,KAAK,SAAQ,EAAIC,EAAgB,KAAK,cAAa,EAAI3jB,EAAO,KAAK,KAAI,EAAI4jB,EAAiB,KAAK,eAAc,EAAIC,EAAkBD,EAAe,QAAQ,WAAW,IAAM,GAAIE,EAAoBF,EAAe,QAAQ,cAAc,IAAM,GAAI9xB,EACjeiyB,EAAa,EACbA,EAAaX,EAAe,EAC5BY,EAAiB,EACjBC,EAAiB,EAWrB,IAVAhiB,EAAQ,QAAQ,OAAQ,KAAK,gBAAe,CAAE,EAC9CA,EAAQ,QAAQ,eAAgBygB,EAAM,EACtCzgB,EAAQ,QAAQ,YAAa6Z,EAAI,EAC7ByH,IAAkBb,GAClBc,GAAU,KAAK,UAAS,EAAKF,EAAaF,EAAeF,EAAU,GAAK,EAEnEK,IAAkBd,KACvBe,EAAS,KAAK,UAAS,EAAKF,EAAaF,EAAeF,EAAU,GAEtEjhB,EAAQ,UAAUihB,EAASM,EAASN,CAAO,EACtCpxB,EAAI,EAAGA,EAAIwxB,EAAYxxB,IAAK,CAC7B,IAAIkyB,EAAiB,EACjBC,EAAiB,EACjB7uB,EAAMiuB,EAAQvxB,CAAC,EAAGwN,EAAOlK,EAAI,KAAMgK,EAAQhK,EAAI,MAAO8uB,EAAWpyB,IAAMwxB,EAAa,EAAGa,EAAcC,EAASC,EAwClH,GAvCApiB,EAAQ,KAAI,EACRwhB,IAAU7H,GACVoI,GAAkBN,EAAatkB,EAAQ8jB,EAAU,EAE5CO,IAAUvB,KACf8B,IAAmBN,EAAatkB,EAAQ8jB,EAAU,GAAK,GAEvDW,IACA5hB,EAAQ,KAAI,EACZA,EAAQ,UAAS,EACjBA,EAAQ,OAAO+hB,EAAgBD,EAAaE,EAAiB,KAAK,MAAMd,EAAW,CAAC,CAAC,EACrFgB,EAAe7kB,EAAK,MAAM,GAAG,EAAE,OAAS,EACxC8kB,EAAUD,IAAiB,EAC3BE,EACIZ,IAAUtB,IAAW+B,GAAY,CAACE,EAC5BV,EAAaR,EAAU,EACvB9jB,EACV6C,EAAQ,OAAO+hB,EAAiB,KAAK,MAAMK,CAAS,EAAGN,EAAaE,EAAiB,KAAK,MAAMd,EAAW,CAAC,CAAC,EAC7GlhB,EAAQ,UAAYkhB,EAAW,GAC/BlhB,EAAQ,YAAcjC,EACtBiC,EAAQ,OAAM,EACdA,EAAQ,QAAO,GAEf6hB,IACA7hB,EAAQ,KAAI,EACZA,EAAQ,UAAS,EACjBA,EAAQ,OAAO+hB,EAAgBD,EAAaE,CAAc,EAC1DE,EAAe7kB,EAAK,MAAM,GAAG,EAAE,OAAS,EACxC8kB,EAAUD,IAAiB,EAC3BE,EACIZ,IAAUtB,IAAW+B,GAAY,CAACE,EAC5BV,EAAaR,EAAU,EACvB9jB,EACV6C,EAAQ,OAAO+hB,EAAiB,KAAK,MAAMK,CAAS,EAAGN,EAAaE,CAAc,EAClFhiB,EAAQ,UAAYkhB,EAAW,GAC/BlhB,EAAQ,YAAcjC,EACtBiC,EAAQ,OAAM,EACdA,EAAQ,QAAO,GAEf0hB,IAAkB,GAAKF,IAAUtB,GAAS,CAC1CgC,EAAe7kB,EAAK,MAAM,GAAG,EAAE,OAAS,EACxC,QAASglB,EAAK,EAAGA,EAAKhlB,EAAK,OAAQglB,IAAM,CACrC,IAAIC,EAASjlB,EAAKglB,CAAE,EAChBC,IAAW,KAAOzyB,IAAMwxB,EAAa,GAAKG,IAAUtB,KACpD6B,GAAkB,KAAK,OAAON,EAAaR,EAAU,EAAI9jB,GAAS+kB,CAAY,GAElF,KAAK,cAAgBH,EACrB,KAAK,cAAgBD,EAAaE,EAClC,KAAK,aAAeM,EACpBtiB,EAAQ,gBAAgB,IAAI,EAC5B+hB,GACI,KAAK,MAAM,KAAK,YAAYO,CAAM,EAAE,KAAK,EAAIZ,CACrE,CACA,MAEgB,KAAK,cAAgBK,EACrB,KAAK,cAAgBD,EAAaE,EAClC,KAAK,aAAe3kB,EACpB2C,EAAQ,gBAAgB,IAAI,EAEhCA,EAAQ,QAAO,EACXqhB,EAAa,IACbS,GAAcX,EAE9B,CACA,EACIH,EAAK,UAAU,SAAW,SAAUhhB,EAAS,CACzC,IAAI7C,EAAQ,KAAK,SAAQ,EAAIC,EAAS,KAAK,UAAS,EACpD4C,EAAQ,UAAS,EACjBA,EAAQ,KAAK,EAAG,EAAG7C,EAAOC,CAAM,EAChC4C,EAAQ,UAAS,EACjBA,EAAQ,gBAAgB,IAAI,CACpC,EACIghB,EAAK,UAAU,QAAU,SAAU3jB,EAAM,CACrC,IAAI9I,EAAMkE,GAAO,KAAK,UAAU4E,CAAI,EAC9BA,EACAA,GAAS,KACL,GACAA,EAAO,GACjB,YAAK,SAASgjB,GAAM9rB,CAAG,EAChB,IACf,EACIysB,EAAK,UAAU,SAAW,UAAY,CAClC,IAAI/nB,EAAS,KAAK,MAAM,QAAU+mB,IAAQ,KAAK,MAAM,QAAU,OAC/D,OAAO/mB,EAAS,KAAK,eAAiB,KAAK,QAAO,EAAK,EAAI,KAAK,MAAM,KAC9E,EACI+nB,EAAK,UAAU,UAAY,UAAY,CACnC,IAAI/nB,EAAS,KAAK,MAAM,SAAW+mB,IAAQ,KAAK,MAAM,SAAW,OACjE,OAAO/mB,EACD,KAAK,SAAQ,EAAK,KAAK,QAAQ,OAAS,KAAK,WAAU,EACrD,KAAK,QAAO,EAAK,EACnB,KAAK,MAAM,MACzB,EACI+nB,EAAK,UAAU,aAAe,UAAY,CACtC,OAAO,KAAK,SACpB,EACIA,EAAK,UAAU,cAAgB,UAAY,CACvCvoB,OAAAA,GAAO,KAAK,KAAK,2HAA2H,EACrI,KAAK,UACpB,EACIuoB,EAAK,UAAU,YAAc,SAAU3jB,EAAM,CACzC,IAAIH,EAAW+T,GAAe,EAAIiQ,EAAW,KAAK,SAAQ,EAAIqB,EAC9D,OAAArlB,EAAS,KAAI,EACbA,EAAS,KAAO,KAAK,gBAAe,EACpCqlB,EAAUrlB,EAAS,YAAYG,CAAI,EACnCH,EAAS,QAAO,EACT,CACH,MAAOqlB,EAAQ,MACf,OAAQrB,CACpB,CACA,EACIF,EAAK,UAAU,gBAAkB,UAAY,CACzC,OAAIzxB,GAAS,MAAM,GAAG,KACV,KAAK,UAAS,EAClBiT,GACA,KAAK,SAAQ,EACbme,GACA,KAAK,WAAU,EAEf,KAAK,UAAS,EAClBne,GACA,KAAK,YAAW,EAChBA,GACA,KAAK,SAAQ,EACbme,GACA,KAAK,WAAU,CAC3B,EACIK,EAAK,UAAU,aAAe,SAAU5pB,EAAM,CACtC,KAAK,MAAK,IAAO8oB,KACjB9oB,EAAOA,EAAK,KAAI,GAEpB,IAAI+F,EAAQ,KAAK,cAAc/F,CAAI,EACnC,OAAO,KAAK,QAAQ,KAAK,CAAE,KAAMA,EAAM,MAAO+F,EAAO,CAC7D,EACI6jB,EAAK,UAAU,cAAgB,SAAU3jB,EAAM,CAC3C,IAAIqkB,EAAgB,KAAK,cAAa,EAClCjS,EAASpS,EAAK,OAClB,OAAQ4T,GAAe,EAAG,YAAY5T,CAAI,EAAE,OACvCoS,EAASiS,GAAiBjS,EAAS,GAAK,EACrD,EACIuR,EAAK,UAAU,aAAe,UAAY,CACtC,IAAIwB,EAAQ,KAAK,KAAI,EAAG,MAAM;AAAA,CAAI,EAAGtB,EAAW,CAAC,KAAK,SAAQ,EAAIuB,EAAY,EAAGtB,EAAe,KAAK,WAAU,EAAKD,EAAU/jB,EAAQ,KAAK,MAAM,MAAOC,EAAS,KAAK,MAAM,OAAQslB,EAAavlB,IAAU6iB,IAAQ7iB,IAAU,OAAWwlB,EAAcvlB,IAAW4iB,IAAQ5iB,IAAW,OAAW6jB,EAAU,KAAK,QAAO,EAAI2B,EAAWzlB,EAAQ8jB,EAAU,EAAG4B,EAAczlB,EAAS6jB,EAAU,EAAG6B,EAAkB,EAAGC,EAAO,KAAK,KAAI,EAAIC,EAAaD,IAAStJ,GAAMwJ,EAAaF,IAASlC,IAAQmC,EAAYE,EAAoB,KAAK,SAAQ,GAAM,CAACF,EACphB,KAAK,QAAU,CAAA,EACf/R,KAAkB,KAAO,KAAK,gBAAe,EAE7C,QADIkS,EAAkBD,EAAoB,KAAK,cAAcpC,EAAQ,EAAI,EAChE/wB,EAAI,EAAGqzB,EAAMZ,EAAM,OAAQzyB,EAAIqzB,EAAK,EAAErzB,EAAG,CAC9C,IAAIqH,EAAOorB,EAAMzyB,CAAC,EACdqyB,EAAY,KAAK,cAAchrB,CAAI,EACvC,GAAIsrB,GAAcN,EAAYQ,EAC1B,KAAOxrB,EAAK,OAAS,GAAG,CAEpB,QADIisB,EAAM,EAAGC,EAAOlsB,EAAK,OAAQrI,EAAQ,GAAIw0B,EAAa,EACnDF,EAAMC,GAAM,CACf,IAAIE,EAAOH,EAAMC,IAAU,EAAGG,EAASrsB,EAAK,MAAM,EAAGosB,EAAM,CAAC,EAAGE,EAAc,KAAK,cAAcD,CAAM,EAAIN,EACtGO,GAAed,GACfS,EAAMG,EAAM,EACZz0B,EAAQ00B,GAAUP,EAAoBpC,GAAW,IACjDyC,EAAaG,GAGbJ,EAAOE,CAEnC,CACoB,GAAIz0B,EAAO,CACP,GAAIk0B,EAAY,CACZ,IAAIU,EACAC,EAAWxsB,EAAKrI,EAAM,MAAM,EAC5B80B,EAAoBD,IAAaphB,IAASohB,IAAaxD,GACvDyD,GAAqBN,GAAcX,EACnCe,EAAY50B,EAAM,OAGlB40B,EACI,KAAK,IAAI50B,EAAM,YAAYyT,EAAK,EAAGzT,EAAM,YAAYqxB,EAAI,CAAC,EACtD,EAERuD,EAAY,IACZN,EAAMM,EACN50B,EAAQA,EAAM,MAAM,EAAGs0B,CAAG,EAC1BE,EAAa,KAAK,cAAcx0B,CAAK,EAErE,CAKwB,GAJAA,EAAQA,EAAM,UAAS,EACvB,KAAK,aAAaA,CAAK,EACvB0zB,EAAY,KAAK,IAAIA,EAAWc,CAAU,EAC1CT,GAAmB3B,EACf,CAAC6B,GACAL,GAAeG,EAAkB3B,EAAe0B,EACjD,MAIJ,GAFAzrB,EAAOA,EAAK,MAAMisB,CAAG,EACrBjsB,EAAOA,EAAK,SAAQ,EAChBA,EAAK,OAAS,IACdgrB,EAAY,KAAK,cAAchrB,CAAI,EAC/BgrB,GAAaQ,GAAU,CACvB,KAAK,aAAaxrB,CAAI,EACtB0rB,GAAmB3B,EACnBsB,EAAY,KAAK,IAAIA,EAAWL,CAAS,EACzC,KAChC,CAEA,KAEwB,MAExB,MAGgB,KAAK,aAAahrB,CAAI,EACtB0rB,GAAmB3B,EACnBsB,EAAY,KAAK,IAAIA,EAAWL,CAAS,EAE7C,GAAIO,GAAeG,EAAkB3B,EAAe0B,EAChD,KAEhB,CACQ,KAAK,WAAa3B,EAClB,KAAK,UAAYuB,CACzB,EACIzB,EAAK,UAAU,sBAAwB,UAAY,CAC/C,MAAO,EACf,EACWA,CACX,EAAExN,GAAQ,KAAK,EACfuM,GAAA,KAAeiB,GACfA,GAAK,UAAU,UAAY9P,GAC3B8P,GAAK,UAAU,YAAc7P,GAC7B6P,GAAK,UAAU,UAAYV,GAC3BU,GAAK,UAAU,oBAAsB,CACjC,OACA,WACA,UACA,OACA,YACJ,EACA/U,GAAS,cAAc+U,EAAI,EAC3BrhB,GAAU,QAAQ,gBAAgBqhB,GAAM,QAAStnB,GAAa,0BAA0B,EACxFiG,GAAU,QAAQ,gBAAgBqhB,GAAM,SAAUtnB,GAAa,0BAA0B,EACzFiG,GAAU,QAAQ,gBAAgBqhB,GAAM,aAAc,OAAO,EAC7DrhB,GAAU,QAAQ,gBAAgBqhB,GAAM,WAAY,GAAItnB,GAAa,oBAAoB,EACzFiG,GAAU,QAAQ,gBAAgBqhB,GAAM,YAAaN,EAAM,EAC3D/gB,GAAU,QAAQ,gBAAgBqhB,GAAM,cAAeN,EAAM,EAC7D/gB,GAAU,QAAQ,gBAAgBqhB,GAAM,UAAW,EAAGtnB,GAAa,oBAAoB,EACvFiG,GAAU,QAAQ,gBAAgBqhB,GAAM,QAASnH,EAAI,EACrDla,GAAU,QAAQ,gBAAgBqhB,GAAM,gBAAiBT,EAAG,EAC5D5gB,GAAU,QAAQ,gBAAgBqhB,GAAM,aAAc,EAAGtnB,GAAa,oBAAoB,EAC1FiG,GAAU,QAAQ,gBAAgBqhB,GAAM,OAAQJ,EAAI,EACpDjhB,GAAU,QAAQ,gBAAgBqhB,GAAM,WAAY,EAAK,EACzDrhB,GAAU,QAAQ,gBAAgBqhB,GAAM,gBAAiB,EAAGtnB,GAAa,oBAAoB,EAC7FiG,GAAU,QAAQ,gBAAgBqhB,GAAM,OAAQ,GAAItnB,GAAa,oBAAoB,EACrFiG,GAAU,QAAQ,gBAAgBqhB,GAAM,iBAAkB,EAAE,EAC5DvoB,GAAO,WAAW,WAAWuoB,EAAI,YCzV7BjmB,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAe4oB,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIrrB,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACV6a,GAAS3a,GACTmgB,GAASlgB,GACTnG,GAAe2H,EACf9R,GAAW2c,EACXvZ,GAAe,GAAI+tB,GAAS,SAChC,SAASxP,GAAUlR,EAAS,CACxBA,EAAQ,SAAS,KAAK,YAAa,EAAG,CAAC,CAC3C,CACA,SAASmR,GAAYnR,EAAS,CAC1BA,EAAQ,WAAW,KAAK,YAAa,EAAG,CAAC,CAC7C,CACA,IAAI+jB,GAAY,SAAUjmB,EAAQ,CAC9B/C,GAAUgpB,EAAUjmB,CAAM,EAC1B,SAASimB,EAAS3jB,EAAQ,CACtB,IAAIO,EAAQ7C,EAAO,KAAK,KAAMsC,CAAM,GAAK,KACzC,OAAAO,EAAM,YAAclI,GAAO,KAAK,oBAAmB,EACnDkI,EAAM,UAAY,CAAA,EAClBA,EAAM,UAAY4Z,GAAO,KAAK,cAAc5Z,EAAM,MAAM,IAAI,EAC5DA,EAAM,GAAG,mBAAoB,UAAY,CACrC,KAAK,UAAY4Z,GAAO,KAAK,cAAc,KAAK,MAAM,IAAI,EAC1D,KAAK,aAAY,CAC7B,CAAS,EACD5Z,EAAM,GAAG,uFAAwFA,EAAM,YAAY,EAC/GP,GAAUA,EAAO,aACjB3H,GAAO,KAAK,KAAK,0EAA0E,EAC3FkI,EAAM,YAAYP,EAAO,UAAa,GAE1CO,EAAM,aAAY,EACXA,CACf,CACI,OAAAojB,EAAS,UAAU,WAAa,SAAU/jB,EAAS,CAC/CA,EAAQ,QAAQ,OAAQ,KAAK,gBAAe,CAAE,EAC9CA,EAAQ,QAAQ,eAAgB,KAAK,aAAY,CAAE,EACnDA,EAAQ,QAAQ,YAAa,MAAM,EACnCA,EAAQ,KAAI,EACZ,IAAI2hB,EAAiB,KAAK,eAAc,EACpC5jB,EAAO,KAAK,KAAI,EAChBmjB,EAAW,KAAK,SAAQ,EACxB8C,EAAY,KAAK,UACjBrC,IAAmB,aACnB3hB,EAAQ,UAAS,EAErB,QAASjQ,EAAI,EAAGA,EAAIi0B,EAAU,OAAQj0B,IAAK,CACvCiQ,EAAQ,KAAI,EACZ,IAAIikB,EAAKD,EAAUj0B,CAAC,EAAE,GACtBiQ,EAAQ,UAAUikB,EAAG,EAAGA,EAAG,CAAC,EAC5BjkB,EAAQ,OAAOgkB,EAAUj0B,CAAC,EAAE,QAAQ,EACpC,KAAK,YAAci0B,EAAUj0B,CAAC,EAAE,KAChCiQ,EAAQ,gBAAgB,IAAI,EACxB2hB,IAAmB,cACf5xB,IAAM,GACNiQ,EAAQ,OAAO,EAAGkhB,EAAW,EAAI,CAAC,EAEtClhB,EAAQ,OAAOkhB,EAAUA,EAAW,EAAI,CAAC,GAE7ClhB,EAAQ,QAAO,CAC3B,CACY2hB,IAAmB,cACnB3hB,EAAQ,YAAcjC,EACtBiC,EAAQ,UAAYkhB,EAAW,GAC/BlhB,EAAQ,OAAM,GAElBA,EAAQ,QAAO,CACvB,EACI+jB,EAAS,UAAU,SAAW,SAAU/jB,EAAS,CAC7CA,EAAQ,UAAS,EACjB,IAAIgkB,EAAY,KAAK,UACrB,GAAIA,EAAU,QAAU,EAAG,CACvB,IAAIC,EAAKD,EAAU,CAAC,EAAE,GACtBhkB,EAAQ,OAAOikB,EAAG,EAAGA,EAAG,CAAC,CACrC,CACQ,QAASl0B,EAAI,EAAGA,EAAIi0B,EAAU,OAAQj0B,IAAK,CACvC,IAAIwH,EAAKysB,EAAUj0B,CAAC,EAAE,GACtBiQ,EAAQ,OAAOzI,EAAG,EAAGA,EAAG,CAAC,CACrC,CACQyI,EAAQ,QAAQ,YAAa,KAAK,SAAQ,CAAE,EAC5CA,EAAQ,QAAQ,cAAe,KAAK,QAAQ,EAC5CA,EAAQ,OAAM,CACtB,EACI+jB,EAAS,UAAU,aAAe,UAAY,CAC1C,OAAO,KAAK,SACpB,EACIA,EAAS,UAAU,cAAgB,UAAY,CAC3CtrB,OAAAA,GAAO,KAAK,KAAK,2HAA2H,EACrI,KAAK,UACpB,EACIsrB,EAAS,UAAU,QAAU,SAAU1mB,EAAM,CACzC,OAAO0iB,GAAO,KAAK,UAAU,QAAQ,KAAK,KAAM1iB,CAAI,CAC5D,EACI0mB,EAAS,UAAU,gBAAkB,UAAY,CAC7C,OAAOhE,GAAO,KAAK,UAAU,gBAAgB,KAAK,IAAI,CAC9D,EACIgE,EAAS,UAAU,aAAe,SAAU1mB,EAAM,CAC9C,IAAI6mB,EAAc,KAAK,YACnBhnB,EAAWgnB,EAAY,WAAW,IAAI,EAC1ChnB,EAAS,KAAI,EACbA,EAAS,KAAO,KAAK,gBAAe,EACpC,IAAIqlB,EAAUrlB,EAAS,YAAYG,CAAI,EACvC,OAAAH,EAAS,QAAO,EACT,CACH,MAAOqlB,EAAQ,MACf,OAAQ,SAAS,KAAK,MAAM,SAAU,EAAE,CACpD,CACA,EACIwB,EAAS,UAAU,aAAe,UAAY,CAC1C,IAAIzmB,EAAO,KACP4K,EAAO,KAAK,aAAa,KAAK,MAAM,IAAI,EACxCwZ,EAAgB,KAAK,cAAa,EAClCF,EAAQ,KAAK,MAAK,EAClB2C,EAAc,KAAK,YAAW,EAClC,KAAK,UAAYjc,EAAK,MACtB,KAAK,WAAaA,EAAK,OACvB,IAAIkc,EAAgB,KAAK,IAAI,KAAK,YAAc,KAAK,MAAM,MAAQ,IAAI,OAAS,GAAK1C,EAAe,CAAC,EACrG,KAAK,UAAY,CAAA,EAEjB,QADI2C,EAAgB,EACX,EAAI,EAAG,EAAI/mB,EAAK,UAAU,OAAQ,IACnCA,EAAK,UAAU,CAAC,EAAE,WAAa,IAC/B+mB,GAAiB/mB,EAAK,UAAU,CAAC,EAAE,YAG3C,IAAI2B,EAAS,EACTuiB,IAAU,WACVviB,EAAS,KAAK,IAAI,EAAGolB,EAAgB,EAAID,EAAgB,CAAC,GAE1D5C,IAAU,UACVviB,EAAS,KAAK,IAAI,EAAGolB,EAAgBD,CAAa,GA+HtD,QA7HIE,EAAU,KAAK,KAAI,EAAG,MAAM,EAAE,EAC9BpC,EAAe,KAAK,KAAI,EAAG,MAAM,GAAG,EAAE,OAAS,EAC/C+B,EAAI1sB,EAAIgtB,EACRC,EAAS,GACTC,EAAW,EACXC,EAAqB,UAAY,CACjCD,EAAW,EAEX,QADIE,EAAWrnB,EAAK,UACXqa,EAAI6M,EAAS,EAAG7M,EAAIgN,EAAS,OAAQhN,IAAK,CAC/C,GAAIgN,EAAShN,CAAC,EAAE,WAAa,EACzB,OAAA6M,EAAS7M,EACFgN,EAAShN,CAAC,EAEZgN,EAAShN,CAAC,EAAE,UAAY,MAC7BsM,EAAK,CACD,EAAGU,EAAShN,CAAC,EAAE,OAAO,CAAC,EACvB,EAAGgN,EAAShN,CAAC,EAAE,OAAO,CAAC,CAC/C,EAEA,CACY,MAAO,CAAA,CACnB,EACYiN,EAA4B,SAAUh0B,EAAG,CACzC,IAAIi0B,EAAavnB,EAAK,aAAa1M,CAAC,EAAE,MAAQ8wB,EAC1C9wB,IAAM,KAAO4wB,IAAU,YACvBqD,IAAeR,EAAgBD,GAAiBlC,GAEpD,IAAI4C,EAAU,EACVC,EAAW,EAEf,IADAxtB,EAAK,OACE,KAAK,IAAIstB,EAAaC,CAAO,EAAID,EAAa,KACjDE,EAAW,IAAI,CACfA,IAEA,QADIC,EAAuBF,EACpBP,IAAY,QACfA,EAAUG,EAAkB,EACxBH,GACAS,EAAuBT,EAAQ,WAAaM,IAC5CG,GAAwBT,EAAQ,WAChCA,EAAU,QAGlB,GAAIA,IAAY,CAAA,GAAMN,IAAO,OACzB,OAEJ,IAAIgB,EAAiB,GACrB,OAAQV,EAAQ,QAAO,CACnB,IAAK,IACGhK,GAAO,KAAK,cAAc0J,EAAG,EAAGA,EAAG,EAAGM,EAAQ,OAAO,CAAC,EAAGA,EAAQ,OAAO,CAAC,CAAC,EAAIM,EAC9EttB,EAAKgjB,GAAO,KAAK,eAAesK,EAAYZ,EAAG,EAAGA,EAAG,EAAGM,EAAQ,OAAO,CAAC,EAAGA,EAAQ,OAAO,CAAC,EAAGN,EAAG,EAAGA,EAAG,CAAC,EAGxGM,EAAU,OAEd,MACJ,IAAK,IACD,IAAIxsB,EAAQwsB,EAAQ,OAAO,CAAC,EACxB3J,EAAS2J,EAAQ,OAAO,CAAC,EACzBvsB,EAAMusB,EAAQ,OAAO,CAAC,EAAI3J,EAC1B6J,IAAa,EACbA,EAAW1sB,EAAQ,KAEd8sB,EAAaC,EAClBL,GAAc,KAAK,GAAK,IAAS7J,EAAU,KAAK,IAAIA,CAAM,EAG1D6J,GAAc,KAAK,GAAK,IAAS7J,EAAU,KAAK,IAAIA,CAAM,GAEzDA,EAAS,GAAK6J,EAAWzsB,GACzB4iB,GAAU,GAAK6J,EAAWzsB,KAC3BysB,EAAWzsB,EACXitB,EAAiB,IAErB1tB,EAAKgjB,GAAO,KAAK,wBAAwBgK,EAAQ,OAAO,CAAC,EAAGA,EAAQ,OAAO,CAAC,EAAGA,EAAQ,OAAO,CAAC,EAAGA,EAAQ,OAAO,CAAC,EAAGE,EAAUF,EAAQ,OAAO,CAAC,CAAC,EAChJ,MACJ,IAAK,IACGE,IAAa,EACTI,EAAaN,EAAQ,WACrBE,EAAW,KAGXA,EAAWI,EAAaN,EAAQ,WAG/BM,EAAaC,EAClBL,IAAaI,EAAaC,GAAWP,EAAQ,WAG7CE,IAAaK,EAAUD,GAAcN,EAAQ,WAE7CE,EAAW,IACXA,EAAW,EACXQ,EAAiB,IAErB1tB,EAAKgjB,GAAO,KAAK,sBAAsBkK,EAAUF,EAAQ,MAAM,EAAGA,EAAQ,MAAM,EAAGA,EAAQ,OAAO,CAAC,EAAGA,EAAQ,OAAO,CAAC,EAAGA,EAAQ,OAAO,CAAC,EAAGA,EAAQ,OAAO,CAAC,EAAGA,EAAQ,OAAO,CAAC,EAAGA,EAAQ,OAAO,CAAC,CAAC,EACnM,MACJ,IAAK,IACGE,IAAa,EACbA,EAAWI,EAAaN,EAAQ,WAE3BM,EAAaC,EAClBL,IAAaI,EAAaC,GAAWP,EAAQ,WAG7CE,IAAaK,EAAUD,GAAcN,EAAQ,WAE7CE,EAAW,IACXA,EAAW,EACXQ,EAAiB,IAErB1tB,EAAKgjB,GAAO,KAAK,0BAA0BkK,EAAUF,EAAQ,MAAM,EAAGA,EAAQ,MAAM,EAAGA,EAAQ,OAAO,CAAC,EAAGA,EAAQ,OAAO,CAAC,EAAGA,EAAQ,OAAO,CAAC,EAAGA,EAAQ,OAAO,CAAC,CAAC,EACjK,KACxB,CACoBhtB,IAAO,SACPutB,EAAUvK,GAAO,KAAK,cAAc0J,EAAG,EAAGA,EAAG,EAAG1sB,EAAG,EAAGA,EAAG,CAAC,GAE1D0tB,IACAA,EAAiB,GACjBV,EAAU,OAE9B,CACA,EACYW,EAAW,IACXL,EAAavnB,EAAK,aAAa4nB,CAAQ,EAAE,MAAQxD,EACjDyD,EAAkBlmB,EAAS4lB,EAAa,EACnCnN,EAAI,EAAGA,EAAIyN,IAChBP,EAA0BM,CAAQ,EAC9B,EAAAjB,IAAO,QAAa1sB,IAAO,SAFEmgB,IAKjCuM,EAAK1sB,EAET,QAASxH,EAAI,EAAGA,EAAIu0B,EAAQ,SACxBM,EAA0BN,EAAQv0B,CAAC,CAAC,EAChC,EAAAk0B,IAAO,QAAa1sB,IAAO,SAFCxH,IAAK,CAKrC,IAAIoN,EAAQod,GAAO,KAAK,cAAc0J,EAAG,EAAGA,EAAG,EAAG1sB,EAAG,EAAGA,EAAG,CAAC,EACxD6tB,EAAO,EACX,GAAIjB,EACA,GAAI,CACAiB,EAAOjB,EAAYG,EAAQv0B,EAAI,CAAC,EAAGu0B,EAAQv0B,CAAC,CAAC,EAAI,KAAK,SAAQ,CAClF,MAC0B,CACNq1B,EAAO,CAC3B,CAEYnB,EAAG,GAAKmB,EACR7tB,EAAG,GAAK6tB,EACR,KAAK,WAAaA,EAClB,IAAIC,EAAW9K,GAAO,KAAK,eAAe6K,EAAOjoB,EAAQ,EAAK8mB,EAAG,EAAGA,EAAG,EAAG1sB,EAAG,EAAGA,EAAG,CAAC,EAChFkQ,EAAW,KAAK,MAAMlQ,EAAG,EAAI0sB,EAAG,EAAG1sB,EAAG,EAAI0sB,EAAG,CAAC,EAClD,KAAK,UAAU,KAAK,CAChB,WAAYoB,EAAS,EACrB,WAAYA,EAAS,EACrB,KAAMf,EAAQv0B,CAAC,EACf,SAAU0X,EACV,GAAIwc,EACJ,GAAI1sB,CACpB,CAAa,EACD0sB,EAAK1sB,CACjB,CACA,EACIwsB,EAAS,UAAU,YAAc,UAAY,CACzC,GAAI,CAAC,KAAK,UAAU,OAChB,MAAO,CACH,EAAG,EACH,EAAG,EACH,MAAO,EACP,OAAQ,CACxB,EAEQ,IAAIngB,EAAS,CAAA,EACb,KAAK,UAAU,QAAQ,SAAU0hB,EAAM,CACnC1hB,EAAO,KAAK0hB,EAAK,GAAG,CAAC,EACrB1hB,EAAO,KAAK0hB,EAAK,GAAG,CAAC,EACrB1hB,EAAO,KAAK0hB,EAAK,GAAG,CAAC,EACrB1hB,EAAO,KAAK0hB,EAAK,GAAG,CAAC,CACjC,CAAS,EAMD,QALIzhB,EAAOD,EAAO,CAAC,GAAK,EACpBG,EAAOH,EAAO,CAAC,GAAK,EACpBE,EAAOF,EAAO,CAAC,GAAK,EACpBI,EAAOJ,EAAO,CAAC,GAAK,EACpBrT,EAAGC,EACET,EAAI,EAAGA,EAAI6T,EAAO,OAAS,EAAG7T,IACnCQ,EAAIqT,EAAO7T,EAAI,CAAC,EAChBS,EAAIoT,EAAO7T,EAAI,EAAI,CAAC,EACpB8T,EAAO,KAAK,IAAIA,EAAMtT,CAAC,EACvBwT,EAAO,KAAK,IAAIA,EAAMxT,CAAC,EACvBuT,EAAO,KAAK,IAAIA,EAAMtT,CAAC,EACvBwT,EAAO,KAAK,IAAIA,EAAMxT,CAAC,EAE3B,IAAI0wB,EAAW,KAAK,SAAQ,EAC5B,MAAO,CACH,EAAGrd,EAAOqd,EAAW,EACrB,EAAGpd,EAAOod,EAAW,EACrB,MAAOnd,EAAOF,EAAOqd,EACrB,OAAQld,EAAOF,EAAOod,CAClC,CACA,EACW6C,CACX,EAAEvQ,GAAQ,KAAK,EACfsQ,GAAA,SAAmBC,GACnBA,GAAS,UAAU,UAAY7S,GAC/B6S,GAAS,UAAU,YAAc5S,GACjC4S,GAAS,UAAU,aAAe7S,GAClC6S,GAAS,UAAU,eAAiB5S,GACpC4S,GAAS,UAAU,UAAY,WAC/BA,GAAS,UAAU,oBAAsB,CAAC,OAAQ,WAAY,MAAM,EACpEx0B,GAAS,cAAcw0B,EAAQ,EAC/BpkB,GAAU,QAAQ,gBAAgBokB,GAAU,MAAM,EAClDpkB,GAAU,QAAQ,gBAAgBokB,GAAU,aAAc,OAAO,EACjEpkB,GAAU,QAAQ,gBAAgBokB,GAAU,WAAY,GAAIrqB,GAAa,oBAAoB,EAC7FiG,GAAU,QAAQ,gBAAgBokB,GAAU,YAAarD,EAAM,EAC/D/gB,GAAU,QAAQ,gBAAgBokB,GAAU,QAAS,MAAM,EAC3DpkB,GAAU,QAAQ,gBAAgBokB,GAAU,gBAAiB,EAAGrqB,GAAa,oBAAoB,EACjGiG,GAAU,QAAQ,gBAAgBokB,GAAU,eAAgB,QAAQ,EACpEpkB,GAAU,QAAQ,gBAAgBokB,GAAU,cAAerD,EAAM,EACjE/gB,GAAU,QAAQ,gBAAgBokB,GAAU,OAAQpxB,EAAY,EAChEgN,GAAU,QAAQ,gBAAgBokB,GAAU,iBAAkB,IAAI,EAClEpkB,GAAU,QAAQ,gBAAgBokB,GAAU,cAAe,IAAI,EAC/DtrB,GAAO,WAAW,WAAWsrB,EAAQ,YC7WjChpB,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACGqqB,GAAYvqB,GAAQA,EAAK,UAAa,UAAY,CAClD,OAAAuqB,GAAW,OAAO,QAAU,SAASxvB,EAAG,CACpC,QAASlF,EAAGd,EAAI,EAAGF,EAAI,UAAU,OAAQE,EAAIF,EAAGE,IAAK,CACjDc,EAAI,UAAUd,CAAC,EACf,QAASyG,KAAK3F,EAAO,OAAO,UAAU,eAAe,KAAKA,EAAG2F,CAAC,IAC1DT,EAAES,CAAC,EAAI3F,EAAE2F,CAAC,EAC1B,CACQ,OAAOT,CACf,EACWwvB,GAAS,MAAM,KAAM,SAAS,CACzC,EACA,OAAO,eAAeC,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAI/sB,EAASjJ,EACTmQ,GAAYjH,EACZoR,GAASpK,GACT8T,GAAU5T,GACVye,GAASxe,GACT0U,GAAUlT,GACV9R,GAAW2c,EACXxS,GAAe+Z,EACfxH,GAAWC,EACXuZ,GAAc,WACdlM,GAAmB,CACnB,sBACA,2BACA,sBACA,uBACA,mBACA,sBACA,qBACA,0BACA,mBACA,qBACA,0BACA,mBACA,2BACA,oBACJ,EACK,IAAI,SAAUlsB,EAAG,CAAE,OAAOA,GAAK,IAAMo4B,IAAe,EACpD,KAAK,GAAG,EACTC,GAAa,YACb7iB,GAAuB,CACvB,cACA,eACA,eACA,eACA,cACA,cACA,iBACA,gBACA,gBACA,0BACA,mBACJ,EACK,IAAI,SAAUxV,EAAG,CAAE,OAAOA,GAAK,IAAMo4B,IAAe,EACpD,KAAK,GAAG,EACTE,GAAS,CACT,WAAY,IACZ,aAAc,EACd,YAAa,GACb,eAAgB,IAChB,cAAe,GACf,cAAe,KACf,gBAAiB,IACjB,eAAgB,GACpB,EACIC,GAAe,iBAAkBr2B,GAAS,MAAM,QACpD,SAASs2B,GAAUC,EAAYn1B,EAAK,CAChC,GAAIm1B,IAAe,UACf,MAAO,YAEXn1B,GAAO8H,EAAO,KAAK,UAAUktB,GAAOG,CAAU,GAAK,CAAC,EACpD,IAAI12B,GAAUqJ,EAAO,KAAK,UAAU9H,CAAG,EAAI,IAAO,KAAO,IACzD,OAAI8H,EAAO,KAAK,SAASrJ,EAAO,IAAM,KAAM,GAAG,GAAKqJ,EAAO,KAAK,SAASrJ,EAAO,EAAG,IAAI,EAC5E,YAEFqJ,EAAO,KAAK,SAASrJ,EAAO,GAAK,KAAM,GAAK,IAAI,EAC9C,cAEFqJ,EAAO,KAAK,SAASrJ,EAAO,GAAK,KAAM,GAAK,IAAI,EAC9C,YAEFqJ,EAAO,KAAK,SAASrJ,EAAO,IAAM,KAAM,IAAM,IAAI,EAChD,cAEFqJ,EAAO,KAAK,SAASrJ,EAAO,IAAM,KAAM,IAAM,IAAI,EAChD,YAEFqJ,EAAO,KAAK,SAASrJ,EAAO,IAAM,KAAM,IAAM,IAAI,EAChD,cAEFqJ,EAAO,KAAK,SAASrJ,EAAO,IAAM,KAAM,IAAM,IAAI,EAChD,YAEFqJ,EAAO,KAAK,SAASrJ,EAAO,IAAM,KAAM,IAAM,IAAI,EAChD,eAGPqJ,EAAO,KAAK,MAAM,uDAAyDrJ,CAAK,EACzE,UAEf,CACA,IAAI22B,GAAgB,CAChB,WACA,aACA,YACA,eACA,cACA,cACA,gBACA,cACJ,EAEA,SAASC,GAAUhqB,EAAO,CACtB,MAAO,CACH,EAAGA,EAAM,EACJA,EAAM,MAAQ,EAAK,KAAK,IAAIA,EAAM,QAAQ,EAC1CA,EAAM,OAAS,EAAK,KAAK,IAAI,CAACA,EAAM,QAAQ,EACjD,EAAGA,EAAM,EACJA,EAAM,OAAS,EAAK,KAAK,IAAIA,EAAM,QAAQ,EAC3CA,EAAM,MAAQ,EAAK,KAAK,IAAIA,EAAM,QAAQ,CACvD,CACA,CACA,SAASiqB,GAAkBjqB,EAAOkqB,EAAU51B,EAAO,CAC/C,IAAIC,EAAID,EAAM,GACT0L,EAAM,EAAI1L,EAAM,GAAK,KAAK,IAAI41B,CAAQ,GACtClqB,EAAM,EAAI1L,EAAM,GAAK,KAAK,IAAI41B,CAAQ,EACvC11B,EAAIF,EAAM,GACT0L,EAAM,EAAI1L,EAAM,GAAK,KAAK,IAAI41B,CAAQ,GACtClqB,EAAM,EAAI1L,EAAM,GAAK,KAAK,IAAI41B,CAAQ,EAC3C,OAAOX,GAASA,GAAS,CAAA,EAAIvpB,CAAK,EAAG,CAAE,SAAUA,EAAM,SAAWkqB,EAAU,EAAG31B,EAC3E,EAAGC,CAAC,CAAE,CACd,CACA,SAAS21B,GAAmBnqB,EAAOoqB,EAAU,CACzC,IAAIC,EAASL,GAAUhqB,CAAK,EAC5B,OAAOiqB,GAAkBjqB,EAAOoqB,EAAUC,CAAM,CACpD,CACA,SAASC,GAAQC,EAAOC,EAAgBC,EAAK,CAEzC,QADIC,EAAUF,EACL,EAAI,EAAG,EAAID,EAAM,OAAQ,IAAK,CACnC,IAAIn3B,EAAQG,GAAS,MAAM,SAASg3B,EAAM,CAAC,CAAC,EACxCI,EAAU,KAAK,IAAIv3B,EAAQo3B,CAAc,GAAK,KAAK,GAAK,GACxDI,EAAM,KAAK,IAAID,EAAS,KAAK,GAAK,EAAIA,CAAO,EAC7CC,EAAMH,IACNC,EAAUt3B,EAEtB,CACI,OAAOs3B,CACX,CACA,IAAIG,GAAe,SAAU/oB,EAAQ,CACjC/C,GAAU8rB,EAAa/oB,CAAM,EAC7B,SAAS+oB,EAAYzmB,EAAQ,CACzB,IAAIO,EAAQ7C,EAAO,KAAK,KAAMsC,CAAM,GAAK,KACzC,OAAAO,EAAM,cAAgB,GACtBA,EAAM,gBAAe,EACrBA,EAAM,iBAAmBA,EAAM,iBAAiB,KAAKA,CAAK,EAC1DA,EAAM,eAAiBA,EAAM,eAAe,KAAKA,CAAK,EACtDA,EAAM,OAASA,EAAM,OAAO,KAAKA,CAAK,EACtCA,EAAM,GAAG4Y,GAAkB5Y,EAAM,MAAM,EACnCA,EAAM,WACNA,EAAM,OAAM,EAETA,CACf,CACI,OAAAkmB,EAAY,UAAU,SAAW,SAAUlpB,EAAM,CAC7C,YAAK,QAAQA,CAAI,EACV,IACf,EACIkpB,EAAY,UAAU,QAAU,SAAUlpB,EAAM,CAC5ClF,OAAAA,EAAO,KAAK,KAAK,2HAA2H,EACrI,KAAK,SAAS,CAACkF,CAAI,CAAC,CACnC,EACIkpB,EAAY,UAAU,QAAU,UAAY,CACxC,OAAO,KAAK,QAAU,KAAK,OAAO,CAAC,CAC3C,EACIA,EAAY,UAAU,SAAW,SAAUnlB,EAAO,CAC9C,IAAIf,EAAQ,KACRe,IAAU,SAAUA,EAAQ,CAAA,GAC5B,KAAK,QAAU,KAAK,OAAO,QAC3B,KAAK,OAAM,EAEf,KAAK,OAASA,EACVA,EAAM,SAAW,EACjB,KAAK,SAASA,EAAM,CAAC,EAAE,SAAQ,CAAE,EAGjC,KAAK,SAAS,CAAC,EAEnB,KAAK,OAAO,QAAQ,SAAU/D,EAAM,CAChC,IAAImpB,EAAmBnpB,EAAK,oBACvB,IAAI,SAAUD,EAAM,CAAE,OAAOA,EAAO,UAAY+nB,GAAc,EAC9D,KAAK,GAAG,EACTsB,EAAW,UAAY,CACvBpmB,EAAM,qBAAoB,EACrBA,EAAM,eACPA,EAAM,OAAM,CAEhC,EACYhD,EAAK,GAAGmpB,EAAkBC,CAAQ,EAClCppB,EAAK,GAAGkF,GAAsBkkB,CAAQ,EACtCppB,EAAK,GAAG,wBAA0B8nB,GAAasB,CAAQ,EACvDppB,EAAK,GAAG,WAAa8nB,GAAc,YAAcA,GAAasB,CAAQ,EACtEpmB,EAAM,WAAWhD,CAAI,CACjC,CAAS,EACD,KAAK,qBAAoB,EACzB,IAAIqpB,EAAkB,CAAC,CAAC,KAAK,QAAQ,WAAW,EAChD,OAAIA,GACA,KAAK,OAAM,EAER,IACf,EACIH,EAAY,UAAU,WAAa,SAAUlpB,EAAM,CAC/C,IAAIgD,EAAQ,KACRsmB,EACJtpB,EAAK,GAAG,aAAe8nB,GAAa,UAAY,CAC5CwB,EAAUtpB,EAAK,oBAAmB,CAC9C,CAAS,EACDA,EAAK,GAAG,YAAc8nB,GAAa,UAAY,CAC3C,GAAKwB,EAGL,KAAIC,EAAMvpB,EAAK,oBAAmB,EAC9BxM,EAAK+1B,EAAI,EAAID,EAAQ,EACrB71B,EAAK81B,EAAI,EAAID,EAAQ,EACzBtmB,EAAM,MAAK,EAAG,QAAQ,SAAUwmB,EAAW,CACvC,GAAIA,IAAcxpB,GAGd,CAAAwpB,EAAU,aAGd,KAAIC,EAAWD,EAAU,oBAAmB,EAC5CA,EAAU,oBAAoB,CAC1B,EAAGC,EAAS,EAAIj2B,EAChB,EAAGi2B,EAAS,EAAIh2B,CACpC,CAAiB,EACD+1B,EAAU,UAAS,EACnC,CAAa,EACDF,EAAU,KACtB,CAAS,CACT,EACIJ,EAAY,UAAU,SAAW,UAAY,CACzC,OAAO,KAAK,MACpB,EACIA,EAAY,UAAU,gBAAkB,UAAY,CAChD,OAAO,KAAK,iBACpB,EACIA,EAAY,UAAU,OAAS,UAAY,CACnC,KAAK,QACL,KAAK,OAAO,QAAQ,SAAUlpB,EAAM,CAChCA,EAAK,IAAI,IAAM8nB,EAAW,CAC1C,CAAa,EAEL,KAAK,OAAS,CAAA,EACd,KAAK,qBAAoB,CACjC,EACIoB,EAAY,UAAU,qBAAuB,UAAY,CACrD,KAAK,YAAYnB,EAAU,EAC3B,KAAK,YAAY,WAAW,EAC5B,KAAK,6BAA6B,mBAAmB,CAC7D,EACImB,EAAY,UAAU,aAAe,UAAY,CAC7C,OAAO,KAAK,UAAUnB,GAAY,KAAK,aAAa,CAC5D,EACImB,EAAY,UAAU,eAAiB,SAAUlpB,EAAM0pB,EAAKC,EAAU,CAC9DD,IAAQ,SAAUA,EAAM,KAAK,SAAQ,GACzC,IAAIjkB,EAAOzF,EAAK,cAAc,CAC1B,cAAe,GACf,WAAY,GACZ,WAAY,KAAK,aAAY,CACzC,CAAS,EACG4pB,EAAW5pB,EAAK,iBAAiB2pB,CAAQ,EACzCE,EAAS7pB,EAAK,oBAAoB2pB,CAAQ,EAC1Cn2B,EAAKiS,EAAK,EAAImkB,EAAS,EAAI5pB,EAAK,UAAY4pB,EAAS,EACrDn2B,EAAKgS,EAAK,EAAImkB,EAAS,EAAI5pB,EAAK,UAAY4pB,EAAS,EACrD9f,GAAYlY,GAAS,MAAM,SAASoO,EAAK,qBAAqB,EAAI,KAAK,GAAK,IAC3E,KAAK,GAAK,GACXqK,EAAM,CACN,EAAGwf,EAAO,EAAIr2B,EAAK,KAAK,IAAIsW,CAAQ,EAAIrW,EAAK,KAAK,IAAI,CAACqW,CAAQ,EAC/D,EAAG+f,EAAO,EAAIp2B,EAAK,KAAK,IAAIqW,CAAQ,EAAItW,EAAK,KAAK,IAAIsW,CAAQ,EAC9D,MAAOrE,EAAK,MAAQmkB,EAAS,EAC7B,OAAQnkB,EAAK,OAASmkB,EAAS,EAC/B,SAAU9f,CACtB,EACQ,OAAOwe,GAAkBje,EAAK,CAACzY,GAAS,MAAM,SAAS83B,CAAG,EAAG,CACzD,EAAG,EACH,EAAG,CACf,CAAS,CACT,EACIR,EAAY,UAAU,cAAgB,UAAY,CAC9C,IAAIlmB,EAAQ,KACRhD,EAAO,KAAK,QAAO,EACvB,GAAI,CAACA,EACD,MAAO,CACH,EAAG,KACH,EAAG,KACH,MAAO,EACP,OAAQ,EACR,SAAU,CAC1B,EAEQ,IAAI8pB,EAAc,CAAA,EAClB,KAAK,MAAK,EAAG,IAAI,SAAU9pB,EAAM,CAC7B,IAAIqK,EAAMrK,EAAK,cAAc,CACzB,cAAe,GACf,WAAY,GACZ,WAAYgD,EAAM,aAAY,CAC9C,CAAa,EACGiD,EAAS,CACT,CAAE,EAAGoE,EAAI,EAAG,EAAGA,EAAI,CAAC,EACpB,CAAE,EAAGA,EAAI,EAAIA,EAAI,MAAO,EAAGA,EAAI,CAAC,EAChC,CAAE,EAAGA,EAAI,EAAIA,EAAI,MAAO,EAAGA,EAAI,EAAIA,EAAI,MAAM,EAC7C,CAAE,EAAGA,EAAI,EAAG,EAAGA,EAAI,EAAIA,EAAI,MAAM,CACjD,EACgB/D,EAAQtG,EAAK,qBAAoB,EACrCiG,EAAO,QAAQ,SAAUtT,EAAO,CAC5B,IAAI4T,EAAcD,EAAM,MAAM3T,CAAK,EACnCm3B,EAAY,KAAKvjB,CAAW,CAC5C,CAAa,CACb,CAAS,EACD,IAAIwjB,EAAK,IAAIjvB,EAAO,UACpBivB,EAAG,OAAO,CAACn4B,GAAS,MAAM,SAAS,KAAK,SAAQ,CAAE,CAAC,EACnD,IAAIsU,EAAMC,EAAMC,EAAMC,EACtByjB,EAAY,QAAQ,SAAUn3B,EAAO,CACjC,IAAI4T,EAAcwjB,EAAG,MAAMp3B,CAAK,EAC5BuT,IAAS,SACTA,EAAOE,EAAOG,EAAY,EAC1BJ,EAAOE,EAAOE,EAAY,GAE9BL,EAAO,KAAK,IAAIA,EAAMK,EAAY,CAAC,EACnCJ,EAAO,KAAK,IAAIA,EAAMI,EAAY,CAAC,EACnCH,EAAO,KAAK,IAAIA,EAAMG,EAAY,CAAC,EACnCF,EAAO,KAAK,IAAIA,EAAME,EAAY,CAAC,CAC/C,CAAS,EACDwjB,EAAG,OAAM,EACT,IAAIlxB,EAAIkxB,EAAG,MAAM,CAAE,EAAG7jB,EAAM,EAAGC,EAAM,EACrC,MAAO,CACH,EAAGtN,EAAE,EACL,EAAGA,EAAE,EACL,MAAOuN,EAAOF,EACd,OAAQG,EAAOF,EACf,SAAUvU,GAAS,MAAM,SAAS,KAAK,SAAQ,CAAE,CAC7D,CACA,EACIs3B,EAAY,UAAU,KAAO,UAAY,CACrC,OAAO,KAAK,aAAY,EAAG,CACnC,EACIA,EAAY,UAAU,KAAO,UAAY,CACrC,OAAO,KAAK,aAAY,EAAG,CACnC,EACIA,EAAY,UAAU,SAAW,UAAY,CACzC,OAAO,KAAK,aAAY,EAAG,KACnC,EACIA,EAAY,UAAU,UAAY,UAAY,CAC1C,OAAO,KAAK,aAAY,EAAG,MACnC,EACIA,EAAY,UAAU,gBAAkB,UAAY,CAChD,KAAK,YAAW,EAChBd,GAAc,SAAQ,SAAUvkB,EAAM,CAClC,KAAK,cAAcA,CAAI,CACnC,GAAU,KAAK,IAAI,CAAC,EACZ,KAAK,cAAc,SAAS,CACpC,EACIqlB,EAAY,UAAU,cAAgB,SAAUrlB,EAAM,CAClD,IAAIb,EAAQ,KACRgnB,EAAS,IAAItJ,GAAO,KAAK,CACzB,OAAQ,mBACR,KAAM,QACN,YAAa,EACb,KAAM7c,EAAO,WACb,aAAc,EACd,UAAW,GACX,eAAgBokB,GAAe,GAAK,MAChD,CAAS,EACGgC,EAAO,KACXD,EAAO,GAAG,uBAAwB,SAAUt6B,EAAG,CAC3Cu6B,EAAK,iBAAiBv6B,CAAC,CACnC,CAAS,EACDs6B,EAAO,GAAG,YAAa,SAAUt6B,EAAG,CAChCs6B,EAAO,SAAQ,EACft6B,EAAE,aAAe,EAC7B,CAAS,EACDs6B,EAAO,GAAG,UAAW,SAAUt6B,EAAG,CAC9BA,EAAE,aAAe,EAC7B,CAAS,EACDs6B,EAAO,GAAG,aAAc,UAAY,CAChC,IAAIh3B,EAAMpB,GAAS,MAAM,SAASoR,EAAM,UAAU,EAC9CknB,EAAShC,GAAUrkB,EAAM7Q,CAAG,EAChCg3B,EAAO,SAAQ,EAAG,QAAQ,MAAM,OAASE,EACzClnB,EAAM,cAAgB,EAClC,CAAS,EACDgnB,EAAO,GAAG,WAAY,UAAY,CAC9BA,EAAO,SAAQ,EAAG,QAAQ,MAAM,OAAS,GACzChnB,EAAM,cAAgB,EAClC,CAAS,EACD,KAAK,IAAIgnB,CAAM,CACvB,EACId,EAAY,UAAU,YAAc,UAAY,CAC5C,IAAIlmB,EAAQ,KACRmnB,EAAO,IAAItU,GAAQ,MAAM,CACzB,KAAM,OACN,MAAO,EACP,OAAQ,EACR,UAAW,GACX,UAAW,SAAU1E,EAAK,CACtB,IAAI4Y,EAAK,KAAK,UAAS,EACnBzG,EAAUyG,EAAG,QAAO,EACxB5Y,EAAI,UAAS,EACbA,EAAI,KAAK,CAACmS,EAAS,CAACA,EAAS,KAAK,MAAK,EAAKA,EAAU,EAAG,KAAK,OAAM,EAAKA,EAAU,CAAC,EACpFnS,EAAI,OAAO,KAAK,MAAK,EAAK,EAAG,CAACmS,CAAO,EACjCyG,EAAG,iBACH5Y,EAAI,OAAO,KAAK,MAAK,EAAK,EAAG,CAAC4Y,EAAG,mBAAkB,EAAKjvB,EAAO,KAAK,MAAM,KAAK,OAAM,CAAE,EAAIwoB,CAAO,EAEtGnS,EAAI,gBAAgB,IAAI,CACxC,EACY,QAAS,SAAUA,EAAK9S,EAAO,CAC3B,GAAK2E,EAAM,0BAGX,KAAIsgB,EAAUtgB,EAAM,QAAO,EAC3BmO,EAAI,UAAS,EACbA,EAAI,KAAK,CAACmS,EAAS,CAACA,EAASjlB,EAAM,MAAK,EAAKilB,EAAU,EAAGjlB,EAAM,OAAM,EAAKilB,EAAU,CAAC,EACtFnS,EAAI,gBAAgB9S,CAAK,EACzC,CACA,CAAS,EACD,KAAK,IAAI8rB,CAAI,EACb,KAAK,WAAWA,CAAI,CAC5B,EACIjB,EAAY,UAAU,iBAAmB,SAAUx5B,EAAG,CAClD,KAAK,kBAAoBA,EAAE,OAAO,KAAI,EAAG,MAAM,GAAG,EAAE,CAAC,EACrD,IAAIuZ,EAAQ,KAAK,aAAY,EACzBzJ,EAAQyJ,EAAM,MACdxJ,EAASwJ,EAAM,OACfmhB,EAAa,KAAK,KAAK,KAAK,IAAI5qB,EAAO,CAAC,EAAI,KAAK,IAAIC,EAAQ,CAAC,CAAC,EACnE,KAAK,IAAM,KAAK,IAAIA,EAAS2qB,CAAU,EACvC,KAAK,IAAM,KAAK,IAAI5qB,EAAQ4qB,CAAU,EACtC,OAAO,iBAAiB,YAAa,KAAK,gBAAgB,EAC1D,OAAO,iBAAiB,YAAa,KAAK,gBAAgB,EAC1D,OAAO,iBAAiB,UAAW,KAAK,eAAgB,EAAI,EAC5D,OAAO,iBAAiB,WAAY,KAAK,eAAgB,EAAI,EAC7D,KAAK,cAAgB,GACrB,IAAI/e,EAAK3b,EAAE,OAAO,oBAAmB,EACjC2T,EAAM3T,EAAE,OAAO,SAAQ,EAAG,mBAAkB,EAChD,KAAK,kBAAoB,CACrB,EAAG2T,EAAI,EAAIgI,EAAG,EACd,EAAGhI,EAAI,EAAIgI,EAAG,CAC1B,EACQ,KAAK,MAAM,iBAAkB,CAAE,IAAK3b,EAAG,OAAQ,KAAK,QAAO,EAAI,EAC/D,KAAK,QAAO,EAAG,MAAM,iBAAkB,CAAE,IAAKA,EAAG,OAAQ,KAAK,QAAO,CAAE,CAAE,CACjF,EACIw5B,EAAY,UAAU,iBAAmB,SAAUx5B,EAAG,CAClD,IAAIkD,EAAGC,EAAGw3B,EACNC,EAAa,KAAK,QAAQ,IAAM,KAAK,iBAAiB,EACtDlnB,EAAQknB,EAAW,SAAQ,EAC/BlnB,EAAM,qBAAqB1T,CAAC,EAC5B,IAAI66B,EAAKnnB,EAAM,mBAAkB,EAC7BkI,EAAa,CACb,EAAGif,EAAG,EAAI,KAAK,kBAAkB,EACjC,EAAGA,EAAG,EAAI,KAAK,kBAAkB,CAC7C,EACYC,EAASF,EAAW,oBAAmB,EAC3CA,EAAW,oBAAoBhf,CAAU,EACzC,IAAImf,EAASH,EAAW,oBAAmB,EAC3C,GAAI,EAAAE,EAAO,IAAMC,EAAO,GAAKD,EAAO,IAAMC,EAAO,GAGjD,IAAI,KAAK,oBAAsB,UAAW,CACtC,IAAIxhB,EAAQ,KAAK,aAAY,EAC7BrW,EAAI03B,EAAW,EAAC,EAAKrhB,EAAM,MAAQ,EACnCpW,EAAI,CAACy3B,EAAW,EAAC,EAAKrhB,EAAM,OAAS,EACrC,IAAI3U,EAAQ,KAAK,MAAM,CAACzB,EAAGD,CAAC,EAAI,KAAK,GAAK,EACtCqW,EAAM,OAAS,IACf3U,GAAS,KAAK,IAElB,IAAIo2B,EAAc94B,GAAS,MAAM,SAAS,KAAK,UAAU,EACrD+4B,EAAcD,EAAcp2B,EAC5Bw0B,EAAMl3B,GAAS,MAAM,SAAS,KAAK,uBAAuB,EAC1Dg5B,EAAajC,GAAQ,KAAK,cAAa,EAAIgC,EAAa7B,CAAG,EAC3DvQ,EAAOqS,EAAa3hB,EAAM,SAC1B5K,EAAQmqB,GAAmBvf,EAAOsP,CAAI,EAC1C,KAAK,cAAcla,EAAO3O,CAAC,EAC3B,MACZ,CACQ,IAAIm7B,EAAiB,KAAK,UAAS,GAAMn7B,EAAE,SACvCo7B,EAAkB,KAAK,gBAAe,GAAMp7B,EAAE,OAClD,GAAI,KAAK,oBAAsB,YAC3B,GAAIm7B,EAAgB,CAChB,IAAIE,EAAeD,EACb,CACE,EAAG,KAAK,MAAK,EAAK,EAClB,EAAG,KAAK,OAAM,EAAK,CAC3C,EACsB,CACE,EAAG,KAAK,QAAQ,eAAe,EAAE,EAAC,EAClC,EAAG,KAAK,QAAQ,eAAe,EAAE,EAAC,CAC1D,EACgBT,EAAgB,KAAK,KAAK,KAAK,IAAIU,EAAa,EAAIT,EAAW,EAAC,EAAI,CAAC,EACjE,KAAK,IAAIS,EAAa,EAAIT,EAAW,EAAC,EAAI,CAAC,CAAC,EAChD,IAAIU,EAAW,KAAK,QAAQ,WAAW,EAAE,EAAC,EAAKD,EAAa,EAAI,GAAK,EACjEE,EAAW,KAAK,QAAQ,WAAW,EAAE,EAAC,EAAKF,EAAa,EAAI,GAAK,EACrEn4B,EAAIy3B,EAAgB,KAAK,IAAMW,EAC/Bn4B,EAAIw3B,EAAgB,KAAK,IAAMY,EAC/B,KAAK,QAAQ,WAAW,EAAE,EAAEF,EAAa,EAAIn4B,CAAC,EAC9C,KAAK,QAAQ,WAAW,EAAE,EAAEm4B,EAAa,EAAIl4B,CAAC,CAC9D,UAEiB,KAAK,oBAAsB,aAChC,KAAK,QAAQ,WAAW,EAAE,EAAEy3B,EAAW,GAAG,UAErC,KAAK,oBAAsB,YAAa,CAC7C,GAAIO,EAAgB,CAChB,IAAIE,EAAeD,EACb,CACE,EAAG,KAAK,MAAK,EAAK,EAClB,EAAG,KAAK,OAAM,EAAK,CAC3C,EACsB,CACE,EAAG,KAAK,QAAQ,cAAc,EAAE,EAAC,EACjC,EAAG,KAAK,QAAQ,cAAc,EAAE,EAAC,CACzD,EACgBT,EAAgB,KAAK,KAAK,KAAK,IAAIC,EAAW,IAAMS,EAAa,EAAG,CAAC,EACjE,KAAK,IAAIA,EAAa,EAAIT,EAAW,EAAC,EAAI,CAAC,CAAC,EAChD,IAAIU,EAAW,KAAK,QAAQ,YAAY,EAAE,EAAC,EAAKD,EAAa,EAAI,GAAK,EAClEE,EAAW,KAAK,QAAQ,YAAY,EAAE,EAAC,EAAKF,EAAa,EAAI,GAAK,EACtEn4B,EAAIy3B,EAAgB,KAAK,IAAMW,EAC/Bn4B,EAAIw3B,EAAgB,KAAK,IAAMY,EAC/B,KAAK,QAAQ,YAAY,EAAE,EAAEF,EAAa,EAAIn4B,CAAC,EAC/C,KAAK,QAAQ,YAAY,EAAE,EAAEm4B,EAAa,EAAIl4B,CAAC,CAC/D,CACY,IAAIwQ,EAAMinB,EAAW,SAAQ,EAC7B,KAAK,QAAQ,WAAW,EAAE,EAAEjnB,EAAI,CAAC,EACjC,KAAK,QAAQ,eAAe,EAAE,EAAEA,EAAI,CAAC,CACjD,SACiB,KAAK,oBAAsB,cAChC,KAAK,QAAQ,WAAW,EAAE,EAAEinB,EAAW,GAAG,UAErC,KAAK,oBAAsB,eAChC,KAAK,QAAQ,eAAe,EAAE,EAAEA,EAAW,GAAG,UAEzC,KAAK,oBAAsB,cAAe,CAC/C,GAAIO,EAAgB,CAChB,IAAIE,EAAeD,EACb,CACE,EAAG,KAAK,MAAK,EAAK,EAClB,EAAG,KAAK,OAAM,EAAK,CAC3C,EACsB,CACE,EAAG,KAAK,QAAQ,YAAY,EAAE,EAAC,EAC/B,EAAG,KAAK,QAAQ,YAAY,EAAE,EAAC,CACvD,EACgBT,EAAgB,KAAK,KAAK,KAAK,IAAIU,EAAa,EAAIT,EAAW,EAAC,EAAI,CAAC,EACjE,KAAK,IAAIA,EAAW,EAAC,EAAKS,EAAa,EAAG,CAAC,CAAC,EAChD,IAAIC,EAAWD,EAAa,EAAIT,EAAW,EAAC,EAAK,GAAK,EAClDW,EAAWX,EAAW,EAAC,EAAKS,EAAa,EAAI,GAAK,EACtDn4B,EAAIy3B,EAAgB,KAAK,IAAMW,EAC/Bn4B,EAAIw3B,EAAgB,KAAK,IAAMY,EAC/BX,EAAW,EAAES,EAAa,EAAIn4B,CAAC,EAC/B03B,EAAW,EAAES,EAAa,EAAIl4B,CAAC,CAC/C,CACYwQ,EAAMinB,EAAW,SAAQ,EACzB,KAAK,QAAQ,WAAW,EAAE,EAAEjnB,EAAI,CAAC,EACjC,KAAK,QAAQ,eAAe,EAAE,EAAEA,EAAI,CAAC,CACjD,SACiB,KAAK,oBAAsB,gBAChC,KAAK,QAAQ,eAAe,EAAE,EAAEinB,EAAW,GAAG,UAEzC,KAAK,oBAAsB,gBAChC,GAAIO,EAAgB,CAChB,IAAIE,EAAeD,EACb,CACE,EAAG,KAAK,MAAK,EAAK,EAClB,EAAG,KAAK,OAAM,EAAK,CAC3C,EACsB,CACE,EAAG,KAAK,QAAQ,WAAW,EAAE,EAAC,EAC9B,EAAG,KAAK,QAAQ,WAAW,EAAE,EAAC,CACtD,EACgBT,EAAgB,KAAK,KAAK,KAAK,IAAIC,EAAW,IAAMS,EAAa,EAAG,CAAC,EACjE,KAAK,IAAIT,EAAW,EAAC,EAAKS,EAAa,EAAG,CAAC,CAAC,EAChD,IAAIC,EAAW,KAAK,QAAQ,eAAe,EAAE,EAAC,EAAKD,EAAa,EAAI,GAAK,EACrEE,EAAW,KAAK,QAAQ,eAAe,EAAE,EAAC,EAAKF,EAAa,EAAI,GAAK,EACzEn4B,EAAIy3B,EAAgB,KAAK,IAAMW,EAC/Bn4B,EAAIw3B,EAAgB,KAAK,IAAMY,EAC/B,KAAK,QAAQ,eAAe,EAAE,EAAEF,EAAa,EAAIn4B,CAAC,EAClD,KAAK,QAAQ,eAAe,EAAE,EAAEm4B,EAAa,EAAIl4B,CAAC,CAClE,OAGY,QAAQ,MAAM,IAAI,MAAM,iDACpB,KAAK,iBAAiB,CAAC,EAE/B,IAAIi4B,EAAkB,KAAK,gBAAe,GAAMp7B,EAAE,OAClD,GAAIo7B,EAAiB,CACjB,IAAIlK,EAAU,KAAK,QAAQ,WAAW,EAClCG,EAAc,KAAK,QAAQ,eAAe,EAC1CmK,EAAatK,EAAQ,EAAC,EACtBuK,EAAavK,EAAQ,EAAC,EACtBwK,EAAgB,KAAK,SAAQ,EAAKrK,EAAY,EAAC,EAC/CsK,EAAgB,KAAK,UAAS,EAAKtK,EAAY,EAAC,EACpDA,EAAY,KAAK,CACb,EAAG,CAACmK,EACJ,EAAG,CAACC,CACpB,CAAa,EACDvK,EAAQ,KAAK,CACT,EAAGwK,EACH,EAAGC,CACnB,CAAa,CACb,CACQ,IAAIxB,EAAS,KAAK,QAAQ,WAAW,EAAE,oBAAmB,EAC1Dj3B,EAAIi3B,EAAO,EACXh3B,EAAIg3B,EAAO,EACX,IAAIrqB,EAAQ,KAAK,QAAQ,eAAe,EAAE,EAAC,EAAK,KAAK,QAAQ,WAAW,EAAE,EAAC,EACvEC,EAAS,KAAK,QAAQ,eAAe,EAAE,EAAC,EAAK,KAAK,QAAQ,WAAW,EAAE,EAAC,EAC5E,KAAK,cAAc,CACf,EAAG7M,EACH,EAAGC,EACH,MAAO2M,EACP,OAAQC,EACR,SAAU7N,GAAS,MAAM,SAAS,KAAK,SAAQ,CAAE,CAC7D,EAAWlC,CAAC,EACZ,EACIw5B,EAAY,UAAU,eAAiB,SAAUx5B,EAAG,CAChD,KAAK,cAAcA,CAAC,CAC5B,EACIw5B,EAAY,UAAU,qBAAuB,UAAY,CACrD,OAAO,KAAK,aAAY,CAChC,EACIA,EAAY,UAAU,cAAgB,SAAUx5B,EAAG,CAC/C,GAAI,KAAK,cAAe,CACpB,KAAK,cAAgB,GACrB,OAAO,oBAAoB,YAAa,KAAK,gBAAgB,EAC7D,OAAO,oBAAoB,YAAa,KAAK,gBAAgB,EAC7D,OAAO,oBAAoB,UAAW,KAAK,eAAgB,EAAI,EAC/D,OAAO,oBAAoB,WAAY,KAAK,eAAgB,EAAI,EAChE,IAAIsQ,EAAO,KAAK,QAAO,EACvB,KAAK,MAAM,eAAgB,CAAE,IAAKtQ,EAAG,OAAQsQ,EAAM,EAC/CA,GACAA,EAAK,KAAK,eAAgB,CAAE,IAAKtQ,EAAG,OAAQsQ,EAAM,EAEtD,KAAK,kBAAoB,IACrC,CACA,EACIkpB,EAAY,UAAU,cAAgB,SAAUoC,EAAU1wB,EAAK,CAC3D,IAAIoI,EAAQ,KACRuoB,EAAW,KAAK,aAAY,EAC5BC,EAAU,EACd,GAAI1wB,EAAO,KAAK,SAASwwB,EAAS,MAAO,CAAC,KAAK,QAAO,EAAK,EAAIE,EAASA,CAAO,EAAG,CAC9E,KAAK,OAAM,EACX,MACZ,CACQ,GAAI1wB,EAAO,KAAK,SAASwwB,EAAS,OAAQ,CAAC,KAAK,QAAO,EAAK,EAAIE,EAASA,CAAO,EAAG,CAC/E,KAAK,OAAM,EACX,MACZ,CAEQ,IAAIpzB,EAAI,IAAI0C,EAAO,UAEnB,GADA1C,EAAE,OAAOxG,GAAS,MAAM,SAAS,KAAK,SAAQ,CAAE,CAAC,EAC7C,KAAK,mBACL05B,EAAS,MAAQ,GACjB,KAAK,kBAAkB,QAAQ,MAAM,GAAK,EAAG,CAC7C,IAAIhqB,EAASlJ,EAAE,MAAM,CACjB,EAAG,CAAC,KAAK,QAAO,EAAK,EACrB,EAAG,CACnB,CAAa,EACDkzB,EAAS,GAAKhqB,EAAO,EACrBgqB,EAAS,GAAKhqB,EAAO,EACrBgqB,EAAS,OAAS,KAAK,QAAO,EAAK,EACnC,KAAK,kBAAoB,KAAK,kBAAkB,QAAQ,OAAQ,OAAO,EACvE,KAAK,kBAAkB,GAAKhqB,EAAO,EACnC,KAAK,kBAAkB,GAAKA,EAAO,CAK/C,SACiB,KAAK,mBACVgqB,EAAS,MAAQ,GACjB,KAAK,kBAAkB,QAAQ,OAAO,GAAK,EAAG,CAC9C,IAAIhqB,EAASlJ,EAAE,MAAM,CACjB,EAAG,KAAK,QAAO,EAAK,EACpB,EAAG,CACnB,CAAa,EACD,KAAK,kBAAoB,KAAK,kBAAkB,QAAQ,QAAS,MAAM,EACvE,KAAK,kBAAkB,GAAKkJ,EAAO,EACnC,KAAK,kBAAkB,GAAKA,EAAO,EACnCgqB,EAAS,OAAS,KAAK,QAAO,EAAK,CAK/C,CACQ,GAAI,KAAK,mBACLA,EAAS,OAAS,GAClB,KAAK,kBAAkB,QAAQ,KAAK,GAAK,EAAG,CAC5C,IAAIhqB,EAASlJ,EAAE,MAAM,CACjB,EAAG,EACH,EAAG,CAAC,KAAK,QAAO,EAAK,CACrC,CAAa,EACDkzB,EAAS,GAAKhqB,EAAO,EACrBgqB,EAAS,GAAKhqB,EAAO,EACrB,KAAK,kBAAoB,KAAK,kBAAkB,QAAQ,MAAO,QAAQ,EACvE,KAAK,kBAAkB,GAAKA,EAAO,EACnC,KAAK,kBAAkB,GAAKA,EAAO,EACnCgqB,EAAS,QAAU,KAAK,QAAO,EAAK,CAKhD,SACiB,KAAK,mBACVA,EAAS,OAAS,GAClB,KAAK,kBAAkB,QAAQ,QAAQ,GAAK,EAAG,CAC/C,IAAIhqB,EAASlJ,EAAE,MAAM,CACjB,EAAG,EACH,EAAG,KAAK,QAAO,EAAK,CACpC,CAAa,EACD,KAAK,kBAAoB,KAAK,kBAAkB,QAAQ,SAAU,KAAK,EACvE,KAAK,kBAAkB,GAAKkJ,EAAO,EACnC,KAAK,kBAAkB,GAAKA,EAAO,EACnCgqB,EAAS,QAAU,KAAK,QAAO,EAAK,CAKhD,CACQ,GAAI,KAAK,eAAgB,CACrB,IAAI9f,EAAU,KAAK,aAAY,EAAG+f,EAAUD,CAAQ,EAChD9f,EACA8f,EAAW9f,EAGX1Q,EAAO,KAAK,KAAK,wEAAwE,CAEzG,CACQ,IAAI2wB,EAAW,IACXC,EAAQ,IAAI5wB,EAAO,UACvB4wB,EAAM,UAAUH,EAAS,EAAGA,EAAS,CAAC,EACtCG,EAAM,OAAOH,EAAS,QAAQ,EAC9BG,EAAM,MAAMH,EAAS,MAAQE,EAAUF,EAAS,OAASE,CAAQ,EACjE,IAAIE,EAAQ,IAAI7wB,EAAO,UACvB6wB,EAAM,UAAUL,EAAS,EAAGA,EAAS,CAAC,EACtCK,EAAM,OAAOL,EAAS,QAAQ,EAC9BK,EAAM,MAAML,EAAS,MAAQG,EAAUH,EAAS,OAASG,CAAQ,EACjE,IAAIn3B,EAAQq3B,EAAM,SAASD,EAAM,OAAM,CAAE,EACzC,KAAK,OAAO,QAAQ,SAAU1rB,EAAM,CAChC,IAAI4rB,EAAkB5rB,EAAK,UAAS,EAAG,qBAAoB,EACvD6rB,EAAiB7rB,EAAK,aAAY,EAAG,KAAI,EAC7C6rB,EAAe,UAAU7rB,EAAK,QAAO,EAAIA,EAAK,SAAS,EACvD,IAAI8rB,EAAoB,IAAIhxB,EAAO,UACnCgxB,EACK,SAASF,EAAgB,KAAI,EAAG,OAAM,CAAE,EACxC,SAASt3B,CAAK,EACd,SAASs3B,CAAe,EACxB,SAASC,CAAc,EAC5B,IAAI5iB,EAAQ6iB,EAAkB,UAAS,EACvC9rB,EAAK,uBAAuB,UAAY,CACpCA,EAAK,SAASiJ,CAAK,CACnC,CAAa,EACDjG,EAAM,MAAM,YAAa,CAAE,IAAKpI,EAAK,OAAQoF,EAAM,EACnDA,EAAK,MAAM,YAAa,CAAE,IAAKpF,EAAK,OAAQoF,EAAM,CAC9D,CAAS,EACD,KAAK,SAASlF,EAAO,KAAK,aAAawwB,EAAS,QAAQ,CAAC,EACzD,KAAK,qBAAoB,EACzB,KAAK,OAAM,EACX,KAAK,SAAQ,EAAG,UAAS,CACjC,EACIpC,EAAY,UAAU,YAAc,UAAY,CAC5C,KAAK,qBAAoB,EACzB,KAAK,OAAM,CACnB,EACIA,EAAY,UAAU,kBAAoB,SAAUxzB,EAAUuT,EAAO,CACjE,IAAI+gB,EAAS,KAAK,QAAQt0B,CAAQ,EAClCs0B,EAAO,uBAAuB,UAAY,CACtCA,EAAO,SAAS/gB,CAAK,CACjC,CAAS,CACT,EACIigB,EAAY,UAAU,OAAS,UAAY,CACvC,IAAIlmB,EAAQ,KACRiG,EAAQ,KAAK,aAAY,EAC7B,KAAK,SAASnO,EAAO,KAAK,aAAamO,EAAM,QAAQ,CAAC,EACtD,IAAIzJ,EAAQyJ,EAAM,MACdxJ,EAASwJ,EAAM,OACf8iB,EAAiB,KAAK,eAAc,EACpCC,EAAgB,KAAK,cAAa,EAClC1I,EAAU,KAAK,QAAO,EACtB2I,EAAa,KAAK,WAAU,EAChC,KAAK,KAAK,UAAU,EAAE,KAAK,SAAUjsB,EAAM,CACvCA,EAAK,uBAAuB,UAAY,CACpCA,EAAK,SAAS,CACV,MAAOisB,EACP,OAAQA,EACR,QAASA,EAAa,EACtB,QAASA,EAAa,EACtB,OAAQjpB,EAAM,aAAY,EAC1B,YAAaA,EAAM,kBAAiB,EACpC,KAAMA,EAAM,WAAU,EACtB,aAAcA,EAAM,mBAAkB,CAC1D,CAAiB,CACjB,CAAa,CACb,CAAS,EACD,KAAK,kBAAkB,YAAa,CAChC,EAAG,EACH,EAAG,EACH,QAASipB,EAAa,EAAI3I,EAC1B,QAAS2I,EAAa,EAAI3I,EAC1B,QAAS0I,GAAiBD,EAAe,QAAQ,UAAU,GAAK,CAC5E,CAAS,EACD,KAAK,kBAAkB,cAAe,CAClC,EAAGvsB,EAAQ,EACX,EAAG,EACH,QAASysB,EAAa,EAAI3I,EAC1B,QAAS0I,GAAiBD,EAAe,QAAQ,YAAY,GAAK,CAC9E,CAAS,EACD,KAAK,kBAAkB,aAAc,CACjC,EAAGvsB,EACH,EAAG,EACH,QAASysB,EAAa,EAAI3I,EAC1B,QAAS2I,EAAa,EAAI3I,EAC1B,QAAS0I,GAAiBD,EAAe,QAAQ,WAAW,GAAK,CAC7E,CAAS,EACD,KAAK,kBAAkB,eAAgB,CACnC,EAAG,EACH,EAAGtsB,EAAS,EACZ,QAASwsB,EAAa,EAAI3I,EAC1B,QAAS0I,GAAiBD,EAAe,QAAQ,aAAa,GAAK,CAC/E,CAAS,EACD,KAAK,kBAAkB,gBAAiB,CACpC,EAAGvsB,EACH,EAAGC,EAAS,EACZ,QAASwsB,EAAa,EAAI3I,EAC1B,QAAS0I,GAAiBD,EAAe,QAAQ,cAAc,GAAK,CAChF,CAAS,EACD,KAAK,kBAAkB,eAAgB,CACnC,EAAG,EACH,EAAGtsB,EACH,QAASwsB,EAAa,EAAI3I,EAC1B,QAAS2I,EAAa,EAAI3I,EAC1B,QAAS0I,GAAiBD,EAAe,QAAQ,aAAa,GAAK,CAC/E,CAAS,EACD,KAAK,kBAAkB,iBAAkB,CACrC,EAAGvsB,EAAQ,EACX,EAAGC,EACH,QAASwsB,EAAa,EAAI3I,EAC1B,QAAS0I,GAAiBD,EAAe,QAAQ,eAAe,GAAK,CACjF,CAAS,EACD,KAAK,kBAAkB,gBAAiB,CACpC,EAAGvsB,EACH,EAAGC,EACH,QAASwsB,EAAa,EAAI3I,EAC1B,QAAS2I,EAAa,EAAI3I,EAC1B,QAAS0I,GAAiBD,EAAe,QAAQ,cAAc,GAAK,CAChF,CAAS,EACD,KAAK,kBAAkB,WAAY,CAC/B,EAAGvsB,EAAQ,EACX,EAAG,CAAC,KAAK,mBAAkB,EAAK1E,EAAO,KAAK,MAAM2E,CAAM,EAAI6jB,EAC5D,QAAS,KAAK,cAAa,CACvC,CAAS,EACD,KAAK,kBAAkB,QAAS,CAC5B,MAAO9jB,EACP,OAAQC,EACR,QAAS,KAAK,cAAa,EAC3B,OAAQ,KAAK,aAAY,EACzB,YAAa,KAAK,kBAAiB,EACnC,KAAM,KAAK,WAAU,EACrB,EAAG,EACH,EAAG,CACf,CAAS,CACT,EACIypB,EAAY,UAAU,eAAiB,UAAY,CAC/C,OAAO,KAAK,aACpB,EACIA,EAAY,UAAU,cAAgB,UAAY,CAC9C,GAAI,KAAK,cAAe,CACpB,KAAK,cAAa,EAClB,IAAIoB,EAAa,KAAK,QAAQ,IAAM,KAAK,iBAAiB,EACtDA,GACAA,EAAW,SAAQ,CAEnC,CACA,EACIpB,EAAY,UAAU,QAAU,UAAY,CACxC,OAAI,KAAK,YAAc,KAAK,gBACxB,KAAK,SAAQ,EAAG,QAAQ,MAAM,OAAS,IAE3CtS,GAAQ,MAAM,UAAU,QAAQ,KAAK,IAAI,EACzC,KAAK,OAAM,EACX,KAAK,cAAa,EACX,IACf,EACIsS,EAAY,UAAU,SAAW,UAAY,CACzC,OAAO/c,GAAO,KAAK,UAAU,SAAS,KAAK,IAAI,CACvD,EACW+c,CACX,EAAEtS,GAAQ,KAAK,EACfiR,GAAA,YAAsBqB,GACtB,SAASgD,GAAgBz2B,EAAK,CAC1B,OAAMA,aAAe,OACjBqF,EAAO,KAAK,KAAK,yCAAyC,EAE1DrF,aAAe,OACfA,EAAI,QAAQ,SAAUoO,EAAM,CACpBukB,GAAc,QAAQvkB,CAAI,IAAM,IAChC/I,EAAO,KAAK,KAAK,wBACb+I,EACA,0BACAukB,GAAc,KAAK,IAAI,CAAC,CAE5C,CAAS,EAEE3yB,GAAO,CAAA,CAClB,CACAyzB,GAAY,UAAU,UAAY,cAClC5a,GAAS,cAAc4a,EAAW,EAClClnB,GAAU,QAAQ,gBAAgBknB,GAAa,iBAAkBd,GAAe8D,EAAe,EAC/FlqB,GAAU,QAAQ,gBAAgBknB,GAAa,gBAAiB,EAAI,EACpElnB,GAAU,QAAQ,gBAAgBknB,GAAa,aAAc,GAAIntB,GAAa,oBAAoB,EAClGiG,GAAU,QAAQ,gBAAgBknB,GAAa,gBAAiB,EAAI,EACpElnB,GAAU,QAAQ,gBAAgBknB,GAAa,gBAAiB,CAAA,CAAE,EAClElnB,GAAU,QAAQ,gBAAgBknB,GAAa,qBAAsB,GAAIntB,GAAa,oBAAoB,EAC1GiG,GAAU,QAAQ,gBAAgBknB,GAAa,wBAAyB,EAAGntB,GAAa,oBAAoB,EAC5GiG,GAAU,QAAQ,gBAAgBknB,GAAa,gBAAiB,EAAI,EACpElnB,GAAU,QAAQ,gBAAgBknB,GAAa,eAAgB,kBAAkB,EACjFlnB,GAAU,QAAQ,gBAAgBknB,GAAa,oBAAqB,EAAGntB,GAAa,oBAAoB,EACxGiG,GAAU,QAAQ,gBAAgBknB,GAAa,aAAc,OAAO,EACpElnB,GAAU,QAAQ,gBAAgBknB,GAAa,qBAAsB,EAAGntB,GAAa,oBAAoB,EACzGiG,GAAU,QAAQ,gBAAgBknB,GAAa,eAAgB,kBAAkB,EACjFlnB,GAAU,QAAQ,gBAAgBknB,GAAa,oBAAqB,EAAGntB,GAAa,oBAAoB,EACxGiG,GAAU,QAAQ,gBAAgBknB,GAAa,YAAY,EAC3DlnB,GAAU,QAAQ,gBAAgBknB,GAAa,YAAa,EAAI,EAChElnB,GAAU,QAAQ,gBAAgBknB,GAAa,kBAAmB,EAAK,EACvElnB,GAAU,QAAQ,gBAAgBknB,GAAa,eAAgB,EAAK,EACpElnB,GAAU,QAAQ,gBAAgBknB,GAAa,UAAW,EAAGntB,GAAa,oBAAoB,EAC9FiG,GAAU,QAAQ,gBAAgBknB,GAAa,MAAM,EACrDlnB,GAAU,QAAQ,gBAAgBknB,GAAa,OAAO,EACtDlnB,GAAU,QAAQ,gBAAgBknB,GAAa,cAAc,EAC7DlnB,GAAU,QAAQ,gBAAgBknB,GAAa,0BAA2B,EAAK,EAC/ElnB,GAAU,QAAQ,WAAWknB,GAAa,CACtC,YAAa,gBACb,oBAAqB,qBACrB,gBAAiB,gBACrB,CAAC,EACDpuB,EAAO,WAAW,WAAWouB,EAAW,YC17BpC9rB,GAAaC,GAAQA,EAAK,WAAe,UAAY,CACrD,IAAIC,EAAgB,SAAU5J,EAAGU,EAAG,CAChC,OAAAkJ,EAAgB,OAAO,gBAClB,CAAE,UAAW,CAAA,aAAgB,OAAS,SAAU5J,EAAGU,EAAG,CAAEV,EAAE,UAAYU,CAAE,GACzE,SAAUV,EAAGU,EAAG,CAAE,QAASyE,KAAKzE,EAAOA,EAAE,eAAeyE,CAAC,IAAGnF,EAAEmF,CAAC,EAAIzE,EAAEyE,CAAC,IACnEyE,EAAc5J,EAAGU,CAAC,CACjC,EACI,OAAO,SAAUV,EAAGU,EAAG,CACnBkJ,EAAc5J,EAAGU,CAAC,EAClB,SAASmJ,GAAK,CAAE,KAAK,YAAc7J,CAAE,CACrCA,EAAE,UAAYU,IAAM,KAAO,OAAO,OAAOA,CAAC,GAAKmJ,EAAG,UAAYnJ,EAAE,UAAW,IAAImJ,EACvF,CACA,EAAC,EACD,OAAO,eAAe4uB,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIrxB,GAASjJ,EACTmQ,GAAYjH,EACZ8a,GAAU9T,GACVnQ,GAAWqQ,EACXlG,GAAemG,EACfoM,GAAWrM,EACXmqB,GAAS,SAAUjsB,EAAQ,CAC3B/C,GAAUgvB,EAAOjsB,CAAM,EACvB,SAASisB,GAAQ,CACb,OAAOjsB,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAAisB,EAAM,UAAU,WAAa,SAAU/pB,EAAS,CAC5CA,EAAQ,UAAS,EACjBA,EAAQ,IAAI,EAAG,EAAG,KAAK,OAAM,EAAI,EAAGzQ,GAAS,MAAM,SAAS,KAAK,MAAK,CAAE,EAAG,KAAK,WAAW,EAC3FyQ,EAAQ,OAAO,EAAG,CAAC,EACnBA,EAAQ,UAAS,EACjBA,EAAQ,gBAAgB,IAAI,CACpC,EACI+pB,EAAM,UAAU,SAAW,UAAY,CACnC,OAAO,KAAK,OAAM,EAAK,CAC/B,EACIA,EAAM,UAAU,UAAY,UAAY,CACpC,OAAO,KAAK,OAAM,EAAK,CAC/B,EACIA,EAAM,UAAU,SAAW,SAAU5sB,EAAO,CACxC,KAAK,OAAOA,EAAQ,CAAC,CAC7B,EACI4sB,EAAM,UAAU,UAAY,SAAU3sB,EAAQ,CAC1C,KAAK,OAAOA,EAAS,CAAC,CAC9B,EACW2sB,CACX,EAAEvW,GAAQ,KAAK,EACfsW,GAAA,MAAgBC,GAChBA,GAAM,UAAU,UAAY,QAC5BA,GAAM,UAAU,UAAY,GAC5BA,GAAM,UAAU,oBAAsB,CAAC,QAAQ,EAC/C9d,GAAS,cAAc8d,EAAK,EAC5BpqB,GAAU,QAAQ,gBAAgBoqB,GAAO,SAAU,EAAGrwB,GAAa,oBAAoB,EACvFiG,GAAU,QAAQ,gBAAgBoqB,GAAO,QAAS,EAAGrwB,GAAa,oBAAoB,EACtFiG,GAAU,QAAQ,gBAAgBoqB,GAAO,YAAa,EAAK,EAC3DpqB,GAAU,QAAQ,WAAWoqB,GAAO,CAChC,SAAU,QACV,YAAa,WACb,YAAa,UACjB,CAAC,EACDtxB,GAAO,WAAW,WAAWsxB,EAAK,YC3DlC,OAAO,eAAeC,GAAS,aAAc,CAAE,MAAO,EAAI,CAAE,EAC5D,IAAIrqB,GAAYnQ,EACZsa,GAASpR,GACTgB,GAAegG,EACnB,SAASuqB,IAAY,CACjB,KAAK,EAAI,EACT,KAAK,EAAI,EACT,KAAK,EAAI,EACT,KAAK,EAAI,EACT,KAAK,KAAO,IAChB,CACA,IAAIC,GAAY,CACZ,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACJ,EACIC,GAAY,CACZ,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACJ,EACA,SAASC,GAAoBzlB,EAAWma,EAAQ,CAC5C,IAAIuL,EAAS1lB,EAAU,KAAMxH,EAAQwH,EAAU,MAAOvH,EAASuH,EAAU,OACrEpU,EAAGC,EAAGT,EAAGyG,EAAGqnB,EAAIyM,EAAIC,EAAIC,EAAOC,EAAOC,EAAOC,EAAOC,EAAWC,EAAWC,EAAWC,EAAWC,EAAUC,EAAUC,EAAUC,EAAUhzB,EAAIizB,EAAIC,EAAIC,EAAIC,EACxJC,EAAM1M,EAASA,EAAS,EAAG2M,EAActuB,EAAQ,EAAGuuB,EAAetu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","x_google_ignoreList":[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]}